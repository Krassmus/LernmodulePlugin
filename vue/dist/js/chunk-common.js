(self["webpackChunkvue101"]=self["webpackChunkvue101"]||[]).push([[64],{5700:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});n(1703);var i=n(9381);const s={mounted(e,t,n,s){const u=a(e);function c(){const e=o(t),n=l(i.h4,e),s=r(n);u.value=s.toString()}u.setAttribute("data-undo-focus-id",o(t).join(".")),e.addEventListener("input",(a=>{const r=o(t),[l,...u]=r,c=n.el.value,g=JSON.parse(JSON.stringify(i.h4.taskDefinition));d(g,u,c),i.h4.performEdit({newTaskDefinition:g,undoBatch:r.join(".")}),console.log(e,t,n,s,a,r,c)})),i.h.watch((()=>{const e=o(t);return l(i.h4,e)}),(()=>c())),c()}};function o(e){if("string"!==typeof e.value)throw new Error(u+e.value);const t=e.value.split("."),n=t[0];if("taskDefinition"!==n)throw new Error(c+e.value);return t}function a(e){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)return e;throw new Error(p)}function r(e){if("string"!==typeof e&&"number"!==typeof e&&"boolean"!==typeof e)throw new Error(g+typeof e);return e}function l(e,t){return t.reduce(((e,n)=>{if(!Object.prototype.hasOwnProperty.call(e,n))throw new Error(h+t.join("."));return e[n]}),e)}function d(e,t,n){const[i,...s]=[t.pop(),...t];if(void 0===i)throw new Error("Path has no last element");const o=s.reduce(((e,t)=>e[t]),e);o[i]=n}const u="The value supplied to v-model-undoable must be a string. Example: <select v-model-undoable=\"'taskDefinition.task_type'\">\nYou supplied the following value: ",c='The string supplied to v-model-undoable must be a path which begins with "taskDefinition", and the path must be wrapped in two sets of quotes. \nExample usage: <select v-model-undoable="\'taskDefinition.task_type\'">\nYou supplied the following string: ',g="The value bound with v-model-undoable must be a string, number or boolean.  Other datatypes are not currently supported.  The value found is of type ",h="No field was found in the store under the given path.  Did you make a typo?  Path: ",p="v-model-undoable can only be used on <input>, <textarea> and <select> elements"},5678:function(e,t,n){"use strict";n.d(t,{RA:function(){return l},rn:function(){return d},v:function(){return r}});var i=n(5266),s=JSON.parse('{"en":{"%{ interaction } löschen":"Delete %{ interaction }","%{ interactionType } einfügen":"Insert %{ interactionType }","1. Video auswählen":"1. Select video","2. Interaktionen hinzufügen":"2. Add interactions","Abbrechen":"Cancel","Abspielen":"Play","Aktuelle Position setzen":"Set to current position","Alle Lücken müssen ausgefüllt sein, um Lösungen anzuzeigen":"All of the blanks must be filled in order to show the solutions","Alle Lücken müssen ausgefüllt sein, um Lösungen anzuzeigen.":"All of the blanks must be filled in order to show the solutions.","Alternativer Text":"Alternative text","Anfangen um":"Start at","Antworten alphabetisch sortieren":"Sort answers alphabetically","Audio":"Audio","Aufgabenbeschreibung":"Task description","Aufgabentyp auswählen:":"Select task type:","Aufgedeckte Paare: %{ amountOfPairsSolved } von %{ totalAmountOfPairs }":"Pairs revealed: %{ amountOfPairsSolved } of %{ totalAmountOfPairs }","Automatisch abspielen":"Auto-play","automatisch nach Eingabe":"automatically after entry","Bearbeiten":"Edit","Beim Speichern ist ein Fehler aufgetreten.":"An error occurred while saving.","Benutzerdefiniertes Feedback für beliebige Punktebereiche:":"User-defined feedback for arbitrary point ranges:","Bild":"Image","Bild hinzufügen":"Add image","Bild Löschen":"Delete image","Das Bild":"The image","Das eingegebene Wert muss größer als 0 sein.":"The value entered must be greater than 0.","Das Verzeichnis \\"Wysiwyg Uploads\\" ist nicht vorhanden. Es können keine Dateien hochgeladen werden.":"The folder \'Wysiwyg Uploads\' was not found. No files can be uploaded.","Das Zielbild":"The target image","Das zu ziehende Bild":"The image that should be dragged","Datei":"File","Datei wird hochgeladen":"File is being uploaded","Dateibereich dieser Veranstaltung":"This course\'s file area","Der Startpunkt muss vor dem Endpunkt sein.":"The start point must be before the end point.","Die Startposition muss der Syntax HH;MM;SS oder HH;MM;SS;SS entsprechen.":"The start position must be entered using the syntax HH;MM;SS or HH;MM;SS;SS.","Drag The Words":"Drag The Words","Eigenschaften":"Properties","Einblendung":"Overlay","Einstellungen":"Settings","Ende":"End","Entferne den Feedback-Bereich, der ab %{ percentage }% anfängt.":"Remove the feedback range starting at %{ percentage }%.","Ergebnismitteilung (mögliche Variablen :correct und :total):":"Result message (possible variables :correct and :total):","Feedback":"Feedback","Feedback wenn ausgewählt":"Feedback when selected","Feedback wenn nicht ausgewählt":"Feedback when not selected","Fill In The Blanks":"Fill In The Blanks","Find The Hotspot":"Find The Hotspot","Find The Words":"Find The Words","Fügen Sie Lücken hinzu, indem Sie ein Sternchen (*) vor und hinter dem korrekten Wort bzw. den Wörtern setzen oder markieren Sie ein Wort und klicken Sie den \\"Lücke hinzufügen\\"–Button. Außerdem können Sie einen Tooltip mit einem Doppelpunkt (:) hinzufügen.":"Add gaps by placing an asterisk (*) before and after the correct word(s), or highlight a word and click the \\"Add Gap\\" button. You can also add a tooltip with a colon (:).","Fügen Sie Lücken hinzu, indem Sie ein Sternchen (*) vor und hinter dem korrekten Wort bzw. den Wörtern setzen oder markieren Sie ein Wort und klicken Sie den \\"Lücke hinzufügen\\"–Button. Sie können alternative Antworten mit einem Schrägstrich (/) hinzufügen. Außerdem können Sie einen Tooltip mit einem Doppelpunkt (:) hinzufügen.":"Add gaps by placing an asterisk (*) before and after the correct word(s), or highlight a word and click the \\"Add Gap\\" button. You can add alternative answers with a slash (/). Also, you can add a tooltip with a colon (:).","Gespeichert":"Saved","Groß- und Kleinschreibung beachten":"Case sensitive","Grunddaten":"Basic data","Hinweis":"Hint","Hinweis und Feedback":"Hint and feedback","Hochgeladenes Video: ":"Uploaded video: ","Image Sequencing":"Image Sequencing","Interactive Video":"Interactive Video","Interaktion":"Interaction","Karte":"Card","Karte A":"Card A","Karte B":"Card B","Karte hinzufügen":"Add card","Karte löschen":"Delete card","Kein Ordner ist ausgewählt. Die Datei kann nicht hochgeladen werden.":"No folder is selected. The file can\'t be uploaded.","Keine Karte ist zum Bearbeiten ausgewählt.":"No card is selected for editing.","Korrigiert wird":"The correct answers will be shown","Lade ein Video hoch oder füge einen Link zu einem Youtube-Video ein.":"Upload a video or paste in a link to a Youtube video.","Löschen":"Delete","Lösungen können angezeigt werden":"Solutions can be viewed","Lücke hinzufügen":"Add gap","manuell per Button":"manually via button","Mark The Words":"Mark The Words","Markieren Sie ein Wort als Lösung, indem Sie ein Sternchen (*) vor und hinter dem Wort setzen oder markieren Sie ein Wort und klicken Sie den \\"Richtiges Wort markieren\\"–Button.":"Mark a word as a solution by putting an asterisk (*) in front of and behind the word, or select a word and click the \\"Mark correct word\\" button.","Mehrere Antworten können ausgewählt werden":"Multiple answers can be selected","Mehrere Versuche erlauben":"Allow multiple attempts","Memory":"Memory","Mitteilung":"Notification","Mitteilung, wenn nicht alle Lücken ausgefüllt sind:":"Notification if not all gaps are filled in:","Modifiziert":"Modified","Navigation deaktivieren":"Disable navigation","Neue Antwort":"New answer","Neuer Bereich":"New range","Neues Video hochladen":"Upload new video","Nicht deaktiviert":"Not deactivated","Ordner-Filter":"Folder filter","Paar":"Pair","Pairing":"Pairing","Pausieren":"Pause","Persönlicher Dateibereich":"Personal file area","Prozent":"Percentage","Question":"Question","Rechtschreib- oder Tippfehler ignorieren":"Ignore spelling mistakes and typos","Richtiges Wort markieren":"Mark correct word","Schließen":"Close","Speichern":"Save","Start":"Start","Stud.IP-Video":"Stud.IP Video","Text":"Text","Text im Button:":"Text in the button:","Titel":"Title","Typ":"Type","Übernehmen":"Apply","Umgedrehte Karten: ":"Cards turned over: ","Vergrößern":"Zoom in","Verkleinern":"Zoom out","Video löschen":"Delete video","Video pausieren":"Pause video","Vorhandenes Video auswählen":"Use existing video","Vorschau":"Preview","Vorspulen deaktiviert":"Forwards navigation disabled","Vorspulen und Rückspulen deaktiviert":"Forwards and backwards navigation disabled","Wird gespeichert...":"Saving...","Wort hinzufügen":"Add word","Youtube-URL":"Youtube URL","Youtube-Video":"Youtube video","Youtube-Video: ":"Youtube video: ","Zeige Antworten in zufälliger Reihenfolge":"Show answers in a random order","Zu %{ interaction } springen":"Jump to %{ interaction }","Rückgängig":{"Im Sinne von undo/redo":"Undo"},"Wiederherstellen":{"Im Sinne von undo/redo":"Redo"}}}'),o=n(4806);const a=Object.values(window.STUDIP.INSTALLED_LANGUAGES).find((e=>e.selected)),r=(0,i.h_)({availableLanguages:{en:"English",de:"Deutsch"},defaultLanguage:a?.path??"de",translations:s}),l=(0,o.memoize)(r.$gettext,((...e)=>JSON.stringify(e))),d=(0,o.memoize)(r.$pgettext,((...e)=>JSON.stringify(e)));(0,o.memoize)(r.$npgettext,((...e)=>JSON.stringify(e)))},9707:function(e,t,n){"use strict";n.d(t,{DC:function(){return Sl},ft:function(){return sl},KI:function(){return il},Ee:function(){return Cl},nJ:function(){return Dl},by:function(){return xl},T5:function(){return zl},LI:function(){return yl},aL:function(){return vl},rl:function(){return Al},PC:function(){return Tl}});n(6314),n(1703);var i=n(3396),s=n(7139),o=n(9242);const a={class:"h5pModule",ref:"wrapperElement"},r={class:"fill-in-the-blanks-text"},l=["innerHTML"],d=["onUpdate:modelValue","readonly","disabled"],u={key:0},c=["data-tooltip"],g={key:1,class:"h5pSolution"},h=["textContent"],p={class:"h5pButtonPanel"},m=["textContent"],k=["textContent"],f=["textContent"];function w(e,t,n,w,b,y){const v=(0,i.up)("FeedbackElement");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.parsedTemplate,(n=>((0,i.wg)(),(0,i.iD)(i.HY,{key:n.uuid},["staticText"===n.type?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:n.text},null,8,l)):"blank"===n.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t=>e.userInputs[n.uuid]=t,readonly:!this.editable,disabled:!this.editable,class:(0,s.C_)(e.classForInput(n)),onBlur:t[0]||(t[0]=(...t)=>e.onInputBlurOrEnter&&e.onInputBlurOrEnter(...t)),onKeyup:t[1]||(t[1]=(0,o.D2)(((...t)=>e.onInputBlurOrEnter&&e.onInputBlurOrEnter(...t)),["enter"])),onInput:t[2]||(t[2]=(...t)=>e.onInput&&e.onInput(...t))},null,42,d),[[o.nr,e.userInputs[n.uuid]]]),n.hint?((0,i.wg)(),(0,i.iD)("label",u,[(0,i._)("span",{class:"tooltip tooltip-icon","data-tooltip":n.hint},null,8,c)])):(0,i.kq)("",!0),e.showSolutions&&!e.submittedAnswerIsCorrect(n)?((0,i.wg)(),(0,i.iD)("span",g,(0,s.zw)(n.solutions[0]),1)):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)],64)))),128))]),e.showResults?((0,i.wg)(),(0,i.j4)(v,{key:0,achievedPoints:e.correctAnswers,maxPoints:e.maxPoints,feedback:e.task.feedback,resultMessage:e.resultMessage},null,8,["achievedPoints","maxPoints","feedback","resultMessage"])):(0,i.kq)("",!0),e.showFillInAllTheBlanksMessage?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"h5pMessage",textContent:(0,s.zw)(e.fillInAllTheBlanksMessage)},null,8,h)):(0,i.kq)("",!0),(0,i._)("div",p,[e.showCheckButton?((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.checkButton),onClick:t[3]||(t[3]=t=>e.onClickCheck(!1)),type:"button",class:"h5pButton"},null,8,m)):(0,i.kq)("",!0),e.showExtraButtons?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[e.showSolutionButton?((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.solutionsButton),onClick:t[4]||(t[4]=(...t)=>e.onClickShowSolution&&e.onClickShowSolution(...t)),type:"button",class:"h5pButton"},null,8,k)):(0,i.kq)("",!0),e.showRetryButton?((0,i.wg)(),(0,i.iD)("button",{key:1,textContent:(0,s.zw)(this.task.strings.retryButton),onClick:t[5]||(t[5]=(...t)=>e.onClickTryAgain&&e.onClickTryAgain(...t)),type:"button",class:"h5pButton"},null,8,f)):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])],512)}var b=n(536),y=n(4806),v=n(5678);const A={class:"h5pFeedbackContainer"},I={class:"h5pFeedbackText"},D=["low","high","optimum","max","value"],T=["src"],S={key:1},x={key:2,class:"h5pFeedbackText"};function z(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("div",A,[(0,i._)("div",I,(0,s.zw)(e.resultMessage),1),e.maxPoints?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("meter",{min:"0",low:e.lowNumber,high:e.highNumber,optimum:e.maxPoints,max:e.maxPoints,value:e.achievedPoints},null,8,D),e.achievedMaxPoints?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.urlForIcon("star"),width:"36",height:"36"},null,8,T)):(0,i.kq)("",!0)],64)):((0,i.wg)(),(0,i.iD)("div",S,(0,s.zw)(e.achievedPoints),1)),e.feedbackMessage?((0,i.wg)(),(0,i.iD)("div",x,(0,s.zw)(e.feedbackMessage),1)):(0,i.kq)("",!0)])}var C=(0,i.aZ)({name:"FeedbackElement",props:{achievedPoints:Number,maxPoints:Number,resultMessage:String,feedback:Object},data(){return{}},mounted(){},methods:{urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"}},computed:{lowNumber(){return this.maxPoints?this.maxPoints/3:0},highNumber(){return this.maxPoints?2*this.maxPoints/3:0},feedbackSortedByScore(){return this.feedback?this.feedback.map((e=>e)).sort(((e,t)=>t.percentage-e.percentage)):[]},feedbackMessage(){if("undefined"===typeof this.achievedPoints||"undefined"===typeof this.maxPoints)return;const e=(0,y.round)(this.achievedPoints/this.maxPoints*100);for(const t of this.feedbackSortedByScore)if(e>=t.percentage)return t.message},achievedMaxPoints(){return this.achievedPoints===this.maxPoints}}}),B=n(89);const F=(0,B.Z)(C,[["render",z]]);var P=F;const E=n(6024);var U=(0,i.aZ)({name:"FillInTheBlanksViewer",components:{FeedbackElement:P},props:{task:{type:Object,required:!0}},data(){return{userInputs:{},submittedAnswers:null,userWantsToSeeSolutions:!1,editable:!0}},methods:{$gettext:v.RA,submittedAnswerIsCorrect(e){const t=e,n=this.submittedAnswers?.[t.uuid];return!!n&&t.solutions.some((e=>this.isAnswerCorrect(n,e)))},isAnswerCorrect(e,t){return this.task.caseSensitive?this.task.acceptTypos?this.isAnswerCorrectWithTypo(e,t):e===t:this.task.acceptTypos?this.isAnswerCorrectWithTypo(e.toLowerCase(),t.toLowerCase()):e.toLowerCase()===t.toLowerCase()},isAnswerCorrectWithTypo(e,t){if(e===t)return!0;const n=E.distance(e,t);return e.length>3&&n<=1||e.length>9&&n<=2},updateAttempt(){const e={};this.blanks.forEach(((t,n)=>{e[`${n} - ${t.solutions[0]}`]=this.submittedAnswerIsCorrect(t)?1:0})),this.$emit("updateAttempt",{points:e,success:this.correctAnswers===this.blanks.length})},autoGrowTextField(e){const t=window.getComputedStyle(e,null),n=t.getPropertyValue("font-size"),i=t.getPropertyValue("font-family"),s=t.getPropertyValue("padding"),o=parseInt(n,10),a=6,r=o*a,l=3.25,d=o*l,u=.5*o;setTimeout((()=>{const t=document.createElement("div");t.textContent=e.value;const o={position:"absolute","white-space":"nowrap","font-size":n,"font-family":i,padding:s,width:"initial"};for(const[e,n]of Object.entries(o))t.style[e]=n;e.parentElement.append(t);const a=t.clientWidth,l=this.$refs.wrapperElement.clientWidth;t.remove(),e.style.width=a<=r?(r+u).toString()+"px":a+d>=l?(l-d).toString()+"px":(a+u).toString()+"px"}),1)},onClickCheck(e){this.submittedAnswers={...this.userInputs},this.updateAttempt(),this.editable=e},onClickShowSolution(){this.userWantsToSeeSolutions=!0},onClickTryAgain(){this.userWantsToSeeSolutions=!1,this.userInputs={},this.submittedAnswers=null,this.editable=!0},onInputBlurOrEnter(){this.userWantsToSeeSolutions=!1,this.task.autoCorrect&&this.onClickCheck(!0)},onInput(e){this.autoGrowTextField(e.target)},classForInput(e){return this.submittedAnswers?void 0!=this.submittedAnswers?.[e.uuid]?this.submittedAnswerIsCorrect(e)?"h5pBlank h5pBlankCorrect":"h5pBlank h5pBlankIncorrect":this.task.autoCorrect?"h5pBlank":"h5pBlank h5pBlankIncorrect":"h5pBlank"},urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"}},computed:{splitTemplate(){return this.task.template.split(/\*([^*]*)\*/)},parsedTemplate(){return this.splitTemplate.map(((e,t)=>{if(t%2===0)return{type:"staticText",text:e,uuid:(0,b.Z)()};{let t=e.split(":"),n=t[0].split("/"),i=t[1];return{type:"blank",solutions:n,hint:i,uuid:(0,b.Z)()}}}))},blanks(){return this.parsedTemplate.filter((e=>"blank"===e.type))},blanksFilled(){return this.submittedAnswers?Object.keys(this.submittedAnswers).length:0},allBlanksAreFilled(){return this.blanksFilled==this.blanks.length},correctAnswers(){return this.blanks.filter((e=>this.submittedAnswerIsCorrect(e))).length},allAnswersAreCorrect(){return this.blanks.every((e=>this.submittedAnswerIsCorrect(e)))},maxPoints(){return this.blanks.length},inputHasChanged(){return!(0,y.isEqual)(this.submittedAnswers,this.userInputs)},showExtraButtons(){return this.task.autoCorrect?!!this.allBlanksAreFilled&&(null!==this.submittedAnswers&&!this.inputHasChanged&&!this.allAnswersAreCorrect):null!==this.submittedAnswers&&!this.inputHasChanged&&!this.allAnswersAreCorrect},showCheckButton(){return(null===this.submittedAnswers||this.inputHasChanged)&&!this.task.autoCorrect},showSolutionButton(){return!this.showSolutions&&this.task.showSolutionsAllowed},showRetryButton(){return this.task.retryAllowed&&null!==this.submittedAnswers},showSolutions(){return this.userWantsToSeeSolutions&&(this.allBlanksAreFilled||!this.task.allBlanksMustBeFilledForSolutions)},showFillInAllTheBlanksMessage(){return this.task.allBlanksMustBeFilledForSolutions&&this.userWantsToSeeSolutions&&!this.allBlanksAreFilled&&!this.inputHasChanged},showResults(){return!(null===this.submittedAnswers)&&!this.showFillInAllTheBlanksMessage&&(!this.task.autoCorrect||this.allBlanksAreFilled)&&!this.inputHasChanged},resultMessage(){let e=this.task.strings.resultMessage.replace(":correct",this.correctAnswers.toString());return e=e.replace(":total",this.blanks.length.toString()),e},feedbackSortedByScore(){return this.task.feedback.map((e=>e)).sort(((e,t)=>t.percentage-e.percentage))},fillInAllTheBlanksMessage(){return this.task.strings.fillInAllBlanksMessage?this.task.strings.fillInAllBlanksMessage:(0,v.RA)("Alle Lücken müssen ausgefüllt sein, um Lösungen anzuzeigen")}}});const _=(0,B.Z)(U,[["render",w],["__scopeId","data-v-84afc660"]]);var M=_;const R={class:"default"},V={class:"h5pEditorTopPanel"},W=["data-tooltip"],H={class:"collapsable collapsed"},O={value:!1},Z={value:!0},L=["disabled"],j=["disabled"],q=["disabled"],N=["disabled"],Q=["disabled"],Y={class:"collapsable collapsed"},G={class:"feedbackContainer"},K={class:"feedbackPercentagesChild"},X=["onUpdate:modelValue"],J={class:"feedbackMessagesChild"},$=["onUpdate:modelValue"],ee=["title","onClick"],te=["src"];function ne(e,t,n,a,r,l){const d=(0,i.up)("studip-wysiwyg");return(0,i.wg)(),(0,i.iD)("form",R,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Fill In The Blanks")),1),(0,i._)("div",V,[(0,i._)("button",{onClick:t[0]||(t[0]=(...t)=>e.addBlank&&e.addBlank(...t)),class:"button",type:"button",style:{"margin-right":"0.1em"}},(0,s.zw)(e.$gettext("Lücke hinzufügen")),1),(0,i._)("div",{class:"tooltip tooltip-icon","data-tooltip":e.instructions},null,8,W)]),(0,i.Wm)(d,{modelValue:e.taskDefinition.template,"onUpdate:modelValue":t[1]||(t[1]=t=>e.taskDefinition.template=t),ref:"wysiwyg","force-soft-breaks":"","remove-wrapping-p-tag":"","disable-autoformat":""},null,8,["modelValue"])]),(0,i._)("fieldset",H,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Einstellungen")),1),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.taskDefinition.caseSensitive=t)},null,512),[[o.e8,e.taskDefinition.caseSensitive]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Groß- und Kleinschreibung beachten")),1)]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=t=>e.taskDefinition.acceptTypos=t)},null,512),[[o.e8,e.taskDefinition.acceptTypos]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Rechtschreib- oder Tippfehler ignorieren")),1)]),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Korrigiert wird"))+" ",1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.taskDefinition.autoCorrect=t)},[(0,i._)("option",O,(0,s.zw)(e.$gettext("manuell per Button")),1),(0,i._)("option",Z,(0,s.zw)(e.$gettext("automatisch nach Eingabe")),1)],512),[[o.bM,e.taskDefinition.autoCorrect]])]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.autoCorrect?"setting-disabled":"")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:e.taskDefinition.autoCorrect,"onUpdate:modelValue":t[5]||(t[5]=t=>e.taskDefinition.strings.checkButton=t)},null,8,L),[[o.nr,e.taskDefinition.strings.checkButton]])],2),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=t=>e.taskDefinition.retryAllowed=t)},null,512),[[o.e8,e.taskDefinition.retryAllowed]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Mehrere Versuche erlauben")),1)]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.retryAllowed?"":"setting-disabled")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:!e.taskDefinition.retryAllowed,"onUpdate:modelValue":t[7]||(t[7]=t=>e.taskDefinition.strings.retryButton=t)},null,8,j),[[o.nr,e.taskDefinition.strings.retryButton]])],2),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=t=>e.taskDefinition.showSolutionsAllowed=t),onChange:t[9]||(t[9]=t=>e.taskDefinition.showSolutionsAllowed?"":e.taskDefinition.allBlanksMustBeFilledForSolutions=e.taskDefinition.showSolutionsAllowed)},null,544),[[o.e8,e.taskDefinition.showSolutionsAllowed]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Lösungen können angezeigt werden")),1)]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.showSolutionsAllowed?"":"setting-disabled")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:!e.taskDefinition.showSolutionsAllowed,"onUpdate:modelValue":t[10]||(t[10]=t=>e.taskDefinition.strings.solutionsButton=t)},null,8,q),[[o.nr,e.taskDefinition.strings.solutionsButton]])],2),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.showSolutionsAllowed?"":"setting-disabled")},[(0,i.wy)((0,i._)("input",{type:"checkbox",disabled:!e.taskDefinition.showSolutionsAllowed,"onUpdate:modelValue":t[11]||(t[11]=t=>e.taskDefinition.allBlanksMustBeFilledForSolutions=t)},null,8,N),[[o.e8,e.taskDefinition.allBlanksMustBeFilledForSolutions]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Alle Lücken müssen ausgefüllt sein, um Lösungen anzuzeigen.")),1)],2),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.allBlanksMustBeFilledForSolutions?"":"setting-disabled")},[(0,i.Uk)((0,s.zw)(e.$gettext("Mitteilung, wenn nicht alle Lücken ausgefüllt sind:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:!e.taskDefinition.allBlanksMustBeFilledForSolutions,"onUpdate:modelValue":t[12]||(t[12]=t=>e.taskDefinition.strings.fillInAllBlanksMessage=t),style:{width:"100%"}},null,8,Q),[[o.nr,e.taskDefinition.strings.fillInAllBlanksMessage]])],2)]),(0,i._)("fieldset",Y,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Feedback")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Ergebnismitteilung (mögliche Variablen :correct und :total):"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=t=>e.taskDefinition.strings.resultMessage=t),style:{width:"100%"}},null,512),[[o.nr,e.taskDefinition.strings.resultMessage]])]),(0,i._)("label",null,(0,s.zw)(e.$gettext("Benutzerdefiniertes Feedback für beliebige Punktebereiche:")),1),(0,i._)("div",G,[(0,i._)("div",K,[(0,i._)("label",null,(0,s.zw)(e.$gettext("Prozent")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.feedback,((t,n)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:n,type:"number",min:"0",max:"100","onUpdate:modelValue":t=>e.taskDefinition.feedback[n].percentage=t},null,8,X)),[[o.nr,e.taskDefinition.feedback[n].percentage]]))),128))]),(0,i._)("div",J,[(0,i._)("label",null,(0,s.zw)(e.$gettext("Mitteilung")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.feedback,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"feedbackMessagesChildSubdivision",key:n},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t=>e.taskDefinition.feedback[n].message=t},null,8,$),[[o.nr,e.taskDefinition.feedback[n].message]]),(0,i._)("button",{type:"button",title:e.titleForDeleteButtonForFeedback(t),onClick:n=>e.removeFeedback(t)},[(0,i._)("img",{src:e.urlForIcon("trash"),width:"16",height:"16"},null,8,te)],8,ee)])))),128))])]),(0,i._)("button",{type:"button",class:"button",onClick:t[14]||(t[14]=(...t)=>e.addFeedback&&e.addFeedback(...t))},(0,s.zw)(e.$gettext("Neuer Bereich")),1)])])}var ie=n(7251),se=(0,i.aZ)({name:"FillInTheBlanksEditor",components:{StudipWysiwyg:ie.Z},props:{taskDefinition:{type:Object,required:!0}},computed:{feedbackSortedByScore(){return this.taskDefinition.feedback.map((e=>e)).sort(((e,t)=>t.percentage-e.percentage))},instructions(){return(0,v.RA)('Fügen Sie Lücken hinzu, indem Sie ein Sternchen (*) vor und hinter dem korrekten Wort bzw. den Wörtern setzen oder markieren Sie ein Wort und klicken Sie den "Lücke hinzufügen"–Button. Sie können alternative Antworten mit einem Schrägstrich (/) hinzufügen. Außerdem können Sie einen Tooltip mit einem Doppelpunkt (:) hinzufügen.')}},methods:{$gettext:v.RA,titleForDeleteButtonForFeedback(e){return this.$gettext("Entferne den Feedback-Bereich, der ab %{ percentage }% anfängt.",{percentage:e.percentage.toString()})},addBlank(){const e=this.$refs.wysiwyg?.$el,t=window.STUDIP.wysiwyg.getEditor(e);if(!t)throw console.error("getEditor(wysiwygEl) returned: ",t),new Error("Could not get reference to wysiwyg editor");const n=t.model.document.selection,i=n.getFirstPosition(),s=n.getLastPosition();if(!i||!s)throw console.error("selection start: ",i," selection end: ",s),new Error("Could not get selection in editor");t.model.change((e=>{e.insertText("*",s),e.insertText("*",i)}))},addFeedback(){this.taskDefinition.feedback.push({percentage:this.feedbackSortedByScore[0]?.percentage,message:"Feedback"})},removeFeedback(e){this.taskDefinition.feedback=this.taskDefinition.feedback.filter((t=>t!==e))},urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"}}});const oe=(0,B.Z)(se,[["render",ne],["__scopeId","data-v-71de5281"]]);var ae=oe;const re={class:"default"},le={class:"h5pEditorTopPanel"},de=["textContent"],ue={class:"collapsable collapsed"};function ce(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("form",re,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Find The Words")),1),(0,i._)("div",le,[(0,i._)("input",{type:"text",style:{width:"100%"},onSubmit:t[0]||(t[0]=(...t)=>e.addWord&&e.addWord(...t))},null,32),(0,i._)("button",{textContent:(0,s.zw)(e.$gettext("Wort hinzufügen")),onClick:t[1]||(t[1]=(...t)=>e.addWord&&e.addWord(...t)),class:"button",type:"button"},null,8,de)])]),(0,i._)("fieldset",ue,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Einstellungen")),1)])])}var ge=(0,i.aZ)({name:"FindTheWordsEditor",props:{taskDefinition:{type:Object,required:!0}},computed:{},methods:{$gettext:v.RA,addWord(){},urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"}}});const he=(0,B.Z)(ge,[["render",ce],["__scopeId","data-v-40728be7"]]);var pe=he;const me=e=>((0,i.dD)("data-v-628d68d3"),e=e(),(0,i.Cn)(),e),ke=me((()=>(0,i._)("span",null,"Find The Words - Viewer",-1))),fe=me((()=>(0,i._)("br",null,null,-1))),we={class:"h5pWords"},be=["textContent"];function ye(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[ke,fe,(0,i._)("div",we,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.task.words,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e,textContent:(0,s.zw)(e)},null,8,be)))),128))])],64)}var ve=(0,i.aZ)({name:"FindTheWordsViewer",props:{task:{type:Object,required:!0}},emits:["updateAttempt"],data(){return{}},methods:{},computed:{}});const Ae=(0,B.Z)(ve,[["render",ye],["__scopeId","data-v-628d68d3"]]);var Ie=Ae;const De={class:"default"},Te={class:"flex-parent-element"},Se=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],ze=["onClick"],Ce=["src","title"],Be={class:"collapsable collapsed"},Fe=["onUpdate:modelValue"],Pe=["onUpdate:modelValue"],Ee=["onUpdate:modelValue"],Ue={class:"collapsable collapsed"},_e=["disabled"],Me=["disabled"];function Re(e,t,n,a,r,l){const d=(0,i.up)("studip-wysiwyg");return(0,i.wg)(),(0,i.iD)("form",De,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Question")),1),(0,i._)("label",null,[(0,i.Wm)(d,{modelValue:e.taskDefinition.question,"onUpdate:modelValue":t[0]||(t[0]=t=>e.taskDefinition.question=t),"force-soft-breaks":"","remove-wrapping-p-tag":"","disable-autoformat":""},null,8,["modelValue"])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.answers,((t,n)=>((0,i.wg)(),(0,i.iD)("fieldset",{class:"collapsable collapsed",key:n},[(0,i._)("legend",null,(0,s.zw)(t.text),1),(0,i._)("div",Te,[(0,i.wy)((0,i._)("input",{class:"flex-child-element checkbox",type:"checkbox","onUpdate:modelValue":t=>e.taskDefinition.answers[n].correct=t},null,8,Se),[[o.e8,e.taskDefinition.answers[n].correct]]),(0,i.wy)((0,i._)("input",{class:"flex-child-element textbox",type:"text","onUpdate:modelValue":t=>e.taskDefinition.answers[n].text=t},null,8,xe),[[o.nr,e.taskDefinition.answers[n].text]]),(0,i._)("button",{type:"button",class:"flex-child-element removeAnswerButton",onClick:n=>e.removeAnswer(t)},[(0,i._)("img",{src:e.urlForIcon("trash"),title:e.$gettext("Löschen")},null,8,Ce)],8,ze)]),(0,i._)("fieldset",Be,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Hinweis und Feedback")),1),(0,i._)("label",null,[(0,i._)("span",null,(0,s.zw)(e.$gettext("Hinweis")),1),(0,i.wy)((0,i._)("input",{class:"textbox",type:"text","onUpdate:modelValue":t=>e.taskDefinition.answers[n].strings.hint=t},null,8,Fe),[[o.nr,e.taskDefinition.answers[n].strings.hint]])]),(0,i._)("label",null,[(0,i._)("span",null,(0,s.zw)(e.$gettext("Feedback wenn ausgewählt")),1),(0,i.wy)((0,i._)("input",{class:"textbox",type:"text","onUpdate:modelValue":t=>e.taskDefinition.answers[n].strings.feedbackSelected=t},null,8,Pe),[[o.nr,e.taskDefinition.answers[n].strings.feedbackSelected]])]),(0,i._)("label",null,[(0,i._)("span",null,(0,s.zw)(e.$gettext("Feedback wenn nicht ausgewählt")),1),(0,i.wy)((0,i._)("input",{class:"textbox",type:"text","onUpdate:modelValue":t=>e.taskDefinition.answers[n].strings.feedbackNotSelected=t},null,8,Ee),[[o.nr,e.taskDefinition.answers[n].strings.feedbackNotSelected]])])])])))),128)),(0,i._)("button",{type:"button",class:"button",onClick:t[1]||(t[1]=(...t)=>e.addAnswer&&e.addAnswer(...t))},(0,s.zw)(e.$gettext("Neue Antwort")),1)]),(0,i._)("fieldset",Ue,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Einstellungen")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.taskDefinition.strings.checkButton=t)},null,512),[[o.nr,e.taskDefinition.strings.checkButton]])]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=t=>e.taskDefinition.canAnswerMultiple=t)},null,512),[[o.e8,e.taskDefinition.canAnswerMultiple]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Mehrere Antworten können ausgewählt werden")),1)]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.taskDefinition.randomOrder=t)},null,512),[[o.e8,e.taskDefinition.randomOrder]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Zeige Antworten in zufälliger Reihenfolge")),1)]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=t=>e.taskDefinition.retryAllowed=t)},null,512),[[o.e8,e.taskDefinition.retryAllowed]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Mehrere Versuche erlauben")),1)]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.retryAllowed?"":"setting-disabled")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:!e.taskDefinition.retryAllowed,"onUpdate:modelValue":t[6]||(t[6]=t=>e.taskDefinition.strings.retryButton=t)},null,8,_e),[[o.nr,e.taskDefinition.strings.retryButton]])],2),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=t=>e.taskDefinition.showSolutionsAllowed=t)},null,512),[[o.e8,e.taskDefinition.showSolutionsAllowed]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Lösungen können angezeigt werden")),1)]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.showSolutionsAllowed?"":"setting-disabled")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:!e.taskDefinition.showSolutionsAllowed,"onUpdate:modelValue":t[8]||(t[8]=t=>e.taskDefinition.strings.solutionsButton=t)},null,8,Me),[[o.nr,e.taskDefinition.strings.solutionsButton]])],2)])])}var Ve=n(9381),We=(0,i.aZ)({name:"QuestionEditor",components:{StudipWysiwyg:ie.Z},props:{taskDefinition:{type:Object,required:!0}},methods:{$gettext:v.RA,addAnswer(){this.taskDefinition.answers.push({text:this.$gettext("Neue Antwort"),correct:!0,strings:{hint:"",feedbackSelected:"",feedbackNotSelected:""}})},removeAnswer(e){this.taskDefinition.answers=this.taskDefinition.answers.filter((t=>t!==e))},urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"}},computed:{currentUndoRedoState:()=>Ve.h4.undoRedoStack[Ve.h4.undoRedoIndex]}});const He=(0,B.Z)(We,[["render",Re],["__scopeId","data-v-2a137151"]]);var Oe=He;const Ze={class:"h5pModule"},Le=["innerHTML"],je=["value","onUpdate:modelValue","disabled"],qe=["data-tooltip"],Ne={key:0,class:"answerFeedback"},Qe={key:1,class:"answerFeedback"},Ye=["value","disabled"],Ge=["data-tooltip"],Ke={key:0,class:"answerFeedback"},Xe={key:1,class:"answerFeedback"},Je={class:"h5pButtonPanel"},$e=["textContent"],et=["textContent"],tt=["textContent"];function nt(e,t,n,a,r,l){const d=(0,i.up)("FeedbackElement");return(0,i.wg)(),(0,i.iD)("div",Ze,[(0,i._)("div",{class:"h5pQuestion",innerHTML:this.task.question},null,8,Le),e.task.canAnswerMultiple?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(e.answers,((t,n)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:n},[(0,i._)("label",{class:(0,s.C_)(e.classForAnswer(t))},[(0,i.wy)((0,i._)("input",{type:"checkbox",value:t.text,"onUpdate:modelValue":n=>e.selectedAnswers[t.text]=n,disabled:e.isSubmitted},null,8,je),[[o.e8,e.selectedAnswers[t.text]]]),(0,i.Uk)(" "+(0,s.zw)(t.text)+" ",1),t.strings.hint&&!e.isSubmitted?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"tooltip tooltip-icon h5pTooltip","data-tooltip":t.strings.hint},null,8,qe)):(0,i.kq)("",!0)],2),e.isSubmitted?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[t.strings.feedbackSelected&&e.selectedAnswers[t.text]?((0,i.wg)(),(0,i.iD)("div",Ne,(0,s.zw)(t.strings.feedbackSelected),1)):t.strings.feedbackNotSelected&&!e.selectedAnswers[t.text]?((0,i.wg)(),(0,i.iD)("div",Qe,(0,s.zw)(t.strings.feedbackNotSelected),1)):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)],64)))),128)):((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(e.answers,((n,a)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:a},[(0,i._)("label",{class:(0,s.C_)(e.classForAnswer(n))},[(0,i.wy)((0,i._)("input",{type:"radio",class:"answerRadioButton",value:n,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedAnswer=t),disabled:e.isSubmitted},null,8,Ye),[[o.G2,e.selectedAnswer]]),(0,i.Uk)(" "+(0,s.zw)(n.text)+" ",1),n.strings.hint&&!e.isSubmitted?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"tooltip tooltip-icon h5pTooltip","data-tooltip":n.strings.hint},null,8,Ge)):(0,i.kq)("",!0)],2),e.isSubmitted?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[n.strings.feedbackSelected&&e.selectedAnswer==n?((0,i.wg)(),(0,i.iD)("div",Ke,(0,s.zw)(n.strings.feedbackSelected),1)):n.strings.feedbackNotSelected&&e.selectedAnswer!==n?((0,i.wg)(),(0,i.iD)("div",Xe,(0,s.zw)(n.strings.feedbackNotSelected),1)):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)],64)))),128)),e.isSubmitted?((0,i.wg)(),(0,i.j4)(d,{key:2,"achieved-points":e.points,"max-points":e.maxPoints},null,8,["achieved-points","max-points"])):(0,i.kq)("",!0),(0,i._)("div",Je,[e.isSubmitted?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.checkButton),onClick:t[1]||(t[1]=(...t)=>e.onClickCheck&&e.onClickCheck(...t)),type:"button",class:"h5pButton"},null,8,$e)),this.task.retryAllowed&&e.isSubmitted?((0,i.wg)(),(0,i.iD)("button",{key:1,textContent:(0,s.zw)(this.task.strings.retryButton),onClick:t[2]||(t[2]=(...t)=>e.onClickTryAgain&&e.onClickTryAgain(...t)),type:"button",class:"h5pButton"},null,8,et)):(0,i.kq)("",!0),e.showSolutionsButton?((0,i.wg)(),(0,i.iD)("button",{key:2,textContent:(0,s.zw)(this.task.strings.solutionsButton),onClick:t[3]||(t[3]=(...t)=>e.onClickShowSolution&&e.onClickShowSolution(...t)),type:"button",class:"h5pButton"},null,8,tt)):(0,i.kq)("",!0)])])}var it=(0,i.aZ)({name:"QuestionViewer",props:{task:{type:Object,required:!0}},components:{FeedbackElement:P},data(){return{selectedAnswers:{},selectedAnswer:this.task.answers[0],isSubmitted:!1,showSolutions:!1}},methods:{$gettext:v.RA,onClickCheck(){this.isSubmitted=!0},onClickTryAgain(){this.isSubmitted=!1,this.showSolutions=!1,this.selectedAnswers={}},onClickShowSolution(){this.showSolutions=!0},selectAnswer(e){this.isSubmitted||(this.selectedAnswers[e.text]=!this.selectedAnswers[e.text])},classForAnswer(e){return this.showSolutions&&e.correct?"correctAnswer":this.isSubmitted?this.task.canAnswerMultiple?this.selectedAnswers[e.text]?e.correct?"correctAnswer":"incorrectAnswer":"submittedAnswer":this.selectedAnswer===e?e.correct?"correctAnswer":"incorrectAnswer":"submittedAnswer":"answer"}},computed:{maxPoints(){if(this.task.canAnswerMultiple){let e=0;return this.task.answers.forEach((t=>{t.correct&&e++})),e}return 1},points(){if(this.task.canAnswerMultiple){let e=0;return this.task.answers.forEach((t=>{this.selectedAnswers[t.text]&&(t.correct?e++:e--)})),e<0&&(e=0),e}return this.selectedAnswer.correct?1:0},answers(){return this.task.randomOrder?this.task.answers.map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e)):this.task.answers},showSolutionsButton(){return this.task.showSolutionsAllowed&&this.isSubmitted}}});const st=(0,B.Z)(it,[["render",nt],["__scopeId","data-v-0f8d1398"]]);var ot=st;const at={class:"h5pModule",ref:"wrapperElement"},rt=["innerHTML"],lt=["draggable","onDragstart","onDrop"],dt=["onDrop","onClick"],ut={key:2},ct=["data-tooltip"],gt={key:3,class:"h5pSolution"},ht=["draggable","onDragstart","onClick"],pt=["textContent"],mt={class:"h5pButtonPanel"},kt=["textContent"],ft=["textContent"],wt=["textContent"];function bt(e,t,n,a,r,l){const d=(0,i.up)("FeedbackElement");return(0,i.wg)(),(0,i.iD)("div",at,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.parsedTemplate,(n=>((0,i.wg)(),(0,i.iD)(i.HY,{key:n.uuid},["staticText"===n.type?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:n.text},null,8,rt)):"blank"===n.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[e.userInputs[n.uuid]?((0,i.wg)(),(0,i.iD)("span",{key:0,class:(0,s.C_)(e.classForFilledBlank(n)),draggable:e.editable,onDragstart:t=>e.startDragUsedAnswer(t,n,e.userInputs[n.uuid]),onDrop:t=>e.onDropBlank(t,n),onDragover:t[0]||(t[0]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[1]||(t[1]=(0,o.iM)((()=>{}),["prevent"]))},(0,s.zw)(e.getAnswerById(e.userInputs[n.uuid])?.text),43,lt)):((0,i.wg)(),(0,i.iD)("span",{key:1,class:"h5pBlank",onDrop:t=>e.onDropBlank(t,n),onDragover:t[2]||(t[2]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[3]||(t[3]=(0,o.iM)((()=>{}),["prevent"])),onClick:t=>e.onClickBlank(n)},"​ ",40,dt)),n.hint?((0,i.wg)(),(0,i.iD)("label",ut,[(0,i._)("span",{class:"tooltip tooltip-icon","data-tooltip":n.hint},null,8,ct)])):(0,i.kq)("",!0),e.showSolutions&&!e.submittedAnswerIsCorrect(n)?((0,i.wg)(),(0,i.iD)("span",gt,(0,s.zw)(n.solution),1)):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)],64)))),128)),(0,i._)("div",{class:"unused-answers-list",onDrop:t[4]||(t[4]=t=>e.onDropUnusedAnswers(t)),onDragover:t[5]||(t[5]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[6]||(t[6]=(0,o.iM)((()=>{}),["prevent"]))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.unusedAnswers,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.uuid},[(0,i._)("span",{class:(0,s.C_)(["h5pBlankSolution",{disabled:!this.editable}]),draggable:e.editable,onDragstart:n=>e.startDragUnusedAnswer(n,t),onClick:n=>e.onClickUnusedAnswer(t)},(0,s.zw)(t.text),43,ht)])))),128))],32),e.showResults?((0,i.wg)(),(0,i.j4)(d,{key:0,"achieved-points":e.correctAnswers,"max-points":e.maxPoints,feedback:e.task.feedback,"result-message":e.resultMessage},null,8,["achieved-points","max-points","feedback","result-message"])):(0,i.kq)("",!0),e.showFillInAllTheBlanksMessage?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"h5pMessage",textContent:(0,s.zw)(e.fillInAllTheBlanksMessage)},null,8,pt)):(0,i.kq)("",!0),(0,i._)("div",mt,[e.showCheckButton?((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.checkButton),onClick:t[7]||(t[7]=(...t)=>e.onClickCheck&&e.onClickCheck(...t)),type:"button",class:"h5pButton"},null,8,kt)):(0,i.kq)("",!0),e.showExtraButtons?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[!e.showSolutions&&this.task.showSolutionsAllowed?((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.solutionsButton),onClick:t[8]||(t[8]=(...t)=>e.onClickShowSolution&&e.onClickShowSolution(...t)),type:"button",class:"h5pButton"},null,8,ft)):(0,i.kq)("",!0),this.task.retryAllowed?((0,i.wg)(),(0,i.iD)("button",{key:1,textContent:(0,s.zw)(this.task.strings.retryButton),onClick:t[9]||(t[9]=(...t)=>e.onClickTryAgain&&e.onClickTryAgain(...t)),type:"button",class:"h5pButton"},null,8,wt)):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])],512)}var yt=(0,i.aZ)({name:"DragTheWordsViewer",components:{FeedbackElement:P},props:{task:{type:Object,required:!0}},data(){return{userInputs:{},submittedAnswers:null,userWantsToSeeSolutions:!1,draggedAnswerId:void 0,draggedSourceId:void 0,clickedAnswerId:void 0,editable:!0}},methods:{$gettext:v.RA,submittedAnswerIsCorrect(e){const t=this.submittedAnswers?.[e.uuid];if(!t)return!1;const n=this.getAnswerById(t)?.text;return!!n&&this.isAnswerCorrect(n,e.solution)},isAnswerCorrect(e,t){return e===t},updateAttempt(){const e={};this.blanks.forEach(((t,n)=>{e[`${n} - ${t.solution}`]=this.submittedAnswerIsCorrect(t)?1:0})),this.$emit("updateAttempt",{points:e,success:this.correctAnswers===this.blanks.length})},getElement(e){const t=this.parsedTemplate.find((t=>t.uuid===e));if(!t)throw new Error("The given element does not exist in parsedTemplate: "+e);return t},startDragUsedAnswer(e,t,n){if(!this.editable)return;e.dataTransfer&&(e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move");const i=this.getAnswerById(n);console.log("Dragging answer: ",i,"From blank: ",t);for(const s in this.userInputs)console.log(s);this.draggedAnswerId=n},startDragUnusedAnswer(e,t){e.dataTransfer&&(e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",console.log("Dragging answer: ",t),this.draggedAnswerId=t.uuid)},onDropBlank(e,t){if(!this.draggedAnswerId)throw new Error("Dragged answer id is undefined");console.log("Dropped answer :",this.draggedAnswer,"on blank: ",t);const n=this.blanks.find((e=>this.userInputs[e.uuid]===this.draggedAnswerId));n&&delete this.userInputs[n.uuid],this.userInputs[t.uuid]=this.draggedAnswerId,this.draggedAnswerId=void 0},onDropUnusedAnswers(e){if(console.error("Not implemented"),e.preventDefault(),!this.draggedAnswer)throw new Error("draggedAnswer is undefined");const t=this.blanks.find((e=>this.userInputs[e.uuid]===this.draggedAnswerId));t&&delete this.userInputs[t.uuid]},onClickCheck(){this.submittedAnswers={...this.userInputs},this.editable=!1},onClickShowSolution(){this.userWantsToSeeSolutions=!0},onClickTryAgain(){this.userWantsToSeeSolutions=!1,this.userInputs={},this.submittedAnswers=null,this.editable=!0},classForFilledBlank(e){return this.submittedAnswers||this.task.instantFeedback?(this.task.instantFeedback&&(this.submittedAnswers={...this.userInputs}),this.userInputs?.[e.uuid]?this.submittedAnswerIsCorrect(e)?"h5pFilledBlank h5pBlankCorrect disabled":"h5pFilledBlank h5pBlankIncorrect disabled":"h5pBlank"):"h5pFilledBlank"},getAnswerById(e){return this.answers.find((t=>t.uuid===e))},onClickUnusedAnswer(e){console.log("Clicked answer:",e),this.editable&&(this.clickedAnswerId=e.uuid)},onClickBlank(e){console.log("Clicked blank:",e),this.clickedAnswerId&&(this.userInputs[e.uuid]=this.clickedAnswerId,this.clickedAnswerId=void 0)}},computed:{splitTemplate(){return this.task.template.split(/\*([^*]*)\*/)},parsedTemplate(){return this.splitTemplate.map(((e,t)=>{if(t%2===0)return{type:"staticText",text:e,uuid:(0,b.Z)()};{let t=e.split(":"),n=t[0],i=t[1];return{type:"blank",solution:n,hint:i,uuid:(0,b.Z)()}}}))},blanks(){return this.parsedTemplate.filter((e=>"blank"===e.type))},answers(){return this.blanks.map((e=>({uuid:(0,b.Z)(),text:e.solution})))},draggedAnswer(){return this.draggedAnswerId?this.getAnswerById(this.draggedAnswerId):void 0},randomizedAnswers(){return this.answers.map((e=>({value:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({value:e})=>e))},sortedAnswers(){return this.answers.map((e=>e)).sort(((e,t)=>e.text.localeCompare(t.text)))},blanksFilled(){return this.submittedAnswers?Object.keys(this.submittedAnswers).length:0},allBlanksAreFilled(){return this.blanksFilled==this.blanks.length},correctAnswers(){return this.blanks.filter((e=>this.submittedAnswerIsCorrect(e))).length},allAnswersAreCorrect(){return this.blanks.every((e=>this.submittedAnswerIsCorrect(e)))},maxPoints(){return this.blanks.length},unusedAnswers(){return this.task.alphabeticOrder?this.sortedAnswers.filter((e=>!Object.values(this.userInputs).includes(e.uuid))):this.randomizedAnswers.filter((e=>!Object.values(this.userInputs).includes(e.uuid)))},inputHasChanged(){return!(0,y.isEqual)(this.submittedAnswers,this.userInputs)},showExtraButtons(){return this.task.instantFeedback?!!this.allBlanksAreFilled&&(null!==this.submittedAnswers&&!this.inputHasChanged&&!this.allAnswersAreCorrect):null!==this.submittedAnswers&&!this.inputHasChanged&&!this.allAnswersAreCorrect},showCheckButton(){return(null===this.submittedAnswers||this.inputHasChanged)&&!this.task.instantFeedback},showSolutionButton(){return!this.showSolutions&&this.task.showSolutionsAllowed},showRetryButton(){return this.task.retryAllowed&&null!==this.submittedAnswers},showSolutions(){return this.userWantsToSeeSolutions&&(this.allBlanksAreFilled||!this.task.allBlanksMustBeFilledForSolutions)},showFillInAllTheBlanksMessage(){return this.task.allBlanksMustBeFilledForSolutions&&this.userWantsToSeeSolutions&&!this.allBlanksAreFilled&&!this.inputHasChanged},showResults(){return!(null===this.submittedAnswers)&&!this.showFillInAllTheBlanksMessage&&(!this.task.instantFeedback||this.allBlanksAreFilled)&&!this.inputHasChanged},resultMessage(){let e=this.task.strings.resultMessage.replace(":correct",this.correctAnswers.toString());return e=e.replace(":total",this.blanks.length.toString()),e},fillInAllTheBlanksMessage(){return this.task.strings.fillInAllBlanksMessage?this.task.strings.fillInAllBlanksMessage:(0,v.RA)("Alle Lücken müssen ausgefüllt sein, um Lösungen anzuzeigen")}}});const vt=(0,B.Z)(yt,[["render",bt],["__scopeId","data-v-1aaae338"]]);var At=vt;const It={class:"default"},Dt={class:"h5pEditorTopPanel"},Tt=["data-tooltip"],St={class:"collapsable collapsed"},xt={value:!1},zt={value:!0},Ct=["disabled"],Bt=["disabled"],Ft=["disabled"],Pt={class:"collapsable collapsed"},Et={class:"feedbackContainer"},Ut={class:"feedbackPercentagesChild"},_t=["onUpdate:modelValue"],Mt={class:"feedbackMessagesChild"},Rt=["onUpdate:modelValue"],Vt=["title","onClick"],Wt=["src"];function Ht(e,t,n,a,r,l){const d=(0,i.up)("studip-wysiwyg");return(0,i.wg)(),(0,i.iD)("form",It,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Drag The Words")),1),(0,i._)("div",Dt,[(0,i._)("button",{onClick:t[0]||(t[0]=(...t)=>e.addBlank&&e.addBlank(...t)),class:"button",type:"button",style:{"margin-right":"0.1em"}},(0,s.zw)(e.$gettext("Lücke hinzufügen")),1),(0,i._)("div",{class:"tooltip tooltip-icon","data-tooltip":e.instructions},null,8,Tt)]),(0,i.Wm)(d,{modelValue:e.taskDefinition.template,"onUpdate:modelValue":t[1]||(t[1]=t=>e.taskDefinition.template=t),ref:"wysiwyg","force-soft-breaks":"","remove-wrapping-p-tag":"","disable-autoformat":""},null,8,["modelValue"])]),(0,i._)("fieldset",St,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Einstellungen")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Korrigiert wird"))+" ",1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.taskDefinition.instantFeedback=t)},[(0,i._)("option",xt,(0,s.zw)(e.$gettext("manuell per Button")),1),(0,i._)("option",zt,(0,s.zw)(e.$gettext("automatisch nach Eingabe")),1)],512),[[o.bM,e.taskDefinition.instantFeedback]])]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.instantFeedback?"setting-disabled":"")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:e.taskDefinition.instantFeedback,"onUpdate:modelValue":t[3]||(t[3]=t=>e.taskDefinition.strings.checkButton=t)},null,8,Ct),[[o.nr,e.taskDefinition.strings.checkButton]])],2),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.taskDefinition.alphabeticOrder=t)},null,512),[[o.e8,e.taskDefinition.alphabeticOrder]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Antworten alphabetisch sortieren")),1)]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=t=>e.taskDefinition.retryAllowed=t)},null,512),[[o.e8,e.taskDefinition.retryAllowed]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Mehrere Versuche erlauben")),1)]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.retryAllowed?"":"setting-disabled")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:!e.taskDefinition.retryAllowed,"onUpdate:modelValue":t[6]||(t[6]=t=>e.taskDefinition.strings.retryButton=t)},null,8,Bt),[[o.nr,e.taskDefinition.strings.retryButton]])],2),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=t=>e.taskDefinition.showSolutionsAllowed=t),onChange:t[8]||(t[8]=t=>e.taskDefinition.showSolutionsAllowed?"":e.taskDefinition.allBlanksMustBeFilledForSolutions=e.taskDefinition.showSolutionsAllowed)},null,544),[[o.e8,e.taskDefinition.showSolutionsAllowed]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Lösungen können angezeigt werden")),1)]),(0,i._)("label",{class:(0,s.C_)(e.taskDefinition.showSolutionsAllowed?"":"setting-disabled")},[(0,i.Uk)((0,s.zw)(e.$gettext("Text im Button:"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text",disabled:!e.taskDefinition.showSolutionsAllowed,"onUpdate:modelValue":t[9]||(t[9]=t=>e.taskDefinition.strings.solutionsButton=t)},null,8,Ft),[[o.nr,e.taskDefinition.strings.solutionsButton]])],2)]),(0,i._)("fieldset",Pt,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Feedback")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Ergebnismitteilung (mögliche Variablen :correct und :total):"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.taskDefinition.strings.resultMessage=t),style:{width:"100%"}},null,512),[[o.nr,e.taskDefinition.strings.resultMessage]])]),(0,i._)("label",null,(0,s.zw)(e.$gettext("Benutzerdefiniertes Feedback für beliebige Punktebereiche:")),1),(0,i._)("div",Et,[(0,i._)("div",Ut,[(0,i._)("label",null,(0,s.zw)(e.$gettext("Prozent")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.feedback,((t,n)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:n,type:"number",min:"0",max:"100","onUpdate:modelValue":t=>e.taskDefinition.feedback[n].percentage=t},null,8,_t)),[[o.nr,e.taskDefinition.feedback[n].percentage]]))),128))]),(0,i._)("div",Mt,[(0,i._)("label",null,(0,s.zw)(e.$gettext("Mitteilung")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.feedback,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"feedbackMessagesChildSubdivision",key:n},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t=>e.taskDefinition.feedback[n].message=t},null,8,Rt),[[o.nr,e.taskDefinition.feedback[n].message]]),(0,i._)("button",{type:"button",title:e.titleForDeleteButtonForFeedback(t),onClick:n=>e.removeFeedback(t)},[(0,i._)("img",{src:e.urlForIcon("trash"),width:"16",height:"16"},null,8,Wt)],8,Vt)])))),128))])]),(0,i._)("button",{type:"button",class:"button",onClick:t[11]||(t[11]=(...t)=>e.addFeedback&&e.addFeedback(...t))},(0,s.zw)(e.$gettext("Neuer Bereich")),1)])])}var Ot=(0,i.aZ)({name:"DragTheWordsEditor",components:{StudipWysiwyg:ie.Z},props:{taskDefinition:{type:Object,required:!0}},computed:{currentUndoRedoState:()=>Ve.h4.undoRedoStack[Ve.h4.undoRedoIndex],instructions(){return(0,v.RA)('Fügen Sie Lücken hinzu, indem Sie ein Sternchen (*) vor und hinter dem korrekten Wort bzw. den Wörtern setzen oder markieren Sie ein Wort und klicken Sie den "Lücke hinzufügen"–Button. Außerdem können Sie einen Tooltip mit einem Doppelpunkt (:) hinzufügen.')},feedbackSortedByScore(){return this.taskDefinition.feedback.map((e=>e)).sort(((e,t)=>t.percentage-e.percentage))}},methods:{$gettext:v.RA,addBlank(){const e=this.$refs.wysiwyg?.$el,t=window.STUDIP.wysiwyg.getEditor(e);if(!t)throw console.error("getEditor(wysiwygEl) returned: ",t),new Error("Could not get reference to wysiwyg editor");const n=t.model.document.selection,i=n.getFirstPosition(),s=n.getLastPosition();if(!i||!s)throw console.error("selection start: ",i," selection end: ",s),new Error("Could not get selection in editor");t.model.change((e=>{e.insertText("*",s),e.insertText("*",i)}))},addFeedback(){this.taskDefinition.feedback.push({percentage:this.feedbackSortedByScore[0]?.percentage,message:"Feedback"})},removeFeedback(e){this.taskDefinition.feedback=this.taskDefinition.feedback.filter((t=>t!==e))},urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"},titleForDeleteButtonForFeedback(e){return this.$gettext("Entferne den Feedback-Bereich, der ab %{ percentage }% anfängt.",{percentage:e.percentage.toString()})}}});const Zt=(0,B.Z)(Ot,[["render",Ht],["__scopeId","data-v-8c60d656"]]);var Lt=Zt;const jt={class:"h5pModule"},qt={class:"h5pMarkTheWordText",ref:"wrapperElement"},Nt=["aria-pressed","onClick","onKeydown","onKeyup","innerHTML"],Qt={key:0,class:"space"},Yt={class:"h5pButtonPanel"},Gt=["textContent"],Kt=["textContent"],Xt={key:1},Jt=(0,i.Uk)(" Marked words: "),$t=(0,i.Uk)(" template: "),en=(0,i.Uk)(" Split template: "),tn=(0,i.Uk)(" Parsed template: ");function nn(e,t,n,o,a,r){const l=(0,i.up)("feedback-element");return(0,i.wg)(),(0,i.iD)("div",jt,[(0,i._)("div",qt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.parsedTemplate,((t,n)=>((0,i.wg)(),(0,i.iD)("span",{key:t.uuid},[(0,i._)("span",{tabindex:"0",role:"button","aria-pressed":e.isMarked(t),onClick:n=>e.onClickWord(t),onKeydown:n=>e.onWordKeydown(n,t),onKeyup:n=>e.onWordKeyup(n,t),class:(0,s.C_)(e.classForWord(t)),innerHTML:t.text},null,42,Nt),n<e.parsedTemplate.length?((0,i.wg)(),(0,i.iD)("pre",Qt," ")):(0,i.kq)("",!0)])))),128))],512),e.showResults?((0,i.wg)(),(0,i.j4)(l,{key:0,"achieved-points":e.score,"max-points":e.maxScore,feedback:this.task.feedback,"result-message":e.resultMessage},null,8,["achieved-points","max-points","feedback","result-message"])):(0,i.kq)("",!0),(0,i._)("div",Yt,[e.showCheckButton?((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.checkButton),onClick:t[0]||(t[0]=(...t)=>e.onClickCheck&&e.onClickCheck(...t)),type:"button",class:"h5pButton"},null,8,Gt)):(0,i.kq)("",!0),e.showRetryButton?((0,i.wg)(),(0,i.iD)("button",{key:1,textContent:(0,s.zw)(this.task.strings.retryButton),onClick:t[1]||(t[1]=(...t)=>e.onClickRetry&&e.onClickRetry(...t)),type:"button",class:"h5pButton"},null,8,Kt)):(0,i.kq)("",!0)]),e.debug?((0,i.wg)(),(0,i.iD)("div",Xt,[Jt,(0,i._)("pre",null,(0,s.zw)(e.markedWords),1),$t,(0,i._)("pre",null,(0,s.zw)(this.task.template),1),en,(0,i._)("pre",null,(0,s.zw)(e.splitTemplate),1),tn,(0,i._)("pre",null,(0,s.zw)(e.parsedTemplate),1)])):(0,i.kq)("",!0)])}var sn=(0,i.aZ)({name:"MarkTheWordsViewer",props:{task:{type:Object,required:!0}},components:{FeedbackElement:P},data(){return{markedWords:new Set,showResults:!1,debug:!1}},methods:{onClickCheck(){this.showResults=!0},onClickRetry(){this.showResults=!1,this.markedWords.clear()},onClickWord(e){this.showResults||(this.isMarked(e)?this.markedWords.delete(e):this.markedWords.add(e))},onWordKeydown(e,t){"Space"===e.code?e.preventDefault():"Enter"!==e.code&&"Return"!==e.code||(e.preventDefault(),this.onClickWord(t))},onWordKeyup(e,t){"Space"===e.code&&(e.preventDefault(),this.onClickWord(t))},classForWord(e){return this.showResults?this.isMarked(e)?e.correct?"h5pCorrectAnswer":"h5pIncorrectAnswer":"h5pStaticTextNoHover":this.isMarked(e)?"h5pMarkedWord":"h5pStaticText"},isMarked(e){return this.markedWords.has(e)}},computed:{splitTemplate(){return this.task.template.split(/\*([^*]*)\*/)},parsedTemplate(){let e=[];return this.splitTemplate.forEach(((t,n)=>{n%2===0?t.trim().split(" ").filter((e=>""!==e)).forEach((t=>{e.push({uuid:(0,b.Z)(),text:t,correct:!1})})):e.push({uuid:(0,b.Z)(),text:t,correct:!0})})),e},showCheckButton(){return!this.showResults},showRetryButton(){return this.task.retryAllowed&&this.showResults},score(){let e=0;for(const t of this.markedWords)t.correct?e++:e--;return e<0&&(e=0),e},maxScore(){let e=0;for(const t of this.parsedTemplate)t.correct&&e++;return e},resultMessage(){let e=this.task.strings.resultMessage.replace(":correct",this.score.toString());return e=e.replace(":total",this.maxScore.toString()),e}}});const on=(0,B.Z)(sn,[["render",nn],["__scopeId","data-v-34809008"]]);var an=on;const rn={class:"default"},ln={class:"h5pEditorTopPanel"},dn=["data-tooltip"],un={class:"collapsable collapsed"},cn={class:"feedbackContainer"},gn={class:"feedbackPercentagesChild"},hn=["onUpdate:modelValue"],pn={class:"feedbackMessagesChild"},mn=["onUpdate:modelValue"],kn=["title","onClick"],fn=["src"];function wn(e,t,n,a,r,l){const d=(0,i.up)("StudipWysiwyg");return(0,i.wg)(),(0,i.iD)("form",rn,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Mark The Words")),1),(0,i._)("div",ln,[(0,i._)("button",{onClick:t[0]||(t[0]=(...t)=>e.addSolution&&e.addSolution(...t)),class:"button",type:"button",style:{"margin-right":"0.1em"}},(0,s.zw)(e.$gettext("Richtiges Wort markieren")),1),(0,i._)("div",{class:"tooltip tooltip-icon","data-tooltip":e.instructions},null,8,dn)]),(0,i.Wm)(d,{modelValue:e.taskDefinition.template,"onUpdate:modelValue":t[1]||(t[1]=t=>e.taskDefinition.template=t),ref:"wysiwyg","force-soft-breaks":"","remove-wrapping-p-tag":"","disable-autoformat":""},null,8,["modelValue"])]),(0,i._)("fieldset",un,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Feedback")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Ergebnismitteilung (mögliche Variablen :correct und :total):"))+" ",1),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.taskDefinition.strings.resultMessage=t),style:{width:"100%"}},null,512),[[o.nr,e.taskDefinition.strings.resultMessage]])]),(0,i._)("label",null,(0,s.zw)(e.$gettext("Benutzerdefiniertes Feedback für beliebige Punktebereiche:")),1),(0,i._)("div",cn,[(0,i._)("div",gn,[(0,i._)("label",null,(0,s.zw)(e.$gettext("Prozent")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.feedback,((t,n)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:n,type:"number",min:"0",max:"100","onUpdate:modelValue":t=>e.taskDefinition.feedback[n].percentage=t},null,8,hn)),[[o.nr,e.taskDefinition.feedback[n].percentage]]))),128))]),(0,i._)("div",pn,[(0,i._)("label",null,(0,s.zw)(e.$gettext("Mitteilung")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.feedback,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"feedbackMessagesChildSubdivision",key:n},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t=>e.taskDefinition.feedback[n].message=t},null,8,mn),[[o.nr,e.taskDefinition.feedback[n].message]]),(0,i._)("button",{type:"button",title:e.titleForDeleteButtonForFeedback(t),onClick:n=>e.removeFeedback(t)},[(0,i._)("img",{src:e.urlForIcon("trash"),width:"16",height:"16"},null,8,fn)],8,kn)])))),128))])]),(0,i._)("button",{type:"button",class:"button",onClick:t[3]||(t[3]=(...t)=>e.addFeedback&&e.addFeedback(...t))},(0,s.zw)(e.$gettext("Neuer Bereich")),1)])])}var bn=(0,i.aZ)({name:"MarkTheWordsEditor",components:{StudipWysiwyg:ie.Z},props:{taskDefinition:{type:Object,required:!0}},methods:{$gettext:v.RA,addSolution(){const e=this.$refs.wysiwyg?.$el,t=window.STUDIP.wysiwyg.getEditor(e);if(!t)throw console.error("getEditor(wysiwygEl) returned: ",t),new Error("Could not get reference to wysiwyg editor");const n=t.model.document.selection,i=n.getFirstPosition(),s=n.getLastPosition();if(!i||!s)throw console.error("selection start: ",i," selection end: ",s),new Error("Could not get selection in editor");t.model.change((e=>{e.insertText("*",s),e.insertText("*",i)}))},titleForDeleteButtonForFeedback(e){return this.$gettext("Entferne den Feedback-Bereich, der ab %{ percentage }% anfängt.",{percentage:e.percentage.toString()})},addFeedback(){this.taskDefinition.feedback.push({percentage:this.feedbackSortedByScore[0]?.percentage,message:"Feedback"})},removeFeedback(e){this.taskDefinition.feedback=this.taskDefinition.feedback.filter((t=>t!==e))},urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"}},computed:{instructions(){return(0,v.RA)('Markieren Sie ein Wort als Lösung, indem Sie ein Sternchen (*) vor und hinter dem Wort setzen oder markieren Sie ein Wort und klicken Sie den "Richtiges Wort markieren"–Button.')},feedbackSortedByScore(){return this.taskDefinition.feedback.map((e=>e)).sort(((e,t)=>t.percentage-e.percentage))}}});const yn=(0,B.Z)(bn,[["render",wn],["__scopeId","data-v-096b7c32"]]);var vn=yn;const An={class:"main-flex"},In={class:"cards-list"},Dn=["onClick"],Tn=["onClick"],Sn=["src","alt"],xn={key:1,class:"edited-memory-card no-card-selected-placeholder"};function zn(e,t,n,a,r,l){const d=(0,i.up)("EditedMemoryCard");return(0,i.wg)(),(0,i.iD)("div",An,[(0,i._)("div",In,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.cards,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{key:t.uuid,class:(0,s.C_)({"cards-list-item":!0,"selected-card":n===this.selectedCardIndex}),onClick:t=>e.selectCard(n)},[(0,i.Uk)((0,s.zw)(n)+". "+(0,s.zw)(""===t.question?e.$gettext("Karte"):t.question),1),(0,i._)("button",{type:"button",class:"flex-child-element removeAnswerButton",onClick:(0,o.iM)((t=>e.deleteCard(n)),["stop"])},[(0,i._)("img",{src:e.urlForIcon("trash"),alt:e.$gettext("Karte löschen")},null,8,Sn)],8,Tn)],10,Dn)))),128)),(0,i._)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.addCard&&e.addCard(...t))},(0,s.zw)(e.$gettext("Karte hinzufügen")),1)]),this.taskDefinition.cards[this.selectedCardIndex]?((0,i.wg)(),(0,i.j4)(d,{key:0,class:"edited-memory-card",card:this.taskDefinition.cards[this.selectedCardIndex],"card-index":this.selectedCardIndex},null,8,["card","card-index"])):((0,i.wg)(),(0,i.iD)("div",xn,(0,s.zw)(e.$gettext("Keine Karte ist zum Bearbeiten ausgewählt.")),1))])}var Cn=n(1885);const Bn={class:"default"},Fn=["value"];function Pn(e,t,n,o,a,r){const l=(0,i.up)("EditedMemoryCardImage"),d=(0,i.up)("FileUpload");return(0,i.wg)(),(0,i.iD)("form",Bn,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Karte")),1),(0,i._)("div",null,[(0,i._)("h4",null,(0,s.zw)(e.$gettext("Bild")),1),e.card.file_id?((0,i.wg)(),(0,i.j4)(l,{key:0,card:e.card},null,8,["card"])):((0,i.wg)(),(0,i.j4)(d,{key:1,onFileUploaded:e.onImageUploaded},null,8,["onFileUploaded"]))]),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Alternativer Text"))+" ",1),(0,i._)("input",{type:"text",value:e.taskDefinition.cards[e.cardIndex].altText,onInput:t[0]||(t[0]=(...t)=>e.onInputAltText&&e.onInputAltText(...t))},null,40,Fn)])])])}const En=["src","alt"];function Un(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("img",{src:e.fileIdToUrl(e.card.file_id),alt:e.card.altText},null,8,En),(0,i._)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.deleteImage&&e.deleteImage(...t))},(0,s.zw)(e.$gettext("Bild Löschen")),1)],64)}var _n=(0,i.aZ)({name:"EditedMemoryCardImage",props:{card:{type:Object,required:!0}},computed:{taskDefinition:()=>Ve.h4.taskDefinition},methods:{fileIdToUrl:il,$gettext:v.RA,deleteImage(){const e=(0,Cn.ZP)(this.taskDefinition,(e=>{const t=e.cards.findIndex((e=>e.uuid===this.card.uuid));e.cards[t].file_id=""}));Ve.h4.performEdit({newTaskDefinition:e,undoBatch:{}})}}});const Mn=(0,B.Z)(_n,[["render",Un]]);var Rn=Mn;const Vn={key:0},Wn=["accept"];function Hn(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.uploadRequestPromise?((0,i.wg)(),(0,i.iD)("span",Vn,(0,s.zw)(e.$gettext("Datei wird hochgeladen")),1)):((0,i.wg)(),(0,i.iD)("input",{key:1,ref:"fileInput",type:"file",accept:e.accept,onChange:t[0]||(t[0]=(...t)=>e.onInputChange&&e.onInputChange(...t))},null,40,Wn)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{class:"validation-error",key:e},(0,s.zw)(e),1)))),128))],64)}var On=n(65),Zn=n(2333),Ln=(0,i.aZ)({name:"FileUpload",emits:["fileUploaded"],props:{accept:{type:String,required:!1,default:"image/*"}},data(){return{uploadRequestPromise:void 0,selectedFolderId:void 0,errors:[]}},async mounted(){await this.getUserFolders();const e=this.loadedUserFolders.find((e=>"Wysiwyg Uploads"===e.attributes.name));if(e)this.selectedFolderId=e.id;else{const e=(0,v.RA)('Das Verzeichnis "Wysiwyg Uploads" ist nicht vorhanden. Es können keine Dateien hochgeladen werden.');this.errors.push(e),console.error(e)}},computed:{...(0,On.Se)({relatedFolders:"folders/related"}),userId(){return window.STUDIP.USER_ID},userObject(){return{type:"users",id:`${this.userId}`}},loadedUserFolders(){let e=[],t=this.relatedFolders({parent:this.userObject,relationship:"folders"})??[];return t.forEach((t=>{"PublicFolder"===t.attributes["folder-type"]&&e.push(t)})),e}},methods:{$gettext:v.RA,...(0,On.nv)({_loadRelatedFolders:"folders/loadRelated"}),loadRelatedFolders(e){return this._loadRelatedFolders(e)},async getUserFolders(){const e=this.userObject,t="folders",n={"page[limit]":1e4};return await this.loadRelatedFolders({parent:e,relationship:t,options:n})},onInputChange(e){if(this.uploadRequestPromise)return void console.warn("FileUpload: onInputChange fired while uploadRequestPromise is already defined.");const t=this.$refs.fileInput,n=t.files?.item(0);if(n){if(!this.selectedFolderId){const e=(0,v.RA)("Kein Ordner ist ausgewählt. Die Datei kann nicht hochgeladen werden.");return console.error(e),void this.errors.push(e)}this.errors=[],this.uploadRequestPromise=(0,Zn.cn)({file:{attributes:{name:n.name}},fileData:n,folder:{id:this.selectedFolderId}}).then((e=>{this.$emit("fileUploaded",e),this.uploadRequestPromise=void 0,this.errors=[]})).catch((e=>{console.error(e),this.errors.push(e),this.uploadRequestPromise=void 0}))}else console.warn("FileUpload: onInputChange fired, but input.files[] is empty.")}}});const jn=(0,B.Z)(Ln,[["render",Hn]]);var qn=jn,Nn=(0,i.aZ)({name:"EditedMemoryCard",components:{FileUpload:qn,EditedMemoryCardImage:Rn},props:{card:{type:Object,required:!0},cardIndex:{type:Number,required:!0}},computed:{taskDefinition:()=>Ve.h4.taskDefinition},methods:{$gettext:v.RA,onImageUploaded(e){const t=(0,Cn.ZP)(this.taskDefinition,(t=>{t.cards[this.cardIndex].file_id=e.id}));Ve.h4.performEdit({newTaskDefinition:t,undoBatch:{}})},onInputAltText(e){const t=e.target.value,n=(0,Cn.ZP)(this.taskDefinition,(e=>{e.cards[this.cardIndex].altText=t}));Ve.h4.performEdit({newTaskDefinition:n,undoBatch:{type:"EditedAltText"}})},onInputAltTextBAD(e){const t=e.target.value;this.taskDefinition.cards[this.cardIndex].altText=t}}});const Qn=(0,B.Z)(Nn,[["render",Pn]]);var Yn=Qn,Gn=(0,i.aZ)({name:"MemoryEditor",components:{EditedMemoryCard:Yn},props:{},data(){return{selectedCardIndex:-1}},beforeMount(){this.taskDefinition.cards.length>0&&(this.selectedCardIndex=0)},methods:{$gettext:v.RA,urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"},selectCard(e){this.selectedCardIndex=e},addCard(){const e=(0,Cn.ZP)(this.taskDefinition,(e=>{e.cards.push({v:2,uuid:(0,b.Z)(),file_id:"",altText:""})}));Ve.h4.performEdit({newTaskDefinition:e,undoBatch:{}}),this.selectedCardIndex=this.taskDefinition.cards.length-1},deleteCard(e){const t=(0,Cn.ZP)(this.taskDefinition,(t=>{t.cards.splice(e,1)}));Ve.h4.performEdit({newTaskDefinition:t,undoBatch:{}}),e<=this.selectedCardIndex&&(this.selectedCardIndex=this.selectedCardIndex-1)}},computed:{taskDefinition:()=>Ve.h4.taskDefinition}});const Kn=(0,B.Z)(Gn,[["render",zn],["__scopeId","data-v-28c29d1d"]]);var Xn=Kn;const Jn={class:"h5pModule"},$n={class:"h5pMemoryGame"},ei={class:"h5pFeedbackContainer"},ti={class:"h5pFeedbackContainerTop"},ni={key:0,class:"h5pFeedbackText"},ii={class:"h5pFeedbackContainerCenter"},si={key:0,class:"h5pFeedbackText"},oi={class:"h5pButtonPanel"},ai=["textContent"];function ri(e,t,n,o,a,r){const l=(0,i.up)("MemoryCardComponent");return(0,i.wg)(),(0,i.iD)("div",Jn,[(0,i._)("div",null,(0,s.zw)(e.$gettext("Umgedrehte Karten: ")+this.amountOfFlips),1),(0,i._)("div",null,(0,s.zw)(e.$gettext("Aufgedeckte Paare: %{ amountOfPairsSolved } von %{ totalAmountOfPairs }",{amountOfPairsSolved:this.amountOfPairsSolved.toString(),totalAmountOfPairs:this.totalAmountOfPairs.toString()})),1),(0,i._)("div",$n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.cards,(t=>((0,i.wg)(),(0,i.j4)(l,{key:t.uuid,card:t,onClick:n=>e.onClickCard(t)},null,8,["card","onClick"])))),128))]),(0,i._)("div",ei,[(0,i._)("div",ti,[e.showResults&&e.feedbackMessage?((0,i.wg)(),(0,i.iD)("label",ni,(0,s.zw)(this.feedbackMessage),1)):(0,i.kq)("",!0)]),(0,i._)("div",ii,[e.showResults?((0,i.wg)(),(0,i.iD)("label",si,(0,s.zw)(this.resultMessage),1)):(0,i.kq)("",!0)])]),(0,i._)("div",oi,[e.showRetryButton?((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.retryButton),onClick:t[0]||(t[0]=(...t)=>e.onClickTryAgain&&e.onClickTryAgain(...t)),type:"button",class:"h5pButton"},null,8,ai)):(0,i.kq)("",!0)])])}var li="data:image/png;base64,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";const di=e=>((0,i.dD)("data-v-d12b3a0a"),e=e(),(0,i.Cn)(),e),ui={key:0,class:"memoryCardFront"},ci=["src","alt"],gi={key:1,class:"memoryCardBack"},hi=di((()=>(0,i._)("img",{src:li,class:"memoryImage"},null,-1))),pi=[hi];function mi(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["memoryCard",{memoryCardFlipped:e.card.flipped}])},[e.card.flipped?((0,i.wg)(),(0,i.iD)("div",ui,[(0,i._)("img",{src:e.fileIdToUrl(e.card.file_id),alt:e.card.altText,class:"memoryImage"},null,8,ci)])):((0,i.wg)(),(0,i.iD)("div",gi,pi))],2)}var ki=(0,i.aZ)({name:"MemoryCard",props:{card:{type:Object,required:!0}},computed:{},methods:{fileIdToUrl:il}});const fi=(0,B.Z)(ki,[["render",mi],["__scopeId","data-v-d12b3a0a"]]);var wi=fi,bi=(0,i.aZ)({name:"MemoryViewer",components:{MemoryCardComponent:wi},emits:["updateAttempt"],props:{task:{type:Object,required:!0}},data(){return{cards:[],firstFlippedCardId:void 0,amountOfFlips:0,showResults:!1,feedbackMessage:void 0,resultMessage:void 0}},methods:{$gettext:v.RA,onClickCard(e){if(!e.flipped)if(e.flipped=!0,console.log("Flipped",e.altText),this.amountOfFlips++,this.firstFlippedCardId){if(e.matchingCardId===this.firstFlippedCardId){e.solved=!0;const t=this.getCardById(this.firstFlippedCardId);t.solved=!0,console.log("Found a pair of",e.altText)}this.firstFlippedCardId=void 0}else this.resetAllUnsolvedCardsExcept(e.uuid),this.firstFlippedCardId=e.uuid},resetAllUnsolvedCardsExcept(e){for(const t of this.cards)t.solved||t.uuid===e||(t.flipped=!1)},onClickTryAgain(){this.amountOfFlips=0,this.firstFlippedCardId=void 0,this.resetCards(),this.shuffleCards()},resetCards(){for(const e of this.cards)e.flipped=!1,e.solved=!1},shuffleCards(){this.cards=this.cards.map((e=>({card:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({card:e})=>e))},getCardById(e){const t=this.cards.find((t=>t.uuid===e));if(!t)throw new Error("No card found with the given ID: "+e);return t}},computed:{totalAmountOfPairs(){return this.task.cards.length},amountOfPairsSolved(){let e=0;for(const t of this.cards)t.solved&&e++;return e/2},showRetryButton(){return this.amountOfPairsSolved===this.totalAmountOfPairs}},watch:{task:{handler(){console.log("watcher for this.task"),this.firstFlippedCardId=void 0,this.amountOfFlips=0,this.cards=this.task.cards.flatMap((e=>{const t=(0,b.Z)();return[{...e,flipped:!1,solved:!1,uuid:e.uuid,matchingCardId:t},{...e,flipped:!1,solved:!1,uuid:t,matchingCardId:e.uuid}]})),this.shuffleCards()},immediate:!0}}});const yi=(0,B.Z)(bi,[["render",ri],["__scopeId","data-v-79c877cc"]]);var vi=yi;const Ai=e=>((0,i.dD)("data-v-6d4e6d0e"),e=e(),(0,i.Cn)(),e),Ii={class:"imagePairingRow"},Di=["draggable","onDragstart","onDragend","onClick"],Ti=["src","alt"],Si={class:"targetImagesColumn"},xi=Ai((()=>(0,i._)("br",null,null,-1))),zi={class:"h5pButtonPanel"},Ci=["textContent"],Bi=["textContent"];function Fi(e,t,n,a,r,l){const d=(0,i.up)("TargetImage"),u=(0,i.up)("FeedbackElement");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Ii,[(0,i._)("div",{class:"draggableImagesColumn",draggable:"false",onDragover:t[0]||(t[0]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[1]||(t[1]=(0,o.iM)((()=>{}),["prevent"])),onDrop:t[2]||(t[2]=t=>e.onDropOnInteractiveImages(t))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.draggableImages,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t,draggable:!this.isDraggableImageUsed(t)&&!this.showResults,onDragstart:n=>e.startDragImage(n,t),onDragend:n=>e.endDragImage(n,t),onClick:n=>e.onClickDraggableImage(t),class:(0,s.C_)(["draggableImageContainer",{disabled:this.isDraggableImageUsed(t)||this.showResults||this.draggedImageId===t,selected:this.imageIdInteractedWith===t}])},[(0,i._)("img",{class:"draggableImage",src:e.fileIdToUrl(e.getImageById(t).file_id),alt:e.getImageById(t).altText,draggable:"false",ref_for:!0,ref:"draggableImages"},null,8,Ti)],42,Di)))),128))],32),(0,i._)("div",Si,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.task.imagePairs,(n=>((0,i.wg)(),(0,i.j4)(d,{class:(0,s.C_)(["targetImage",{outlined:!this.imagesDraggedOntoTargets.hasOwnProperty(n.targetImage.uuid)&&(this.draggedImageId||this.imageIdInteractedWith)}]),"draggable-image":e.getImageDraggedOntoTarget(n.targetImage.uuid),"target-image":e.getImageById(n.targetImage.uuid),isCorrect:this.isAnswerCorrect(n.targetImage.uuid),showResult:this.showResults,key:n.uuid,onDrop:t=>e.onDropOnTargetImage(t,n.targetImage.uuid),draggable:e.getImageDraggedOntoTarget(n.targetImage.uuid)&&!this.showResults,onDragstart:t=>e.startDragTargetImage(t,n.targetImage.uuid),onDragend:t=>e.endDragTargetImage(t,n.targetImage.uuid),onDragover:t[3]||(t[3]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[4]||(t[4]=(0,o.iM)((()=>{}),["prevent"])),onClick:t=>e.onClickTargetImage(n.targetImage.uuid)},null,8,["class","draggable-image","target-image","isCorrect","showResult","onDrop","draggable","onDragstart","onDragend","onClick"])))),128))])]),xi,e.showResults?((0,i.wg)(),(0,i.j4)(u,{key:0,achievedPoints:e.correctAnswers,maxPoints:e.maxPoints,resultMessage:e.resultMessage,feedback:e.task.feedback},null,8,["achievedPoints","maxPoints","resultMessage","feedback"])):(0,i.kq)("",!0),(0,i._)("div",zi,[this.showResults?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.checkButton),onClick:t[5]||(t[5]=t=>e.checkResults()),type:"button",class:"h5pButton"},null,8,Ci)),this.showResults?((0,i.wg)(),(0,i.iD)("button",{key:1,textContent:(0,s.zw)(this.task.strings.retryButton),onClick:t[6]||(t[6]=t=>e.reset()),type:"button",class:"h5pButton"},null,8,Bi)):(0,i.kq)("",!0)])],64)}const Pi={key:0,class:"grid-square two-images"},Ei={class:"image-container back"},Ui=["src","alt"],_i={class:"image-container front"},Mi=["src","alt"],Ri={key:1,class:"grid-square one-image"},Vi=["src","alt"];function Wi(e,t,n,o,a,r){return e.draggableImage?((0,i.wg)(),(0,i.iD)("div",Pi,[(0,i._)("div",Ei,[(0,i._)("img",{src:e.fileIdToUrl(e.targetImage.file_id),alt:e.targetImage.altText,class:(0,s.C_)(["image",{correct:this.isCorrect,incorrect:!this.isCorrect,showResult:this.showResult}]),draggable:"false"},null,10,Ui)]),(0,i._)("div",_i,[(0,i._)("img",{src:e.fileIdToUrl(e.draggableImage.file_id),alt:e.draggableImage.altText,class:(0,s.C_)(["image",{correct:this.isCorrect,incorrect:!this.isCorrect,showResult:this.showResult}]),draggable:"false"},null,10,Mi)])])):((0,i.wg)(),(0,i.iD)("div",Ri,[(0,i._)("img",{draggable:"false",src:e.fileIdToUrl(e.targetImage.file_id),alt:e.targetImage.altText,class:"image"},null,8,Vi)]))}var Hi=(0,i.aZ)({name:"TargetImage",components:{},props:{draggableImage:{type:Object,required:!1},targetImage:{type:Object,required:!0},isCorrect:{type:Boolean,required:!1},showResult:{type:Boolean,required:!1}},computed:{},methods:{fileIdToUrl:il}});const Oi=(0,B.Z)(Hi,[["render",Wi],["__scopeId","data-v-4febacf2"]]);var Zi=Oi,Li=(0,i.aZ)({name:"PairingViewer",components:{TargetImage:Zi,FeedbackElement:P},props:{task:{type:Object,required:!0}},emits:["updateAttempt"],data(){return{imageIdInteractedWith:void 0,draggedImageId:void 0,imagesDraggedOntoTargets:{},showResults:!1}},methods:{fileIdToUrl:il,isAnswerCorrect(e){const t=this.imagesDraggedOntoTargets[e];if(!t)return!1;const n=this.task.pairs.find((t=>t.targetElement.uuid===e));if(!n)throw new Error("could not find the pair to which the target id "+e+" belongs");return n.draggableElement.uuid===t},getImageDraggedOntoTarget(e){const t=this.imagesDraggedOntoTargets[e];return t?this.getImageById(t):void 0},startDragImage(e,t){if(!this.isDraggableImageUsed(t)){console.log("Dragging image:",t),this.imageIdInteractedWith=t,this.draggedImageId=t,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move";const n=this.$refs.draggableImages.find((e=>e.src==il(this.getImageById(t).file_id))),i=n?.parentElement;if(n&&i){const t=i.cloneNode(!0);t.style.top="0",t.style.left="0",t.style.position="absolute",t.style.zIndex="-999",i.parentElement.append(t),e.dataTransfer.setDragImage(t,i.clientWidth/2,i.clientHeight/2),setTimeout((()=>t.remove()))}}},endDragImage(e,t){this.imageIdInteractedWith=void 0,this.draggedImageId=void 0},startDragTargetImage(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("targetId",t);const n=this.imagesDraggedOntoTargets[t];if(n){this.imageIdInteractedWith=n;const i=this.$refs.draggableImages.find((e=>e.src==il(this.getImageById(n).file_id))),s=i?.parentElement;s&&e.dataTransfer.setDragImage(s,s.clientWidth/2,s.clientHeight/2),console.log("Dragging image:",this.imageIdInteractedWith,"from target image",t)}},endDragTargetImage(e,t){this.imageIdInteractedWith=void 0,this.draggedImageId=void 0},onDropOnTargetImage(e,t){if(!this.imageIdInteractedWith)return;const n=e.dataTransfer?.getData("targetId");n&&delete this.imagesDraggedOntoTargets[n],this.imagesDraggedOntoTargets[t]=this.imageIdInteractedWith,console.log("Dropped image:",this.imageIdInteractedWith,"on target:",t),this.imageIdInteractedWith=void 0,this.draggedImageId=void 0},getImageById(e){const t=this.imagesById[e];if(!t)throw new Error("No image found with the given ID: "+e);return t},onClickTargetImage(e){if(console.log("Clicked on target image",e),this.showResults)return;const t=this.imagesDraggedOntoTargets[e];t&&delete this.imagesDraggedOntoTargets[e],this.imageIdInteractedWith&&(this.imagesDraggedOntoTargets[e]=this.imageIdInteractedWith,this.imageIdInteractedWith=void 0)},isDraggableImageUsed(e){return Object.values(this.imagesDraggedOntoTargets).includes(e)},onClickDraggableImage(e){this.isDraggableImageUsed(e)||this.showResults||(console.log("Clicked on image:",e),this.imageIdInteractedWith=e)},onDropOnInteractiveImages(e){if(!this.imageIdInteractedWith)return;const t=e.dataTransfer?.getData("targetId");t&&delete this.imagesDraggedOntoTargets[t],console.log("Returned image:",this.imageIdInteractedWith),this.imageIdInteractedWith=void 0},checkResults(){this.showResults=!0},reset(){this.showResults=!1,this.imagesDraggedOntoTargets={}}},computed:{draggableImages(){return this.task.pairs.map((e=>({pair:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({pair:e})=>e.draggableElement.uuid))},imagesById(){const e={};for(const t of this.task.pairs)e[t.draggableElement.uuid]=t.draggableElement,e[t.targetElement.uuid]=t.targetElement;return e},correctAnswers(){let e=0;for(const t of this.task.pairs)this.isAnswerCorrect(t.targetElement.uuid)&&e++;return e},maxPoints(){return this.task.pairs.length},resultMessage(){let e=this.task.strings.resultMessage.replace(":correct",this.correctAnswers.toString());return e=e.replace(":total",this.maxPoints.toString()),e}}});const ji=(0,B.Z)(Li,[["render",Fi],["__scopeId","data-v-6d4e6d0e"]]);var qi=ji;const Ni={class:"main-flex"},Qi={class:"h5p-elements-overview"},Yi={class:"h5p-elements-settings"},Gi={class:"default"},Ki={value:"image"},Xi={value:"text"},Ji={value:"audio"},$i=["src"],es={value:"image"},ts={value:"text"},ns={value:"audio"};function is(e,t,n,a,r,l){const d=(0,i.up)("ElementPair");return(0,i.wg)(),(0,i.iD)("div",Ni,[(0,i._)("div",Qi,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.pairs,((t,n)=>((0,i.wg)(),(0,i.j4)(d,{key:t.uuid,class:(0,s.C_)({selected:n===this.selectedPairIndex}),pair:this.taskDefinition.pairs[n],"pair-index":n,onClick:t=>e.selectPair(n)},null,8,["class","pair","pair-index","onClick"])))),128))]),(0,i._)("div",Yi,[(0,i._)("form",Gi,[(0,i._)("fieldset",null,[(0,i._)("label",null,(0,s.zw)(e.$gettext("Eigenschaften")),1),(0,i._)("pre",null,(0,s.zw)(this.taskDefinition.pairs[this.selectedPairIndex]),1),(0,i._)("label",null,(0,s.zw)(e.$gettext("Karte A")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Typ"))+" ",1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>this.taskDefinition.pairs[this.selectedPairIndex].draggableElement.type=e)},[(0,i._)("option",Ki,(0,s.zw)(e.$gettext("Bild")),1),(0,i._)("option",Xi,(0,s.zw)(e.$gettext("Text")),1),(0,i._)("option",Ji,(0,s.zw)(e.$gettext("Audio")),1)],512),[[o.bM,this.taskDefinition.pairs[this.selectedPairIndex].draggableElement.type]])]),"image"==this.taskDefinition.pairs[this.selectedPairIndex].draggableElement.type?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.fileIdToUrl(this.taskDefinition.pairs[this.selectedPairIndex].draggableElement.file_id)},null,8,$i)):(0,i.kq)("",!0),(0,i._)("label",null,(0,s.zw)(e.$gettext("Karte B")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Typ"))+" ",1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>this.taskDefinition.pairs[this.selectedPairIndex].targetElement.type=e)},[(0,i._)("option",es,(0,s.zw)(e.$gettext("Bild")),1),(0,i._)("option",ts,(0,s.zw)(e.$gettext("Text")),1),(0,i._)("option",ns,(0,s.zw)(e.$gettext("Audio")),1)],512),[[o.bM,this.taskDefinition.pairs[this.selectedPairIndex].targetElement.type]])])])])])])}const ss={class:"h5pElementPair"},os={class:"h5pElement"},as={class:"h5pElement"};function rs(e,t,n,s,o,a){const r=(0,i.up)("EditedImagePairImage"),l=(0,i.up)("FileUpload");return(0,i.wg)(),(0,i.iD)("div",ss,[(0,i._)("div",os,["image"===e.pair.draggableElement.type?((0,i.wg)(),(0,i.j4)(r,{key:0,image:e.pair.draggableElement},null,8,["image"])):((0,i.wg)(),(0,i.j4)(l,{key:1,onFileUploaded:e.onUploadDraggableImage},null,8,["onFileUploaded"]))]),(0,i._)("div",as,["image"===e.pair.targetElement.type?((0,i.wg)(),(0,i.j4)(r,{key:0,image:e.pair.targetElement},null,8,["image"])):((0,i.wg)(),(0,i.j4)(l,{key:1,onFileUploaded:e.onUploadTargetImage},null,8,["onFileUploaded"]))])])}const ls=["src","alt"];function ds(e,t,n,s,o,a){return(0,i.wg)(),(0,i.iD)("img",{src:e.fileIdToUrl(e.image.file_id),alt:e.image.altText,class:"edited-image-pair-image"},null,8,ls)}var us=(0,i.aZ)({name:"EditedImagePairImage",props:{image:{type:Object,required:!0}},data(){return{}},methods:{fileIdToUrl:il},computed:{}});const cs=(0,B.Z)(us,[["render",ds],["__scopeId","data-v-87ed8de2"]]);var gs=cs,hs=(0,i.aZ)({name:"ElementPair",components:{FileUpload:qn,EditedImagePairImage:gs},props:{pair:{type:Object,required:!0},pairIndex:{type:Number,required:!0}},data(){return{}},methods:{$gettext:v.RA},computed:{}});const ps=(0,B.Z)(hs,[["render",rs],["__scopeId","data-v-7d2cd1fe"]]);var ms=ps,ks=(0,i.aZ)({name:"PairingEditor",components:{ElementPair:ms},props:{task:{type:Object,required:!0}},data(){return{selectedPairIndex:-1}},beforeMount(){this.taskDefinition.pairs.length>0&&(this.selectedPairIndex=0)},methods:{fileIdToUrl:il,$gettext:v.RA,urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"},selectPair(e){this.selectedPairIndex=e},addPair(){const e=(0,Cn.ZP)(this.taskDefinition,(e=>{e.pairs.push({uuid:(0,b.Z)(),draggableElement:{uuid:(0,b.Z)(),type:"image",file_id:"",altText:""},targetElement:{uuid:(0,b.Z)(),type:"image",file_id:"",altText:""}})}));Ve.h4.performEdit({newTaskDefinition:e,undoBatch:{}}),this.selectedPairIndex=this.taskDefinition.pairs.length-1},deletePair(e){const t=(0,Cn.ZP)(this.taskDefinition,(t=>{t.pairs.splice(e,1)}));Ve.h4.performEdit({newTaskDefinition:t,undoBatch:{}}),e<=this.selectedPairIndex&&(this.selectedPairIndex=this.selectedPairIndex-1)}},computed:{taskDefinition:()=>Ve.h4.taskDefinition}});const fs=(0,B.Z)(ks,[["render",is],["__scopeId","data-v-da9ec3ea"]]);var ws=fs;const bs={class:"imageRow"},ys=["draggable","onDragstart","onDragover","onDrop"],vs=["src","alt"],As={class:"h5pButtonPanel"},Is=["textContent"],Ds=["textContent"];function Ts(e,t,n,a,r,l){const d=(0,i.up)("FeedbackElement");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",bs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.images,(n=>((0,i.wg)(),(0,i.iD)("div",{key:n.uuid,class:"imageContainer",draggable:!this.showResults,onDragstart:t=>e.startDragImage(t,n),onDragover:t=>e.onDragOver(t,n),onDrop:t=>e.onDropImage(t,n)},[(0,i._)("img",{class:"image",draggable:"false",onDragover:t[0]||(t[0]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[1]||(t[1]=(0,o.iM)((()=>{}),["prevent"])),src:e.fileIdToUrl(n.file_id),alt:n.altText},null,40,vs),(0,i._)("span",{class:"imageDescription",onDragover:t[2]||(t[2]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:t[3]||(t[3]=(0,o.iM)((()=>{}),["prevent"]))},(0,s.zw)(n.altText),33)],40,ys)))),128))]),e.showResults?((0,i.wg)(),(0,i.j4)(d,{key:0,achievedPoints:e.correctAnswers,maxPoints:e.maxPoints,resultMessage:e.resultMessage,feedback:e.task.feedback},null,8,["achievedPoints","maxPoints","resultMessage","feedback"])):(0,i.kq)("",!0),(0,i._)("div",As,[this.showResults?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,textContent:(0,s.zw)(this.task.strings.checkButton),onClick:t[4]||(t[4]=t=>e.checkResults()),type:"button",class:"h5pButton"},null,8,Is)),this.showResults?((0,i.wg)(),(0,i.iD)("button",{key:1,textContent:(0,s.zw)(this.task.strings.retryButton),onClick:t[5]||(t[5]=t=>e.reset()),type:"button",class:"h5pButton"},null,8,Ds)):(0,i.kq)("",!0)])],64)}var Ss=(0,i.aZ)({name:"ImageSequencingViewer",components:{FeedbackElement:P},props:{task:{type:Object,required:!0}},emits:["updateAttempt"],data(){return{images:[],imageInteractedWith:void 0,showResults:!1}},beforeMount(){console.log("Before Mount")},methods:{fileIdToUrl:il,$gettext:v.RA,urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"},startDragImage(e,t){this.imageInteractedWith=t,console.log("Dragging image",t.altText)},onDropImage(e,t){console.log("Dropped image",this.imageInteractedWith?.altText),this.imageInteractedWith=void 0},onDragOver(e,t){if(this.imageInteractedWith&&this.imageInteractedWith!=t){const e=this.images.indexOf(this.imageInteractedWith),n=this.images.indexOf(t);console.log("Dragging image",this.imageInteractedWith?.altText,"(",e,") over target",t.altText,"(",n,")"),this.moveInArray(this.images,e,n)}},moveInArray(e,t,n){let i=e[t];e.splice(t,1),e.splice(n,0,i)},checkResults(){this.showResults=!0},reset(){this.showResults=!1,this.shuffleImages()},shuffleImages(){this.images=this.images.map((e=>({image:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({image:e})=>e))}},computed:{taskDefinition:()=>Ve.h4.taskDefinition,correctAnswers(){let e=0;for(let t=0;t<this.task.images.length;t++)this.task.images[t].uuid===this.images[t].uuid&&e++;return e},maxPoints(){return this.task.images.length},resultMessage(){let e=this.task.strings.resultMessage.replace(":correct",this.correctAnswers.toString());return e=e.replace(":total",this.maxPoints.toString()),e}},watch:{task:{handler(){console.log("watcher for this.task"),this.images=[...this.task.images],this.shuffleImages()},immediate:!0}}});const xs=(0,B.Z)(Ss,[["render",Ts],["__scopeId","data-v-8d8093aa"]]);var zs=xs;const Cs={class:"main-flex"},Bs={class:"cards-list"},Fs=["onClick"],Ps=["src","onClick"],Es={key:1,class:"edited-memory-card no-card-selected-placeholder"};function Us(e,t,n,a,r,l){const d=(0,i.up)("ImageSequencingEditorImage");return(0,i.wg)(),(0,i.iD)("div",Cs,[(0,i._)("div",Bs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.taskDefinition.images,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{key:t.uuid,class:(0,s.C_)({"cards-list-item":!0,"selected-card":n===this.selectedImageIndex}),onClick:t=>e.selectImage(n)},[(0,i.Uk)((0,s.zw)(n)+". ",1),(0,i._)("img",{class:"flex-child-element removeAnswerButton",src:e.urlForIcon("trash"),onClick:(0,o.iM)((t=>e.deleteImage(n)),["stop"]),alt:"an icon showing a trash bin"},null,8,Ps)],10,Fs)))),128)),(0,i._)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.addImage&&e.addImage(...t))},(0,s.zw)(e.$gettext("Bild hinzufügen")),1)]),this.taskDefinition.images[this.selectedImageIndex]?((0,i.wg)(),(0,i.j4)(d,{key:0,class:"edited-memory-card",image:this.taskDefinition.images[this.selectedImageIndex],"image-index":this.selectedImageIndex},null,8,["image","image-index"])):((0,i.wg)(),(0,i.iD)("div",Es,(0,s.zw)(e.$gettext("Keine Karte ist zum Bearbeiten ausgewählt.")),1))])}const _s={class:"default"},Ms=["src","alt"],Rs=["value"];function Vs(e,t,n,o,a,r){const l=(0,i.up)("FileUpload");return(0,i.wg)(),(0,i.iD)("form",_s,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Bild")),1),(0,i._)("div",null,[(0,i._)("h4",null,(0,s.zw)(e.$gettext("Das Bild")),1),e.image.file_id?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.fileIdToUrl(e.image.file_id),alt:e.image.altText,class:"image-sequencing-editor-image"},null,8,Ms)):((0,i.wg)(),(0,i.j4)(l,{key:1,onFileUploaded:e.onUploadImage},null,8,["onFileUploaded"]))]),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Alternativer Text"))+" ",1),(0,i._)("input",{type:"text",value:e.taskDefinition.images[e.imageIndex].altText,onInput:t[0]||(t[0]=(...t)=>e.onInputImageAltText&&e.onInputImageAltText(...t))},null,40,Rs)])])])}var Ws=(0,i.aZ)({name:"ImageSequencingEditorImage",components:{FileUpload:qn},props:{image:{type:Object,required:!0},imageIndex:{type:Number,required:!0}},data(){return{}},methods:{fileIdToUrl:il,$gettext:v.RA,onUploadImage(e){const t=(0,Cn.ZP)(this.taskDefinition,(t=>{t.images[this.imageIndex].file_id=e.id}));Ve.h4.performEdit({newTaskDefinition:t,undoBatch:{}})},onInputImageAltText(e){const t=e.target.value,n=(0,Cn.ZP)(this.taskDefinition,(e=>{e.images[this.imageIndex].altText=t}));Ve.h4.performEdit({newTaskDefinition:n,undoBatch:{type:"EditedImageAltText"}})}},computed:{taskDefinition:()=>Ve.h4.taskDefinition}});const Hs=(0,B.Z)(Ws,[["render",Vs],["__scopeId","data-v-0dd3efdb"]]);var Os=Hs,Zs=(0,i.aZ)({name:"ImageSequencingEditor",components:{ImageSequencingEditorImage:Os},props:{task:{type:Object,required:!0}},data(){return{selectedImageIndex:-1}},beforeMount(){this.taskDefinition.images.length>0&&(this.selectedImageIndex=0)},methods:{$gettext:v.RA,urlForIcon(e){return window.STUDIP.ASSETS_URL+"images/icons/blue/"+e+".svg"},selectImage(e){this.selectedImageIndex=e},addImage(){const e=(0,Cn.ZP)(this.taskDefinition,(e=>{e.images.push({v:2,uuid:(0,b.Z)(),file_id:"",altText:""})}));Ve.h4.performEdit({newTaskDefinition:e,undoBatch:{}}),this.selectedImageIndex=this.taskDefinition.images.length-1},deleteImage(e){const t=(0,Cn.ZP)(this.taskDefinition,(t=>{t.images.splice(e,1)}));Ve.h4.performEdit({newTaskDefinition:t,undoBatch:{}}),e<=this.selectedImageIndex&&(this.selectedImageIndex=this.selectedImageIndex-1)}},computed:{taskDefinition:()=>Ve.h4.taskDefinition}});const Ls=(0,B.Z)(Zs,[["render",Us],["__scopeId","data-v-2469d7fe"]]);var js=Ls,qs=n(4484);const Ns=(0,i._)("span",null,"Find The Hotspot - Editor",-1),Qs=(0,i._)("br",null,null,-1);function Ys(e,t,n,s,o,a){const r=(0,i.up)("FileUpload");return(0,i.wg)(),(0,i.iD)(i.HY,null,[Ns,Qs,(0,i.Wm)(r,{onFileUploaded:e.onImageUploaded},null,8,["onFileUploaded"])],64)}var Gs=(0,i.aZ)({name:"FindTheHotspotEditor",components:{FileUpload:qn},props:{taskDefinition:{type:Object,required:!0}},data(){return{}},methods:{onImageUploaded(e){const t=(0,Cn.ZP)(this.taskDefinition,(t=>{t.image.file_id=e.id}));Ve.h4.performEdit({newTaskDefinition:t,undoBatch:{}})}},computed:{currentUndoRedoState:()=>Ve.h4.undoRedoStack[Ve.h4.undoRedoIndex]}});const Ks=(0,B.Z)(Gs,[["render",Ys]]);var Xs=Ks;const Js=(0,i._)("span",null,"Find The Hotspot - Viewer",-1),$s=(0,i._)("br",null,null,-1),eo=["src"];function to(e,t,n,s,o,a){return(0,i.wg)(),(0,i.iD)(i.HY,null,[Js,$s,(0,i._)("img",{src:e.fileIdToUrl(e.task.image.file_id)},null,8,eo)],64)}var no=(0,i.aZ)({name:"FindTheHotspotViewer",props:{task:{type:Object,required:!0}},emits:["updateAttempt"],data(){return{}},methods:{fileIdToUrl:il},computed:{}});const io=(0,B.Z)(no,[["render",to]]);var so=io,oo=n(1542);const ao=qs.z.object({type:qs.z.literal("overlay"),id:qs.z.string(),startTime:qs.z.number(),endTime:qs.z.number(),x:qs.z.number(),y:qs.z.number(),width:qs.z.number(),height:qs.z.number(),text:qs.z.string(),pauseWhenVisible:qs.z.boolean().optional().default(!0)}),ro=ao.omit({text:!0}).extend({v:qs.z.literal(2),content_wysiwyg:qs.z.string()}),lo=qs.z.union([ao,ro]).transform((e=>{if(Object.hasOwn(e,"v"))return e;{const t=e,{text:n,...i}=t,s={v:2,content_wysiwyg:n,...i};return console.log("Migrating from overlaySchema_v1 to overlaySchema_v2","v1:",t,"v2:",s),s}})),uo=qs.z.object({type:qs.z.literal("lmbTask"),id:qs.z.string(),startTime:qs.z.number(),endTime:qs.z.number(),x:qs.z.number(),y:qs.z.number(),taskDefinition:qs.z.lazy((()=>vl)),pauseWhenVisible:qs.z.boolean().optional().default(!0)}),co=qs.z.union([lo,uo]).refine((e=>e.endTime>e.startTime),{message:"endTime cannot be earlier than startTime",path:["endTime"]}),go=qs.z.object({type:qs.z.literal("none")}),ho=qs.z.object({type:qs.z.literal("youtube"),url:qs.z.string()}),po=qs.z.object({type:qs.z.literal("studipFileReference"),file:oo.nU}),mo=qs.z.object({v:qs.z.literal(2),type:qs.z.literal("studipFileReference"),file_id:qs.z.string()}),ko=qs.z.union([po,mo]).transform((e=>{if(Object.hasOwn(e,"v"))return e;{const t=e,n=new URLSearchParams(t.file.url),i=n.get("file_id");if(!i)throw new Error(`Could not migrate studip file reference schema v1 to v2. The query param "file_id" was not found in the string file.url: "${t.file.url}"`);const s={v:2,type:"studipFileReference",file_id:i};return console.log("Migrating from studipFileVideoSchema_v1 to studipFileVideoSchema_v2","v1:",t,"v2:",s),s}})),fo=qs.z.union([go,ho,ko]),wo=qs.z.object({task_type:qs.z.literal("InteractiveVideo"),video:fo,autoplay:qs.z.boolean().optional().default(!1),startAt:qs.z.number().optional().default(0),disableNavigation:qs.z.union([qs.z.literal("not disabled"),qs.z.literal("forward disabled"),qs.z.literal("forward and backward disabled")]).default("not disabled"),interactions:qs.z.array(co)});function bo(e){switch(e.type){case"lmbTask":return xl(e.taskDefinition.task_type);case"overlay":return(0,v.RA)("Einblendung")}}function yo(e){switch(e.type){case"overlay":return"item";case"lmbTask":return Cl(e.taskDefinition.task_type)}}const vo={style:{display:"none"}},Ao=(0,i.Uk)(" Task definition: ");function Io(e,t,n,o,a,r){const l=(0,i.up)("SelectVideo"),d=(0,i.up)("TabComponent"),u=(0,i.up)("AddInteractions"),c=(0,i.up)("TabsComponent");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{title:e.$gettext("1. Video auswählen"),icon:"video2"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{"task-definition":e.taskDefinition},null,8,["task-definition"])])),_:1},8,["title"]),(0,i.Wm)(d,{title:e.$gettext("2. Interaktionen hinzufügen"),icon:"content"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"task-definition":e.taskDefinition},null,8,["task-definition"])])),_:1},8,["title"])])),_:1}),(0,i._)("div",vo,[Ao,(0,i._)("pre",null,(0,s.zw)(e.taskDefinition),1)])],64)}const Do={class:"cw-tabs"},To={role:"tablist",class:"cw-tabs-nav"},So=["onClick","aria-selected","aria-controls","id"];function xo(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("div",Do,[(0,i._)("div",To,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.tabs,(t=>((0,i.wg)(),(0,i.iD)("button",{key:t.title,onClick:n=>e.activeTabHash=t.hash,class:(0,s.C_)({"is-active":t.hash===e.activeTabHash,[`cw-tabs-nav-icon-text-${t.icon}`]:""!==t.icon&&""!==t.name,[`cw-tabs-nav-icon-solo-${t.icon}`]:""!==t.icon&&""===t.name}),"aria-selected":t.hash===e.activeTabHash,"aria-controls":t.hash,id:"#"+t.hash,tabindex:0},(0,s.zw)(t.title),11,So)))),128))]),(0,i.WI)(e.$slots,"default")])}var zo=(0,i.aZ)({data(){return{activeTabHash:"",tabs:[]}},provide(){return{addTab:e=>{const t=this.tabs.push(e);1===t&&(this.activeTabHash=e.hash)},activeTabHash:(0,i.Fl)((()=>this.activeTabHash))}}});const Co=(0,B.Z)(zo,[["render",xo]]);var Bo=Co;const Fo=["aria-labelledby"];function Po(e,t,n,a,r,l){return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{role:"tabpanel",class:(0,s.C_)(["cw-tab cw-tabs-content",{"cw-tab-active":e.isActive}]),"aria-labelledby":e.buttonSelector},[(0,i.WI)(e.$slots,"default")],10,Fo)),[[o.F8,e.isActive]])}var Eo=(0,i.aZ)({inject:["activeTabHash","addTab"],props:{title:{type:String,required:!0},icon:{type:String,required:!1,default:""}},data(){return{hash:"",isActive:!1}},created(){this.hash="#"+this.title.toLowerCase().replace(/ /g,"-"),this.addTab({title:this.title,hash:this.hash,icon:this.icon})},watch:{activeTabHash(){this.isActive=this.activeTabHash===this.hash}},computed:{buttonSelector(){return"#"+this.hash}}});const Uo=(0,B.Z)(Eo,[["render",Po]]);var _o=Uo,Mo=n(4870);const Ro=e=>((0,i.dD)("data-v-e926de64"),e=e(),(0,i.Cn)(),e),Vo={ref:"videoJsContainer"},Wo=["onClick","title"],Ho=["title"],Oo=["title"],Zo=["title"],Lo=Ro((()=>(0,i._)("div",{class:"arrow","data-popper-arrow":""},null,-1))),jo={class:"active-interaction"};function qo(e,t,n,a,r,l){const d=(0,i.up)("LmbTaskInteraction"),u=(0,i.up)("OverlayInteraction");return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["video-player-root",{"drag-in-progress":!!e.dragState}]),ref:"root"},[(0,i._)("div",Vo,null,512),e.selectedInteractionId?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"cancel-selection-overlay",onClick:t[0]||(t[0]=t=>e.editor.selectInteraction(void 0))})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.task.interactions,(t=>((0,i.wg)(),(0,i.iD)("button",{class:"progress-bar-interaction-marker",key:t.id,style:(0,s.j5)(e.progressBarInteractionMarkerStyle(t)),onClick:n=>e.onClickInteractionMarker(t),title:e.$gettext("Zu %{ interaction } springen",{interaction:e.printInteractionType(t)})},null,12,Wo)))),128)),e.editor?((0,i.wg)(),(0,i.iD)("div",{key:1,ref:"selectedInteractionTooltip",class:(0,s.C_)(["selected-interaction-tooltip",{hidden:!e.interactionForPopper}])},["lmbTask"===e.selectedInteraction?.type?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"small-button visibility-visible",onClick:t[1]||(t[1]=t=>e.activateInteraction(e.selectedInteraction)),title:e.$gettext("Vorschau")},null,8,Ho)):(0,i.kq)("",!0),(0,i._)("button",{type:"button",class:"small-button edit",onClick:t[2]||(t[2]=t=>e.editInteraction(e.selectedInteraction)),title:e.$gettext("Bearbeiten")},null,8,Oo),(0,i._)("button",{type:"button",class:"small-button trash",onClick:t[3]||(t[3]=t=>e.editor?.deleteInteraction(e.selectedInteractionId)),title:e.$gettext("Löschen")},null,8,Zo),Lo],2)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.visibleInteractions,(t=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t.id},["lmbTask"===t.type?((0,i.wg)(),(0,i.j4)(d,{key:0,id:`interaction-${e.uid}-${t.id}`,class:"video-player-interaction",style:(0,s.j5)({left:100*t.x+"%",top:100*t.y+"%"}),interaction:t,onClick:n=>e.editor?.selectInteraction(t.id),onPointerdown:n=>e.onPointerDownInteraction(n,t),onPointermove:n=>e.onPointerMoveInteraction(n,t),onPointerup:n=>e.onPointerUpInteraction(n,t),onActivateInteraction:e.activateInteraction},null,8,["id","style","interaction","onClick","onPointerdown","onPointermove","onPointerup","onActivateInteraction"])):"overlay"===t.type?((0,i.wg)(),(0,i.j4)(u,{key:1,id:`interaction-${e.uid}-${t.id}`,class:"video-player-interaction",style:(0,s.j5)({left:100*t.x+"%",top:100*t.y+"%",width:100*t.width+"%",height:100*t.height+"%"}),interaction:t,onClick:n=>e.editor?.selectInteraction(t.id),onPointerdown:n=>e.onPointerDownInteraction(n,t),onPointermove:n=>e.onPointerMoveInteraction(n,t),onPointerup:n=>e.onPointerUpInteraction(n,t),onPointerDownResizeHandle:e.onPointerDownResizeHandle,onPointerMoveResizeHandle:e.onPointerMoveResizeHandle,onPointerUpResizeHandle:e.onPointerUpResizeHandle},null,8,["id","style","interaction","onClick","onPointerdown","onPointermove","onPointerup","onPointerDownResizeHandle","onPointerMoveResizeHandle","onPointerUpResizeHandle"])):(0,i.kq)("",!0)],64)))),128)),(0,i.Wm)(o.uT,{name:"fade"},{default:(0,i.w5)((()=>["lmbTask"===e.activeInteraction?.type?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"active-interaction-container",onClick:t[5]||(t[5]=(0,o.iM)(((...t)=>e.closeInteraction&&e.closeInteraction(...t)),["self"]))},[(0,i._)("div",jo,[(0,i._)("h1",null,(0,s.zw)(e.printTaskType(e.activeInteraction.taskDefinition.task_type)),1),((0,i.wg)(),(0,i.j4)((0,i.LL)(e.viewerForTaskType(e.activeInteraction.taskDefinition.task_type)),{task:e.activeInteraction.taskDefinition},null,8,["task"])),(0,i._)("button",{type:"button",class:"button cancel",onClick:t[4]||(t[4]=(...t)=>e.closeInteraction&&e.closeInteraction(...t))},(0,s.zw)(e.$gettext("Schließen")),1)])])):(0,i.kq)("",!0)])),_:1})],2)}var No=n(304);n(1608);const Qo=Symbol("Interactive Video Editor state"),Yo=e=>((0,i.dD)("data-v-ab6f7b1e"),e=e(),(0,i.Cn)(),e),Go=["data-hover-tooltip"],Ko={class:"interaction-label"},Xo=Yo((()=>(0,i._)("div",{class:"icon-circle-border"},null,-1)));function Jo(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("button",{type:"button",class:(0,s.C_)(["lmb-task-interaction",{selected:e.editor?.selectedInteractionId.value===e.interaction.id,editor:!!e.editor}]),"data-hover-tooltip":e.printTaskType(e.interaction.taskDefinition.task_type),onClick:t[0]||(t[0]=t=>!this.editor&&e.$emit("activateInteraction",e.interaction))},[(0,i._)("div",Ko,(0,s.zw)(e.printTaskType(e.interaction.taskDefinition.task_type)),1),Xo,(0,i._)("div",{class:(0,s.C_)(["icon-circle button no-hover-effect",e.iconForTaskType(e.interaction.taskDefinition.task_type)])},null,2)],10,Go)}var $o=(0,i.aZ)({name:"LmbTaskInteraction",methods:{iconForTaskType:Cl,printTaskType:xl},setup(){return{editor:(0,i.f3)(Qo)}},props:{interaction:{type:Object,required:!0}}});const ea=(0,B.Z)($o,[["render",Jo],["__scopeId","data-v-ab6f7b1e"]]);var ta=ea,na=n(3910);const ia=["data-hover-tooltip"],sa=["onPointerdown","onPointermove","onPointerup"],oa=["innerHTML"];function aa(e,t,n,a,r,l){return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["overlay",{selected:e.editor?.selectedInteractionId.value===e.interaction.id,editor:!!e.editor}]),"data-hover-tooltip":e.$gettext("Einblendung")},[e.editor?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(e.resizeHandles,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:(0,s.C_)(["resize-handle",t]),onPointerdown:(0,o.iM)((n=>e.onPointerDownResizeHandle(n,t)),["stop"]),onPointermove:(0,o.iM)((n=>e.onPointerMoveResizeHandle(n,t)),["stop"]),onPointerup:(0,o.iM)((n=>e.onPointerUpResizeHandle(n,t)),["stop"])},null,42,sa)))),128)):(0,i.kq)("",!0),(0,i._)("div",{class:"overlay-content",innerHTML:e.interaction.content_wysiwyg},null,8,oa)],10,ia)}var ra=(0,i.aZ)({name:"OverlayInteraction",methods:{$gettext:v.RA,onPointerDownResizeHandle(e,t){this.$emit("pointerDownResizeHandle",{event:e,handle:t,interaction:this.interaction})},onPointerMoveResizeHandle(e,t){this.$emit("pointerMoveResizeHandle",{event:e,handle:t,interaction:this.interaction})},onPointerUpResizeHandle(e,t){this.$emit("pointerUpResizeHandle",{event:e,handle:t,interaction:this.interaction})}},setup(){return{editor:(0,i.f3)(Qo)}},data(){return{resizeHandles:["left","top-left","top","top-right","right","bottom-right","bottom","bottom-left"]}},props:{interaction:{type:Object,required:!0}}});const la=(0,B.Z)(ra,[["render",aa],["__scopeId","data-v-314d185c"]]);var da=la;let ua;n(5054);var ca=(0,i.aZ)({name:"VideoPlayer",components:{OverlayInteraction:da,LmbTaskInteraction:ta},setup(){return{editor:(0,i.f3)(Qo)}},props:{task:{type:Object,required:!0}},data(){return{player:null,time:0,playedTime:0,isPlaying:!1,dragState:void 0,activeInteraction:void 0,progressBarParameters:{widthPixels:1,xOffsetPixels:0},progressBarObserver:void 0,videoInfo:Promise.resolve({type:"none"})}},computed:{...(0,On.Se)({fileRefById:"file-refs/byId"}),uid(){return(0,b.Z)()},interactionForPopper(){return this.selectedInteraction&&this.visibleInteractions.includes(this.selectedInteraction)?this.selectedInteraction:void 0},selectedInteraction(){return this.task.interactions.find((e=>e.id===this.selectedInteractionId))},selectedInteractionId(){return this.editor?.selectedInteractionId.value},visibleInteractions(){return this.task.interactions.filter((e=>e.startTime<=this.time&&e.endTime>this.time))},timeAndVisibleInteractions(){return[this.time,this.visibleInteractions]}},watch:{"task.video":{handler(e){console.log("video prop changed",e),this.videoInfo=this.loadVideoInfo(e),this.videoInfo.then((e=>{this.initializePlayer(e)}))},immediate:!0},timeAndVisibleInteractions([e,t],[n,i]){const s=this.isPlaying&&e>n,o=t.find((e=>!i.includes(e)&&e.pauseWhenVisible));s&&o&&(console.log("pausing for interaction: ",o),this.player.pause())},interactionForPopper:{immediate:!0,handler:function(e){ua?.destroy(),e&&this.$nextTick((()=>{const t=document.getElementById(`interaction-${this.uid}-${e.id}`),n=this.$refs.selectedInteractionTooltip;ua=(0,na.fi)(t,n,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,8]}}]})}))}}},methods:{printInteractionType:bo,$gettext:v.RA,printTaskType:xl,viewerForTaskType:Tl,...(0,On.nv)({loadFileRef:"file-refs/loadById"}),onPlayerReady(){console.log("player ready")},async loadVideoInfo(e){switch(e.type){case"youtube":case"none":return e;case"studipFileReference":{await this.loadFileRef({id:e.file_id});const t=Zn.DU.parse(this.fileRefById({id:e.file_id}));return{...e,mime_type:t.attributes["mime-type"],download_url:t.meta["download-url"]}}}},videoUrl(e){switch(e.type){case"youtube":return e.url;case"studipFileReference":return e.download_url;default:return""}},videoType(e){switch(e.type){case"youtube":return"video/youtube";case"studipFileReference":return e.mime_type;default:return""}},initializePlayer(e){this.progressBarObserver?.disconnect(),this.player?.dispose();const t=document.createElement("video-js");t.classList.add("video-js","vjs-fluid"),this.$refs.videoJsContainer.appendChild(t),this.player=(0,No["default"])(t,{techOrder:["html5","youtube"],sources:[{src:this.videoUrl(e),type:this.videoType(e)}],controls:!0,controlBar:{children:["playToggle","progressControl","currentTimeDisplay","timeDivider","durationDisplay","volumePanel","fullscreenToggle"],volumePanel:{inline:!1}},autoplay:this.task.autoplay&&!this.editor,muted:this.task.autoplay&&!this.editor},this.onPlayerReady),this.player.on("timeupdate",(()=>{const e=this.player.currentTime();e&&(this.$emit("timeupdate",e),this.time=e,this.isPlaying&&!this.player.paused()&&(this.playedTime=Math.max(this.playedTime,e)))})),this.player.on("loadedmetadata",(()=>{this.playedTime=this.task.startAt,this.player.currentTime(this.task.startAt),this.task.autoplay&&!this.editor&&this.player.play(),this.$emit("metadataChange",{length:this.player.duration()})})),this.player.on("playing",(()=>{this.isPlaying=!0})),this.player.on(["waiting","pause"],(()=>{this.isPlaying=!1}));const n=()=>{"forward disabled"===this.task.disableNavigation?this.player.currentTime()-this.playedTime>.5&&this.player.currentTime(this.playedTime):"forward and backward disabled"===this.task.disableNavigation&&Math.abs(this.player.currentTime()-this.playedTime)>.5&&this.player.currentTime(this.playedTime)};this.player.on("seeking",(()=>{this.editor||n()})),this.player.on("seeked",(()=>{this.editor||n()}));const i=t.getElementsByClassName("vjs-progress-holder"),s=i.item(0);s?(this.progressBarObserver=new ResizeObserver((e=>{const t=this.$refs.root,n=t.getBoundingClientRect().x,i=s.getBoundingClientRect().x,o=i-n;this.progressBarParameters.xOffsetPixels=o,this.progressBarParameters.widthPixels=s.clientWidth})),this.progressBarObserver.observe(s)):console.error("no progress holder found")},activateInteraction(e){this.activeInteraction=e,this.player.pause()},closeInteraction(){this.activeInteraction=void 0},editInteraction(e){this.editor.editInteraction(e.id)},onPointerDownResizeHandle(e){if(console.log("onPointerDownResizeHandle"),!this.editor)return;const{event:t,handle:n,interaction:i}=e;this.editor.selectInteraction(i.id),this.dragState={type:"resizeInteraction",interactionId:i.id,mouseStartPos:[t.clientX,t.clientY],interactionStartPos:[i.x,i.y],interactionStartSize:[i.width,i.height],handle:n},t.target.setPointerCapture(t.pointerId)},onPointerUpResizeHandle(e){console.log("onPointerUpResizeHandle"),this.dragState=void 0,e.event.target.releasePointerCapture(e.event.pointerId)},onPointerMoveResizeHandle(e){const{event:t,handle:n,interaction:i}=e;if("resizeInteraction"===this.dragState?.type&&this.dragState.interactionId===i.id){const e=this.$refs.root.getBoundingClientRect(),{interactionStartPos:[s,o],interactionStartSize:[a,r]}=(document.getElementById(`interaction-${this.uid}-${i.id}`),this.dragState);let l=s,d=a,u=o,c=r;const g=t.clientX/e.width,h=t.clientX-this.dragState.mouseStartPos[0],p=h/e.width,m=t.clientY/e.height,k=t.clientY-this.dragState.mouseStartPos[1],f=k/e.height;"left"===n||"top-left"===n||"bottom-left"===n?g>s+a?(l=s+a,d=g-l):(l=s+p,d=a-p):"right"!==n&&"top-right"!==n&&"bottom-right"!==n||(g<s?(l=g,d=s-g):(l=s,d=a+p)),"top-left"===n||"top"===n||"top-right"===n?m>o+r?(u=o+r,c=m-u):(u=o+f,c=r-f):"bottom-left"!==n&&"bottom"!==n&&"bottom-right"!==n||(m<o?(u=m,c=o-m):(u=o,c=r+f));let w=i.height,b=i.width,y=i.x,v=i.y;c>.05&&(w=c,v=u),d>.05&&(b=d,y=l);const A=y>.95||y+b<.05,I=v>.95||v+w<.05;A&&(y=i.x,b=i.width),I&&(v=i.y,w=i.height),this.editor.resizeOverlay(i.id,y,v,b,w),ua?.update()}},onPointerDownInteraction(e,t){console.log("onPointerDownInteraction"),this.editor&&(this.editor.selectInteraction(t.id),this.dragState={type:"dragInteraction",interactionId:t.id,mouseStartPos:[e.clientX,e.clientY],interactionStartPos:[t.x,t.y]},e.target.setPointerCapture(e.pointerId))},onPointerUpInteraction(e,t){console.log("onPointerUpInteraction"),this.dragState=void 0,e.target.releasePointerCapture(e.pointerId)},onPointerMoveInteraction(e,t){if("dragInteraction"===this.dragState?.type&&this.dragState.interactionId===t.id){const t=this.$refs.root.getBoundingClientRect(),n=e.currentTarget,i=e.clientX-this.dragState.mouseStartPos[0],s=i/t.width,o=this.dragState.interactionStartPos[0]+s,a=n.clientWidth/t.width,r=.05-a,l=.95,d=Math.min(l,Math.max(r,o)),u=e.clientY-this.dragState.mouseStartPos[1],c=u/t.height,g=this.dragState.interactionStartPos[1]+c,h=n.clientHeight/t.height,p=.05-h,m=.95,k=Math.min(m,Math.max(p,g)),f=this.dragState.interactionId;this.editor?.dragInteraction(f,d,k),ua?.update()}},progressBarInteractionMarkerStyle(e){const t=e.startTime/(this.player?.duration()??1),n=this.progressBarParameters.widthPixels*t;return{left:`calc(${this.progressBarParameters.xOffsetPixels}px +\n        ${n}px - 0.25em)`}},onClickInteractionMarker(e){this.editor?.selectInteraction(e.id);const t=()=>{const t=document.getElementById(`interaction-${this.uid}-${e.id}`);t.focus({focusVisible:!0})};this.visibleInteractions.includes(e)?t():this.player.one("seeked",(()=>{this.$nextTick(t)}));const n=.2,i=this.player.currentTime()-e.startTime;(i<0||i>n)&&this.player.currentTime(e.startTime+n/2)}},beforeUnmount(){this.progressBarObserver?.disconnect()}});const ga=(0,B.Z)(ca,[["render",qo],["__scopeId","data-v-e926de64"]]);var ha=ga;const pa={class:"tick-label"},ma=["onClick","title"],ka={class:"timeline-interactions"},fa=["title"],wa={class:"overflow-container"},ba=["onClick","onPointerdown","onPointermove","onPointerup"],ya={class:"timeline-interaction-label"},va=["title","onClick"],Aa=["onPointerdown","onPointermove","onPointerup"],Ia=["onPointerdown","onPointermove","onPointerup"],Da={style:{"white-space":"pre-wrap",display:"none"}};function Ta(e,t,n,a,r,l){return(0,i.wg)(),(0,i.iD)("div",{ref:"root",class:"timeline-root",onDragoverCapture:t[6]||(t[6]=(...t)=>e.onDragOverTimeline&&e.onDragOverTimeline(...t))},[(0,i._)("div",{class:"timeline-axis",ref:"timelineAxis",onPointerdown:t[1]||(t[1]=(...t)=>e.onPointerDownAxis&&e.onPointerDownAxis(...t))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.axisScale,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"tick",key:n},[(0,i._)("div",pa,(0,s.zw)(n%5===0?e.formatVideoTimestamp(t):" "),1),(0,i._)("div",{class:(0,s.C_)(["tick-line",{major:n%5===0}])},null,2)])))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.visibleInteractions,(n=>((0,i.wg)(),(0,i.iD)("button",{key:n.id,class:"interaction-marker",style:(0,s.j5)(e.interactionMarkerStyle(n)),onPointerdown:t[0]||(t[0]=(0,o.iM)((()=>{}),["stop"])),onClick:(0,o.iM)((t=>{e.onClickInteraction(n),e.$emit("timelineSeek",n.startTime+.1)}),["stop"]),title:e.$gettext("Zu %{ interaction } springen",{interaction:e.printInteractionType(n)})},null,44,ma)))),128))],544),(0,i._)("div",{class:(0,s.C_)(["timeline",{"pan-timeline":"panTimeline"===this.dragState?.type}]),ref:"timeline",onPointerdown:t[3]||(t[3]=(0,o.iM)(((...t)=>e.onPointerDownAxis&&e.onPointerDownAxis(...t)),["self"])),onWheel:t[4]||(t[4]=(...t)=>e.onWheel&&e.onWheel(...t)),onContextmenu:t[5]||(t[5]=(0,o.iM)((()=>{}),["prevent"]))},[(0,i._)("div",ka,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.visibleInteractions,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:(0,s.C_)(["timeline-interaction",{selected:e.selectedInteractionId===t.id}]),style:(0,s.j5)(e.timelineInteractionStyle(t)),title:e.printInteractionType(t)},[(0,i._)("div",wa,[(0,i._)("button",{type:"button",class:(0,s.C_)(["button select-interaction",e.iconForInteraction(t)]),onClick:(0,o.iM)((n=>e.onClickInteraction(t)),["stop"]),onPointerdown:n=>e.onPointerDownInteraction(n,t),onPointermove:n=>e.onPointerMoveInteraction(n,t),onPointerup:n=>e.onPointerUpInteraction(n,t)},[(0,i._)("span",ya,(0,s.zw)(e.printInteractionType(t)),1)],42,ba),t.endTime<e.viewportEnd?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"small-button trash delete-interaction",title:e.$gettext("Löschen"),onClick:n=>e.$emit("deleteInteraction",t.id)},null,8,va)):(0,i.kq)("",!0)]),(0,i._)("div",{class:"interaction-drag-handle start",onPointerdown:n=>e.onPointerDownInteractionStart(n,t),onPointermove:n=>e.onPointerMoveInteractionStart(n,t),onPointerup:n=>e.onPointerUpInteractionStart(n,t)},null,40,Aa),(0,i._)("div",{class:"interaction-drag-handle end",onPointerdown:n=>e.onPointerDownInteractionEnd(n,t),onPointermove:n=>e.onPointerMoveInteractionEnd(n,t),onPointerup:n=>e.onPointerUpInteractionEnd(n,t)},null,40,Ia)],14,fa)))),128))]),(0,i._)("div",{class:"time-marker",draggable:"true",onDragstart:t[2]||(t[2]=(...t)=>e.onDragStartTimeMarker&&e.onDragStartTimeMarker(...t)),style:(0,s.j5)({left:e.positionForTimeMarker})},null,36)],34),(0,i._)("div",Da,(0,s.zw)({zoomTransform:e.zoomTransform,viewportWidthEm:e.viewportWidthEm,viewportWidthSeconds:e.viewportWidthSeconds,viewportStart:e.viewportStart,viewportEnd:e.viewportEnd,dragState:e.dragState}),1)],544)}
/**
 * Get the equivalent EM value on a given element with a given pixel value.
 *
 * Normally the number of pixel specified should come from the element itself (e.g. element.style.height) since EM is
 * relative.
 *
 * @param {Object} element - The HTML element.
 * @param {Number} pixelValue - The number of pixel to convert in EM on this specific element.
 * @author Nicolas Bouvrette
 * @license CC BY-SA 3.0 https://stackoverflow.com/a/34540037/7359454
 * Adapted by Ann Yanich
 *
 * @returns {Boolean|undefined} The EM value, or undefined if unable to convert.
 */
function Sa(e,t){if(e.parentNode){const n=parseFloat(window.getComputedStyle(e.parentNode).fontSize),i=parseFloat(window.getComputedStyle(e).fontSize),s=i/n*i;return t/s}}var xa=n(21),za=n(2894),Ca=(0,i.aZ)({name:"VideoTimeline",setup(){return{editor:(0,i.f3)(Qo)}},props:{currentTime:{type:Number,required:!0},videoMetadata:{type:Object,required:!0},task:{type:Object,required:!0},selectedInteractionId:{type:String,required:!1}},data(){return{dragState:void 0,zoomTransform:{t:0,k:1},viewportWidthEm:1}},mounted(){const e=new IntersectionObserver((()=>this.recomputeViewportWidth()));e.observe(this.$refs.timelineAxis);const t=e=>{const t=this.pixelsToSeconds(e.dx),n=this.zoomTransform.t-t;this.zoomTransform.t=this.constrainZoomTranslate(n)},n=(0,za.Z)().filter((e=>0!==e.button)).on("start",(()=>{this.dragState={type:"panTimeline"}})).on("drag",t).on("end",(()=>{this.dragState=void 0}));(0,xa.Z)(this.$refs.timeline).call(n)},watch:{currentTime(e){(e<this.viewportStart||e>this.viewportEnd)&&(this.zoomTransform.t=this.constrainZoomTranslate(e-.5))}},computed:{visibleInteractions(){const e=[];for(let t of this.task.interactions){const n=t.startTime<this.viewportEnd&&t.endTime>this.viewportStart,i=("interaction"===this.dragState?.type||"interactionStart"===this.dragState?.type||"interactionEnd"===this.dragState?.type)&&this.dragState.id===t.id;(n||i)&&e.push(t)}return e},viewportWidthSeconds(){const e=.5/this.zoomTransform.k;return this.viewportWidthEm*e},viewportStart(){return this.zoomTransform.t},viewportEnd(){return this.viewportStart+this.viewportWidthSeconds},positionForTimeMarker(){return`${this.secondsToTimelinePercentage(this.currentTime)}%`},axisScale(){const e=25,t=this.viewportStart,n=this.viewportEnd,i=[];for(let s=0;s<e;s++)i.push(t+(n-t)/e*s);return i.push(n),i}},methods:{iconForInteraction:yo,printInteractionType:bo,$gettext:v.RA,secondsToTimelinePercentage(e){const t=e-this.viewportStart;return t/this.viewportWidthSeconds*100},interactionMarkerStyle(e){return{left:`${this.secondsToTimelinePercentage(e.startTime)}%`}},zoom(e,t){t||(t=(this.viewportStart+this.viewportEnd)/2);const n=this.zoomTransform.t,i=this.viewportWidthSeconds,s=Math.exp(e),o=this.zoomTransform.k*s;this.zoomTransform.k=Math.max(.005,Math.min(5,o));const a=this.viewportWidthSeconds,r=t-(t-n)/i*a;this.zoomTransform.t=this.constrainZoomTranslate(r)},onWheel(e){e.preventDefault();const t=this.xCoordinateToTime(e.clientX),n=-e.deltaY/1e3;this.zoom(n,t)},constrainZoomTranslate(e){return Math.max(0,Math.min(this.videoMetadata.length,e))},pixelsToEm(e){const t=this.$refs.timelineAxis;return t?Sa(this.$refs.timelineAxis,e)??NaN:1},recomputeViewportWidth(){const e=this.$refs.timelineAxis;if(!e)return void console.warn("recomputeViewportWidth: timelineAxis is null");const t=e.getBoundingClientRect(),n=this.pixelsToEm(t.width);this.viewportWidthEm=n},formatVideoTimestamp(e){let t=0,n=0,i=0,s=0;while(e>=3600)t++,e-=3600;while(e>=60)n++,e-=60;while(e>=1)i++,e-=1;function o(e){return e.toLocaleString("de-DE",{minimumIntegerDigits:2,maximumFractionDigits:0})}return s=Math.floor(100*e),`${o(t)};${o(n)};${o(i)};${o(s)}`},pixelsToSeconds(e){const t=this.$refs.timelineAxis.getBoundingClientRect(),n=e/t.width;return n*this.viewportWidthSeconds},xCoordinateToTime(e){const t=this.$refs.timelineAxis.getBoundingClientRect(),n=e-t.left,i=n/t.width,s=this.viewportStart+i*this.viewportWidthSeconds,o=Math.min(this.videoMetadata.length,Math.max(0,s));return o},timelineInteractionStyle(e){const t=e.startTime-this.viewportStart,n=t/this.viewportWidthSeconds*100,i=e.endTime-this.viewportStart,s=i/this.viewportWidthSeconds*100;return{left:`${n}%`,width:s-n+"%"}},onClickInteraction(e){console.log("onClickInteraction"),this.$emit("clickInteraction",e)},onPointerDownInteraction(e,t){if(console.log("onPointerDownInteraction"),0!==e.button)return;const n=t.endTime-t.startTime;this.dragState={type:"interaction",id:t.id,mouseStartPos:[e.clientX,e.clientY],interactionStartTime:t.startTime,interactionDuration:n},e.target.setPointerCapture(e.pointerId),this.editor.selectInteraction(t.id)},onPointerMoveInteraction(e,t){if("interaction"===this.dragState?.type&&this.dragState.id===t.id){const t=e.clientX-this.dragState.mouseStartPos[0],n=this.$refs.timelineAxis.getBoundingClientRect(),i=this.viewportWidthSeconds/n.width,s=t*i,o=this.dragState.interactionStartTime+s,a=this.videoMetadata.length-this.dragState.interactionDuration,r=Math.max(0,Math.min(a,o)),l=this.dragState.id;this.editor?.dragInteractionTimeline(l,r)}},onPointerUpInteraction(e,t){console.log("onPointerUpInteraction"),this.dragState=void 0,e.target.releasePointerCapture(e.pointerId)},onPointerDownInteractionStart(e,t){this.dragState={type:"interactionStart",id:t.id,time:t.startTime},e.target.setPointerCapture(e.pointerId)},onPointerDownInteractionEnd(e,t){this.dragState={type:"interactionEnd",id:t.id,time:t.endTime},e.target.setPointerCapture(e.pointerId)},onPointerMoveInteractionStart(e,t){if("interactionStart"===this.dragState?.type&&this.dragState.id===t.id){const n=this.pixelsToSeconds(e.movementX);this.dragState.time+=n;const i=Math.max(0,Math.min(t.endTime-1,this.dragState.time));t.startTime=i}},onPointerMoveInteractionEnd(e,t){if("interactionEnd"===this.dragState?.type&&this.dragState.id===t.id){const n=this.pixelsToSeconds(e.movementX);this.dragState.time+=n;const i=Math.max(t.startTime+1,Math.min(this.videoMetadata.length,this.dragState.time));t.endTime=i}},onPointerUpInteractionStart(e,t){this.dragState=void 0,e.target.releasePointerCapture(e.pointerId)},onPointerUpInteractionEnd(e,t){this.dragState=void 0,e.target.releasePointerCapture(e.pointerId)},onPointerDownAxis(e){const t=this.xCoordinateToTime(e.clientX);this.$emit("timelineSeek",t)},onDragStartTimeMarker(e){console.log("dragstart time marker"),this.dragState={type:"timeMarker"}},onDragOverTimeline(e){if("timeMarker"===this.dragState?.type){e.preventDefault();const t=this.xCoordinateToTime(e.clientX);this.emitTimelineSeekThrottled(t)}},emitTimelineSeekThrottled:(0,y.throttle)((function(e){this.$emit("timelineSeek",e)}),100)}});const Ba=(0,B.Z)(Ca,[["render",Ta],["__scopeId","data-v-32afa486"]]);var Fa=Ba;const Pa={class:"selected-interaction-properties"},Ea={key:0,class:"default"},Ua={class:"collapsable"},_a={class:"start-and-end-time-inputs"};function Ma(e,t,n,a,r,l){const d=(0,i.up)("VideoTimeInput"),u=(0,i.up)("StudipWysiwyg");return(0,i.wg)(),(0,i.iD)("div",Pa,[(0,i._)("h3",null,(0,s.zw)(e.$gettext("Interaktion"))+' "'+(0,s.zw)(e.printInteractionType(e.selectedInteraction))+'" ',1),e.selectedInteraction?((0,i.wg)(),(0,i.iD)("form",Ea,[(0,i._)("fieldset",Ua,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Einstellungen")),1),(0,i._)("div",_a,[(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Start"))+" ",1),(0,i.Wm)(d,{modelValue:e.inputStartTime,"onUpdate:modelValue":t[0]||(t[0]=t=>e.inputStartTime=t),"onUpdate:error":t[1]||(t[1]=t=>e.inputStartTimeFormatError=t),class:(0,s.C_)(["time-input",{invalid:e.inputStartTimeErrors.length>0}]),"aria-invalid":e.inputStartTimeErrors.length>0},null,8,["modelValue","class","aria-invalid"])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.inputStartTimeErrors,(e=>((0,i.wg)(),(0,i.iD)("p",{class:"validation-error",key:e},(0,s.zw)(e),1)))),128)),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Ende"))+" ",1),(0,i.Wm)(d,{modelValue:e.inputEndTime,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputEndTime=t),"onUpdate:error":t[3]||(t[3]=t=>e.inputEndTimeFormatError=t),class:(0,s.C_)(["time-input",{invalid:e.inputEndTimeErrors.length>0}]),"aria-invalid":e.inputEndTimeErrors.length>0},null,8,["modelValue","class","aria-invalid"])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.inputEndTimeErrors,(e=>((0,i.wg)(),(0,i.iD)("p",{class:"validation-error",key:e},(0,s.zw)(e),1)))),128)),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedInteraction.pauseWhenVisible=t)},null,512),[[o.e8,e.selectedInteraction.pauseWhenVisible]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Video pausieren")),1)])])])):(0,i.kq)("",!0),"overlay"===e.selectedInteraction.type?((0,i.wg)(),(0,i.j4)(i.Ob,{key:1},[(0,i._)("div",null,[((0,i.wg)(),(0,i.j4)(u,{key:`${e.selectedInteraction.id}-overlay-wysiwyg`,modelValue:e.selectedInteraction.content_wysiwyg,"onUpdate:modelValue":t[5]||(t[5]=t=>e.selectedInteraction.content_wysiwyg=t)},null,8,["modelValue"]))])],1024)):"lmbTask"===e.selectedInteraction.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[((0,i.wg)(),(0,i.j4)(i.Ob,null,[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.editorForTaskType(e.selectedInteraction.taskDefinition.task_type)),{key:`${e.selectedInteraction.id}-editor`,taskDefinition:e.selectedInteraction.taskDefinition},null,8,["taskDefinition"]))],1024)),(0,i._)("h3",null,(0,s.zw)(e.$gettext("Vorschau")),1),((0,i.wg)(),(0,i.j4)(i.Ob,null,[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.viewerForTaskType(e.selectedInteraction.taskDefinition.task_type)),{class:"lmb-task-preview",key:`${e.selectedInteraction.id}-viewer`,task:e.selectedInteraction.taskDefinition},null,8,["task"]))],1024))],64)):(0,i.kq)("",!0)])}function Ra(e,t,n,s,a,r){return(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.userInput=t),onBlur:t[1]||(t[1]=(...t)=>e.onBlurUserInput&&e.onBlurUserInput(...t))},null,544)),[[o.nr,e.userInput]])}var Va=(0,i.aZ)({name:"VideoTimeInput",props:{modelValue:{type:Number,required:!0}},data(){return{userInput:""}},watch:{modelValue:{immediate:!0,handler(e){this.userInput=this.formatSeconds(e)}},parsedUserInput(){this.parsedUserInput instanceof Error?this.$emit("update:error",this.parsedUserInput):this.$emit("update:error",void 0)}},methods:{onBlurUserInput(){this.parsedUserInput instanceof Error?(this.userInput=this.formatSeconds(this.modelValue),this.$emit("update:error",void 0)):(this.$emit("update:modelValue",this.parsedUserInput),this.$emit("update:error",void 0))},formatSeconds(e){let t=0,n=0,i=0,s=0;while(e>=3600)e-=3600,t+=1;while(e>=60)e-=60,n+=1;while(e>=1)e-=1,i+=1;function o(e){return e.toLocaleString("de-DE",{minimumIntegerDigits:2,maximumFractionDigits:0})}s=Math.floor(100*e);let a=`${o(t)};${o(n)};${o(i)};${o(s)}`;return a}},computed:{parsedUserInput(){const e=/^(\d?\d)[;:](\d?\d)[;:](\d?\d)[;:](\d?\d)$/,t=e.exec(this.userInput);if(t)return 3600*parseInt(t[1])+60*parseInt(t[2])+parseInt(t[3])+parseInt(t[4])/100;const n=/^(?:(?:([0-9]?\d)[;:])?([0-5]?\d)[:;])?([0-5]?\d)$/,i=n.exec(this.userInput);return i&&4===i.length?i[1]?3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3]):i[2]?60*parseInt(i[2])+parseInt(i[3]):parseInt(i[3]):new Error((0,v.RA)("Die Startposition muss der Syntax HH;MM;SS oder HH;MM;SS;SS entsprechen."))}}});const Wa=(0,B.Z)(Va,[["render",Ra]]);var Ha=Wa,Oa=(0,i.aZ)({name:"SelectedInteractionProperties",components:{VideoTimeInput:Ha,StudipWysiwyg:ie.Z},setup(){return{editor:(0,i.f3)(Qo)}},props:{selectedInteraction:{type:Object,required:!0}},data(){return{inputStartTime:0,inputStartTimeFormatError:void 0,inputEndTime:1,inputEndTimeFormatError:void 0}},methods:{viewerForTaskType:Tl,$gettext:v.RA,printInteractionType:bo,editorForTaskType:Sl},watch:{inputStartTime(e){0===this.inputStartTimeErrors.length&&(this.selectedInteraction.startTime=e),0===this.inputEndTimeErrors.length&&(this.selectedInteraction.endTime=this.inputEndTime)},"selectedInteraction.startTime":{handler:function(e){this.inputStartTime=e},immediate:!0},inputEndTime(e){0===this.inputEndTimeErrors.length&&(this.selectedInteraction.endTime=e,0===this.inputStartTimeErrors.length&&(this.selectedInteraction.startTime=this.inputStartTime))},"selectedInteraction.endTime":{handler:function(e){this.inputEndTime=e},immediate:!0}},computed:{inputStartTimeErrors(){const e=[];return this.inputStartTimeFormatError&&e.push(this.inputStartTimeFormatError.message),this.inputStartTime<0&&e.push((0,v.RA)("Das eingegebene Wert muss größer als 0 sein.")),this.inputStartTime>=this.selectedInteraction.endTime&&e.push((0,v.RA)("Der Startpunkt muss vor dem Endpunkt sein.")),e},inputEndTimeErrors(){const e=[];return this.inputEndTimeFormatError&&e.push(this.inputEndTimeFormatError.message),this.inputEndTime<0&&e.push((0,v.RA)("Das eingegebene Wert muss größer als 0 sein.")),this.inputEndTime<=this.selectedInteraction.startTime&&e.push((0,v.RA)("Der Startpunkt muss vor dem Endpunkt sein.")),e}}});const Za=(0,B.Z)(Oa,[["render",Ma],["__scopeId","data-v-e2de05a4"]]);var La=Za;const ja={class:"add-interactions-root"},qa={class:"toolbar-under-video"},Na={class:"insert-interactions-buttons"},Qa=["title"],Ya=["onClick","title"],Ga={class:"video-controls"},Ka=["title"],Xa=["title"],Ja=["title"],$a=["title"];var er=(0,i.aZ)({props:{taskDefinition:{type:Object,required:!0}},setup(e){const t=e,n=(0,Mo.iH)(0),o=(0,Mo.iH)({length:1}),a=(0,Mo.iH)(void 0),r=(0,Mo.iH)(void 0),l=(0,Mo.iH)(void 0),d=(0,Mo.iH)(void 0),u=["FillInTheBlanks","DragTheWords","MarkTheWords","Question"];(0,i.JJ)(Qo,{selectInteraction:g,selectedInteractionId:a,editInteraction:h,dragInteraction:S,resizeOverlay:x,deleteInteraction:T,dragInteractionTimeline:z});const c=(0,i.Fl)((()=>t.taskDefinition.interactions.find((e=>e.id===a.value))));function g(e){a.value=e}function h(e){a.value=e,(0,i.Y3)((()=>{const e=d.value?.$el;e.scrollIntoView({behavior:"smooth",block:"start"})}))}function p(e){o.value=e}function m(e){n.value=e}function k(e){console.log("onTImelineSeek",e),r.value.player.currentTime(e)}function f(){l.value.zoom(.18)}function w(){l.value.zoom(-.18)}function y(){r.value.player.play()}function A(){r.value.player.pause()}function I(){const e={type:"overlay",v:2,id:(0,b.Z)(),startTime:n.value,endTime:Math.min(o.value.length,n.value+10),x:.4,y:.4,width:.2,height:.2,content_wysiwyg:(0,v.RA)("Einblendung"),pauseWhenVisible:!0};t.taskDefinition.interactions.push(e),a.value=e.id}function D(e){console.log("insertLmbTaskInteraction",e);const i=Dl(e),s={type:"lmbTask",id:(0,b.Z)(),taskDefinition:i,startTime:n.value,endTime:Math.min(o.value.length,n.value+10),x:.5,y:.5,pauseWhenVisible:!0};t.taskDefinition.interactions.push(s),a.value=s.id}function T(e){console.log("deleteInteraction",e);const n=t.taskDefinition.interactions.find((t=>t.id===e)),i=(0,v.RA)("%{ interaction } löschen",{interaction:bo(n)}),s=window.confirm(i);if(!s)return void console.info("Delete prompt canceled by user");const o=t.taskDefinition.interactions.findIndex((t=>t.id===e));t.taskDefinition.interactions.splice(o,1)}function S(e,n,i){const s=t.taskDefinition?.interactions.find((t=>t.id===e));if(!s)throw new Error(`Interaction with id ${e} not found`);s.x=n,s.y=i}function x(e,n,i,s,o){const a=t.taskDefinition?.interactions.find((t=>t.id===e));if(!a)throw new Error(`Interaction with id ${e} not found`);a.x=n,a.y=i,a.width=s,a.height=o}function z(e,n){const i=t.taskDefinition?.interactions.find((t=>t.id===e));if(!i)throw new Error(`Interaction with id ${e} not found`);const s=i.endTime-i.startTime;i.endTime=n+s,i.startTime=n}return(t,h)=>((0,i.wg)(),(0,i.iD)("div",ja,[(0,i.Wm)(ha,{ref_key:"videoPlayer",ref:r,task:e.taskDefinition,onTimeupdate:m,onMetadataChange:p,onClickInteraction:h[0]||(h[0]=e=>g(e.id))},null,8,["task"]),(0,i._)("div",qa,[(0,i._)("div",Na,[(0,i._)("button",{type:"button",class:"button item",onClick:I,title:(0,Mo.SU)(v.RA)("%{ interactionType } einfügen",{interactionType:(0,Mo.SU)(v.RA)("Einblendung")})},null,8,Qa),((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(u,(e=>(0,i._)("button",{key:e,type:"button",class:(0,s.C_)(["button",(0,Mo.SU)(Cl)(e)]),onClick:t=>D(e),title:(0,Mo.SU)(v.RA)("%{ interactionType } einfügen",{interactionType:(0,Mo.SU)(xl)(e)})},null,10,Ya))),64))]),(0,i._)("div",Ga,[(0,i._)("button",{type:"button",class:"button zoom-in",title:(0,Mo.SU)(v.RA)("Vergrößern"),onClick:f},null,8,Ka),(0,i._)("button",{type:"button",class:"button zoom-out",title:(0,Mo.SU)(v.RA)("Verkleinern"),onClick:w},null,8,Xa),(0,i._)("button",{type:"button",class:"button play",title:(0,Mo.SU)(v.RA)("Abspielen"),onClick:y},null,8,Ja),(0,i._)("button",{type:"button",class:"button pause",title:(0,Mo.SU)(v.RA)("Pausieren"),onClick:A},null,8,$a)])]),(0,i.Wm)(Fa,{class:"video-timeline",ref_key:"videoTimeline",ref:l,task:e.taskDefinition,currentTime:n.value,videoMetadata:o.value,selectedInteractionId:a.value,onTimelineSeek:k,onClickInteraction:h[1]||(h[1]=e=>g(e.id)),onDeleteInteraction:T},null,8,["task","currentTime","videoMetadata","selectedInteractionId"]),(0,Mo.SU)(c)?((0,i.wg)(),(0,i.j4)(La,{key:0,ref_key:"selectedInteractionProperties",ref:d,selectedInteraction:(0,Mo.SU)(c)},null,8,["selectedInteraction"])):(0,i.kq)("",!0)]))}});const tr=(0,B.Z)(er,[["__scopeId","data-v-dc689978"]]);var nr=tr;const ir=e=>((0,i.dD)("data-v-3980b12c"),e=e(),(0,i.Cn)(),e),sr={class:"picker"},or={class:"default"},ar=ir((()=>(0,i._)("br",null,null,-1))),rr={class:"bottom-actions"},lr={class:"default"},dr={class:"bottom-actions"},ur={key:1,class:"video-preview"},cr={key:0},gr=["href"],hr={key:1},pr=["href"],mr={class:"video-preview-actions"},kr={class:"form default"},fr=ir((()=>(0,i._)("button",{type:"submit",disabled:"",style:{display:"none"},"aria-hidden":"true"},null,-1))),wr={class:"start-at-setting"},br={class:"start-at-setting-flex"},yr={key:0,class:"errors"};function vr(e,t,n,a,r,l){const d=(0,i.up)("FileUpload"),u=(0,i.up)("FilePicker"),c=(0,i.up)("VideoPlayer"),g=(0,i.up)("VideoTimeInput");return(0,i.wg)(),(0,i.iD)(i.HY,null,["none"===e.taskDefinition.video.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("p",null,(0,s.zw)(e.$gettext("Lade ein Video hoch oder füge einen Link zu einem Youtube-Video ein.")),1),(0,i._)("div",sr,[(0,i._)("form",or,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Stud.IP-Video")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Neues Video hochladen"))+" ",1),ar,(0,i.Wm)(d,{onFileUploaded:e.onUploadStudipVideo,accept:"video/*"},null,8,["onFileUploaded"])]),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Vorhandenes Video auswählen"))+" ",1),(0,i.Wm)(u,{modelValue:e.selectedFileId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedFileId=t),"is-video":"",onSelectFile:e.updateCurrentFile},null,8,["modelValue","onSelectFile"])]),(0,i._)("div",rr,[(0,i._)("button",{type:"button",class:"button accept",onClick:t[1]||(t[1]=(...t)=>e.onSaveUploadedFile&&e.onSaveUploadedFile(...t))},(0,s.zw)(e.$gettext("Übernehmen")),1)])])]),(0,i._)("form",lr,[(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Youtube-Video")),1),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Youtube-URL"))+" ",1),(0,i.wy)((0,i._)("input",{class:"youtube-url-input",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.youtubeUrlInput=t)},null,512),[[o.nr,e.youtubeUrlInput]])]),(0,i._)("div",dr,[(0,i._)("button",{type:"submit",class:"button accept",onClick:t[3]||(t[3]=(...t)=>e.onSaveYoutubeVideo&&e.onSaveYoutubeVideo(...t))},(0,s.zw)(e.$gettext("Übernehmen")),1)])])])])],64)):(0,i.kq)("",!0),"none"!==e.taskDefinition.video.type?((0,i.wg)(),(0,i.iD)("div",ur,[(0,i.Wm)(c,{ref:"videoPlayer",task:e.taskDefinition,class:"video-player",onTimeupdate:e.onTimeUpdate},null,8,["task","onTimeupdate"]),"youtube"===e.taskDefinition.video.type?((0,i.wg)(),(0,i.iD)("p",cr,[(0,i.Uk)((0,s.zw)(e.$gettext("Youtube-Video: "))+" ",1),(0,i._)("a",{href:e.taskDefinition.video.url,target:"_blank"},(0,s.zw)(e.taskDefinition.video.url),9,gr)])):"studipFileReference"===e.taskDefinition.video.type?((0,i.wg)(),(0,i.iD)("p",hr,[(0,i.Uk)((0,s.zw)(e.$gettext("Hochgeladenes Video: "))+" ",1),(0,i._)("a",{href:e.fileDetailsUrl(e.taskDefinition.video.file_id),target:"_blank"},[e.selectedFile?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,s.zw)(e.selectedFile.name),1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(e.taskDefinition.video.file_id),1)],64))],8,pr)])):(0,i.kq)("",!0),(0,i._)("div",mr,[(0,i._)("button",{class:"button trash",onClick:t[4]||(t[4]=(...t)=>e.deleteVideo&&e.deleteVideo(...t))},(0,s.zw)(e.$gettext("Video löschen")),1)])])):(0,i.kq)("",!0),(0,i._)("form",kr,[fr,(0,i._)("fieldset",null,[(0,i._)("legend",null,(0,s.zw)(e.$gettext("Einstellungen")),1),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=t=>e.taskDefinition.autoplay=t)},null,512),[[o.e8,e.taskDefinition.autoplay]]),(0,i.Uk)(" "+(0,s.zw)(e.$gettext("Automatisch abspielen")),1)]),(0,i._)("div",wr,[(0,i._)("div",br,[(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Anfangen um"))+" ",1),(0,i.Wm)(g,{class:(0,s.C_)({invalid:!!e.startPositionInputError}),"aria-invalid":!!e.startPositionInputError,modelValue:e.taskDefinition.startAt,"onUpdate:modelValue":t[6]||(t[6]=t=>e.taskDefinition.startAt=t),"onUpdate:error":t[7]||(t[7]=t=>e.startPositionInputError=t)},null,8,["class","aria-invalid","modelValue"])]),(0,i._)("button",{type:"button",class:"button",onClick:t[8]||(t[8]=(...t)=>e.onClickUseCurrentTime&&e.onClickUseCurrentTime(...t))},(0,s.zw)(e.$gettext("Aktuelle Position setzen")),1)]),e.startPositionInputError?((0,i.wg)(),(0,i.iD)("div",yr,(0,s.zw)(e.startPositionInputError),1)):(0,i.kq)("",!0)]),(0,i.kq)("",!0)])])],64)}const Ar={class:"cw-file-chooser"},Ir={value:""},Dr=(0,i.Uk)("Keine Auswahl"),Tr=["value"],Sr={disabled:""},xr=(0,i.Uk)("Keine Dateien vorhanden");function zr(e,t,n,a,r,l){const d=(0,i.up)("FolderPicker"),u=(0,i.up)("translate");return(0,i.wg)(),(0,i.iD)("div",Ar,[(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Ordner-Filter"))+" ",1),(0,i.Wm)(d,{allowUserFolders:"",unchoose:"",modelValue:e.selectedFolderId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedFolderId=t)},null,8,["modelValue"])]),(0,i._)("label",null,[(0,i.Uk)((0,s.zw)(e.$gettext("Datei"))+" ",1),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentValue=t),onChange:t[2]||(t[2]=(...t)=>e.selectFile&&e.selectFile(...t))},[(0,i.wy)((0,i._)("option",Ir,[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[Dr])),_:1})],512),[[o.F8,e.canBeEmpty]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.files,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:e.id},(0,s.zw)(e.name),9,Tr)))),128)),(0,i.wy)((0,i._)("option",Sr,[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[xr])),_:1})],512),[[o.F8,0===e.files.length]])],544),[[o.bM,e.currentValue]])])])}const Cr={key:0,value:""},Br=(0,i.Uk)("kein Ordner ausgewählt"),Fr=["label"],Pr=["value"],Er=["label"],Ur=["value"];function _r(e,t,n,a,r,l){const d=(0,i.up)("translate");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentValue=t),onChange:t[1]||(t[1]=(...t)=>e.changeSelection&&e.changeSelection(...t))},[e.unchoose?((0,i.wg)(),(0,i.iD)("option",Cr,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[Br])),_:1})])):(0,i.kq)("",!0),"courses"===this.context.type?((0,i.wg)(),(0,i.iD)("optgroup",{key:1,label:e.textOptGroupCourse},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.loadedCourseFolders,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,s.zw)(e.attributes.name),9,Pr)))),128))],8,Fr)):(0,i.kq)("",!0),e.allowUserFolders?((0,i.wg)(),(0,i.iD)("optgroup",{key:2,label:e.textOptGroupUser},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.loadedUserFolders,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,s.zw)(e.attributes.name),9,Ur)))),128))],8,Er)):(0,i.kq)("",!0)],544)),[[o.bM,e.currentValue]])}function Mr(e,{allowHomeworkFolders:t}){const n=new Map;return e.filter((e=>{if(i(e))switch(e.attributes["folder-type"]){case"HiddenFolder":if(1===e.attributes["data-content"]["download_allowed"])return!0;break;case"HomeworkFolder":if(t)return!0;break;default:return!0}}));function i(t){let i=!0;if(t?.relationships?.parent){let o=t.relationships.parent.data.id;if(n.has(o))i=n.get(o);else{let t=e.find((e=>e.id===o));t&&(i=s(t),n.set(o,i))}}return i}function s(e){return"HiddenFolder"!==e.attributes["folder-type"]&&(!e?.relationships?.parent||i(e))}}var Rr=(0,i.aZ)({name:"FolderPicker",props:{value:{type:String,required:!1,default:""},allowUserFolders:{type:Boolean,default:!1},allowHomeworkFolders:{type:Boolean,default:!1},unchoose:{type:Boolean,default:!1}},data(){return{currentValue:"",textOptGroupCourse:this.$gettext("Dateibereich dieser Veranstaltung"),textOptGroupUser:this.$gettext("Persönlicher Dateibereich")}},computed:{...(0,On.Se)({relatedFolders:"folders/related"}),context(){return Ve.f7.studipContext},userId(){return window.STUDIP.USER_ID},courseObject(){return{type:"courses",id:`${this.context.id}`}},userObject(){return{type:"users",id:`${this.userId}`}},loadedCourseFolders(){return Mr(this.relatedFolders({parent:this.courseObject,relationship:"folders"})??[],{allowHomeworkFolders:this.allowHomeworkFolders})},loadedUserFolders(){let e=[],t=this.relatedFolders({parent:this.userObject,relationship:"folders"})??[];return t.forEach((t=>{"PublicFolder"===t.attributes["folder-type"]&&e.push(t)})),e}},methods:{...(0,On.nv)({_loadRelatedFolders:"folders/loadRelated"}),loadRelatedFolders(e){return this._loadRelatedFolders(e)},changeSelection(){this.$emit("input",this.currentValue)},getCourseFolders(){const e=this.courseObject,t="folders",n={"page[limit]":1e4};return this.loadRelatedFolders({parent:e,relationship:t,options:n})},getUserFolders(){const e=this.userObject,t="folders",n={"page[limit]":1e4};return this.loadRelatedFolders({parent:e,relationship:t,options:n})},confirmSelectedFolder(){const e=this.loadedUserFolders.concat(this.loadedCourseFolders);let t=e.find((e=>e.id===this.currentValue));""!==this.currentValue&&void 0===t&&(this.currentValue="",this.changeSelection())}},async mounted(){this.currentValue=this.value,"users"!==this.context.type&&await this.getCourseFolders(),await this.getUserFolders(),this.confirmSelectedFolder()},watch:{value(){this.currentValue=this.value}}});const Vr=(0,B.Z)(Rr,[["render",_r]]);var Wr=Vr,Hr=(0,i.aZ)({name:"FilePicker",components:{FolderPicker:Wr},props:{value:String,mimeType:{type:String,default:""},isImage:{type:Boolean,default:!1},isVideo:{type:Boolean,default:!1},isAudio:{type:Boolean,default:!1},isDocument:{type:Boolean,default:!1},canBeEmpty:{type:Boolean,default:!1}},data(){return{currentValue:"",selectedFolderId:"",files:[]}},computed:{...(0,On.Se)({fileRefById:"file-refs/byId",relatedFileRefs:"file-refs/related",relatedTermOfUse:"terms-of-use/related"}),userId(){return window.STUDIP.USER_ID}},methods:{$gettext:v.RA,...(0,On.nv)({loadFileRef:"file-refs/loadById",loadRelatedFileRefs:"file-refs/loadRelated"}),selectFile(){this.$emit("selectFile",this.files.find((e=>e.id===this.currentValue)))},filterFiles(e){const t=e=>{let t=this.relatedTermOfUse({parent:e,relationship:"terms-of-use"});if(null!==t&&0!==t.attributes["download-condition"])return!1;if(""!==this.mimeType&&this.mimeType!==e.attributes["mime-type"])return!1;if(this.isImage&&!e.attributes["mime-type"].includes("image"))return!1;const n=["video/mp4","video/ogg","video/webm"];if(this.isVideo&&!n.some((t=>e.attributes["mime-type"].includes(t))))return!1;const i=["audio/wav","audio/ogg","audio/webm","audio/flac","audio/mpeg","audio/x-m4a","audio/mp4"];if(this.isAudio&&!i.some((t=>e.attributes["mime-type"].includes(t))))return!1;const s=["application/pdf"];return!(this.isDocument&&!s.some((t=>e.attributes["mime-type"].includes(t))))};return e.filter(t).map((e=>({id:e.id,name:e.attributes.name,mime_type:e.attributes["mime-type"],download_url:window.STUDIP.URLHelper.getURL("sendfile.php",{type:0,file_id:e.id,file_name:e.attributes.name},!0)})))},async getFolderFiles(){const e={type:"folders",id:`${this.selectedFolderId}`},t="file-refs",n={include:"terms-of-use","page[limit]":1e4};await this.loadRelatedFileRefs({parent:e,relationship:t,options:n});const i=this.relatedFileRefs({parent:e,relationship:t});this.files=this.filterFiles(i)}},async mounted(){if(console.log("mounted"),""!==this.value){await this.loadFileRef({id:this.value});const e=this.fileRefById({id:this.value});e&&(this.selectedFolderId=e.relationships.parent.data.id,this.currentValue=this.value??"")}},watch:{selectedFolderId(){""!==this.selectedFolderId&&this.getFolderFiles()},value(e,t){""===e&&(this.selectedFolderId="",this.currentValue="")}}});const Or=(0,B.Z)(Hr,[["render",zr]]);var Zr=Or;var Lr=(0,i.aZ)({name:"SelectVideo",props:{taskDefinition:{type:Object,required:!0}},data(){return{youtubeUrlInput:"",startPositionInputError:void 0,currentTime:0,selectedFolderId:"",selectedFile:void 0,selectedFileId:""}},watch:{"taskDefinition.video":{immediate:!0,handler:async function(e){switch(e.type){case"none":break;case"studipFileReference":if(void 0===this.selectedFile||this.selectedFile.id!==e.file_id){await this.loadFileRef({id:e.file_id});const t=Zn.DU.parse(this.fileRefById({id:e.file_id}));this.selectedFile={id:e.file_id,name:t.attributes.name,mime_type:t.attributes["mime-type"],download_url:t.meta["download-url"]}}break;case"youtube":this.youtubeUrlInput=e.url}}}},computed:{...(0,On.Se)({fileRefById:"file-refs/byId"})},methods:{fileDetailsUrl:sl,fileIdToUrl:il,$gettext:v.RA,...(0,On.nv)({loadFileRef:"file-refs/loadById"}),onTimeUpdate(e){this.currentTime=e},onClickUseCurrentTime(){this.taskDefinition.startAt=this.currentTime},updateCurrentFile(e){this.selectedFile=e,this.selectedFileId=e.id},onSaveYoutubeVideo(){this.taskDefinition.video={type:"youtube",url:this.youtubeUrlInput}},onSaveUploadedFile(){this.selectedFile&&(this.taskDefinition.video={v:2,type:"studipFileReference",file_id:this.selectedFile.id})},deleteVideo(){this.taskDefinition.video={type:"none"}},onUploadStudipVideo(e){this.taskDefinition.video={v:2,type:"studipFileReference",file_id:e.id},this.selectedFile={id:e.id,name:e.attributes.name,mime_type:e.attributes["mime-type"],download_url:e.meta["download-url"]}}},components:{VideoTimeInput:Ha,FileUpload:qn,VideoPlayer:ha,FilePicker:Zr}});const jr=(0,B.Z)(Lr,[["render",vr],["__scopeId","data-v-3980b12c"]]);var qr=jr,Nr=(0,i.aZ)({name:"InteractiveVideoEditor",data(){return{}},methods:{$gettext:v.RA},props:{taskDefinition:{type:Object,required:!0}},computed:{},components:{SelectVideo:qr,AddInteractions:nr,TabComponent:_o,TabsComponent:Bo}});const Qr=(0,B.Z)(Nr,[["render",Io]]);var Yr=Qr;function Gr(e,t,n,s,o,a){const r=(0,i.up)("VideoPlayer");return(0,i.wg)(),(0,i.j4)(r,{task:e.task},null,8,["task"])}var Kr=(0,i.aZ)({name:"InteractiveVideoViewer",components:{VideoPlayer:ha},props:{task:{type:Object,required:!0}},data(){return{counter:0}}});const Xr=(0,B.Z)(Kr,[["render",Gr]]);var Jr=Xr;const $r=qs.z.object({percentage:qs.z.number(),message:qs.z.string()}),el=qs.z.object({uuid:qs.z.string(),imageUrl:qs.z.string(),altText:qs.z.string()}),tl=qs.z.object({v:qs.z.literal(2),uuid:qs.z.string(),file_id:qs.z.string(),altText:qs.z.string()}),nl=qs.z.union([el,tl]).transform((e=>{if(Object.hasOwn(e,"v"))return e;{const t=e,n=new URLSearchParams(t.imageUrl),i=n.get("file_id");if(!i)throw new Error('Could not migrate imageUrl to file_id. The query param "file_id" was not found in the imageUrl string.');const s={v:2,uuid:t.uuid,altText:t.altText,file_id:i};return console.log("Migrating from imageSchema_v1 to imageSchema_v2","v1:",t,"v2:",s),s}}));function il(e){return""===e?"":window.STUDIP.URLHelper.getURL("sendfile.php",{file_id:e})}function sl(e){return window.STUDIP.URLHelper.getURL(`dispatch.php/file/details/${e}`)}const ol=qs.z.object({task_type:qs.z.literal("DragTheWords"),template:qs.z.string(),retryAllowed:qs.z.boolean(),showSolutionsAllowed:qs.z.boolean(),instantFeedback:qs.z.boolean(),allBlanksMustBeFilledForSolutions:qs.z.boolean(),alphabeticOrder:qs.z.boolean(),strings:qs.z.object({checkButton:qs.z.string(),retryButton:qs.z.string(),solutionsButton:qs.z.string(),fillInAllBlanksMessage:qs.z.string(),resultMessage:qs.z.string()}),feedback:qs.z.array($r)}),al=qs.z.object({task_type:qs.z.literal("FindTheHotspot"),image:nl}),rl=qs.z.object({task_type:qs.z.literal("FindTheWords"),words:qs.z.array(qs.z.string())}),ll=qs.z.object({task_type:qs.z.literal("MarkTheWords"),template:qs.z.string(),retryAllowed:qs.z.boolean(),showSolutionsAllowed:qs.z.boolean(),strings:qs.z.object({checkButton:qs.z.string(),retryButton:qs.z.string(),solutionsButton:qs.z.string(),resultMessage:qs.z.string()}),feedback:qs.z.array($r).default((()=>Il()))}),dl=nl,ul=qs.z.object({task_type:qs.z.literal("Memory"),cards:qs.z.array(dl),strings:qs.z.object({checkButton:qs.z.string(),retryButton:qs.z.string(),solutionsButton:qs.z.string(),resultMessage:qs.z.string()})}),cl=qs.z.object({task_type:qs.z.literal("FillInTheBlanks"),template:qs.z.string(),retryAllowed:qs.z.boolean(),showSolutionsAllowed:qs.z.boolean(),caseSensitive:qs.z.boolean(),autoCorrect:qs.z.boolean(),allBlanksMustBeFilledForSolutions:qs.z.boolean(),acceptTypos:qs.z.boolean(),strings:qs.z.object({checkButton:qs.z.string(),retryButton:qs.z.string(),solutionsButton:qs.z.string(),fillInAllBlanksMessage:qs.z.string(),resultMessage:qs.z.string()}),feedback:qs.z.array($r)}),gl=qs.z.object({text:qs.z.string(),correct:qs.z.boolean(),strings:qs.z.object({hint:qs.z.string(),feedbackSelected:qs.z.string(),feedbackNotSelected:qs.z.string()})}),hl=qs.z.object({task_type:qs.z.literal("Question"),question:qs.z.string(),answers:qs.z.array(gl),canAnswerMultiple:qs.z.boolean(),retryAllowed:qs.z.boolean(),randomOrder:qs.z.boolean(),showSolutionsAllowed:qs.z.boolean(),strings:qs.z.object({checkButton:qs.z.string(),retryButton:qs.z.string(),solutionsButton:qs.z.string()})}),pl=qs.z.object({uuid:qs.z.string(),type:qs.z.literal("image"),file_id:qs.z.string(),altText:qs.z.string()}),ml=qs.z.object({uuid:qs.z.string(),type:qs.z.literal("audio"),file_id:qs.z.string(),altText:qs.z.string()}),kl=qs.z.union([pl,ml]),fl=qs.z.object({uuid:qs.z.string(),draggableElement:kl,targetElement:kl}),wl=qs.z.object({task_type:qs.z.literal("Pairing"),pairs:qs.z.array(fl),strings:qs.z.object({checkButton:qs.z.string(),retryButton:qs.z.string(),solutionsButton:qs.z.string(),resultMessage:qs.z.string()}),feedback:qs.z.array($r)}),bl=qs.z.object({task_type:qs.z.literal("ImageSequencing"),images:qs.z.array(nl),strings:qs.z.object({checkButton:qs.z.string(),retryButton:qs.z.string(),solutionsButton:qs.z.string(),resultMessage:qs.z.string()}),feedback:qs.z.array($r)}),yl=qs.z.union([ol,cl,al,rl,bl,wo,ll,ul,wl,hl]),vl=qs.z.union([ol,cl,al,rl,bl,ll,ul,wl,hl]),Al=qs.z.union([ol.shape.task_type,cl.shape.task_type,al.shape.task_type,rl.shape.task_type,bl.shape.task_type,wo.shape.task_type,ll.shape.task_type,ul.shape.task_type,wl.shape.task_type,hl.shape.task_type]);function Il(){return[{percentage:0,message:"Versuchen Sie es noch einmal."},{percentage:50,message:"Gut."},{percentage:75,message:"Sehr gut."},{percentage:100,message:"Perfekt!"}]}function Dl(e){switch(e){case"DragTheWords":return{task_type:"DragTheWords",template:"Drag the *words* to the matching *gaps*.",retryAllowed:!0,showSolutionsAllowed:!0,instantFeedback:!1,allBlanksMustBeFilledForSolutions:!1,alphabeticOrder:!1,strings:{checkButton:"Antworten überprüfen",retryButton:"Erneut versuchen",solutionsButton:"Lösungen anzeigen",fillInAllBlanksMessage:"Alle Lücken müssen ausgefüllt sein, um Lösungen anzuzeigen.",resultMessage:":correct von :total Lücken richtig ausgefüllt."},feedback:Il()};case"FillInTheBlanks":return{task_type:"FillInTheBlanks",template:"Hier entsteht der *Lücken*text.",retryAllowed:!0,showSolutionsAllowed:!0,caseSensitive:!1,autoCorrect:!1,allBlanksMustBeFilledForSolutions:!1,acceptTypos:!0,strings:{checkButton:"Antworten überprüfen",retryButton:"Erneut versuchen",solutionsButton:"Lösungen anzeigen",fillInAllBlanksMessage:"Alle Lücken müssen ausgefüllt sein, um Lösungen anzuzeigen.",resultMessage:":correct von :total Lücken richtig ausgefüllt."},feedback:Il()};case"FindTheHotspot":return{task_type:"FindTheHotspot",image:{v:2,uuid:(0,b.Z)(),file_id:"",altText:""}};case"FindTheWords":return{task_type:"FindTheWords",words:["apple","banana","orange"]};case"Pairing":return{task_type:"Pairing",pairs:[{uuid:(0,b.Z)(),draggableElement:{uuid:(0,b.Z)(),type:"image",file_id:"",altText:""},targetElement:{uuid:(0,b.Z)(),type:"image",file_id:"",altText:""}}],strings:{checkButton:"Antworten überprüfen",retryButton:"Erneut versuchen",solutionsButton:"Lösungen anzeigen",resultMessage:":correct von :total Bilder richtig zugeordnet."},feedback:Il()};case"ImageSequencing":return{task_type:"ImageSequencing",images:[{uuid:(0,b.Z)(),v:2,file_id:"",altText:""}],strings:{checkButton:"Reihenfolge überprüfen",retryButton:"Erneut versuchen",solutionsButton:"Lösungen anzeigen",resultMessage:":correct von :total Elemente richtig sortiert."},feedback:Il()};case"InteractiveVideo":return{task_type:"InteractiveVideo",interactions:[],video:{type:"none"},autoplay:!1,startAt:0,disableNavigation:"not disabled"};case"MarkTheWords":return{task_type:"MarkTheWords",template:"*The* moon is our natural satellite, *i.e.* it revolves around the *Earth!*",retryAllowed:!0,showSolutionsAllowed:!0,strings:{checkButton:"Antworten überprüfen",retryButton:"Erneut versuchen",solutionsButton:"Lösungen anzeigen",resultMessage:":correct von :total Wörter richtig ausgewählt."},feedback:Il()};case"Memory":return{task_type:"Memory",cards:[{uuid:(0,b.Z)(),v:2,file_id:"",altText:""}],strings:{checkButton:"Antworten überprüfen",retryButton:"Erneut versuchen",solutionsButton:"Lösungen anzeigen",resultMessage:":correct von :total Wörter richtig ausgewählt."}};case"Question":return{task_type:"Question",question:"Welche dieser Himmelskörper sind Planeten in unserem Sonnensystem?",answers:[{text:"Mond",correct:!1,strings:{hint:"",feedbackSelected:"Dies ist ein Mond, kein Planet.",feedbackNotSelected:"Genau, der Mond ist ein Mond."}},{text:"Merkur",correct:!0,strings:{hint:"",feedbackSelected:"",feedbackNotSelected:""}},{text:"Venus",correct:!0,strings:{hint:"",feedbackSelected:"",feedbackNotSelected:""}},{text:"Mars",correct:!0,strings:{hint:"",feedbackSelected:"",feedbackNotSelected:""}},{text:"Pluto",correct:!1,strings:{hint:"Hat sich hier was geändert?",feedbackSelected:"",feedbackNotSelected:""}},{text:"Titan",correct:!1,strings:{hint:"",feedbackSelected:"Das ist leider nicht richtig. Der Titan ist ein Mond vom Saturn.",feedbackNotSelected:"Genau, der Titan ist ein Mond vom Saturn."}},{text:"Sonne",correct:!1,strings:{hint:"",feedbackSelected:"Das ist leider nicht richtig. Die Sonne ist ein Stern.",feedbackNotSelected:"Genau, die Sonne ist ein Stern."}}],canAnswerMultiple:!0,retryAllowed:!0,randomOrder:!0,showSolutionsAllowed:!0,strings:{checkButton:"Antworten überprüfen",retryButton:"Erneut versuchen",solutionsButton:"Lösungen anzeigen"}};default:throw new Error("Unimplemented type: "+e)}}function Tl(e){switch(e){case"DragTheWords":return At;case"FillInTheBlanks":return M;case"FindTheHotspot":return so;case"FindTheWords":return Ie;case"Pairing":return qi;case"ImageSequencing":return zs;case"InteractiveVideo":return Jr;case"MarkTheWords":return an;case"Memory":return vi;case"Question":return ot;default:throw new Error("Unimplemented task type: "+e)}}function Sl(e){switch(e){case"DragTheWords":return Lt;case"FillInTheBlanks":return ae;case"FindTheHotspot":return Xs;case"FindTheWords":return pe;case"Pairing":return ws;case"ImageSequencing":return js;case"InteractiveVideo":return Yr;case"MarkTheWords":return vn;case"Memory":return Xn;case"Question":return Oe;default:throw new Error("Unimplemented task type: "+e)}}function xl(e){switch(e){case"DragTheWords":return(0,v.RA)("Drag The Words");case"FillInTheBlanks":return(0,v.RA)("Fill In The Blanks");case"FindTheHotspot":return(0,v.RA)("Find The Hotspot");case"FindTheWords":return(0,v.RA)("Find The Words");case"Pairing":return(0,v.RA)("Pairing");case"ImageSequencing":return(0,v.RA)("Image Sequencing");case"InteractiveVideo":return(0,v.RA)("Interactive Video");case"MarkTheWords":return(0,v.RA)("Mark The Words");case"Memory":return(0,v.RA)("Memory");case"Question":return(0,v.RA)("Question")}}function zl(e){return"InteractiveVideo"!==e}function Cl(e){switch(e){case"Memory":break;case"FillInTheBlanks":return"file-office";case"FindTheWords":break;case"Question":return"question";case"DragTheWords":return"tan3";case"MarkTheWords":return"tan3";case"Pairing":break;case"ImageSequencing":break;case"InteractiveVideo":break}return"question"}},2333:function(e,t,n){"use strict";n.d(t,{DU:function(){return r},Mb:function(){return o},cn:function(){return a}});var i=n(1076),s=n(4484);const o=i.Z.create({baseURL:window.STUDIP.URLHelper.getURL("jsonapi.php/v1",{},!0),headers:{"Content-Type":"application/vnd.api+json"}});async function a({file:e,fileData:t,folder:n}){const i=e?.relationships?.["terms-of-use"]?.data?.id??null,s=new FormData;s.append("file",t,e.attributes.name),i&&s.append("term-id",i);const a=`folders/${n.id}/file-refs`,l=await o.post(a,s,{headers:{"Content-Type":"multipart/form-data"}}),d=await o.get(l.headers.location),u=d.data.data;return r.parse(u)}const r=s.z.object({type:s.z.literal("file-refs"),id:s.z.string(),attributes:s.z.object({name:s.z.string(),mkdate:s.z.string(),chdate:s.z.string(),description:s.z.string(),downloads:s.z.number(),filesize:s.z.number(),"is-downloadable":s.z.boolean(),"is-editable":s.z.boolean(),"is-readable":s.z.boolean(),"is-writable":s.z.boolean(),"mime-type":s.z.string()}),links:s.z.object({self:s.z.string()}),meta:s.z.object({"download-url":s.z.string()}),relationships:s.z.unknown()})},1542:function(e,t,n){"use strict";n.d(t,{F9:function(){return s},iv:function(){return o},nU:function(){return a}});n(1703);var i=n(4484);async function s(e,t,n,i,s){const o=window.STUDIP.LernmoduleVueJS.saveRoute,a=window.STUDIP.CSRF_TOKEN,r=new FormData;return r.append("task_definition",JSON.stringify(e)),r.append("module_id",i),r.append("name",t),r.append("infotext",n),s&&r.append("block_id",s),r.append(a.name,a.value),fetch(o,{method:"POST",body:r}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}async function o(e,t){const n=window.STUDIP.LernmoduleVueJS.updateAttemptRoute,i=new FormData,s=window.STUDIP.CSRF_TOKEN;return i.append(s.name,s.value),Object.entries(e).forEach((([e,t])=>{i.append(`message[points][${e}]`,t.toString())})),t&&i.append("message[success]","true"),fetch(n,{method:"POST",body:i}).then((e=>{if(!e.ok)throw new Error(e.statusText)}))}const a=i.z.object({name:i.z.string(),type:i.z.string(),url:i.z.string()})},9381:function(e,t,n){"use strict";n.d(t,{f7:function(){return y},h:function(){return w},h4:function(){return b}});var i=n(65),s=n(3365),o=n(2482),a=n(9707),r=n(4806),l=n(1542),d=n(1885),u=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};function c(e){return new Promise((t=>setTimeout(t,e)))}(0,d.Fl)(!1);let g=class extends s.g4{constructor(...e){super(...e),(0,o.Z)(this,"saveStatus",{status:"saved"}),(0,o.Z)(this,"fatalErrors",[]),(0,o.Z)(this,"nonFatalErrors",[]),(0,o.Z)(this,"serverTaskDefinition",[]),(0,o.Z)(this,"serverModuleName",""),(0,o.Z)(this,"serverInfotext",""),(0,o.Z)(this,"moduleName",""),(0,o.Z)(this,"infotext",""),(0,o.Z)(this,"undoRedoStack",[{taskDefinition:(0,a.nJ)("FillInTheBlanks"),undoBatch:{}}]),(0,o.Z)(this,"undoRedoIndex",0)}get taskDefinition(){return this.undoRedoStack[this.undoRedoIndex].taskDefinition}get hasUnsavedChanges(){return!(0,r.isEqual)(this.taskDefinition,this.serverTaskDefinition)||this.serverModuleName!==this.moduleName||this.serverInfotext!==this.infotext}get canUndo(){return this.undoRedoIndex>0}get canRedo(){return this.undoRedoIndex<this.undoRedoStack.length-1}undo(){if(this.undoRedoIndex>0){const e=this.undoRedoStack[this.undoRedoIndex];this.undoRedoIndex--;const t=document.querySelectorAll(`[data-undo-focus-id="${e.undoBatch}"]`);if(t.length>0){const e=t.item(0),n=[...document.querySelectorAll("fieldset.collapsable.collapsed")].filter((t=>t.contains(e)));n.forEach((e=>e.classList.remove("collapsed"))),e.focus()}}}redo(){if(this.undoRedoIndex<this.undoRedoStack.length-1){this.undoRedoIndex++;const e=this.undoRedoStack[this.undoRedoIndex],t=document.querySelectorAll(`[data-undo-focus-id="${e.undoBatch}"]`);if(t.length>0){const e=t.item(0),n=[...document.querySelectorAll("fieldset.collapsable.collapsed")].filter((t=>t.contains(e)));n.forEach((e=>e.classList.remove("collapsed"))),e.focus()}}}initializeCourseware(e){console.info("initializeCourseware()",e),this.serverTaskDefinition=e,this.undoRedoStack=[{taskDefinition:this.serverTaskDefinition,undoBatch:{}}]}initializeNonCourseware(){window.STUDIP.LernmoduleVueJS.module.customdata&&!(0,r.isArray)(window.STUDIP.LernmoduleVueJS.module.customdata)&&(this.serverTaskDefinition=a.LI.parse(window.STUDIP.LernmoduleVueJS.module.customdata),this.undoRedoStack=[{taskDefinition:this.serverTaskDefinition,undoBatch:{}}]),this.serverModuleName=window.STUDIP.LernmoduleVueJS.module.name,this.serverInfotext=window.STUDIP.LernmoduleVueJS.infotext,this.moduleName=window.STUDIP.LernmoduleVueJS.module.name,this.infotext=window.STUDIP.LernmoduleVueJS.infotext}startedSaving(){this.saveStatus={status:"saving"}}saveSuccess(e){this.saveStatus={status:"saved"},this.serverTaskDefinition=e.taskDefinition,this.serverModuleName=e.moduleName,this.serverInfotext=e.infotext}saveFailure(e){this.saveStatus={status:"error",error:e},this.nonFatalErrors.push("The task could not be saved.  Check the console for more details. "),console.log(e)}async saveTask(){if("saving"!==this.saveStatus.status){this.context.commit("startedSaving");try{const e=await(0,l.F9)(this.taskDefinition,this.moduleName,this.infotext,window.STUDIP.LernmoduleVueJS.module.module_id,window.STUDIP.LernmoduleVueJS.block_id);await c(500),this.context.commit("saveSuccess",e)}catch(e){this.context.commit("saveFailure",{error:e})}}}performEdit(e){const t=this.undoRedoStack[this.undoRedoIndex];if((0,r.isEqual)(t.taskDefinition,e.newTaskDefinition))return;const n=!(0,r.isEqual)(e.undoBatch,{})&&(0,r.isEqual)(e.undoBatch,t.undoBatch);n?(t.taskDefinition=e.newTaskDefinition,this.undoRedoStack=this.undoRedoStack.slice(0,this.undoRedoIndex+1)):(this.undoRedoStack=this.undoRedoStack.slice(0,this.undoRedoIndex+1).concat([{taskDefinition:e.newTaskDefinition,undoBatch:e.undoBatch}]),this.undoRedoIndex+=1)}setModuleName(e){this.moduleName=e}setInfoText(e){this.infotext=e}};u([s.mm],g.prototype,"undo",null),u([s.mm],g.prototype,"redo",null),u([s.mm],g.prototype,"initializeCourseware",null),u([s.mm],g.prototype,"initializeNonCourseware",null),u([s.mm],g.prototype,"startedSaving",null),u([s.mm],g.prototype,"saveSuccess",null),u([s.mm],g.prototype,"saveFailure",null),u([s.aU],g.prototype,"saveTask",null),u([s.mm],g.prototype,"performEdit",null),u([s.mm],g.prototype,"setModuleName",null),u([s.mm],g.prototype,"setInfoText",null),g=u([(0,s.Yl)({name:"taskEditor"})],g);var h=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let p=class extends s.g4{constructor(...e){super(...e),(0,o.Z)(this,"showEditorUI",!1),(0,o.Z)(this,"studipContext",{id:"",type:""})}setShowEditorUI(e){this.showEditorUI=e}saveBlock(){console.log("coursewareBlockStore: saveBlock() mutation called");const e=JSON.parse(JSON.stringify(b.taskDefinition));window.parent.postMessage({type:"SaveCoursewareBlock",taskDefinition:e})}cancelEditing(){console.log("coursewareBlockStore: cancelEditing() mutation called"),window.parent.postMessage({type:"CancelEditingCoursewareBlock"})}setContext(e){this.studipContext=e}};h([s.mm],p.prototype,"setShowEditorUI",null),h([s.mm],p.prototype,"saveBlock",null),h([s.mm],p.prototype,"cancelEditing",null),h([s.mm],p.prototype,"setContext",null),p=h([(0,s.Yl)({name:"coursewareBlock"})],p);var m=n(2333);const k=n(5428),f=k.mapResourceModules,w=(0,i.MT)({modules:{taskEditor:g,coursewareBlock:p,...f({names:["courses","course-memberships","courseware-blocks","courseware-block-comments","courseware-block-feedback","courseware-clipboards","courseware-containers","courseware-instances","courseware-public-links","courseware-structural-elements","courseware-structural-element-comments","courseware-structural-element-feedback","courseware-task-feedback","courseware-task-groups","courseware-tasks","courseware-templates","courseware-user-data-fields","courseware-user-progresses","courseware-units","files","file-refs","folders","lti-tools","status-groups","users","institutes","institute-memberships","semesters","sem-classes","sem-types","terms-of-use","user-data-field","studip-properties"],httpClient:m.Mb})}}),b=(0,s.rT)(g,w),y=(0,s.rT)(p,w)},7251:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(3396);const s=["value"];function o(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("textarea",{value:e.modelValue,ref:"studip_wysiwyg",class:"studip-wysiwyg",onInput:t[0]||(t[0]=t=>e.updateValue(t.target.value))},null,40,s)}var a=(0,i.aZ)({name:"studip-wysiwyg",props:{modelValue:String,forceSoftBreaks:{type:Boolean,required:!1,default:!1},removeWrappingPTag:{type:Boolean,required:!1,default:!1},disableAutoformat:{type:Boolean,required:!1,default:!1},insertHtmlComment:{type:Boolean,required:!1,default:!1}},data(){return{fallbackActive:!1}},mounted(){let e=this.initCKE();e||(this.fallbackActive=!0)},methods:{initCKE(){if(!window.STUDIP.wysiwyg_enabled)return!1;const e=this.$refs.studip_wysiwyg;return e.onload=t=>{console.info("load");let n=window.STUDIP.wysiwyg.getEditor(e);if(n.model.document.on("change:data",(()=>{let e=n.getData();if(this.removeWrappingPTag&&(e=e.replace(/<p>(.*?)/,"$1").replace(/(.*?)<\/p>/,"$1")),this.insertHtmlComment){const t=/^\s*<!--\s*HTML.*?-->/i;t.test(e)||(e="\x3c!--HTML--\x3e".concat(e))}this.$emit("update:modelValue",e)})),n.editing.view.document.on("enter",((e,t)=>{this.forceSoftBreaks&&(n.execute("shiftEnter"),t.preventDefault(),e.stop())}),{priority:"high"}),this.disableAutoformat){const e=n.plugins.get("Autoformat");e.isEnabled=!1}},window.STUDIP.wysiwyg.replace(e),!0},updateValue(e){this.fallbackActive&&this.$emit("update:modelValue",e)}}}),r=n(89);const l=(0,r.Z)(a,[["render",o]]);var d=l},4763:function(e){"use strict";e.exports="data:application/font-woff;charset=utf-8;base64,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"},5893:function(){}}]);
//# sourceMappingURL=chunk-common.js.map