{"version":3,"file":"js/chunk-common.js","mappings":"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","sources":["webpack://vue101/./src/components/findTheHotspots/findTheHotspotsEditorState.ts","webpack://vue101/./src/components/findTheHotspots/findTheHotspotsViewerState.ts","webpack://vue101/./src/components/interactiveVideo/interactiveVideoEditorState.ts","webpack://vue101/./src/components/taskEditorState.ts","webpack://vue101/./src/directives/vDisableDrag.ts","webpack://vue101/./src/directives/vModelUndoable.ts","webpack://vue101/./src/functions.ts","webpack://vue101/./src/language/gettext.ts","webpack://vue101/./src/models/FindTheHotspotsTask.ts","webpack://vue101/./src/models/InteractiveVideoTask.ts","webpack://vue101/./src/models/common.ts","webpack://vue101/./src/routes/jsonApi.ts","webpack://vue101/./src/routes/lernmodule.ts","webpack://vue101/./src/store/modules/taskEditor.ts","webpack://vue101/./src/store/modules/coursewareBlock.ts","webpack://vue101/./src/store/modules/requestQueue.ts","webpack://vue101/./src/store/index.ts","webpack://vue101/./src/components/DragTheWordsEditor.vue?59e9","webpack://vue101/./src/components/DragTheWordsEditor.vue","webpack://vue101/./src/components/DragTheWordsEditor.vue?d6b5","webpack://vue101/./src/components/DragTheWordsViewer.vue?4cee","webpack://vue101/./src/components/DragTheWordsViewer.vue","webpack://vue101/./src/components/DragTheWordsViewer.vue?7545","webpack://vue101/./src/components/ErrorMessage.vue?1f29","webpack://vue101/./src/components/ErrorMessage.vue","webpack://vue101/./src/components/ErrorMessage.vue?5a16","webpack://vue101/./src/components/FeedbackEditor.vue?05fc","webpack://vue101/./src/components/FeedbackEditor.vue","webpack://vue101/./src/components/FeedbackEditor.vue?a35b","webpack://vue101/./src/components/FeedbackElement.vue?81fd","webpack://vue101/./src/components/FeedbackElement.vue","webpack://vue101/./src/components/FeedbackElement.vue?7265","webpack://vue101/./src/components/FileUpload.vue?453e","webpack://vue101/./src/components/FileUpload.vue","webpack://vue101/./src/components/FileUpload.vue?4ef7","webpack://vue101/./src/components/FillInTheBlanksEditor.vue?3da7","webpack://vue101/./src/components/FillInTheBlanksEditor.vue","webpack://vue101/./src/components/FillInTheBlanksEditor.vue?4671","webpack://vue101/./src/components/FillInTheBlanksViewer.vue?a1d7","webpack://vue101/./src/components/FillInTheBlanksViewer.vue","webpack://vue101/./src/components/FillInTheBlanksViewer.vue?31ca","webpack://vue101/./src/components/LazyImage.vue?de09","webpack://vue101/./src/components/LazyImage.vue","webpack://vue101/./src/components/LazyImage.vue?fe3e","webpack://vue101/./src/components/MarkTheWordsEditor.vue?7ca2","webpack://vue101/./src/components/MarkTheWordsEditor.vue","webpack://vue101/./src/components/MarkTheWordsEditor.vue?31d0","webpack://vue101/./src/components/MarkTheWordsViewer.vue?81e2","webpack://vue101/./src/components/MarkTheWordsViewer.vue","webpack://vue101/./src/components/MarkTheWordsViewer.vue?af90","webpack://vue101/./src/components/MemoryEditor.vue?6baf","webpack://vue101/./src/components/MemoryEditor.vue","webpack://vue101/./src/components/MemoryEditorCard.vue?9ca2","webpack://vue101/./src/components/MemoryEditorCard.vue","webpack://vue101/./src/components/MemoryEditorCard.vue?cd13","webpack://vue101/./src/components/MemoryEditor.vue?bbee","webpack://vue101/./src/components/MemoryViewer.vue?c255","webpack://vue101/./src/components/MemoryViewer.vue","webpack://vue101/./src/components/MemoryViewerCard.vue?5285","webpack://vue101/./src/components/MemoryViewerCard.vue","webpack://vue101/./src/components/MemoryViewerCard.vue?65cb","webpack://vue101/./src/components/MemoryViewer.vue?449d","webpack://vue101/./src/components/MultimediaElement.vue?3699","webpack://vue101/./src/components/MultimediaElement.vue","webpack://vue101/./src/components/MultimediaElement.vue?dd2e","webpack://vue101/./src/components/PairingEditor.vue?9abc","webpack://vue101/./src/components/PairingEditor.vue","webpack://vue101/./src/components/PairingEditorPair.vue?e64b","webpack://vue101/./src/components/PairingEditorPair.vue","webpack://vue101/./src/components/PairingEditorPair.vue?1bf9","webpack://vue101/./src/components/PairingEditorCard.vue?e23e","webpack://vue101/./src/components/PairingEditorCard.vue","webpack://vue101/./src/components/PairingEditorCard.vue?906a","webpack://vue101/./src/components/PairingEditor.vue?7dbb","webpack://vue101/./src/components/PairingViewer.vue?96ff","webpack://vue101/./src/components/PairingViewer.vue","webpack://vue101/./src/components/PairingViewerTargetElement.vue?ed87","webpack://vue101/./src/components/PairingViewerTargetElement.vue","webpack://vue101/./src/components/PairingViewerTargetElement.vue?b150","webpack://vue101/./src/components/PairingViewer.vue?f97c","webpack://vue101/./src/components/QuestionEditor.vue?5276","webpack://vue101/./src/components/QuestionEditor.vue","webpack://vue101/./src/components/QuestionEditor.vue?bd0e","webpack://vue101/./src/components/QuestionViewer.vue?58ef","webpack://vue101/./src/components/QuestionViewer.vue","webpack://vue101/./src/components/QuestionViewer.vue?4bca","webpack://vue101/./src/components/SequencingEditor.vue?08b3","webpack://vue101/./src/components/SequencingEditor.vue","webpack://vue101/./src/components/SequencingEditorCard.vue?f528","webpack://vue101/./src/components/SequencingEditorCard.vue","webpack://vue101/./src/components/SequencingEditorCard.vue?6b21","webpack://vue101/./src/components/SequencingEditor.vue?61f6","webpack://vue101/./src/components/SequencingViewer.vue?041e","webpack://vue101/./src/components/SequencingViewer.vue","webpack://vue101/./src/components/SequencingViewer.vue?951c","webpack://vue101/./src/components/StudipWysiwyg.vue?72c2","webpack://vue101/./src/components/StudipWysiwyg.vue","webpack://vue101/./src/components/StudipWysiwyg.vue?3716","webpack://vue101/./src/components/crossword/CrosswordEditor.vue","webpack://vue101/./src/components/crossword/CrosswordEditor.vue?42c6","webpack://vue101/./src/components/crossword/CrosswordViewer.vue","webpack://vue101/./src/components/crossword/CrosswordViewer.vue?34b4","webpack://vue101/./src/components/findTheHotspots/FindTheHotspotsEditor.vue?833a","webpack://vue101/./src/components/findTheHotspots/FindTheHotspotsEditor.vue","webpack://vue101/./src/components/findTheHotspots/FindTheHotspotsEditor.vue?6f1e","webpack://vue101/./src/components/findTheHotspots/FindTheHotspotsViewer.vue?dcb4","webpack://vue101/./src/components/findTheHotspots/FindTheHotspotsViewer.vue","webpack://vue101/./src/components/findTheHotspots/FindTheHotspotsViewer.vue?3676","webpack://vue101/./src/components/findTheHotspots/ImageWithHotspots.vue?bcce","webpack://vue101/./src/components/findTheHotspots/ImageWithHotspots.vue","webpack://vue101/./src/components/findTheHotspots/ImageWithHotspots.vue?cd94","webpack://vue101/./src/components/findTheWords/FindTheWordsEditor.vue?de09","webpack://vue101/./src/components/findTheWords/FindTheWordsEditor.vue","webpack://vue101/./src/components/findTheWords/FindTheWordsEditor.vue?8deb","webpack://vue101/./src/components/findTheWords/FindTheWordsViewer.vue?3d4a","webpack://vue101/./src/components/findTheWords/FindTheWordsViewer.vue","webpack://vue101/./src/components/findTheWords/FindTheWordsViewer.vue?c796","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoEditor.vue?fc6e","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoEditor.vue","webpack://vue101/./src/components/courseware-components-ported-to-vue3/TabsComponent.vue","webpack://vue101/./src/components/courseware-components-ported-to-vue3/TabsComponent.vue?4702","webpack://vue101/./src/components/courseware-components-ported-to-vue3/TabComponent.vue","webpack://vue101/./src/components/courseware-components-ported-to-vue3/TabComponent.vue?7dcd","webpack://vue101/./src/components/interactiveVideo/VideoTimeline.vue?7473","webpack://vue101/./src/components/interactiveVideo/VideoTimeline.vue","webpack://vue101/./src/components/interactiveVideo/getEmValueFromElement.ts","webpack://vue101/./src/components/interactiveVideo/VideoTimeline.vue?6963","webpack://vue101/./src/components/interactiveVideo/SelectedInteractionProperties.vue?50b5","webpack://vue101/./src/components/interactiveVideo/SelectedInteractionProperties.vue","webpack://vue101/./src/components/interactiveVideo/VideoTimeInput.vue?05c3","webpack://vue101/./src/components/interactiveVideo/VideoTimeInput.vue","webpack://vue101/./src/components/interactiveVideo/VideoTimeInput.vue?f86d","webpack://vue101/./src/components/interactiveVideo/SelectedInteractionProperties.vue?2331","webpack://vue101/./src/components/interactiveVideo/AddInteractions.vue?2832","webpack://vue101/./src/components/interactiveVideo/AddInteractions.vue","webpack://vue101/./src/components/interactiveVideo/AddInteractions.vue?b1a6","webpack://vue101/./src/components/interactiveVideo/SelectVideo.vue?64d8","webpack://vue101/./src/components/interactiveVideo/SelectVideo.vue","webpack://vue101/./src/components/courseware-components-ported-to-vue3/FilePicker.vue?0d72","webpack://vue101/./src/components/courseware-components-ported-to-vue3/FilePicker.vue","webpack://vue101/./src/components/courseware-components-ported-to-vue3/FolderPicker.vue?7233","webpack://vue101/./src/components/courseware-components-ported-to-vue3/FolderPicker.vue","webpack://vue101/./src/components/courseware-components-ported-to-vue3/FolderPicker.vue?3e7d","webpack://vue101/./src/components/courseware-components-ported-to-vue3/FilePicker.vue?f01e","webpack://vue101/./src/components/interactiveVideo/SelectVideo.vue?b1fd","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoEditor.vue?b53f","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoViewer.vue?292b","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoViewer.vue","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoViewer.vue?20ac","webpack://vue101/./src/components/interactiveVideo/VideoPlayer.vue?ec7f","webpack://vue101/./src/components/interactiveVideo/VideoPlayer.vue","webpack://vue101/./src/components/interactiveVideo/interactions/LmbTaskInteraction.vue?208a","webpack://vue101/./src/components/interactiveVideo/interactions/LmbTaskInteraction.vue","webpack://vue101/./src/components/interactiveVideo/interactions/LmbTaskInteraction.vue?99f3","webpack://vue101/./src/components/interactiveVideo/interactions/OverlayInteraction.vue?8ec1","webpack://vue101/./src/components/interactiveVideo/interactions/OverlayInteraction.vue","webpack://vue101/./src/components/interactiveVideo/interactions/OverlayInteraction.vue?9826","webpack://vue101/./src/components/interactiveVideo/VideoPlayer.vue?8a11"],"sourcesContent":["import { InjectionKey, Ref } from 'vue';\nimport { Hotspot } from '@/models/FindTheHotspotsTask';\n\n/**\n * In the Find The Hotspots Editor, we use provide/inject to pass data to many\n * different components at once without prop drilling.\n * There is a little bit of ceremony required to have the passed data be statically typed.\n * https://vuejs.org/guide/typescript/composition-api.html#typing-provide-inject\n */\nexport const findTheHotspotsEditorStateSymbol = Symbol(\n  'Find The Hotspots Editor state'\n) as InjectionKey<FindTheHotspotsEditorState>;\n\nexport interface FindTheHotspotsEditorState {\n  // Some of this stuff was copied over from interactiveVideoEditorState.\n  // We will adapt it together to work for Find The Hotspots.\n  selectedHotspotId: Ref<string | undefined>;\n  selectHotspot(id: string | undefined): void;\n  deleteSelectedHotspot(): void;\n  changeHotspotCorrectness(correct: boolean): void;\n  setHotspotFeedback(feedback: string): void;\n  dragHotspot(\n    dragId: string,\n    hotspotId: string,\n    xFraction: number,\n    yFraction: number\n  ): void;\n  resizeHotspot(\n    dragId: string,\n    hotspotId: string,\n    x: number,\n    y: number,\n    width: number,\n    height: number\n  ): void;\n  // editInteraction(id: string): void;\n  // dragInteractionTimeline(id: string, startTime: number): void;\n}\n","import { InjectionKey, Ref } from 'vue';\n\n/**\n * In the Find The Hotspots Viewer, we use provide/inject to pass data to many\n * different components at once without prop drilling.\n * There is a little bit of ceremony required to have the passed data be statically typed.\n * https://vuejs.org/guide/typescript/composition-api.html#typing-provide-inject\n */\nexport const findTheHotspotsViewerStateSymbol = Symbol(\n  'Find The Hotspots Viewer state'\n) as InjectionKey<FindTheHotspotsViewerState>;\n\nexport interface FindTheHotspotsViewerState {\n  clickHotspot(id: string | undefined, x: number, y: number): void;\n  clickBackground(x: number, y: number): void;\n}\n","import { InjectionKey, Ref } from 'vue';\n\n/**\n * In the Interactive Video Editor, we use provide/inject to pass data to many\n * different components at once without prop drilling.\n * There is a little bit of ceremony required to have the passed data be statically typed.\n * https://vuejs.org/guide/typescript/composition-api.html#typing-provide-inject\n */\nexport const interactiveVideoEditorStateSymbol = Symbol(\n  'Interactive Video Editor state'\n) as InjectionKey<InteractiveVideoEditorState>;\n\nexport interface InteractiveVideoEditorState {\n  selectedInteractionId: Ref<string | undefined>;\n  selectInteraction(id: string): void;\n  editInteraction(id: string): void;\n  dragInteraction(\n    interactionId: string,\n    clampedXFraction: number,\n    clampedYFraction: number\n  ): void;\n  resizeOverlay(\n    id: string,\n    x: number,\n    y: number,\n    width: number,\n    height: number\n  ): void;\n  deleteInteraction(interactionId: string): void;\n\n  dragInteractionTimeline(id: string, startTime: number): void;\n}\n","import { taskEditorStore } from '@/store';\nimport { InjectionKey } from 'vue';\n\nexport const taskEditorStateSymbol = Symbol(\n  'Task editor injected dependencies'\n) as InjectionKey<TaskEditorState>;\n\nexport interface TaskEditorState {\n  performEdit: typeof taskEditorStore.performEdit;\n}\n","import { Directive } from 'vue';\n\nexport const disableDrag: Directive = {\n  mounted(el: HTMLElement) {\n    // Set the parent element to non-draggable\n    el.setAttribute('draggable', 'false');\n\n    // Function to recursively disable dragging for all child elements\n    const setDraggableFalse = (element: HTMLElement) => {\n      element.setAttribute('draggable', 'false');\n      element.childNodes.forEach((child) => {\n        if (child instanceof HTMLElement) {\n          setDraggableFalse(child);\n        }\n      });\n    };\n\n    setDraggableFalse(el);\n  },\n} as const;\n","import { store, taskEditorStore } from '@/store';\nimport { Directive, DirectiveBinding } from 'vue';\n\n/**\n * This is a custom directive that you can use like v-model in the Lernmodul-Editor.\n * Like v-model, it is a two-way binding, but rather than directly modifying\n * 'taskDefinition', it saves changes into the undo-redo stack by calling\n * 'taskEditorStore.performEdit'.\n * It also sets an attribute 'data-undo-focus-id' on the element.\n * This attribute is used during the 'undo' and 'redo' operations.\n * The input elements whose contents are modified by 'undo' or 'redo' will\n * automatically be focus()ed and brought into view.\n * TODO: Can I get better stack traces when errors are thrown inside of\n *   directive hooks?  Right now, they do not show what line of the .vue file\n *   caused the errors to be thrown.\n */\nexport const modelUndoable: Directive = {\n  mounted(\n    el: HTMLElement,\n    binding: DirectiveBinding<unknown>,\n    vnode,\n    prevVnode\n  ) {\n    const validEl = validateElement(el);\n    validEl.setAttribute('data-undo-focus-id', parsePath(binding).join('.'));\n\n    el.addEventListener('input', (ev: Event) => {\n      const splitPath = parsePath(binding);\n      const [firstPathEl, ...restOfPath] = splitPath;\n      const value = vnode.el.value;\n      const newState = JSON.parse(\n        JSON.stringify(taskEditorStore.taskDefinition)\n      );\n      setValueAtPath(newState, restOfPath, value);\n      taskEditorStore.performEdit({\n        newTaskDefinition: newState,\n        undoBatch: splitPath.join('.'),\n      });\n      console.log(el, binding, vnode, prevVnode, ev, splitPath, value);\n    });\n\n    function setElValueFromStore() {\n      const splitPath = parsePath(binding);\n      const storeValue = getValueAtPath(taskEditorStore, splitPath);\n      const validatedStoreValue = validateBoundValue(storeValue);\n      validEl.value = validatedStoreValue.toString();\n    }\n    store.watch(\n      () => {\n        const splitPath = parsePath(binding);\n        return getValueAtPath(taskEditorStore, splitPath);\n      },\n      () => setElValueFromStore()\n    );\n    setElValueFromStore();\n  },\n} as const;\n\n/**\n * Make sure that the binding supplied by the user is a valid one.\n * It should be a path to a field of 'taskEditorStore.taskDefinition',\n * e.g. 'taskDefinition.task_type'.\n * @param binding - See https://vuejs.org/guide/reusability/custom-directives.html#directive-hooks\n */\nfunction parsePath(binding: DirectiveBinding<unknown>): Array<string> {\n  if (typeof binding.value !== 'string') {\n    throw new Error(bindingMustBeStringError + binding.value);\n  }\n  const splitPath = binding.value.split('.');\n  const firstPathEl = splitPath[0];\n  if (firstPathEl !== 'taskDefinition') {\n    throw new Error(bindingMustUseTaskDefinitionError + binding.value);\n  }\n  return splitPath;\n}\n\nfunction validateElement(\n  el: HTMLElement\n): HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement {\n  if (\n    el instanceof HTMLInputElement ||\n    el instanceof HTMLTextAreaElement ||\n    el instanceof HTMLSelectElement\n  ) {\n    return el;\n  }\n  throw new Error(invalidElementTypeError);\n}\n\nfunction validateBoundValue(val: unknown): string | number | boolean {\n  if (\n    typeof val !== 'string' &&\n    typeof val !== 'number' &&\n    typeof val !== 'boolean'\n  ) {\n    throw new Error(boundValueMustBePrimitiveError + typeof val);\n  }\n  return val;\n}\n\nfunction getValueAtPath(o: object, path: Array<string>): unknown {\n  return path.reduce((accumulator: any, pathComponent: string) => {\n    if (!Object.prototype.hasOwnProperty.call(accumulator, pathComponent)) {\n      throw new Error(invalidPathError + path.join('.'));\n    }\n    return accumulator[pathComponent];\n  }, o);\n}\n\nfunction setValueAtPath(o: object, splitPath: Array<string>, value: any) {\n  const [lastPathComponent, ...restOfPath] = [splitPath.pop(), ...splitPath];\n  if (lastPathComponent === undefined) {\n    throw new Error('Path has no last element');\n  }\n  const targetObject = restOfPath.reduce(\n    (accumulator: Record<string, any>, pathComponent: string) =>\n      accumulator[pathComponent],\n    o\n  );\n  targetObject[lastPathComponent] = value;\n}\n\n// TODO translate these strings in Weblate.\nconst bindingMustBeStringError =\n  'The value supplied to v-model-undoable must be a string. ' +\n  'Example: <select v-model-undoable=\"\\'taskDefinition.task_type\\'\">\\n' +\n  'You supplied the following value: ';\n\nconst bindingMustUseTaskDefinitionError =\n  'The string supplied to v-model-undoable must be a path which begins with ' +\n  '\"taskDefinition\", and the path must be wrapped in two sets of quotes. \\n' +\n  'Example usage: <select v-model-undoable=\"\\'taskDefinition.task_type\\'\">\\n' +\n  'You supplied the following string: ';\n\nconst boundValueMustBePrimitiveError =\n  'The value bound with v-model-undoable must be a string, number or boolean.  ' +\n  'Other datatypes are not currently supported.  The value found is of type ';\n\nconst invalidPathError =\n  'No field was found in the store under the given path.  Did you make a ' +\n  'typo?  Path: ';\n\nconst invalidElementTypeError =\n  'v-model-undoable can only be used on <input>, <textarea> and <select> elements';\n","import { $gettext } from '@/language/gettext';\n\nexport function formatInvalidTaskDefinitionErrorMessage(\n  e: unknown,\n  task_json: unknown\n): string {\n  return (\n    $gettext(\n      'Diese Aufgabe konnte nicht geladen werden. ' +\n        'Beim Einlesen von task_json ist ein Fehler aufgetreten. Fehler: '\n    ) +\n    '\\n' +\n    e +\n    '\\n' +\n    'task_json: ' +\n    JSON.stringify(task_json, null, 2)\n  );\n}\n","import { createGettext } from 'vue3-gettext';\nimport translations from '@/language/translations.json';\nimport { memoize } from 'lodash';\n\nconst selectedLanguage = Object.values(window.STUDIP.INSTALLED_LANGUAGES).find(\n  (lang) => lang.selected\n);\nconst gettextPlugin = createGettext({\n  availableLanguages: {\n    en: 'English',\n    de: 'Deutsch',\n  },\n  defaultLanguage: selectedLanguage?.path ?? 'de',\n  translations: translations,\n});\n\n// Cache gettext results.\n// This fixes the problem we had where the error 'No translations found for de' was\n// being printed excessively often (sometimes 1000s of times per second) during\n// certain UI interactions, e.g. when dragging interactions around on top of\n// the video in the Interactive Video Editor.\nconst $gettext = memoize(gettextPlugin.$gettext, (...args) =>\n  JSON.stringify(args)\n);\n\nconst $pgettext = memoize(gettextPlugin.$pgettext, (...args) =>\n  JSON.stringify(args)\n);\n\nconst $npgettext = memoize(gettextPlugin.$npgettext, (...args) =>\n  JSON.stringify(args)\n);\n\nexport { gettextPlugin, $gettext, $pgettext, $npgettext };\n","import { z } from 'zod';\nimport { imageSchema, feedbackSchema } from '@/models/common';\n\nconst rectangleHotspotSchema = z.object({\n  uuid: z.string(),\n  type: z.literal('rectangle'),\n  x: z.number(), // Fraction 0..1 of image width\n  y: z.number(), // Fraction 0..1 of image height\n  width: z.number(), // Fraction 0..1 of image width\n  height: z.number(), // Fraction 0..1 of image height\n  correct: z.boolean().default(true),\n  feedback: z.string().default(''),\n});\nexport type RectangleHotspot = z.infer<typeof rectangleHotspotSchema>;\n\nconst ellipseHotspotSchema = z.object({\n  uuid: z.string(),\n  type: z.literal('ellipse'),\n  x: z.number(), // Fraction 0..1 of image width\n  y: z.number(), // Fraction 0..1 of image height\n  width: z.number(), // Fraction 0..1 of image width\n  height: z.number(), // Fraction 0..1 of image height\n  correct: z.boolean().default(true),\n  feedback: z.string().default(''),\n});\nexport type EllipseHotspot = z.infer<typeof ellipseHotspotSchema>;\n\nexport const hotspotSchema = z.union([\n  rectangleHotspotSchema,\n  ellipseHotspotSchema,\n]);\nexport type Hotspot = z.infer<typeof hotspotSchema>;\nexport type HotspotType = Hotspot['type'];\n\nexport const findTheHotspotsTaskSchema = z.object({\n  task_type: z.literal('FindTheHotspots'),\n  image: imageSchema,\n  hotspots: z.array(hotspotSchema),\n  allowedClicks: z.number().default(0),\n  hotspotsToFind: z.number().default(0),\n  strings: z.object({\n    retryButton: z.string(),\n    resultMessage: z.string(),\n    feedbackWhenClickingBackground: z.string().default(''),\n    feedbackWhenClickingHotspotAgain: z\n      .string()\n      .default('Du hast diesen Hotspot bereits gefunden.'),\n  }),\n  feedback: z.array(feedbackSchema),\n});\nexport type FindTheHotspotsTask = z.infer<typeof findTheHotspotsTaskSchema>;\n","// Types for the Interactive Video task type.\nimport { z } from 'zod';\nimport {\n  iconForTaskType,\n  printTaskType,\n  taskDefinitionSchemaMinusInteractiveVideo,\n} from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport { wysiwygUploadedFileSchema } from '@/routes/lernmodule';\n\n// There are different types of 'interaction' which can be added to the video.\n// TODO Maybe put the 'base' attributes shared by all types of interaction all in one place.\n// TODO I think it may be wiser to use 'startTime' and 'duration' rather than 'startTime' and 'endTime'.\n// I chose to use 'start' and 'end' because it made the ui in one place easier to implement\n// (v-model for 'end time' input field), but I have noticed that I must calculate a duration\n// by hand in many other places anyway.\n\n/**\n * @deprecated -- Text field renamed to content_wysiwyg to simplify implementation\n * of file export in PHP.\n */\nconst overlaySchema_v1 = z.object({\n  type: z.literal('overlay'),\n  id: z.string(),\n  startTime: z.number(), // Seconds\n  endTime: z.number(), // Seconds\n  x: z.number(), // Position, as a fraction of video width, between 0 and 1\n  y: z.number(), // Position, as a fraction of video height, between 0 and 1\n  width: z.number(), // Width, as a fraction of video width, between 0 and 1\n  height: z.number(), // Height, as a fraction of video width, between 0 and 1\n  text: z.string(), // Sanitized HTML from Wysiwyg editor\n  pauseWhenVisible: z.boolean().optional().default(true),\n});\nconst overlaySchema_v2 = overlaySchema_v1.omit({ text: true }).extend({\n  v: z.literal(2), // Schema version\n  content_wysiwyg: z.string(), // Sanitized HTML from Wysiwyg editor\n});\n// Overlay: An overlay is shown on top of the video over a span of time\nconst overlaySchema = z\n  .union([overlaySchema_v1, overlaySchema_v2])\n  .transform((val): z.infer<typeof overlaySchema_v2> => {\n    if (!Object.hasOwn(val, 'v')) {\n      // Migration from v1 to v2\n      const val_v1 = val as z.infer<typeof overlaySchema_v1>;\n      const { text, ...val_v1_rest } = val_v1;\n      const val_v2 = {\n        v: 2,\n        content_wysiwyg: text,\n        ...val_v1_rest,\n      } as z.infer<typeof overlaySchema_v2>;\n      console.log(\n        'Migrating from overlaySchema_v1 to overlaySchema_v2',\n        'v1:',\n        val_v1,\n        'v2:',\n        val_v2\n      );\n      return val_v2;\n    } else {\n      return val as z.infer<typeof overlaySchema_v2>;\n    }\n  });\nexport type OverlayInteraction = z.infer<typeof overlaySchema_v2>;\n\n// LMB Task interaction: A Lernmodule Block Task (LMB Task) is shown at a given\n// point in the video for the student to solve.\nconst lmbTaskInteractionSchema = z.object({\n  type: z.literal('lmbTask'),\n  id: z.string(),\n  startTime: z.number(), // Seconds\n  endTime: z.number(), // Seconds\n  x: z.number(), // Position, as a fraction of video width, between 0 and 1\n  y: z.number(), // Position, as a fraction of video height, between 0 and 1\n  taskDefinition: z.lazy(() => taskDefinitionSchemaMinusInteractiveVideo),\n  pauseWhenVisible: z.boolean().optional().default(true),\n});\nexport type LmbTaskInteraction = z.infer<typeof lmbTaskInteractionSchema>;\n\nconst interactiveVideoInteractionSchema = z\n  .union([overlaySchema, lmbTaskInteractionSchema])\n  .refine((data) => data.endTime > data.startTime, {\n    message: 'endTime cannot be earlier than startTime',\n    path: ['endTime'],\n  });\nexport type Interaction = z.infer<typeof interactiveVideoInteractionSchema>;\n\nconst noVideoSchema = z.object({\n  type: z.literal('none'),\n});\nexport type NoVideo = z.infer<typeof noVideoSchema>;\nconst youtubeVideoSchema = z.object({\n  type: z.literal('youtube'),\n  url: z.string(),\n});\nexport type YoutubeVideo = z.infer<typeof youtubeVideoSchema>;\n\n/**\n * @deprecated -- File is now stored as ID instead of url,name,type.\n */\nconst studipFileVideoSchema_v1 = z.object({\n  type: z.literal('studipFileReference'),\n  file: wysiwygUploadedFileSchema,\n});\nconst studipFileVideoSchema_v2 = z.object({\n  v: z.literal(2),\n  type: z.literal('studipFileReference'),\n  file_id: z.string(),\n});\nconst studipFileVideoSchema = z\n  .union([studipFileVideoSchema_v1, studipFileVideoSchema_v2])\n  .transform((val) => {\n    if (!Object.hasOwn(val, 'v')) {\n      // Migration from v1 to v2\n      const val_v1 = val as z.infer<typeof studipFileVideoSchema_v1>;\n      const urlParams = new URLSearchParams(val_v1.file.url);\n      const file_id = urlParams.get('file_id');\n      if (!file_id) {\n        throw new Error(\n          'Could not migrate studip file reference schema v1 to v2. The query param ' +\n            `\"file_id\" was not found in the string file.url: \"${val_v1.file.url}\"`\n        );\n      }\n      const val_v2 = {\n        v: 2,\n        type: 'studipFileReference',\n        file_id,\n      } as z.infer<typeof studipFileVideoSchema_v2>;\n      console.log(\n        'Migrating from studipFileVideoSchema_v1 to studipFileVideoSchema_v2',\n        'v1:',\n        val_v1,\n        'v2:',\n        val_v2\n      );\n      return val_v2;\n    } else {\n      return val as z.infer<typeof studipFileVideoSchema_v2>;\n    }\n  });\nexport type StudipFileVideo = z.infer<typeof studipFileVideoSchema>;\n\nconst videoSchema = z.union([\n  noVideoSchema,\n  youtubeVideoSchema,\n  studipFileVideoSchema,\n]);\nexport type Video = z.infer<typeof videoSchema>;\n\nexport const interactiveVideoTaskSchema = z.object({\n  task_type: z.literal('InteractiveVideo'),\n  video: videoSchema,\n  autoplay: z.boolean().optional().default(false),\n  startAt: z.number().optional().default(0),\n  disableNavigation: z\n    .union([\n      z.literal('not disabled'),\n      z.literal('forward disabled'),\n      z.literal('forward and backward disabled'),\n    ])\n    .default('not disabled'),\n  interactions: z.array(interactiveVideoInteractionSchema),\n});\nexport type InteractiveVideoTask = z.infer<typeof interactiveVideoTaskSchema>;\n\nexport function printInteractionType(interaction: Interaction): string {\n  switch (interaction.type) {\n    case 'lmbTask':\n      return printTaskType(interaction.taskDefinition.task_type);\n    case 'overlay':\n      return $gettext('Einblendung');\n  }\n}\n\nexport function iconForInteraction(interaction: Interaction): string {\n  switch (interaction.type) {\n    case 'overlay':\n      return 'item';\n    case 'lmbTask':\n      return iconForTaskType(interaction.taskDefinition.task_type);\n  }\n}\n\nexport const resizeHandles = [\n  'left',\n  'top-left',\n  'top',\n  'top-right',\n  'right',\n  'bottom-right',\n  'bottom',\n  'bottom-left',\n] as const;\nexport type ResizeHandle = typeof resizeHandles[number];\n","import { z } from 'zod';\n\nconst noImageSchema = z.object({\n  type: z.literal('none'),\n});\n\nexport const imageFileSchema = z.object({\n  uuid: z.string(),\n  type: z.literal('image'),\n  file_id: z.string(),\n  altText: z.string(),\n});\nexport type ImageFileElement = z.infer<typeof imageFileSchema>;\n\nexport const imageSchema = z.union([noImageSchema, imageFileSchema]);\nexport type ImageElement = z.infer<typeof imageSchema>;\n\nexport const feedbackSchema = z.object({\n  percentage: z.number(),\n  message: z.string(),\n});\nexport type Feedback = z.infer<typeof feedbackSchema>;\n","import axios from 'axios';\nimport { z } from 'zod';\n\nexport const httpClient = axios.create({\n  baseURL: window.STUDIP.URLHelper.getURL(`jsonapi.php/v1`, {}, true),\n  headers: {\n    'Content-Type': 'application/vnd.api+json',\n  },\n});\n\n/**\n * Send a request to the JSON API to create a file. Adapted from the file\n * \"courseware.module.js\" in the Stud.IP core.\n */\nexport async function createFile({\n  file,\n  fileData,\n  folder,\n}: {\n  file: CreateFileSpec;\n  fileData: File | Blob;\n  folder: Pick<FolderRef, 'id'>;\n}): Promise<FileRef> {\n  const termId = file?.relationships?.['terms-of-use']?.data?.id ?? null;\n  const formData = new FormData();\n  formData.append('file', fileData, file.attributes.name);\n  if (termId) {\n    formData.append('term-id', termId);\n  }\n  const url = `folders/${folder.id}/file-refs`;\n  const request = await httpClient.post(url, formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  });\n  const response = await httpClient.get(request.headers.location);\n  const data = response.data.data;\n  return fileRefsSchema.parse(data);\n}\n\n/**\n * Send a request to the JSON API to get all folders for a given userId.\n */\nexport async function getFolders({\n  userId,\n}: {\n  userId: string;\n}): Promise<FolderRef[]> {\n  const url = `users/${userId}/folders`;\n\n  // Make the GET request\n  const response = await httpClient.get(url, {\n    headers: {\n      'Content-Type': 'application/vnd.api+json',\n    },\n  });\n\n  // Return the parsed response data\n  return response.data.data as FolderRef[];\n}\n\n/**\n * Send a request to the JSON API to create a folder.\n */\nexport async function createFolder({\n  userId,\n  name,\n  parentFolderId,\n  folderType,\n}: {\n  userId: string;\n  name: string;\n  parentFolderId: string;\n  folderType: string;\n}): Promise<FolderRef> {\n  // Construct the endpoint for creating a folder for a user\n  const url = `users/${userId}/folders`;\n\n  // Prepare the request payload\n  const payload = {\n    data: {\n      type: 'folders',\n      attributes: {\n        'folder-type': folderType,\n        name: name,\n      },\n      relationships: {\n        parent: {\n          data: {\n            type: 'folders',\n            id: parentFolderId,\n          },\n        },\n      },\n    },\n  };\n\n  // Make the POST request\n  const response = await httpClient.post(url, payload, {\n    headers: {\n      'Content-Type': 'application/vnd.api+json',\n    },\n  });\n\n  // Return the parsed response data\n  return response.data.data as FolderRef;\n}\n\n/**\n * Datatype 'file-refs' provided by the Stud.IP JSON API.\n */\nexport const fileRefsSchema = z.object({\n  type: z.literal('file-refs'),\n  id: z.string(),\n  attributes: z.object({\n    name: z.string(),\n    mkdate: z.string(),\n    chdate: z.string(),\n    description: z.string(),\n    downloads: z.number(),\n    filesize: z.number(),\n    'is-downloadable': z.boolean(),\n    'is-editable': z.boolean(),\n    'is-readable': z.boolean(),\n    'is-writable': z.boolean(),\n    'mime-type': z.string(),\n  }),\n  links: z.object({\n    self: z.string(),\n  }),\n  meta: z.object({\n    'download-url': z.string(),\n  }),\n  // 'unknown' for the moment because I did not care to write out types for this\n  // field and do not have a use for it in the code I have written thus far.\n  relationships: z.unknown(),\n});\nexport type FileRef = z.infer<typeof fileRefsSchema>;\n\nexport interface FolderRef {\n  id: string;\n  attributes: {\n    'folder-type': string;\n    'data-content': {\n      download_allowed: number;\n    };\n    name: string;\n  };\n  relationships?: {\n    parent?: {\n      data: {\n        id: string;\n      };\n    };\n  };\n}\n\n/**\n * A subset of the information contained in FileRef, containing the information\n * necessary to send a request to create a new file on the server.\n */\nexport interface CreateFileSpec {\n  relationships?: {\n    'terms-of-use'?: {\n      data?: {\n        id?: string;\n      };\n    };\n  };\n  attributes: {\n    name: string;\n  };\n}\n","import { TaskDefinition, taskDefinitionSchema } from '@/models/TaskDefinition';\nimport { z } from 'zod';\n\n/**\n * Save a Vue.js Lernmodul that is being edited in the \"Lernmodule\" tab of a\n * course.\n * @param taskDefinition The definition of the task\n * @param moduleName The name of the Lernmodul\n * @param infoText The HTML description of the Lernmodul\n * @param module_id The id from lernmodule_module\n * @param block_id The id from lernmodule_blocks where the module is to be\n *                 inserted.  (This only applies for newly created modules.)\n */\nexport async function saveTask(\n  taskDefinition: TaskDefinition,\n  moduleName: string,\n  infoText: string,\n  module_id: string,\n  block_id?: string\n): Promise<SaveTaskResponse> {\n  const url = window.STUDIP.LernmoduleVueJS.saveRoute;\n  const token = window.STUDIP.CSRF_TOKEN;\n  const formData = new FormData();\n  // Parse taskDefinition here to ensure it has no extra fields we didn't intend to save.\n  const parsedTaskDefinition = taskDefinitionSchema.parse(taskDefinition);\n  formData.append('task_definition', JSON.stringify(parsedTaskDefinition));\n  formData.append('module_id', module_id);\n  formData.append('name', moduleName);\n  formData.append('infotext', infoText);\n  if (block_id) {\n    formData.append('block_id', block_id);\n  }\n  formData.append(token.name, token.value);\n  return fetch(url, {\n    method: 'POST',\n    body: formData,\n  }).then((response) => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    // TODO Maybe we should parse the server's response to ensure it really is\n    //  an instance of SaveTaskResponse.\n    return response.json() as Promise<SaveTaskResponse>;\n  });\n}\n\nexport interface SaveTaskResponse {\n  status: 'success';\n  taskDefinition: TaskDefinition;\n  moduleName: string;\n  infotext: string;\n}\n\n/**\n * Send a request to Stud.IP to update the number of points earned by the student\n * for the Lernmodul that is currently viewed.\n * @param points -- a map describing how many points the student should be reported\n * as having for each part of the Lernmodul.\n * Key: The ID or name of the part.  Value: The number of points.\n * @param success - If true, the attempt will be marked as 'successful'.\n */\nexport async function updateAttempt(\n  points: Record<string, number>,\n  success: boolean\n): Promise<void> {\n  // The ID of the Lernmodul is encoded in this URL provided to us by the server.\n  const url = window.STUDIP.LernmoduleVueJS.updateAttemptRoute;\n  const formData = new FormData();\n  const token = window.STUDIP.CSRF_TOKEN;\n  formData.append(token.name, token.value);\n  // Convert object into a nested array which PHP will understand\n  Object.entries(points).forEach(([name, score]) => {\n    formData.append(`message[points][${name}]`, score.toString());\n  });\n  if (success) {\n    formData.append('message[success]', 'true');\n  }\n  return fetch(url, {\n    method: 'POST',\n    body: formData,\n  }).then((response) => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n  });\n}\n\nexport const wysiwygUploadedFileSchema = z.object({\n  name: z.string(),\n  type: z.string(),\n  url: z.string(),\n});\n","import { Action, Module, Mutation, VuexModule } from 'vuex-module-decorators';\nimport {\n  newTask,\n  TaskDefinition,\n  taskDefinitionSchema,\n} from '@/models/TaskDefinition';\nimport { isArray, isEqual } from 'lodash';\nimport { saveTask, SaveTaskResponse } from '@/routes/lernmodule';\nimport { setAutoFreeze } from 'immer';\nimport { formatInvalidTaskDefinitionErrorMessage } from '@/functions';\n\n// Prevent immer from freezing objects.  This behavior causes trouble when we\n// attempt to use v-model with an object produced by immer, because v-model\n// works by mutating objects.\nsetAutoFreeze(false);\n\ntype Saved = {\n  status: 'saved';\n};\ntype Saving = {\n  status: 'saving';\n};\ntype SaveError = {\n  status: 'error';\n  error: unknown;\n};\ntype SaveStatus = Saved | Saving | SaveError;\n\ninterface UndoRedoState {\n  taskDefinition: TaskDefinition;\n  undoBatch: unknown;\n}\n\nfunction sleep(ms: number) {\n  return new Promise((r) => setTimeout(r, ms));\n}\n\n@Module({ name: 'taskEditor' })\nexport class TaskEditorModule extends VuexModule {\n  saveStatus: SaveStatus = { status: 'saved' };\n  fatalErrors: string[] = [];\n  nonFatalErrors: string[] = [];\n  serverTaskDefinition: TaskDefinition | [] = [];\n  serverModuleName: string = '';\n  serverInfotext: string = '';\n  moduleName: string = '';\n  infotext: string = '';\n  undoRedoStack: UndoRedoState[] = [\n    {\n      taskDefinition: newTask('FillInTheBlanks'),\n      undoBatch: {},\n    },\n  ];\n  undoRedoIndex = 0;\n\n  get taskDefinition(): TaskDefinition {\n    return this.undoRedoStack[this.undoRedoIndex].taskDefinition;\n  }\n\n  get hasUnsavedChanges(): boolean {\n    return (\n      !isEqual(this.taskDefinition, this.serverTaskDefinition) ||\n      this.serverModuleName !== this.moduleName ||\n      this.serverInfotext !== this.infotext\n    );\n  }\n\n  get canUndo() {\n    return this.undoRedoIndex > 0;\n  }\n\n  get canRedo() {\n    return this.undoRedoIndex < this.undoRedoStack.length - 1;\n  }\n\n  @Mutation\n  undo() {\n    if (this.undoRedoIndex > 0) {\n      const currentState = this.undoRedoStack[this.undoRedoIndex];\n      this.undoRedoIndex--;\n\n      // Focus the input field whose contents will change as a result of this undo.\n      // That's how undo/redo behaves in native apps like Microsoft Word.\n      // When you press undo, it scrolls to the point in the document where\n      // the undo took place.  This lets you observe the result of your action.\n      const inputElements = document.querySelectorAll(\n        `[data-undo-focus-id=\"${currentState.undoBatch}\"]`\n      );\n      if (inputElements.length > 0) {\n        const inputEl = inputElements.item(0) as HTMLElement;\n        // If the input is inside of a collapsed <fieldset>, then the <fieldset>\n        // should be un-collapsed so that the user can see the input field.\n        const collapsedParents = [\n          ...document.querySelectorAll('fieldset.collapsable.collapsed'),\n        ].filter((element) => element.contains(inputEl));\n        collapsedParents.forEach((parent) =>\n          parent.classList.remove('collapsed')\n        );\n        inputEl.focus();\n      }\n    }\n  }\n\n  @Mutation\n  redo() {\n    if (this.undoRedoIndex < this.undoRedoStack.length - 1) {\n      this.undoRedoIndex++;\n      const nextState = this.undoRedoStack[this.undoRedoIndex];\n\n      // Manage focus -- see comments in undo()\n      const inputElements = document.querySelectorAll(\n        `[data-undo-focus-id=\"${nextState.undoBatch}\"]`\n      );\n      if (inputElements.length > 0) {\n        const inputEl = inputElements.item(0) as HTMLElement;\n        const collapsedParents = [\n          ...document.querySelectorAll('fieldset.collapsable.collapsed'),\n        ].filter((element) => element.contains(inputEl));\n        collapsedParents.forEach((parent) =>\n          parent.classList.remove('collapsed')\n        );\n        inputEl.focus();\n      }\n    }\n  }\n\n  // Initialize the editor store to a state usable for courseware\n  @Mutation\n  initializeCourseware(task_json: TaskDefinition) {\n    console.info('initializeCourseware()', task_json);\n    this.serverTaskDefinition = task_json;\n    this.undoRedoStack = [\n      { taskDefinition: this.serverTaskDefinition, undoBatch: {} },\n    ];\n  }\n\n  // Initialize the editor store to a state usable for the non-courseware version\n  // of Lernmodule (AKA the 'Lernmodule' tab in a course).\n  @Mutation\n  initializeNonCourseware() {\n    // In Linux on Anns PC this is an empty array but on Windows on Thomas PC it's just NULL.\n    // We don't know why this is, but for now, we will just accept it and handle both cases.\n    if (\n      window.STUDIP.LernmoduleVueJS.module.customdata &&\n      !isArray(window.STUDIP.LernmoduleVueJS.module.customdata)\n    ) {\n      try {\n        this.serverTaskDefinition = taskDefinitionSchema.parse(\n          window.STUDIP.LernmoduleVueJS.module.customdata\n        );\n      } catch (e: unknown) {\n        const errorMessage = formatInvalidTaskDefinitionErrorMessage(\n          e,\n          window.STUDIP.LernmoduleVueJS.module.customdata\n        );\n        console.error(errorMessage, e);\n        console.error(\n          'task_json: ',\n          window.STUDIP.LernmoduleVueJS.module.customdata\n        );\n        throw new Error(errorMessage, { cause: e });\n      }\n      this.undoRedoStack = [\n        { taskDefinition: this.serverTaskDefinition, undoBatch: {} },\n      ];\n    }\n    this.serverModuleName = window.STUDIP.LernmoduleVueJS.module.name;\n    this.serverInfotext = window.STUDIP.LernmoduleVueJS.infotext;\n    this.moduleName = window.STUDIP.LernmoduleVueJS.module.name;\n    this.infotext = window.STUDIP.LernmoduleVueJS.infotext;\n  }\n\n  @Mutation\n  startedSaving() {\n    this.saveStatus = { status: 'saving' };\n  }\n\n  @Mutation\n  saveSuccess(payload: SaveTaskResponse) {\n    this.saveStatus = { status: 'saved' };\n    this.serverTaskDefinition = payload.taskDefinition;\n    this.serverModuleName = payload.moduleName;\n    this.serverInfotext = payload.infotext;\n  }\n\n  @Mutation\n  saveFailure(error: unknown) {\n    this.saveStatus = { status: 'error', error };\n    this.nonFatalErrors.push(\n      'The task could not be saved.  Check the console for more details. '\n    );\n    console.log(error);\n  }\n\n  @Action\n  async saveTask() {\n    if (this.saveStatus.status === 'saving') {\n      return;\n    }\n    this.context.commit('startedSaving');\n    try {\n      const saveResult = await saveTask(\n        this.taskDefinition,\n        this.moduleName,\n        this.infotext,\n        window.STUDIP.LernmoduleVueJS.module.module_id,\n        window.STUDIP.LernmoduleVueJS.block_id\n      );\n      await sleep(500);\n      this.context.commit('saveSuccess', saveResult);\n    } catch (error) {\n      this.context.commit('saveFailure', { error });\n    }\n  }\n\n  /**\n   * Modify the currently edited task definition, creating a new undo/redo state\n   * if appropriate.  Edits are batched together based on the parameter 'undoBatch'.\n   * @param payload.taskDefinition The new state of the task being edited\n   * @param payload.undoBatch (Optional) Any value.\n   * If undoBatch is not provided or an empty object is provided, a new\n   * undo/redo state will always be created.\n   * Otherwise, a new undo/redo state will be created iff undoBatch is different\n   * from the undoBatch of the previously performed action.\n   */\n  @Mutation\n  performEdit(payload: {\n    newTaskDefinition: TaskDefinition;\n    undoBatch?: unknown;\n  }) {\n    if (!payload.undoBatch) {\n      payload.undoBatch = {};\n    }\n    const currentUndoRedoState = this.undoRedoStack[this.undoRedoIndex];\n    if (\n      isEqual(currentUndoRedoState.taskDefinition, payload.newTaskDefinition)\n    ) {\n      return; // Do not pollute the undo-redo history with no-op changes\n    }\n    const shouldMergeEdits =\n      !isEqual(payload.undoBatch, {}) &&\n      isEqual(payload.undoBatch, currentUndoRedoState.undoBatch);\n    if (shouldMergeEdits) {\n      // Amend the last undo state instead of creating a new one.\n      currentUndoRedoState.taskDefinition = payload.newTaskDefinition;\n      this.undoRedoStack = this.undoRedoStack.slice(0, this.undoRedoIndex + 1);\n    } else {\n      // Create a new undo state and append it to the stack.\n      this.undoRedoStack = this.undoRedoStack\n        .slice(0, this.undoRedoIndex + 1)\n        .concat([\n          {\n            taskDefinition: payload.newTaskDefinition,\n            undoBatch: payload.undoBatch,\n          },\n        ]);\n      this.undoRedoIndex += 1;\n    }\n  }\n\n  @Mutation\n  setModuleName(name: string) {\n    this.moduleName = name;\n  }\n\n  @Mutation\n  setInfoText(value: string) {\n    this.infotext = value;\n  }\n}\n","import { Action, Module, Mutation, VuexModule } from 'vuex-module-decorators';\nimport { taskEditorStore } from '@/store';\nimport { Context } from '@/models/CoursewareBlockIframeMessages';\n\n@Module({ name: 'coursewareBlock' })\nexport class CoursewareBlockModule extends VuexModule {\n  showEditorUI: boolean = false;\n  studipContext: Context = {\n    id: '',\n    type: '',\n  };\n\n  // Toggle whether to show the editing UI in the courseware block.\n  // This should be triggered via messages posted to the iframe.\n  // See courseware-main.ts and LernmoduleCoursewareBlockBase.js.\n  @Mutation\n  setShowEditorUI(state: boolean) {\n    this.showEditorUI = state;\n  }\n\n  @Mutation\n  saveBlock() {\n    console.log('coursewareBlockStore: saveBlock() mutation called');\n    // Tell the Vue 2 component we are wrapped in to save the block.\n    // See the method 'onWindowMessage' of LernmoduleCoursewareBlockBase.js\n    // The taskDefinition must be serialized in order for it to be passed\n    // between windows.\n    const taskDefinition = JSON.parse(\n      JSON.stringify(taskEditorStore.taskDefinition)\n    );\n    window.parent.postMessage({\n      type: 'SaveCoursewareBlock',\n      taskDefinition,\n    });\n  }\n\n  @Mutation\n  cancelEditing() {\n    console.log('coursewareBlockStore: cancelEditing() mutation called');\n    // Tell the Vue 2 component we are wrapped in to stop editing the block\n    // without saving the user's changes.\n    // See the method 'onWindowMessage' of LernmoduleCoursewareBlockBase.js\n    window.parent.postMessage({\n      type: 'CancelEditingCoursewareBlock',\n    });\n  }\n\n  @Mutation\n  setContext(context: Context) {\n    this.studipContext = context;\n  }\n}\n","import { Module, VuexModule, Mutation, Action } from 'vuex-module-decorators';\n\n@Module({ name: 'requestQueue' })\nexport class RequestQueueModule extends VuexModule {\n  queue: Array<() => Promise<void>> = [];\n  active = 0;\n  maxConcurrent = 6;\n  delay = 0;\n\n  // Mutation to add a request to the queue\n  @Mutation\n  addToQueue(request: () => Promise<void>) {\n    this.queue.push(request);\n  }\n\n  // Mutation to update active request count\n  @Mutation\n  incrementActive() {\n    this.active++;\n  }\n\n  @Mutation\n  decrementActive() {\n    this.active--;\n  }\n\n  // Action to handle queue processing\n  @Action\n  async processQueue() {\n    if (this.active >= this.maxConcurrent) {\n      console.debug(\n        `Max concurrent limit reached (${this.maxConcurrent}). Active requests: ${this.active}. Queue length: ${this.queue.length}`\n      );\n      return;\n    }\n\n    if (this.queue.length === 0) {\n      console.debug(`Queue is empty. Active requests: ${this.active}`);\n      return;\n    }\n\n    const request = this.queue.shift();\n    if (request) {\n      this.context.commit('incrementActive');\n\n      try {\n        await request();\n      } finally {\n        this.context.commit('decrementActive');\n\n        if (this.delay) {\n          await new Promise((resolve) => setTimeout(resolve, this.delay));\n        }\n\n        await this.processQueue(); // Recursively process the next request\n      }\n    }\n  }\n\n  // Action to add a request and trigger queue processing\n  @Action\n  async enqueue(request: () => Promise<void>) {\n    this.context.commit('addToQueue', request);\n    await this.processQueue();\n  }\n}\n","import { createStore } from 'vuex';\nimport { getModule } from 'vuex-module-decorators';\nimport { TaskEditorModule } from '@/store/modules/taskEditor';\nimport { CoursewareBlockModule } from '@/store/modules/coursewareBlock';\nimport { RequestQueueModule } from '@/store/modules/requestQueue';\nimport { httpClient } from '@/routes/jsonApi';\nconst reststateVuex = require('@elan-ev/reststate-vuex');\nconst mapResourceModules = reststateVuex.mapResourceModules;\n\nexport const store = createStore({\n  modules: {\n    taskEditor: TaskEditorModule,\n    coursewareBlock: CoursewareBlockModule,\n    requestQueue: RequestQueueModule,\n    // Dynamically generated store modules used to access Stud.IP's JSON API\n    ...mapResourceModules({\n      names: [\n        'courses',\n        'course-memberships',\n        'courseware-blocks',\n        'courseware-block-comments',\n        'courseware-block-feedback',\n        'courseware-clipboards',\n        'courseware-containers',\n        'courseware-instances',\n        'courseware-public-links',\n        'courseware-structural-elements',\n        'courseware-structural-element-comments',\n        'courseware-structural-element-feedback',\n        'courseware-task-feedback',\n        'courseware-task-groups',\n        'courseware-tasks',\n        'courseware-templates',\n        'courseware-user-data-fields',\n        'courseware-user-progresses',\n        'courseware-units',\n        'files',\n        'file-refs',\n        'folders',\n        'lti-tools',\n        'status-groups',\n        'users',\n        'institutes',\n        'institute-memberships',\n        'semesters',\n        'sem-classes',\n        'sem-types',\n        'terms-of-use',\n        'user-data-field',\n        'studip-properties',\n      ],\n      httpClient,\n    }),\n  },\n});\n// These variables have type information attached to them, thanks to\n// the library vuex-module-decorators.\nexport const taskEditorStore = getModule(TaskEditorModule, store);\nexport const coursewareBlockStore = getModule(CoursewareBlockModule, store);\nexport const requestQueueStore = getModule(RequestQueueModule, store);\n","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelCheckbox as _vModelCheckbox, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = { class: \"h5pEditorTopPanel\" }\nconst _hoisted_4 = [\"data-tooltip\"]\nconst _hoisted_5 = { style: {\"margin-top\":\"1.5ex\"} }\nconst _hoisted_6 = [\"data-tooltip\"]\nconst _hoisted_7 = { class: \"collapsable collapsed\" }\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = { class: \"collapsable collapsed\" }\nconst _hoisted_10 = [\"disabled\"]\nconst _hoisted_11 = [\"disabled\"]\nconst _hoisted_12 = [\"disabled\"]\nconst _hoisted_13 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_studip_wysiwyg = _resolveComponent(\"studip-wysiwyg\")!\n  const _component_feedback_editor = _resolveComponent(\"feedback-editor\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Drag the Words')), 1),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addBlank && _ctx.addBlank(...args))),\n            class: \"button add-blank\",\n            type: \"button\"\n          }, _toDisplayString(_ctx.$gettext('Lcke hinzufgen')), 1),\n          _createElementVNode(\"div\", {\n            class: \"tooltip tooltip-icon\",\n            \"data-tooltip\": _ctx.instructions\n          }, null, 8, _hoisted_4)\n        ]),\n        _createVNode(_component_studip_wysiwyg, {\n          modelValue: _ctx.modelTaskDefinition.template,\n          \"onUpdate:modelValue\": _ctx.onEditTemplate,\n          ref: \"wysiwyg\",\n          \"force-soft-breaks\": \"\",\n          \"remove-wrapping-p-tag\": \"\",\n          \"disable-autoformat\": \"\"\n        }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"]),\n        _createElementVNode(\"label\", _hoisted_5, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Irrefhrende Antworten')) + \" \", 1),\n          _createElementVNode(\"span\", {\n            class: \"tooltip tooltip-icon\",\n            \"data-tooltip\": _ctx.distratorInstructions\n          }, null, 8, _hoisted_6),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.modelTaskDefinition.distractors) = $event)),\n            onInput: _cache[2] || (_cache[2] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.distractors'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, _ctx.modelTaskDefinition.distractors]\n          ])\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_7, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.modelTaskDefinition.instantFeedback) = $event)),\n            onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.instantFeedback]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lcken automatisch prfen')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.modelTaskDefinition.alphabeticOrder) = $event)),\n            onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.alphabeticOrder]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Antworten alphabetisch sortieren')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.modelTaskDefinition.retryAllowed) = $event)),\n            onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.retryAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.modelTaskDefinition.showSolutionsAllowed) = $event)),\n            onChange: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.updateShowSolutionsAllowed && _ctx.updateShowSolutionsAllowed(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.showSolutionsAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen anzeigen erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((_ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions) = $event)),\n            onChange: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.updateShowSolutionsAllowed && _ctx.updateShowSolutionsAllowed(...args))),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"checkbox\"\n          }, null, 40, _hoisted_8), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen nur anzeigen, wenn alle Lcken ausgefllt sind')), 1)\n        ], 2)\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_9, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Beschriftungen')), 1),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': _ctx.modelTaskDefinition.instantFeedback })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr berprfen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((_ctx.modelTaskDefinition.strings.checkButton) = $event)),\n            onInput: _cache[14] || (_cache[14] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.checkButton'))),\n            disabled: _ctx.modelTaskDefinition.instantFeedback,\n            type: \"text\"\n          }, null, 40, _hoisted_10), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.checkButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.retryAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((_ctx.modelTaskDefinition.strings.retryButton) = $event)),\n            onInput: _cache[16] || (_cache[16] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            disabled: !_ctx.modelTaskDefinition.retryAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_11), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.retryButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Lsungen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((_ctx.modelTaskDefinition.strings.solutionsButton) = $event)),\n            onInput: _cache[18] || (_cache[18] = ($event: any) => (\n              _ctx.updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            )),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_12), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.solutionsButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled':\n              !_ctx.modelTaskDefinition.showSolutionsAllowed ||\n              !_ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Hinweis, wenn nicht alle Lcken ausgefllt sind:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event: any) => ((_ctx.modelTaskDefinition.strings.fillInAllBlanksMessage) = $event)),\n            onInput: _cache[20] || (_cache[20] = ($event: any) => (\n              _ctx.updateTaskDefinition(\n                'taskDefinition.strings.fillInAllBlanksMessage'\n              )\n            )),\n            disabled: \n              !_ctx.modelTaskDefinition.showSolutionsAllowed ||\n              !_ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions\n            ,\n            type: \"text\"\n          }, null, 40, _hoisted_13), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.fillInAllBlanksMessage]\n          ])\n        ], 2)\n      ]),\n      _createVNode(_component_feedback_editor, {\n        feedback: _ctx.modelTaskDefinition.feedback,\n        \"result-message\": _ctx.modelTaskDefinition.strings.resultMessage,\n        \"onUpdate:feedback\": _ctx.updateFeedback,\n        \"onUpdate:resultMessage\": _ctx.updateResultMessage\n      }, null, 8, [\"feedback\", \"result-message\", \"onUpdate:feedback\", \"onUpdate:resultMessage\"])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset>\n        <legend>{{ $gettext('Drag the Words') }}</legend>\n\n        <div class=\"h5pEditorTopPanel\">\n          <button @click=\"addBlank\" class=\"button add-blank\" type=\"button\">\n            {{ $gettext('Lcke hinzufgen') }}\n          </button>\n          <div class=\"tooltip tooltip-icon\" :data-tooltip=\"instructions\" />\n        </div>\n\n        <studip-wysiwyg\n          :modelValue=\"modelTaskDefinition.template\"\n          @update:modelValue=\"onEditTemplate\"\n          ref=\"wysiwyg\"\n          force-soft-breaks\n          remove-wrapping-p-tag\n          disable-autoformat\n        />\n\n        <label style=\"margin-top: 1.5ex\">\n          {{ $gettext('Irrefhrende Antworten') }}\n          <span\n            class=\"tooltip tooltip-icon\"\n            :data-tooltip=\"distratorInstructions\"\n          />\n          <input\n            v-model=\"modelTaskDefinition.distractors\"\n            @input=\"updateTaskDefinition('taskDefinition.distractors')\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.instantFeedback\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lcken automatisch prfen') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.alphabeticOrder\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Antworten alphabetisch sortieren') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.retryAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrere Versuche erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.showSolutionsAllowed\"\n            @change=\"updateShowSolutionsAllowed\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lsungen anzeigen erlauben') }}\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          <input\n            v-model=\"modelTaskDefinition.allBlanksMustBeFilledForSolutions\"\n            @change=\"updateShowSolutionsAllowed\"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"checkbox\"\n          />\n          {{\n            $gettext('Lsungen nur anzeigen, wenn alle Lcken ausgefllt sind')\n          }}\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label\n          :class=\"{ 'setting-disabled': modelTaskDefinition.instantFeedback }\"\n        >\n          {{ $gettext('Text fr berprfen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.checkButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.checkButton')\"\n            :disabled=\"modelTaskDefinition.instantFeedback\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.retryAllowed }\"\n        >\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            :disabled=\"!modelTaskDefinition.retryAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          {{ $gettext('Text fr Lsungen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.solutionsButton\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            \"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled':\n              !modelTaskDefinition.showSolutionsAllowed ||\n              !modelTaskDefinition.allBlanksMustBeFilledForSolutions,\n          }\"\n        >\n          {{ $gettext('Hinweis, wenn nicht alle Lcken ausgefllt sind:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.fillInAllBlanksMessage\"\n            @input=\"\n              updateTaskDefinition(\n                'taskDefinition.strings.fillInAllBlanksMessage'\n              )\n            \"\n            :disabled=\"\n              !modelTaskDefinition.showSolutionsAllowed ||\n              !modelTaskDefinition.allBlanksMustBeFilledForSolutions\n            \"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <feedback-editor\n        :feedback=\"modelTaskDefinition.feedback\"\n        :result-message=\"modelTaskDefinition.strings.resultMessage\"\n        @update:feedback=\"updateFeedback\"\n        @update:result-message=\"updateResultMessage\"\n      />\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport { DragTheWordsTask } from '@/models/TaskDefinition';\nimport { Feedback } from '@/models/common';\nimport { $gettext } from '@/language/gettext';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\nimport produce from 'immer';\nimport FeedbackEditor from '@/components/FeedbackEditor.vue';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'DragTheWordsEditor',\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  components: { StudipWysiwyg, FeedbackEditor },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<DragTheWordsTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      modelTaskDefinition: cloneDeep(this.taskDefinition),\n    };\n  },\n  watch: {\n    // Synchronize state taskDefinition -> modelTaskDefinition.\n    taskDefinition: {\n      immediate: true,\n      handler: function (): void {\n        this.modelTaskDefinition = cloneDeep(this.taskDefinition);\n      },\n    },\n  },\n  computed: {\n    instructions(): string {\n      return $gettext(\n        'Um eine Lcke zu erstellen, setzen Sie ein Sternchen (*) vor und hinter das korrekte Wort oder markieren Sie das Wort und klicken Sie auf den Button Lcke hinzufgen. Sie knnen auch einen Tooltip hinzufgen, indem Sie einen Doppelpunkt (:) vor den Tooltip-Text schreiben.'\n      );\n    },\n\n    distratorInstructions(): string {\n      return $gettext(\n        'Geben Sie falsche Antworten als Distraktoren ein. Verwenden Sie das gleiche Sternchen (*)-Schema wie im Text.'\n      );\n    },\n  },\n  methods: {\n    $gettext,\n\n    /**\n     * Surround the selected text with two asterisks\n     */\n    addBlank() {\n      const wysiwygEl = (this.$refs.wysiwyg as any)?.$el;\n      const editor = window.STUDIP.wysiwyg.getEditor(wysiwygEl);\n      if (!editor) {\n        console.error('getEditor(wysiwygEl) returned: ', editor);\n        throw new Error('Could not get reference to wysiwyg editor');\n      }\n      const selection = editor.model.document.selection;\n      const start = selection.getFirstPosition();\n      const end = selection.getLastPosition();\n      if (!start || !end) {\n        console.error('selection start: ', start, ' selection end: ', end);\n        throw new Error('Could not get selection in editor');\n      }\n      editor.model.change((writer) => {\n        writer.insertText('*', end);\n        writer.insertText('*', start);\n      });\n    },\n\n    onEditTemplate(data: string): void {\n      // Copy new data from wysiwyg editor into task definition\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (task: DragTheWordsTask) => {\n            task.template = data;\n          }\n        ),\n        undoBatch: 'taskDefinition.template',\n      });\n    },\n\n    updateTaskDefinition(undoBatch?: unknown) {\n      // Synchronize state modelTaskDefinition -> taskDefinition.\n      this.taskEditor!.performEdit({\n        newTaskDefinition: cloneDeep(this.modelTaskDefinition),\n        undoBatch: undoBatch ?? {},\n      });\n    },\n\n    updateShowSolutionsAllowed() {\n      if (!this.modelTaskDefinition.showSolutionsAllowed) {\n        this.modelTaskDefinition.allBlanksMustBeFilledForSolutions = false;\n      }\n      this.updateTaskDefinition();\n    },\n\n    updateFeedback(updatedFeedback: Feedback[]) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: DragTheWordsTask) => {\n            taskDraft.feedback = updatedFeedback;\n          }\n        ),\n        undoBatch: 'taskDefinition.feedback',\n      });\n    },\n\n    updateResultMessage(updatedResultMessage: string) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: DragTheWordsTask) => {\n            taskDraft.strings.resultMessage = updatedResultMessage;\n          }\n        ),\n        undoBatch: 'taskDefinition.strings.resultMessage',\n      });\n    },\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n  },\n});\n</script>\n\n<style scoped></style>\n","import { render } from \"./DragTheWordsEditor.vue?vue&type=template&id=4a3ed2e8&ts=true\"\nimport script from \"./DragTheWordsEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./DragTheWordsEditor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-501f9f22\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"text-and-answers-container\" }\nconst _hoisted_3 = { class: \"text-and-feedback-container\" }\nconst _hoisted_4 = { class: \"drag-the-words-text\" }\nconst _hoisted_5 = [\"innerHTML\"]\nconst _hoisted_6 = [\"title\", \"draggable\", \"onDragstart\", \"onDrop\", \"onClick\"]\nconst _hoisted_7 = [\"onDrop\", \"onClick\"]\nconst _hoisted_8 = { key: 2 }\nconst _hoisted_9 = [\"data-tooltip\"]\nconst _hoisted_10 = {\n  key: 3,\n  class: \"stud5p-solution\"\n}\nconst _hoisted_11 = { class: \"feedback-and-button-container\" }\nconst _hoisted_12 = [\"textContent\"]\nconst _hoisted_13 = { class: \"button-panel\" }\nconst _hoisted_14 = [\"textContent\"]\nconst _hoisted_15 = [\"textContent\"]\nconst _hoisted_16 = [\"textContent\"]\nconst _hoisted_17 = [\"draggable\", \"onDragstart\", \"onClick\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_FeedbackElement = _resolveComponent(\"FeedbackElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.parsedTemplate, (element) => {\n            return (_openBlock(), _createElementBlock(_Fragment, {\n              key: element.uuid\n            }, [\n              (element.type === 'staticText')\n                ? (_openBlock(), _createElementBlock(\"span\", {\n                    key: 0,\n                    class: \"static-text\",\n                    innerHTML: element.text\n                  }, null, 8, _hoisted_5))\n                : (element.type === 'blank')\n                  ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                      (_ctx.userInputs[element.uuid])\n                        ? (_openBlock(), _createElementBlock(\"span\", {\n                            key: 0,\n                            class: _normalizeClass([\"blank filled\", _ctx.classForFilledBlank(element)]),\n                            title: _ctx.getAnswerById(_ctx.userInputs[element.uuid])?.text,\n                            draggable: _ctx.editable,\n                            onDragstart: ($event: any) => (\n                  _ctx.startDragUsedAnswer($event, element, _ctx.userInputs[element.uuid])\n                ),\n                            onDrop: ($event: any) => (_ctx.onDropBlank($event, element)),\n                            onDragover: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n                            onClick: ($event: any) => (_ctx.onClickFilledBlank(element))\n                          }, _toDisplayString(_ctx.getAnswerById(_ctx.userInputs[element.uuid])?.text), 43, _hoisted_6))\n                        : (_openBlock(), _createElementBlock(\"span\", {\n                            key: 1,\n                            class: \"blank\",\n                            onDrop: ($event: any) => (_ctx.onDropBlank($event, element)),\n                            onDragenter: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onDragEnter($event))),\n                            onDragleave: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onDragLeave($event))),\n                            onDragover: _cache[3] || (_cache[3] = _withModifiers(() => {}, [\"prevent\"])),\n                            onClick: ($event: any) => (_ctx.onClickBlank(element))\n                          }, \"  \", 40, _hoisted_7)),\n                      (element.hint)\n                        ? (_openBlock(), _createElementBlock(\"label\", _hoisted_8, [\n                            _createElementVNode(\"span\", {\n                              class: \"tooltip tooltip-icon\",\n                              \"data-tooltip\": element.hint\n                            }, null, 8, _hoisted_9)\n                          ]))\n                        : _createCommentVNode(\"\", true),\n                      (_ctx.showSolutions && !_ctx.submittedAnswerIsCorrect(element))\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString(element.solution), 1))\n                        : _createCommentVNode(\"\", true)\n                    ], 64))\n                  : _createCommentVNode(\"\", true)\n            ], 64))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_11, [\n          (_ctx.showFillInAllTheBlanksMessage)\n            ? (_openBlock(), _createElementBlock(\"div\", {\n                key: 0,\n                class: \"stud5p-message\",\n                textContent: _toDisplayString(_ctx.fillInAllTheBlanksMessage)\n              }, null, 8, _hoisted_12))\n            : _createCommentVNode(\"\", true),\n          (_ctx.showResults)\n            ? (_openBlock(), _createBlock(_component_FeedbackElement, {\n                key: 1,\n                \"achieved-points\": _ctx.correctAnswers,\n                \"max-points\": _ctx.maxPoints,\n                feedback: _ctx.task.feedback,\n                \"result-message\": _ctx.resultMessage\n              }, null, 8, [\"achieved-points\", \"max-points\", \"feedback\", \"result-message\"]))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"div\", _hoisted_13, [\n            (_ctx.showCheckButton)\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 0,\n                  textContent: _toDisplayString(_ctx.task.strings.checkButton),\n                  onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheckButton && _ctx.onClickCheckButton(...args))),\n                  type: \"button\",\n                  class: \"stud5p-button\"\n                }, null, 8, _hoisted_14))\n              : _createCommentVNode(\"\", true),\n            (_ctx.showSolutionsButton)\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 1,\n                  textContent: _toDisplayString(_ctx.task.strings.solutionsButton),\n                  onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onClickSolutionsButton && _ctx.onClickSolutionsButton(...args))),\n                  type: \"button\",\n                  class: \"stud5p-button\"\n                }, null, 8, _hoisted_15))\n              : _createCommentVNode(\"\", true),\n            (_ctx.showRetryButton)\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 2,\n                  textContent: _toDisplayString(_ctx.task.strings.retryButton),\n                  onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onClickRetryButton && _ctx.onClickRetryButton(...args))),\n                  type: \"button\",\n                  class: \"stud5p-button\"\n                }, null, 8, _hoisted_16))\n              : _createCommentVNode(\"\", true)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", {\n        class: \"unused-answers-list\",\n        onDrop: _cache[7] || (_cache[7] = ($event: any) => (_ctx.onDropUnusedAnswers($event))),\n        onDragover: _cache[8] || (_cache[8] = _withModifiers(() => {}, [\"prevent\"]))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.unusedAnswers, (answer) => {\n          return (_openBlock(), _createElementBlock(\"span\", {\n            key: answer.uuid,\n            class: _normalizeClass([\"unused-answer\", {\n            disabled: !this.editable,\n            selected: answer.uuid === this.clickedAnswerId,\n          }]),\n            draggable: _ctx.editable,\n            onDragstart: ($event: any) => (_ctx.startDragUnusedAnswer($event, answer)),\n            onClick: ($event: any) => (_ctx.onClickUnusedAnswer(answer))\n          }, _toDisplayString(answer.text), 43, _hoisted_17))\n        }), 128))\n      ], 32)\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <!-- Main container for text and answers -->\n    <div class=\"text-and-answers-container\">\n      <!-- Render the text and blank elements from parsedTemplate -->\n      <div class=\"text-and-feedback-container\">\n        <div class=\"drag-the-words-text\">\n          <template v-for=\"element in parsedTemplate\" :key=\"element.uuid\">\n            <!-- Static text elements -->\n            <span\n              v-if=\"element.type === 'staticText'\"\n              class=\"static-text\"\n              v-html=\"element.text\"\n            />\n\n            <!-- Blanks -->\n            <template v-else-if=\"element.type === 'blank'\">\n              <!-- Filled blank -->\n              <span\n                v-if=\"userInputs[element.uuid]\"\n                class=\"blank filled\"\n                :title=\"getAnswerById(userInputs[element.uuid])?.text\"\n                :class=\"classForFilledBlank(element)\"\n                :draggable=\"editable\"\n                @dragstart=\"\n                  startDragUsedAnswer($event, element, userInputs[element.uuid])\n                \"\n                @drop=\"onDropBlank($event, element)\"\n                @dragover.prevent\n                @click=\"onClickFilledBlank(element)\"\n              >\n                {{ getAnswerById(userInputs[element.uuid])?.text }}\n              </span>\n\n              <!-- Empty blank -->\n              <span\n                v-else\n                class=\"blank\"\n                @drop=\"onDropBlank($event, element)\"\n                @dragenter=\"onDragEnter($event)\"\n                @dragleave=\"onDragLeave($event)\"\n                @dragover.prevent\n                @click=\"onClickBlank(element)\"\n              >\n                &#8203;\n              </span>\n\n              <!-- Hint tooltip -->\n              <label v-if=\"element.hint\">\n                <span\n                  class=\"tooltip tooltip-icon\"\n                  :data-tooltip=\"element.hint\"\n                />\n              </label>\n\n              <!-- Show solution if incorrect and solutions are revealed -->\n              <span\n                v-if=\"showSolutions && !submittedAnswerIsCorrect(element)\"\n                class=\"stud5p-solution\"\n              >\n                {{ element.solution }}\n              </span>\n            </template>\n          </template>\n        </div>\n\n        <!-- Feedback and button section -->\n        <div class=\"feedback-and-button-container\">\n          <!-- Message prompting user to fill in all blanks before they can show solutions-->\n          <div\n            v-if=\"showFillInAllTheBlanksMessage\"\n            class=\"stud5p-message\"\n            v-text=\"fillInAllTheBlanksMessage\"\n          />\n\n          <!-- Feedback element displaying points and feedback -->\n          <FeedbackElement\n            v-if=\"showResults\"\n            :achieved-points=\"correctAnswers\"\n            :max-points=\"maxPoints\"\n            :feedback=\"task.feedback\"\n            :result-message=\"resultMessage\"\n          />\n\n          <div class=\"button-panel\">\n            <button\n              v-if=\"showCheckButton\"\n              v-text=\"task.strings.checkButton\"\n              @click=\"onClickCheckButton\"\n              type=\"button\"\n              class=\"stud5p-button\"\n            />\n\n            <button\n              v-if=\"showSolutionsButton\"\n              v-text=\"task.strings.solutionsButton\"\n              @click=\"onClickSolutionsButton\"\n              type=\"button\"\n              class=\"stud5p-button\"\n            />\n\n            <button\n              v-if=\"showRetryButton\"\n              v-text=\"task.strings.retryButton\"\n              @click=\"onClickRetryButton\"\n              type=\"button\"\n              class=\"stud5p-button\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <!-- Container for unused answers (draggable answers) -->\n      <div\n        class=\"unused-answers-list\"\n        @drop=\"onDropUnusedAnswers($event)\"\n        @dragover.prevent\n      >\n        <span\n          v-for=\"answer in unusedAnswers\"\n          :key=\"answer.uuid\"\n          class=\"unused-answer\"\n          :class=\"{\n            disabled: !this.editable,\n            selected: answer.uuid === this.clickedAnswerId,\n          }\"\n          :draggable=\"editable\"\n          @dragstart=\"startDragUnusedAnswer($event, answer)\"\n          @click=\"onClickUnusedAnswer(answer)\"\n        >\n          {{ answer.text }}\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { DragTheWordsTask } from '@/models/TaskDefinition';\nimport { v4 as uuidv4 } from 'uuid';\nimport { isEqual } from 'lodash';\nimport { $gettext } from '@/language/gettext';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\n\ntype DragTheWordsElement = Blank | StaticText;\n\ninterface Blank {\n  type: 'blank';\n  uuid: Uuid;\n  solution: string;\n  hint: string;\n}\n\ninterface Answer {\n  uuid: Uuid;\n  text: string;\n}\n\ntype StaticText = {\n  type: 'staticText';\n  uuid: Uuid;\n  text: string;\n};\n\ntype Uuid = string;\n\nexport default defineComponent({\n  name: 'DragTheWordsViewer',\n  components: { FeedbackElement },\n  props: {\n    task: {\n      type: Object as PropType<DragTheWordsTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      // Map from Blank IDs to Answer IDs\n      userInputs: {} as Record<Uuid, Uuid>,\n      submittedAnswers: null as Record<Uuid, Uuid> | null,\n      userWantsToSeeSolutions: false,\n      draggedAnswerId: undefined as Uuid | undefined,\n      draggedSourceId: undefined as Uuid | undefined,\n      clickedAnswerId: undefined as Uuid | undefined,\n      editable: true as Boolean,\n    };\n  },\n  methods: {\n    $gettext,\n\n    submittedAnswerIsCorrect(blank: Blank): boolean {\n      const submittedAnswerId = this.submittedAnswers?.[blank.uuid];\n      if (!submittedAnswerId) return false;\n\n      const submittedAnswer = this.getAnswerById(submittedAnswerId)?.text;\n      if (!submittedAnswer) return false;\n\n      return this.isAnswerCorrect(submittedAnswer, blank.solution);\n    },\n\n    isAnswerCorrect(userAnswer: string, solution: string): boolean {\n      return userAnswer === solution;\n    },\n\n    updateAttempt() {\n      // Tell the server which blanks were filled out correctly.\n      const points = {} as Record<string, number>;\n      this.blanks.forEach((blank, index) => {\n        // TODO Consider what the key should be. This is a bit ugly.\n        // The key is shown directly in the 'assessment' UI.\n        // Maybe we should change how that works?\n        points[`${index} - ${blank.solution}`] = this.submittedAnswerIsCorrect(\n          blank\n        )\n          ? 1\n          : 0;\n      });\n      this.$emit('updateAttempt', {\n        points,\n        // The attempt is marked as successful if all answers were correct.\n        success: this.correctAnswers === this.blanks.length,\n      });\n    },\n\n    getElement(elementId: Uuid): DragTheWordsElement {\n      const el = this.parsedTemplate.find((el) => el.uuid === elementId);\n      if (!el) {\n        throw new Error(\n          'The given element does not exist in parsedTemplate: ' + elementId\n        );\n      }\n      return el;\n    },\n\n    startDragUsedAnswer(\n      dragEvent: DragEvent,\n      blank: Blank,\n      answerId: Uuid\n    ): void {\n      if (!this.editable) return;\n      if (dragEvent.dataTransfer) {\n        dragEvent.dataTransfer.dropEffect = 'move';\n        dragEvent.dataTransfer.effectAllowed = 'move';\n      }\n      const answer = this.getAnswerById(answerId);\n      console.log('Dragging answer: ', answer, 'From blank: ', blank);\n\n      for (const property in this.userInputs) {\n        console.log(property);\n      }\n\n      this.draggedAnswerId = answerId;\n    },\n\n    startDragUnusedAnswer(dragEvent: DragEvent, answer: Answer): void {\n      if (dragEvent.dataTransfer) {\n        dragEvent.dataTransfer.dropEffect = 'move';\n        dragEvent.dataTransfer.effectAllowed = 'move';\n\n        console.log('Dragging answer: ', answer);\n        this.draggedAnswerId = answer.uuid;\n      }\n    },\n\n    onDropBlank(dragEvent: DragEvent, blank: Blank): void {\n      if (!this.draggedAnswerId) {\n        throw new Error('Dragged answer id is undefined');\n      }\n\n      console.log('Dropped answer :', this.draggedAnswer, 'on blank: ', blank);\n\n      // Remove the dropped answer from the blank, if any, where it has been dragged from\n      const previousBlank = this.blanks.find(\n        (blank) => this.userInputs[blank.uuid] === this.draggedAnswerId\n      );\n\n      if (previousBlank) {\n        delete this.userInputs[previousBlank.uuid];\n      }\n\n      // Set the answer for the blank where the answer was dropped\n      this.userInputs[blank.uuid] = this.draggedAnswerId;\n\n      this.draggedAnswerId = undefined;\n    },\n\n    onDropUnusedAnswers(ev: DragEvent): void {\n      ev.preventDefault(); // Indicate that dropping is al\n      if (!this.draggedAnswer) {\n        throw new Error('draggedAnswer is undefined');\n      }\n      // Remove the dropped answer from the blank, if any, where it has been dragged from\n      const blank = this.blanks.find(\n        (blank) => this.userInputs[blank.uuid] === this.draggedAnswerId\n      );\n      if (blank) {\n        delete this.userInputs[blank.uuid];\n      }\n    },\n\n    onDragEnter(event: DragEvent) {\n      const target = event.target as HTMLElement | null;\n      if (target) {\n        target.style.backgroundColor = '#80b4ed';\n      }\n    },\n\n    onDragLeave(event: DragEvent) {\n      const target = event.target as HTMLElement | null;\n      if (target) {\n        target.style.backgroundColor = '';\n      }\n    },\n\n    onClickCheckButton() {\n      // Save a copy of the user's inputs.\n      this.submittedAnswers = { ...this.userInputs };\n      this.editable = false;\n    },\n\n    onClickSolutionsButton() {\n      this.userWantsToSeeSolutions = true;\n    },\n\n    onClickRetryButton() {\n      this.userWantsToSeeSolutions = false;\n      this.userInputs = {};\n      this.submittedAnswers = null;\n      this.editable = true;\n    },\n\n    classForFilledBlank(blank: Blank) {\n      if (!this.submittedAnswers && !this.task.instantFeedback) {\n        return '';\n      }\n\n      if (this.task.instantFeedback) {\n        this.submittedAnswers = { ...this.userInputs };\n      }\n\n      if (this.userInputs?.[blank.uuid]) {\n        if (this.submittedAnswerIsCorrect(blank)) {\n          return 'correct disabled';\n        } else {\n          return 'incorrect disabled';\n        }\n      } else {\n        return '';\n      }\n    },\n\n    getAnswerById(id: Uuid): Answer | undefined {\n      return this.answers.find((answer) => answer.uuid === id);\n    },\n\n    onClickUnusedAnswer(answer: Answer): void {\n      console.log('Clicked answer:', answer);\n      if (this.editable) this.clickedAnswerId = answer.uuid;\n    },\n\n    onClickBlank(blank: Blank): void {\n      console.log('Clicked blank:', blank);\n      if (!this.clickedAnswerId) return;\n      this.userInputs[blank.uuid] = this.clickedAnswerId;\n      this.clickedAnswerId = undefined;\n    },\n\n    onClickFilledBlank(blank: Blank): void {\n      console.log('Clicked filled blank:', blank);\n      if (!this.editable) return;\n\n      if (blank) {\n        delete this.userInputs[blank.uuid];\n      }\n    },\n\n    removePTags(text: string) {\n      // Remove all opening and closing <p> tags\n      return text.replace(/<\\/?p>/g, '');\n    },\n  },\n  computed: {\n    splitTemplate(): string[] {\n      const cleanTemplate = this.removePTags(this.task.template);\n      // Returns an array where the even indexes are the static text portions,\n      // and the odd indexes are the blanks.\n      return cleanTemplate.split(/\\*([^*]*)\\*/);\n    },\n\n    parsedTemplate(): DragTheWordsElement[] {\n      return this.splitTemplate.map((value, index) => {\n        if (index % 2 === 0) {\n          return { type: 'staticText', text: value, uuid: uuidv4() };\n        } else {\n          let splitString = value.split(':');\n          let solution = splitString[0];\n          let hint = splitString[1];\n          return {\n            type: 'blank',\n            solution: solution,\n            hint: hint,\n            uuid: uuidv4(),\n          };\n        }\n      });\n    },\n\n    parsedDistractors(): string[] {\n      // Extract distractors from the input\n      const distractors = (this.task.distractors.match(/\\*(.*?)\\*/g) || []) // Handle cases with no matches\n        .map((distractor) => distractor.replace(/\\*/g, '').trim());\n\n      return distractors;\n    },\n\n    blanks(): Blank[] {\n      return this.parsedTemplate.filter(\n        (word) => word.type === 'blank'\n      ) as Blank[];\n    },\n\n    answers(): Answer[] {\n      const correctAnswers = this.blanks.map((blank) => ({\n        uuid: uuidv4(),\n        text: blank.solution,\n      }));\n\n      const distractorAnswers = this.parsedDistractors.map((distractor) => ({\n        uuid: uuidv4(),\n        text: distractor,\n      }));\n\n      return [...correctAnswers, ...distractorAnswers];\n    },\n\n    draggedAnswer(): Answer | undefined {\n      if (!this.draggedAnswerId) {\n        return undefined;\n      } else {\n        return this.getAnswerById(this.draggedAnswerId);\n      }\n    },\n\n    randomizedAnswers(): Answer[] {\n      // https://stackoverflow.com/a/46545530\n      return this.answers\n        .map((value) => ({ value, sort: Math.random() }))\n        .sort((a, b) => a.sort - b.sort)\n        .map(({ value }) => value);\n    },\n\n    sortedAnswers(): Answer[] {\n      // https://stackoverflow.com/a/45544166\n      return this.answers\n        .map((value) => value)\n        .sort((a, b) => a.text.localeCompare(b.text));\n    },\n\n    blanksFilled(): number {\n      if (!this.submittedAnswers) {\n        return 0;\n      } else {\n        return Object.keys(this.submittedAnswers).length;\n      }\n    },\n\n    allBlanksAreFilled(): boolean {\n      return this.blanksFilled == this.blanks.length;\n    },\n\n    correctAnswers(): number {\n      return this.blanks.filter((blank) => this.submittedAnswerIsCorrect(blank))\n        .length;\n    },\n\n    allAnswersAreCorrect(): boolean {\n      return this.blanks.every((blank) => this.submittedAnswerIsCorrect(blank));\n    },\n\n    maxPoints(): number {\n      return this.blanks.length;\n    },\n\n    unusedAnswers(): Answer[] {\n      if (this.task.alphabeticOrder) {\n        return this.sortedAnswers.filter(\n          (answer) => !Object.values(this.userInputs).includes(answer.uuid)\n        );\n      } else {\n        return this.randomizedAnswers.filter(\n          (answer) => !Object.values(this.userInputs).includes(answer.uuid)\n        );\n      }\n    },\n\n    inputHasChanged(): boolean {\n      return !isEqual(this.submittedAnswers, this.userInputs);\n    },\n\n    showCheckButton(): boolean {\n      return (\n        (this.submittedAnswers === null || this.inputHasChanged) &&\n        !this.task.instantFeedback\n      );\n    },\n\n    showSolutionsButton(): boolean {\n      return (\n        this.task.showSolutionsAllowed &&\n        !this.showSolutions &&\n        this.showResults &&\n        !this.allAnswersAreCorrect\n      );\n    },\n\n    showRetryButton(): boolean {\n      return (\n        this.task.retryAllowed &&\n        this.showResults &&\n        !this.allAnswersAreCorrect &&\n        this.submittedAnswers !== null\n      );\n    },\n\n    showSolutions(): boolean {\n      return (\n        this.userWantsToSeeSolutions &&\n        (this.allBlanksAreFilled ||\n          !this.task.allBlanksMustBeFilledForSolutions)\n      );\n    },\n\n    showFillInAllTheBlanksMessage(): boolean {\n      return (\n        this.task.allBlanksMustBeFilledForSolutions &&\n        this.userWantsToSeeSolutions &&\n        !this.allBlanksAreFilled &&\n        !this.inputHasChanged\n      );\n    },\n\n    showResults(): boolean {\n      return (\n        !(this.submittedAnswers === null) &&\n        !this.showFillInAllTheBlanksMessage &&\n        (!this.task.instantFeedback || this.allBlanksAreFilled) &&\n        !this.inputHasChanged\n      );\n    },\n\n    resultMessage(): string {\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.correctAnswers.toString()\n      );\n\n      resultMessage = resultMessage.replace(\n        ':total',\n        this.blanks.length.toString()\n      );\n\n      return resultMessage;\n    },\n\n    fillInAllTheBlanksMessage(): string {\n      return this.task.strings.fillInAllBlanksMessage\n        ? this.task.strings.fillInAllBlanksMessage\n        : $gettext(\n            'Alle Lcken mssen ausgefllt sein, um Lsungen anzuzeigen'\n          );\n    },\n  },\n});\n</script>\n\n<style scoped>\n.static-text {\n  display: inline;\n  vertical-align: middle;\n\n  background: #ffffff;\n  color: #000000;\n}\n\n.blank {\n  display: inline-block;\n  min-width: 9em;\n  max-width: 9em;\n  vertical-align: middle;\n\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  background: #cee0f4;\n  color: #1a4473;\n  text-align: center;\n\n  border: 1px solid #a9c3d0;\n  border-radius: 0.25em;\n  padding: 0 0.25em 0 0.25em;\n\n  line-height: 1.25em;\n}\n\n.filled {\n  cursor: grabbing;\n}\n\n.filled:not(.disabled):hover {\n  border: 1px solid rgb(212, 190, 216);\n  color: #663366;\n  background: #edd6e9;\n}\n\n.correct {\n  background: #9dd8bb;\n  border: 1px solid #9dd8bb;\n  color: #255c41;\n}\n\n.incorrect {\n  background-color: #f7d0d0;\n  border: 1px solid #f7d0d0;\n  color: #b71c1c;\n  text-decoration: line-through;\n}\n\nspan.item:empty:before {\n  content: '\\200b';\n}\n\n.unused-answers-list {\n  min-width: 12em;\n  padding-top: 0.5em;\n  padding-bottom: 0.5em;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.75em;\n\n  border: 1px solid #eee;\n  border-radius: 5px;\n}\n\n.unused-answer {\n  display: inline-block;\n  min-width: 9em;\n  max-width: 9em;\n\n  overflow-wrap: break-word;\n\n  background: #ddd;\n  box-shadow: 0 0 0.3em rgba(0, 0, 0, 0.2);\n  text-align: center;\n\n  border: 1px solid #c6c6c6;\n  border-radius: 0.25em;\n  padding: 0 0.25em 0 0.25em;\n\n  line-height: 1.25em;\n\n  cursor: grabbing;\n}\n\n.unused-answer:not(.disabled):hover {\n  border: 0.1em solid rgb(212, 190, 216);\n  color: #663366;\n  background: #edd6e9;\n}\n\n.disabled {\n  cursor: default;\n}\n\n.selected:not(.disabled) {\n  border: 0.1em solid rgb(212, 190, 216);\n  color: #663366;\n  background: #edd6e9;\n}\n\n.text-and-feedback-container {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.drag-the-words-text {\n  flex-grow: 0;\n}\n\n.text-and-answers-container {\n  display: flex;\n  gap: 1em;\n}\n</style>\n","import { render } from \"./DragTheWordsViewer.vue?vue&type=template&id=501f9f22&scoped=true&ts=true\"\nimport script from \"./DragTheWordsViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./DragTheWordsViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./DragTheWordsViewer.vue?vue&type=style&index=0&id=501f9f22&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-501f9f22\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3d949c56\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"error-message\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"p\", null, _toDisplayString(_ctx.$gettext('Es ist ein Fehler aufgetreten!')), 1),\n    _createElementVNode(\"p\", null, _toDisplayString(this.error), 1)\n  ]))\n}","<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { $gettext } from '../language/gettext';\n\nexport default defineComponent({\n  name: 'ErrorMessage',\n  methods: { $gettext },\n  props: {\n    error: {\n      required: false,\n    },\n  },\n});\n</script>\n\n<template>\n  <div class=\"error-message\">\n    <p>{{ $gettext('Es ist ein Fehler aufgetreten!') }}</p>\n    <p>{{ this.error }}</p>\n  </div>\n</template>\n\n<style scoped>\n.error-message {\n  max-height: 200px;\n  overflow-y: scroll;\n  white-space: pre-wrap;\n  font-family: monospace;\n}\n</style>\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=3d949c56&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=3d949c56&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d949c56\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-85a4403a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"collapsable collapsed\" }\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { for: \"feedback-container\" }\nconst _hoisted_4 = {\n  id: \"feedback-container\",\n  class: \"feedback-container\"\n}\nconst _hoisted_5 = { class: \"feedback-percentages-child\" }\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"onInput\"]\nconst _hoisted_7 = { class: \"feedback-messages-child\" }\nconst _hoisted_8 = [\"onUpdate:modelValue\", \"onInput\"]\nconst _hoisted_9 = [\"title\", \"onClick\"]\nconst _hoisted_10 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_1, [\n    _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Feedback')), 1),\n    (_ctx.localResultMessage)\n      ? (_openBlock(), _createElementBlock(\"label\", _hoisted_2, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Ergebnismitteilung (mgliche Variablen :correct und :total):')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"text\",\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.localResultMessage) = $event)),\n            onInput: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.emitUpdatedResultMessage && _ctx.emitUpdatedResultMessage(...args)))\n          }, null, 544), [\n            [_vModelText, _ctx.localResultMessage]\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"label\", _hoisted_3, _toDisplayString(_ctx.$gettext('Benutzerdefiniertes Feedback fr beliebige Punktebereiche:')), 1),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext('Ab Prozent')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.feedbackList, (feedback, i) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n            key: i,\n            type: \"number\",\n            min: \"0\",\n            max: \"100\",\n            \"onUpdate:modelValue\": ($event: any) => ((_ctx.feedbackList[i].percentage) = $event),\n            onInput: ($event: any) => (_ctx.emitUpdatedFeedback(`feedbackList[${i}].percentage`))\n          }, null, 40, _hoisted_6)), [\n            [_vModelText, _ctx.feedbackList[i].percentage]\n          ])\n        }), 128))\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext('Mitteilung')), 1),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.feedbackList, (feedback, i) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"feedback-messages-child-subdivision\",\n            key: i\n          }, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"text\",\n              \"onUpdate:modelValue\": ($event: any) => ((_ctx.feedbackList[i].message) = $event),\n              onInput: ($event: any) => (_ctx.emitUpdatedFeedback(`feedbackList[${i}].message`))\n            }, null, 40, _hoisted_8), [\n              [_vModelText, _ctx.feedbackList[i].message]\n            ]),\n            _createElementVNode(\"button\", {\n              type: \"button\",\n              title: _ctx.titleForDeleteButtonForFeedback(feedback),\n              class: \"remove-feedback-button\",\n              onClick: ($event: any) => (_ctx.removeFeedback(feedback))\n            }, [\n              _createElementVNode(\"img\", {\n                src: _ctx.urlForIcon('trash'),\n                alt: \n                _ctx.$gettext(\n                  'Trash can icon in a button used to delete a feedback interval'\n                )\n              ,\n                width: \"16\",\n                height: \"16\"\n              }, null, 8, _hoisted_10)\n            ], 8, _hoisted_9)\n          ]))\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"button\",\n      onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.addFeedback && _ctx.addFeedback(...args)))\n    }, _toDisplayString(_ctx.$gettext('Neuer Bereich')), 1)\n  ]))\n}","<template>\n  <fieldset class=\"collapsable collapsed\">\n    <legend>{{ $gettext('Feedback') }}</legend>\n\n    <label v-if=\"localResultMessage\">\n      {{\n        $gettext('Ergebnismitteilung (mgliche Variablen :correct und :total):')\n      }}\n      <input\n        type=\"text\"\n        v-model=\"localResultMessage\"\n        @input=\"emitUpdatedResultMessage\"\n      />\n    </label>\n\n    <label for=\"feedback-container\"\n      >{{\n        $gettext('Benutzerdefiniertes Feedback fr beliebige Punktebereiche:')\n      }}\n    </label>\n    <div id=\"feedback-container\" class=\"feedback-container\">\n      <div class=\"feedback-percentages-child\">\n        <label>\n          {{ $gettext('Ab Prozent') }}\n        </label>\n        <template v-for=\"(feedback, i) in feedbackList\" :key=\"i\">\n          <input\n            type=\"number\"\n            min=\"0\"\n            max=\"100\"\n            v-model=\"feedbackList[i].percentage\"\n            @input=\"emitUpdatedFeedback(`feedbackList[${i}].percentage`)\"\n          />\n        </template>\n      </div>\n\n      <div class=\"feedback-messages-child\">\n        <label>\n          {{ $gettext('Mitteilung') }}\n        </label>\n        <div\n          class=\"feedback-messages-child-subdivision\"\n          v-for=\"(feedback, i) in feedbackList\"\n          :key=\"i\"\n        >\n          <input\n            type=\"text\"\n            v-model=\"feedbackList[i].message\"\n            @input=\"emitUpdatedFeedback(`feedbackList[${i}].message`)\"\n          />\n          <button\n            type=\"button\"\n            :title=\"titleForDeleteButtonForFeedback(feedback)\"\n            class=\"remove-feedback-button\"\n            @click=\"removeFeedback(feedback)\"\n          >\n            <img\n              :src=\"urlForIcon('trash')\"\n              :alt=\"\n                $gettext(\n                  'Trash can icon in a button used to delete a feedback interval'\n                )\n              \"\n              width=\"16\"\n              height=\"16\"\n            />\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <button type=\"button\" class=\"button\" @click=\"addFeedback\">\n      {{ $gettext('Neuer Bereich') }}\n    </button>\n  </fieldset>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { $gettext } from '@/language/gettext';\nimport { Feedback } from '@/models/common';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'FeedbackEditor',\n\n  props: {\n    feedback: {\n      type: Array as PropType<Feedback[]>,\n      required: true,\n    },\n    resultMessage: {\n      type: String,\n      required: false,\n    },\n  },\n  emits: {\n    ['update:feedback'](feedbacks: Feedback[], undoBatch?: unknown): boolean {\n      return true;\n    },\n    ['update:result-message'](message: string): boolean {\n      // This function is a 'validator'.\n      // See https://vuejs.org/guide/components/events.html#events-validation\n      // We don't need to perform validation here, but we have to define SOME\n      // kind of function in order to use this syntax that lets us provide\n      // types for our events.\n      return true;\n    },\n  },\n  data() {\n    return {\n      feedbackList: cloneDeep(this.feedback), // Local copy of the feedback to edit\n      localResultMessage: this.resultMessage || '', // Local copy of the result message\n    };\n  },\n  watch: {\n    // Synchronize state props -> local copies.\n    feedback: {\n      immediate: true,\n      handler: function (): void {\n        this.feedbackList = cloneDeep(this.feedback);\n      },\n    },\n    resultMessage: {\n      immediate: true,\n      handler: function (): void {\n        this.localResultMessage = this.resultMessage || '';\n      },\n    },\n  },\n  methods: {\n    $gettext,\n\n    titleForDeleteButtonForFeedback(feedback: Feedback): string {\n      return this.$gettext(\n        'Entferne den Feedback-Bereich, der ab %{ percentage }% anfngt.',\n        { percentage: feedback.percentage.toString() }\n      );\n    },\n\n    addFeedback() {\n      const newFeedback = {\n        percentage: 25, // Default value, you can adjust it\n        message: 'Feedback',\n      };\n      this.feedbackList.push(newFeedback);\n      this.emitUpdatedFeedback();\n    },\n\n    removeFeedback(feedbackToRemove: Feedback) {\n      this.feedbackList = this.feedbackList.filter(\n        (feedback) => feedback !== feedbackToRemove\n      );\n      this.emitUpdatedFeedback();\n    },\n\n    emitUpdatedFeedback(undoBatch: unknown = {}) {\n      this.$emit('update:feedback', cloneDeep(this.feedbackList), undoBatch);\n    },\n\n    emitUpdatedResultMessage() {\n      this.$emit('update:result-message', this.localResultMessage);\n    },\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n  },\n});\n</script>\n\n<style scoped>\n.feedback-container {\n  display: flex;\n  gap: 0.5em;\n  justify-content: flex-start;\n  align-items: center;\n  max-width: 48em;\n}\n\n.feedback-percentages-child {\n  flex: 0 100px;\n  display: flex;\n  flex-direction: column;\n}\n\n.feedback-messages-child {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.feedback-messages-child-subdivision {\n  display: flex;\n  align-items: center;\n  gap: 0.5em;\n}\n\n.remove-feedback-button {\n  display: flex;\n  align-items: center;\n  height: 28px;\n}\n</style>\n","import { render } from \"./FeedbackEditor.vue?vue&type=template&id=85a4403a&scoped=true&ts=true\"\nimport script from \"./FeedbackEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./FeedbackEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./FeedbackEditor.vue?vue&type=style&index=0&id=85a4403a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-85a4403a\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '../assets/star.png'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7585ad83\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"feedback-container\" }\nconst _hoisted_2 = { class: \"meter-container\" }\nconst _hoisted_3 = { class: \"meter-background\" }\nconst _hoisted_4 = {\n  class: \"meter-bar\",\n  ref: \"meterBar\"\n}\nconst _hoisted_5 = [\"alt\"]\nconst _hoisted_6 = [\"textContent\"]\nconst _hoisted_7 = [\"textContent\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _directive_disable_drag = _resolveDirective(\"disable-drag\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, null, 512),\n        (_ctx.starVisible)\n          ? (_openBlock(), _createElementBlock(\"img\", {\n              key: 0,\n              class: \"star-symbol\",\n              src: _imports_0,\n              width: \"38\",\n              height: \"38\",\n              alt: \n            _ctx.$gettext(\n              'Ein goldener Stern, der den Abschluss der Aufgabe mit perfekter Leistung anzeigt'\n            )\n          \n            }, null, 8, _hoisted_5))\n          : _createCommentVNode(\"\", true)\n      ]),\n      (_ctx.resultMessage)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"result-text\",\n            textContent: _toDisplayString(_ctx.resultMessage)\n          }, null, 8, _hoisted_6))\n        : _createCommentVNode(\"\", true)\n    ]),\n    (_ctx.feedbackMessage)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          class: \"feedback-text\",\n          textContent: _toDisplayString(_ctx.feedbackMessage)\n        }, null, 8, _hoisted_7))\n      : _createCommentVNode(\"\", true)\n  ])), [\n    [_directive_disable_drag]\n  ])\n}","<template>\n  <div class=\"feedback-container\" v-disable-drag>\n    <div class=\"meter-container\">\n      <div class=\"meter-background\">\n        <div class=\"meter-bar\" ref=\"meterBar\" />\n        <img\n          v-if=\"starVisible\"\n          class=\"star-symbol\"\n          src=\"../assets/star.png\"\n          width=\"38\"\n          height=\"38\"\n          :alt=\"\n            $gettext(\n              'Ein goldener Stern, der den Abschluss der Aufgabe mit perfekter Leistung anzeigt'\n            )\n          \"\n        />\n      </div>\n      <div v-if=\"resultMessage\" class=\"result-text\" v-text=\"resultMessage\" />\n    </div>\n    <div\n      v-if=\"feedbackMessage\"\n      class=\"feedback-text\"\n      v-text=\"feedbackMessage\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, nextTick, PropType } from 'vue';\nimport { Feedback } from '@/models/common';\nimport { round } from 'lodash';\n\nexport default defineComponent({\n  name: 'FeedbackElement',\n  props: {\n    achievedPoints: Number,\n    maxPoints: Number,\n    resultMessage: String,\n    feedback: Object as PropType<Feedback[]>,\n  },\n  data() {\n    return {\n      starVisible: false,\n    };\n  },\n  mounted() {\n    this.adjustBarWidth();\n  },\n  watch: {\n    achievedPoints: {\n      immediate: true,\n      handler: function (): void {\n        this.adjustBarWidth();\n        if (this.achievedMaxPoints) {\n          // Show the star after the meter filled up\n          setTimeout(() => {\n            this.starVisible = true;\n          }, 350);\n        } else {\n          this.starVisible = false;\n        }\n      },\n    },\n  },\n  methods: {\n    async adjustBarWidth() {\n      // Wait for the next DOM update cycle\n      await nextTick();\n\n      const meterBar = this.$refs.meterBar as HTMLElement;\n      if (meterBar) {\n        // Trigger a reflow to ensure the width change is animated\n        meterBar.offsetHeight;\n\n        meterBar.style.width = `${this.percentageCorrect}%`;\n      }\n    },\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n  },\n  computed: {\n    feedbackSortedByScore(): Feedback[] {\n      if (this.feedback) {\n        return this.feedback\n          .map((value) => value)\n          .sort((a, b) => b.percentage - a.percentage);\n      }\n      return [];\n    },\n\n    feedbackMessage(): string | undefined {\n      if (\n        typeof this.achievedPoints === 'undefined' ||\n        typeof this.maxPoints === 'undefined'\n      ) {\n        return undefined;\n      }\n\n      const percentageCorrect = round(\n        (this.achievedPoints / this.maxPoints) * 100\n      );\n\n      for (const feedback of this.feedbackSortedByScore) {\n        if (percentageCorrect >= feedback.percentage) {\n          return feedback.message;\n        }\n      }\n\n      return undefined;\n    },\n\n    percentageCorrect(): number {\n      if (this.achievedPoints && this.maxPoints)\n        return round((this.achievedPoints / this.maxPoints) * 100);\n      else return 0;\n    },\n\n    achievedMaxPoints(): boolean {\n      return this.achievedPoints === this.maxPoints;\n    },\n  },\n});\n</script>\n\n<style scoped>\n.feedback-container {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 0.75em;\n}\n\n.meter-container {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 1.5em;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 2em;\n  padding: 6px 12px 6px 12px;\n}\n\n.meter-background {\n  flex-shrink: 0;\n  background: #e0e0e0;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  width: 140px;\n  height: 16px;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n  position: relative;\n}\n\n.meter-bar {\n  height: 100%;\n  background: linear-gradient(to right, #34a86e, #2b8c5c);\n  width: 0; /* Initial width is 0% */\n  transition: width 0.5s ease; /* Smooth fade-in */\n}\n\n.star-symbol {\n  position: absolute;\n  right: -23px;\n  top: -14px;\n  animation: pulse 0.5s ease-in-out 0s 1;\n}\n\n@keyframes pulse {\n  0% {\n    transform: scale(0.85);\n  }\n  50% {\n    transform: scale(1.15);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n.result-text {\n  min-width: 0;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  font-size: 1em;\n  font-weight: bold;\n  color: #000;\n}\n\n.feedback-text {\n  font-size: 1.25em;\n  font-weight: bold;\n  color: #1a73d9;\n}\n</style>\n","import { render } from \"./FeedbackElement.vue?vue&type=template&id=7585ad83&scoped=true&ts=true\"\nimport script from \"./FeedbackElement.vue?vue&type=script&lang=ts\"\nexport * from \"./FeedbackElement.vue?vue&type=script&lang=ts\"\n\nimport \"./FeedbackElement.vue?vue&type=style&index=0&id=7585ad83&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7585ad83\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { key: 1 }\nconst _hoisted_3 = [\"accept\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.uploadRequestPromise)\n    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_1, _toDisplayString(_ctx.$gettext('Datei wird hochgeladen')), 1))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n        _createElementVNode(\"input\", {\n          ref: \"fileInput\",\n          type: \"file\",\n          accept: _ctx.accept,\n          onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onInputChange && _ctx.onInputChange(...args)))\n        }, null, 40, _hoisted_3),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n          return (_openBlock(), _createElementBlock(\"p\", {\n            class: \"validation-error\",\n            key: error\n          }, _toDisplayString(error), 1))\n        }), 128))\n      ]))\n}","<template>\n  <span v-if=\"uploadRequestPromise\">{{\n    $gettext('Datei wird hochgeladen')\n  }}</span>\n  <div v-else>\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      :accept=\"accept\"\n      @change=\"onInputChange\"\n    />\n    <p class=\"validation-error\" v-for=\"error in errors\" :key=\"error\">\n      {{ error }}\n    </p>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { $gettext } from '@/language/gettext';\nimport { mapActions, mapGetters } from 'vuex';\nimport {\n  createFile,\n  createFolder,\n  getFolders,\n  FileRef,\n  FolderRef,\n} from '@/routes/jsonApi';\n\nexport default defineComponent({\n  name: 'FileUpload',\n  emits: ['fileUploaded'],\n  props: {\n    // The 'accept' property passed to the <input type=\"file\"> element.  Default: 'image/*'\n    accept: {\n      type: String,\n      required: false,\n      default: 'image/*',\n    },\n  },\n  data() {\n    return {\n      // Wenn dieser Promise vorhanden ist, heit das, dass eine HTTP-Anfrage\n      // unterwegs ist.\n      uploadRequestPromise: undefined as Promise<unknown> | undefined,\n      selectedFolderId: undefined as string | undefined,\n      errors: [] as string[],\n      uploadFolderName: 'Lernmodule Uploads',\n    };\n  },\n  async mounted() {\n    const folders = await getFolders({ userId: this.userId });\n\n    const lernmoduleUploads = folders.find(\n      (f) => f.attributes.name === this.uploadFolderName\n    );\n\n    if (lernmoduleUploads) {\n      console.log('Found', this.uploadFolderName, 'folder.');\n      this.selectedFolderId = lernmoduleUploads.id;\n    } else {\n      console.log(\n        'Folder',\n        this.uploadFolderName,\n        \"not found. Trying to create it under the user's root folder.\"\n      );\n      try {\n        const rootFolder = folders.find(\n          (f) => f.attributes['folder-type'] === 'RootFolder'\n        );\n\n        if (!rootFolder) {\n          const errorMessage = $gettext(\n            'Das Stammverzeichnis des Benutzers konnte nicht gefunden werden. ' +\n              'Es knnen keine Dateien hochgeladen werden.'\n          );\n          this.errors.push(errorMessage);\n          console.error(errorMessage);\n          return;\n        }\n\n        if (rootFolder) {\n          console.log(\n            'Found user root folder',\n            rootFolder.attributes.name,\n            '(' + rootFolder.attributes['folder-type'] + ')'\n          );\n        }\n\n        const newFolder = await createFolder({\n          userId: this.userId,\n          name: this.uploadFolderName,\n          parentFolderId: rootFolder.id, // Use the root folder ID\n          folderType: 'PublicFolder',\n        });\n\n        if (newFolder) {\n          console.log(\n            'Created folder',\n            newFolder.attributes.name,\n            'in folder',\n            rootFolder.attributes.name\n          );\n        }\n\n        this.selectedFolderId = newFolder.id;\n      } catch (error) {\n        const errorMessage = $gettext(\n          'Das Verzeichnis' +\n            this.uploadFolderName +\n            'konnte nicht erstellt werden. ' +\n            'Es knnen keine Dateien hochgeladen werden.'\n        );\n        this.errors.push(errorMessage);\n        console.error(errorMessage, error);\n      }\n    }\n  },\n  computed: {\n    ...mapGetters({\n      relatedFolders: 'folders/related',\n    }),\n    userId(): string {\n      // Replaces the vuex getter 'userId'\n      return window.STUDIP.USER_ID;\n    },\n    userObject() {\n      return { type: 'users', id: `${this.userId}` };\n    },\n    loadedUserFolders() {\n      let loadedUserFolders: FolderRef[] = [];\n      let userFolders: FolderRef[] =\n        this.relatedFolders({\n          parent: this.userObject,\n          relationship: 'folders',\n        }) ?? [];\n      userFolders.forEach((folder: FolderRef) => {\n        if (folder.attributes['folder-type'] === 'PublicFolder') {\n          loadedUserFolders.push(folder);\n        }\n      });\n\n      return loadedUserFolders;\n    },\n  },\n  methods: {\n    $gettext,\n    ...mapActions({\n      _loadRelatedFolders: 'folders/loadRelated',\n    }),\n    // Typed shim for vuex action 'folders/loadRelated'\n    loadRelatedFolders(params: {\n      parent: {\n        type: string;\n        id: string;\n      };\n      relationship: string;\n      options: {\n        'page[limit]': number;\n      };\n    }): Promise<unknown> {\n      return this._loadRelatedFolders(params);\n    },\n    async getUserFolders() {\n      const parent = this.userObject;\n      const relationship = 'folders';\n      const options = { 'page[limit]': 10000 };\n      return await this.loadRelatedFolders({ parent, relationship, options });\n    },\n    onInputChange(event: Event): void {\n      if (this.uploadRequestPromise) {\n        console.warn(\n          'FileUpload: onInputChange fired while uploadRequestPromise is already defined.'\n        );\n        return;\n      }\n      const input = this.$refs.fileInput as HTMLInputElement;\n      const file = input.files?.item(0);\n      if (!file) {\n        console.warn(\n          'FileUpload: onInputChange fired, but input.files[] is empty.'\n        );\n        return;\n      }\n      if (!this.selectedFolderId) {\n        const error = $gettext(\n          'Kein Ordner ist ausgewhlt. Die Datei kann nicht hochgeladen werden.'\n        );\n        console.error(error);\n        this.errors.push(error);\n        return;\n      }\n      this.errors = [];\n      this.uploadRequestPromise = createFile({\n        file: {\n          attributes: {\n            name: file.name,\n          },\n        },\n        fileData: file,\n        folder: { id: this.selectedFolderId },\n      })\n        .then((fileRef: FileRef) => {\n          this.$emit('fileUploaded', fileRef);\n          this.uploadRequestPromise = undefined;\n          this.errors = [];\n        })\n        .catch((error) => {\n          /*\n           TODO #23 Check for common errors and translate them so they are\n             understandable for users. E.g. AxiosError 413 (File too large).\n          */\n          console.error(error);\n          this.errors.push(error);\n          this.uploadRequestPromise = undefined;\n        });\n    },\n  },\n});\n</script>\n\n<style scoped></style>\n","import { render } from \"./FileUpload.vue?vue&type=template&id=234bd1d4&ts=true\"\nimport script from \"./FileUpload.vue?vue&type=script&lang=ts\"\nexport * from \"./FileUpload.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7715379e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = { class: \"fill-in-the-blanks-editor-top-panel\" }\nconst _hoisted_4 = [\"data-tooltip\"]\nconst _hoisted_5 = { class: \"collapsable collapsed\" }\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = { class: \"collapsable collapsed\" }\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = [\"disabled\"]\nconst _hoisted_11 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_studip_wysiwyg = _resolveComponent(\"studip-wysiwyg\")!\n  const _component_feedback_editor = _resolveComponent(\"feedback-editor\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Fill in the Blanks')), 1),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addBlank && _ctx.addBlank(...args))),\n            class: \"button add-blank\",\n            type: \"button\"\n          }, _toDisplayString(_ctx.$gettext('Lcke hinzufgen')), 1),\n          _createElementVNode(\"div\", {\n            class: \"tooltip tooltip-icon\",\n            \"data-tooltip\": _ctx.instructions\n          }, null, 8, _hoisted_4)\n        ]),\n        _createVNode(_component_studip_wysiwyg, {\n          modelValue: _ctx.modelTaskDefinition.template,\n          \"onUpdate:modelValue\": _ctx.onEditTemplate,\n          ref: \"wysiwyg\",\n          \"force-soft-breaks\": \"\",\n          \"remove-wrapping-p-tag\": \"\",\n          \"disable-autoformat\": \"\"\n        }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_5, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.modelTaskDefinition.caseSensitive) = $event)),\n            onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.caseSensitive]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Gro- und Kleinschreibung beachten')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.modelTaskDefinition.acceptTypos) = $event)),\n            onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.acceptTypos]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Rechtschreib- und Tippfehler ignorieren')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.modelTaskDefinition.autoCorrect) = $event)),\n            onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.autoCorrect]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lcken automatisch prfen')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.modelTaskDefinition.retryAllowed) = $event)),\n            onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.retryAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.modelTaskDefinition.showSolutionsAllowed) = $event)),\n            onChange: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.updateShowSolutionsAllowed && _ctx.updateShowSolutionsAllowed(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.showSolutionsAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen anzeigen erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((_ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions) = $event)),\n            onChange: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"checkbox\"\n          }, null, 40, _hoisted_6), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen nur anzeigen, wenn alle Lcken ausgefllt sind')), 1)\n        ], 2)\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_7, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Beschriftungen')), 1),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': _ctx.modelTaskDefinition.autoCorrect })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr berprfen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((_ctx.modelTaskDefinition.strings.checkButton) = $event)),\n            onInput: _cache[14] || (_cache[14] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.checkButton'))),\n            disabled: _ctx.modelTaskDefinition.autoCorrect,\n            type: \"text\"\n          }, null, 40, _hoisted_8), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.checkButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.retryAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((_ctx.modelTaskDefinition.strings.retryButton) = $event)),\n            onInput: _cache[16] || (_cache[16] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            disabled: !_ctx.modelTaskDefinition.retryAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_9), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.retryButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Lsungen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((_ctx.modelTaskDefinition.strings.solutionsButton) = $event)),\n            onInput: _cache[18] || (_cache[18] = ($event: any) => (\n              _ctx.updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            )),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_10), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.solutionsButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled':\n              !_ctx.modelTaskDefinition.showSolutionsAllowed ||\n              !_ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Hinweis, wenn nicht alle Lcken ausgefllt sind:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event: any) => ((_ctx.modelTaskDefinition.strings.fillInAllBlanksMessage) = $event)),\n            onInput: _cache[20] || (_cache[20] = ($event: any) => (\n              _ctx.updateTaskDefinition(\n                'taskDefinition.strings.fillInAllBlanksMessage'\n              )\n            )),\n            disabled: \n              !_ctx.modelTaskDefinition.showSolutionsAllowed ||\n              !_ctx.modelTaskDefinition.allBlanksMustBeFilledForSolutions\n            ,\n            type: \"text\"\n          }, null, 40, _hoisted_11), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.fillInAllBlanksMessage]\n          ])\n        ], 2)\n      ]),\n      _createVNode(_component_feedback_editor, {\n        feedback: _ctx.modelTaskDefinition.feedback,\n        \"result-message\": _ctx.modelTaskDefinition.strings.resultMessage,\n        \"onUpdate:feedback\": _ctx.updateFeedback,\n        \"onUpdate:resultMessage\": _ctx.updateResultMessage\n      }, null, 8, [\"feedback\", \"result-message\", \"onUpdate:feedback\", \"onUpdate:resultMessage\"])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset>\n        <legend>{{ $gettext('Fill in the Blanks') }}</legend>\n\n        <div class=\"fill-in-the-blanks-editor-top-panel\">\n          <button @click=\"addBlank\" class=\"button add-blank\" type=\"button\">\n            {{ $gettext('Lcke hinzufgen') }}\n          </button>\n          <div class=\"tooltip tooltip-icon\" :data-tooltip=\"instructions\" />\n        </div>\n\n        <studip-wysiwyg\n          :modelValue=\"modelTaskDefinition.template\"\n          @update:modelValue=\"onEditTemplate\"\n          ref=\"wysiwyg\"\n          force-soft-breaks\n          remove-wrapping-p-tag\n          disable-autoformat\n        />\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.caseSensitive\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Gro- und Kleinschreibung beachten') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.acceptTypos\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Rechtschreib- und Tippfehler ignorieren') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.autoCorrect\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lcken automatisch prfen') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.retryAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrere Versuche erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.showSolutionsAllowed\"\n            @change=\"updateShowSolutionsAllowed\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lsungen anzeigen erlauben') }}\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          <input\n            v-model=\"modelTaskDefinition.allBlanksMustBeFilledForSolutions\"\n            @change=\"updateTaskDefinition\"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"checkbox\"\n          />\n          {{\n            $gettext('Lsungen nur anzeigen, wenn alle Lcken ausgefllt sind')\n          }}\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label :class=\"{ 'setting-disabled': modelTaskDefinition.autoCorrect }\">\n          {{ $gettext('Text fr berprfen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.checkButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.checkButton')\"\n            :disabled=\"modelTaskDefinition.autoCorrect\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.retryAllowed }\"\n        >\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            :disabled=\"!modelTaskDefinition.retryAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          {{ $gettext('Text fr Lsungen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.solutionsButton\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            \"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled':\n              !modelTaskDefinition.showSolutionsAllowed ||\n              !modelTaskDefinition.allBlanksMustBeFilledForSolutions,\n          }\"\n        >\n          {{ $gettext('Hinweis, wenn nicht alle Lcken ausgefllt sind:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.fillInAllBlanksMessage\"\n            @input=\"\n              updateTaskDefinition(\n                'taskDefinition.strings.fillInAllBlanksMessage'\n              )\n            \"\n            :disabled=\"\n              !modelTaskDefinition.showSolutionsAllowed ||\n              !modelTaskDefinition.allBlanksMustBeFilledForSolutions\n            \"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <feedback-editor\n        :feedback=\"modelTaskDefinition.feedback\"\n        :result-message=\"modelTaskDefinition.strings.resultMessage\"\n        @update:feedback=\"updateFeedback\"\n        @update:result-message=\"updateResultMessage\"\n      />\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport { FillInTheBlanksTask } from '@/models/TaskDefinition';\nimport { Feedback } from '@/models/common';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\nimport FeedbackEditor from '@/components/FeedbackEditor.vue';\nimport { $gettext } from '@/language/gettext';\nimport produce from 'immer';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'FillInTheBlanksEditor',\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  components: { StudipWysiwyg, FeedbackEditor },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<FillInTheBlanksTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      modelTaskDefinition: cloneDeep(this.taskDefinition),\n    };\n  },\n  watch: {\n    // Synchronize state taskDefinition -> modelTaskDefinition.\n    taskDefinition: {\n      immediate: true,\n      handler: function (): void {\n        this.modelTaskDefinition = cloneDeep(this.taskDefinition);\n      },\n    },\n  },\n  computed: {\n    instructions(): string {\n      return $gettext(\n        'Um eine Lcke zu erstellen, setzen Sie ein Sternchen (*) vor und hinter das korrekte Wort oder markieren Sie das Wort und klicken Sie auf den Button Lcke hinzufgen. Sie knnen auch einen Tooltip hinzufgen, indem Sie einen Doppelpunkt (:) vor den Tooltip-Text schreiben.'\n      );\n    },\n  },\n  methods: {\n    $gettext,\n\n    /**\n     * Surround the selected text with two asterisks\n     */\n    addBlank() {\n      const wysiwygEl = (this.$refs.wysiwyg as any)?.$el;\n      const editor = window.STUDIP.wysiwyg.getEditor(wysiwygEl);\n      if (!editor) {\n        console.error('getEditor(wysiwygEl) returned: ', editor);\n        throw new Error('Could not get reference to wysiwyg editor');\n      }\n      const selection = editor.model.document.selection;\n      const start = selection.getFirstPosition();\n      const end = selection.getLastPosition();\n      if (!start || !end) {\n        console.error('selection start: ', start, ' selection end: ', end);\n        throw new Error('Could not get selection in editor');\n      }\n      editor.model.change((writer) => {\n        writer.insertText('*', end);\n        writer.insertText('*', start);\n      });\n    },\n\n    onEditTemplate(data: string): void {\n      // Copy new data from wysiwyg editor into task definition\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (draft: FillInTheBlanksTask) => {\n            draft.template = data;\n          }\n        ),\n        undoBatch: 'taskDefinition.template',\n      });\n    },\n\n    updateTaskDefinition(undoBatch?: unknown) {\n      // Synchronize state modelTaskDefinition -> taskDefinition.\n      console.log('update task definition');\n      this.taskEditor!.performEdit({\n        newTaskDefinition: cloneDeep(this.modelTaskDefinition),\n        undoBatch: undoBatch ?? {},\n      });\n    },\n\n    updateShowSolutionsAllowed() {\n      if (!this.modelTaskDefinition.showSolutionsAllowed) {\n        this.modelTaskDefinition.allBlanksMustBeFilledForSolutions = false;\n      }\n      this.updateTaskDefinition();\n    },\n\n    updateFeedback(updatedFeedback: Feedback[]) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: FillInTheBlanksTask) => {\n            taskDraft.feedback = updatedFeedback;\n          }\n        ),\n        undoBatch: 'taskDefinition.feedback',\n      });\n    },\n\n    updateResultMessage(updatedResultMessage: string) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: FillInTheBlanksTask) => {\n            taskDraft.strings.resultMessage = updatedResultMessage;\n          }\n        ),\n        undoBatch: 'taskDefinition.strings.resultMessage',\n      });\n    },\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n  },\n});\n</script>\n\n<style scoped>\n.fill-in-the-blanks-editor-top-panel {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n</style>\n","import { render } from \"./FillInTheBlanksEditor.vue?vue&type=template&id=7715379e&scoped=true&ts=true\"\nimport script from \"./FillInTheBlanksEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./FillInTheBlanksEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./FillInTheBlanksEditor.vue?vue&type=style&index=0&id=7715379e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7715379e\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withDirectives as _withDirectives, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-991d4d3e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"stud5p-task\",\n  ref: \"wrapperElement\"\n}\nconst _hoisted_2 = { class: \"fill-in-the-blanks-text\" }\nconst _hoisted_3 = [\"innerHTML\"]\nconst _hoisted_4 = [\"onUpdate:modelValue\", \"readonly\", \"disabled\"]\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = [\"data-tooltip\"]\nconst _hoisted_7 = {\n  key: 1,\n  class: \"stud5p-solution\"\n}\nconst _hoisted_8 = { class: \"feedback-and-button-container\" }\nconst _hoisted_9 = [\"textContent\"]\nconst _hoisted_10 = { class: \"button-panel\" }\nconst _hoisted_11 = [\"textContent\"]\nconst _hoisted_12 = [\"textContent\"]\nconst _hoisted_13 = [\"textContent\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_FeedbackElement = _resolveComponent(\"FeedbackElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.parsedTemplate, (element) => {\n        return (_openBlock(), _createElementBlock(_Fragment, {\n          key: element.uuid\n        }, [\n          (element.type === 'staticText')\n            ? (_openBlock(), _createElementBlock(\"span\", {\n                key: 0,\n                innerHTML: element.text\n              }, null, 8, _hoisted_3))\n            : (element.type === 'blank')\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                  _withDirectives(_createElementVNode(\"input\", {\n                    type: \"text\",\n                    \"onUpdate:modelValue\": ($event: any) => ((_ctx.userInputs[element.uuid]) = $event),\n                    readonly: !_ctx.editable,\n                    disabled: !_ctx.editable,\n                    class: _normalizeClass([\n              'blank',\n              { autocorrect: _ctx.task.autoCorrect },\n              _ctx.classForInput(element),\n            ]),\n                    onBlur: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onBlur && _ctx.onBlur(...args))),\n                    onKeyup: _cache[1] || (_cache[1] = _withKeys(($event: any) => (_ctx.onEnter($event)), [\"enter\"])),\n                    onInput: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onInput && _ctx.onInput(...args))),\n                    ref_for: true,\n                    ref: \"blanks\"\n                  }, null, 42, _hoisted_4), [\n                    [_vModelText, _ctx.userInputs[element.uuid]]\n                  ]),\n                  (element.hint)\n                    ? (_openBlock(), _createElementBlock(\"label\", _hoisted_5, [\n                        _createElementVNode(\"span\", {\n                          class: \"tooltip tooltip-icon\",\n                          \"data-tooltip\": element.hint\n                        }, null, 8, _hoisted_6)\n                      ]))\n                    : _createCommentVNode(\"\", true),\n                  (\n              _ctx.showSolutions &&\n              !_ctx.showFillInAllTheBlanksMessage &&\n              !_ctx.submittedAnswerIsCorrect(element)\n            )\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString(element.solutions[0]), 1))\n                    : _createCommentVNode(\"\", true)\n                ], 64))\n              : _createCommentVNode(\"\", true)\n        ], 64))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_8, [\n      (_ctx.showFillInAllTheBlanksMessage)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"stud5p-message\",\n            textContent: _toDisplayString(_ctx.fillInAllTheBlanksMessage)\n          }, null, 8, _hoisted_9))\n        : _createCommentVNode(\"\", true),\n      (_ctx.showResults)\n        ? (_openBlock(), _createBlock(_component_FeedbackElement, {\n            key: 1,\n            achievedPoints: _ctx.correctAnswers,\n            maxPoints: _ctx.maxPoints,\n            feedback: _ctx.task.feedback,\n            resultMessage: _ctx.resultMessage\n          }, null, 8, [\"achievedPoints\", \"maxPoints\", \"feedback\", \"resultMessage\"]))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_10, [\n        (_ctx.showCheckButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              textContent: _toDisplayString(_ctx.task.strings.checkButton),\n              onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onClickCheck(false))),\n              type: \"button\",\n              class: \"stud5p-button\",\n              ref: \"checkButton\"\n            }, null, 8, _hoisted_11))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showExtraButtons)\n          ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n              (_ctx.showSolutionButton)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 0,\n                    textContent: _toDisplayString(_ctx.task.strings.solutionsButton),\n                    onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onClickShowSolution && _ctx.onClickShowSolution(...args))),\n                    type: \"button\",\n                    class: \"stud5p-button\"\n                  }, null, 8, _hoisted_12))\n                : _createCommentVNode(\"\", true),\n              (_ctx.showRetryButton)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 1,\n                    textContent: _toDisplayString(_ctx.task.strings.retryButton),\n                    onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onClickTryAgain && _ctx.onClickTryAgain(...args))),\n                    type: \"button\",\n                    class: \"stud5p-button\"\n                  }, null, 8, _hoisted_13))\n                : _createCommentVNode(\"\", true)\n            ], 64))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ], 512))\n}","<template>\n  <div class=\"stud5p-task\" ref=\"wrapperElement\">\n    <div class=\"fill-in-the-blanks-text\">\n      <template v-for=\"element in parsedTemplate\" :key=\"element.uuid\">\n        <span v-if=\"element.type === 'staticText'\" v-html=\"element.text\" />\n\n        <template v-else-if=\"element.type === 'blank'\">\n          <input\n            type=\"text\"\n            v-model=\"userInputs[element.uuid]\"\n            :readonly=\"!editable\"\n            :disabled=\"!editable\"\n            :class=\"[\n              'blank',\n              { autocorrect: task.autoCorrect },\n              classForInput(element),\n            ]\"\n            @blur=\"onBlur\"\n            @keyup.enter=\"onEnter($event)\"\n            @input=\"onInput\"\n            ref=\"blanks\"\n          />\n\n          <label v-if=\"element.hint\">\n            <span class=\"tooltip tooltip-icon\" :data-tooltip=\"element.hint\" />\n          </label>\n\n          <span\n            v-if=\"\n              showSolutions &&\n              !showFillInAllTheBlanksMessage &&\n              !submittedAnswerIsCorrect(element)\n            \"\n            class=\"stud5p-solution\"\n          >\n            {{ element.solutions[0] }}\n          </span>\n        </template>\n      </template>\n    </div>\n\n    <!-- Feedback and button section -->\n    <div class=\"feedback-and-button-container\">\n      <div\n        v-if=\"showFillInAllTheBlanksMessage\"\n        class=\"stud5p-message\"\n        v-text=\"fillInAllTheBlanksMessage\"\n      />\n\n      <FeedbackElement\n        v-if=\"showResults\"\n        :achievedPoints=\"correctAnswers\"\n        :maxPoints=\"maxPoints\"\n        :feedback=\"task.feedback\"\n        :resultMessage=\"resultMessage\"\n      />\n\n      <div class=\"button-panel\">\n        <button\n          v-if=\"showCheckButton\"\n          v-text=\"task.strings.checkButton\"\n          @click=\"onClickCheck(false)\"\n          type=\"button\"\n          class=\"stud5p-button\"\n          ref=\"checkButton\"\n        />\n\n        <template v-if=\"showExtraButtons\">\n          <button\n            v-if=\"showSolutionButton\"\n            v-text=\"task.strings.solutionsButton\"\n            @click=\"onClickShowSolution\"\n            type=\"button\"\n            class=\"stud5p-button\"\n          />\n\n          <button\n            v-if=\"showRetryButton\"\n            v-text=\"task.strings.retryButton\"\n            @click=\"onClickTryAgain\"\n            type=\"button\"\n            class=\"stud5p-button\"\n          />\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { FillInTheBlanksTask } from '@/models/TaskDefinition';\nimport { Feedback } from '@/models/common';\nimport { v4 as uuidv4 } from 'uuid';\nimport { isEqual } from 'lodash';\nimport { $gettext } from '@/language/gettext';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\n\ntype FillInTheBlanksElement = Blank | StaticText;\n\ntype Blank = {\n  type: 'blank';\n  uuid: Uuid;\n  solutions: string[];\n  hint: string;\n};\n\ntype StaticText = {\n  type: 'staticText';\n  uuid: Uuid;\n  text: string;\n};\n\ntype Uuid = string;\n\nconst dljs = require('damerau-levenshtein-js');\n\nexport default defineComponent({\n  name: 'FillInTheBlanksViewer',\n\n  components: {\n    FeedbackElement,\n  },\n\n  props: {\n    task: {\n      type: Object as PropType<FillInTheBlanksTask>,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      userInputs: {} as Record<Uuid, string>,\n      submittedAnswers: null as Record<Uuid, string> | null,\n      showSolutions: false,\n      editable: true,\n    };\n  },\n\n  methods: {\n    $gettext,\n\n    submittedAnswerIsCorrect(element: FillInTheBlanksElement): boolean {\n      const blank = element as Blank;\n\n      const submittedAnswer = this.submittedAnswers?.[blank.uuid];\n      if (!submittedAnswer) {\n        return false;\n      } else {\n        return blank.solutions.some((solution) =>\n          this.isAnswerCorrect(submittedAnswer, solution)\n        );\n      }\n    },\n\n    isAnswerCorrect(userAnswer: string, solution: string): boolean {\n      if (this.task.caseSensitive) {\n        if (this.task.acceptTypos) {\n          return this.isAnswerCorrectWithTypo(userAnswer, solution);\n        } else {\n          return userAnswer === solution;\n        }\n      } else {\n        // TODO: Was ist, wenn das in einem Sprachkurs mit einer nichtlateinischen Schrift verwendet wird? :D\n        if (this.task.acceptTypos) {\n          return this.isAnswerCorrectWithTypo(\n            userAnswer.toLowerCase(),\n            solution.toLowerCase()\n          );\n        } else {\n          return userAnswer.toLowerCase() === solution.toLowerCase();\n        }\n      }\n    },\n\n    isAnswerCorrectWithTypo(userAnswer: string, solution: string): boolean {\n      if (userAnswer === solution) return true;\n\n      // Calculate the Damerau-Levenshtein distance between the answer and the solution\n      const distance = dljs.distance(userAnswer, solution);\n\n      // If the word is between 4 and 9 characters, a distance of 1 will be accepted\n      // If the word is more than 9 characters long, a distance of 2 will be accepted\n      return (\n        (userAnswer.length > 3 && distance <= 1) ||\n        (userAnswer.length > 9 && distance <= 2)\n      );\n    },\n\n    updateAttempt() {\n      // Tell the server which blanks were filled out correctly.\n      const points = {} as Record<string, number>;\n      this.blanks.forEach((blank, index) => {\n        // TODO Consider what the key should be. This is a bit ugly.\n        // The key is shown directly in the 'assessment' UI.\n        // Maybe we should change how that works?\n        points[`${index} - ${blank.solutions[0]}`] =\n          this.submittedAnswerIsCorrect(blank) ? 1 : 0;\n      });\n      this.$emit('updateAttempt', {\n        points,\n        // The attempt is marked as successful if all answers were correct.\n        success: this.correctAnswers === this.blanks.length,\n      });\n    },\n\n    /**\n     * Adapted from the H5P source code, MIT License\n     * https://github.com/h5p/h5p-blanks/blob/e9bf6862211c082a5724d9873496e66c489d23f7/js/blanks.js#L401\n     * TODO: Put the license in the appropriate place\n     */\n    autoGrowTextField(input: HTMLInputElement) {\n      // Do not set text field size when separate lines is enabled\n      // if (this.params.behaviour.separateLines) {\n      //   return;\n      // }\n      const computedStyles = window.getComputedStyle(input, null);\n      const computedFontSize = computedStyles.getPropertyValue('font-size');\n      const computedFontFamily = computedStyles.getPropertyValue('font-family');\n      const computedPadding = computedStyles.getPropertyValue('padding');\n      const fontSize = parseInt(computedFontSize, 10);\n      const minEm = 6;\n      const minPx = fontSize * minEm;\n      const rightPadEm = 3.25;\n      const rightPadPx = fontSize * rightPadEm;\n      const static_min_pad = 0.5 * fontSize;\n\n      setTimeout(() => {\n        const tmp = document.createElement('div');\n        tmp.textContent = input.value;\n        const tmpStyles = {\n          position: 'absolute',\n          'white-space': 'nowrap',\n          'font-size': computedFontSize,\n          'font-family': computedFontFamily,\n          padding: computedPadding,\n          width: 'initial',\n        };\n        for (const [key, value] of Object.entries(tmpStyles)) {\n          tmp.style[key as any] = value;\n        }\n        input.parentElement!.append(tmp);\n        const width = tmp.clientWidth;\n        const parentWidth = (this.$refs.wrapperElement as HTMLDivElement)\n          .clientWidth;\n        tmp.remove();\n        if (width <= minPx) {\n          // Apply min width\n          input.style.width = (minPx + static_min_pad).toString() + 'px';\n        } else if (width + rightPadPx >= parentWidth) {\n          // Apply max width of parent\n          input.style.width = (parentWidth - rightPadPx).toString() + 'px';\n        } else {\n          // Apply width that wraps input\n          input.style.width = (width + static_min_pad).toString() + 'px';\n        }\n      }, 1);\n    },\n\n    onClickCheck(taskEditableAfterCheck: boolean) {\n      // Save a copy of the user's inputs.\n      this.submittedAnswers = { ...this.userInputs };\n      this.updateAttempt();\n      this.editable = taskEditableAfterCheck;\n    },\n\n    onClickShowSolution() {\n      this.showSolutions = true;\n    },\n\n    onClickTryAgain() {\n      this.resetTask();\n      this.resetBlankWidths();\n    },\n\n    resetTask() {\n      this.showSolutions = false;\n      this.userInputs = {};\n      this.submittedAnswers = null;\n      this.editable = true;\n    },\n\n    resetBlankWidths() {\n      (this.$refs.blanks as HTMLInputElement[]).forEach(\n        (input: HTMLInputElement) => {\n          this.autoGrowTextField(input);\n        }\n      );\n    },\n\n    onBlur() {\n      this.handleFilledBlank();\n    },\n\n    onEnter(event: KeyboardEvent) {\n      this.handleFilledBlank();\n      this.focusNextBlank(event.target as HTMLInputElement);\n    },\n\n    handleFilledBlank() {\n      this.showSolutions = false;\n      if (this.task.autoCorrect) {\n        this.onClickCheck(true);\n      }\n    },\n\n    focusNextBlank(blank: HTMLInputElement) {\n      const blanks = this.$refs.blanks as HTMLInputElement[];\n\n      // Find the index of the current input in the blanks array\n      const currentIndex = blanks.indexOf(blank);\n\n      // Move to the next input if available\n      if (currentIndex !== -1 && currentIndex < blanks.length - 1) {\n        const nextInput = blanks[currentIndex + 1];\n        nextInput.focus();\n      } else {\n        // This is the last blank, jump to the check button if it is there\n        if (this.showCheckButton) {\n          (this.$refs.checkButton as HTMLInputElement).focus();\n        }\n      }\n    },\n\n    onInput(event: Event) {\n      this.autoGrowTextField(event.target as HTMLInputElement);\n    },\n\n    classForInput(blank: FillInTheBlanksElement) {\n      if (!this.submittedAnswers) {\n        return '';\n      }\n\n      if (this.submittedAnswers?.[blank.uuid] != undefined) {\n        if (this.submittedAnswerIsCorrect(blank)) {\n          return 'correct';\n        } else {\n          return 'incorrect';\n        }\n      } else {\n        if (this.task.autoCorrect) {\n          return 'autocorrect';\n        } else {\n          return 'autocorrect incorrect';\n        }\n      }\n    },\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n\n    removePTags(text: string) {\n      // Remove all opening and closing <p> tags\n      return text.replace(/<\\/?p>/g, '');\n    },\n  },\n\n  computed: {\n    splitTemplate(): string[] {\n      const cleanTemplate = this.removePTags(this.task.template);\n\n      // Returns an array where the even indexes are the static text portions,\n      // and the odd indexes are the blanks.\n      return cleanTemplate.split(/\\*([^*]+)\\*/);\n    },\n\n    parsedTemplate(): FillInTheBlanksElement[] {\n      return this.splitTemplate.map((value, index) => {\n        if (index % 2 === 0) {\n          return { type: 'staticText', text: value, uuid: uuidv4() };\n        } else {\n          let splitString = value.split(':');\n          let solutions = splitString[0].split('/');\n          let hint = splitString[1];\n          return {\n            type: 'blank',\n            solutions: solutions,\n            hint: hint,\n            uuid: uuidv4(),\n          };\n        }\n      });\n    },\n\n    blanks(): Blank[] {\n      return this.parsedTemplate.filter(\n        (word) => word.type === 'blank'\n      ) as Blank[];\n    },\n\n    blanksFilled(): number {\n      if (!this.submittedAnswers) {\n        return 0;\n      } else {\n        return Object.keys(this.submittedAnswers).length;\n      }\n    },\n\n    allBlanksAreFilled(): boolean {\n      return this.blanksFilled == this.blanks.length;\n    },\n\n    correctAnswers(): number {\n      return this.blanks.filter((blank) => this.submittedAnswerIsCorrect(blank))\n        .length;\n    },\n\n    allAnswersAreCorrect(): boolean {\n      return this.blanks.every((blank) => this.submittedAnswerIsCorrect(blank));\n    },\n\n    maxPoints(): number {\n      return this.blanks.length;\n    },\n\n    inputHasChanged(): boolean {\n      return !isEqual(this.submittedAnswers, this.userInputs);\n    },\n\n    showExtraButtons(): boolean {\n      if (this.task.autoCorrect) {\n        if (this.allBlanksAreFilled) {\n          return (\n            this.submittedAnswers !== null &&\n            !this.inputHasChanged &&\n            !this.allAnswersAreCorrect\n          );\n        } else {\n          return false;\n        }\n      } else {\n        return (\n          this.submittedAnswers !== null &&\n          !this.inputHasChanged &&\n          !this.allAnswersAreCorrect\n        );\n      }\n    },\n\n    showCheckButton(): boolean {\n      return (\n        (this.submittedAnswers === null || this.inputHasChanged) &&\n        !this.task.autoCorrect\n      );\n    },\n\n    showSolutionButton(): boolean {\n      return (\n        this.task.showSolutionsAllowed &&\n        this.showResults &&\n        !this.showSolutions\n      );\n    },\n\n    showRetryButton(): boolean {\n      return this.task.retryAllowed && this.submittedAnswers !== null;\n    },\n\n    showFillInAllTheBlanksMessage(): boolean {\n      return (\n        this.task.allBlanksMustBeFilledForSolutions &&\n        this.showSolutions &&\n        !this.allBlanksAreFilled &&\n        !this.inputHasChanged\n      );\n    },\n\n    showResults(): boolean {\n      return (\n        !(this.submittedAnswers === null) &&\n        !this.showFillInAllTheBlanksMessage &&\n        (!this.task.autoCorrect || this.allBlanksAreFilled) &&\n        !this.inputHasChanged\n      );\n    },\n\n    resultMessage(): string {\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.correctAnswers.toString()\n      );\n\n      resultMessage = resultMessage.replace(\n        ':total',\n        this.blanks.length.toString()\n      );\n\n      return resultMessage;\n    },\n\n    feedbackSortedByScore(): Feedback[] {\n      return this.task.feedback\n        .map((value) => value)\n        .sort((a, b) => b.percentage - a.percentage);\n    },\n\n    fillInAllTheBlanksMessage(): string {\n      return this.task.strings.fillInAllBlanksMessage\n        ? this.task.strings.fillInAllBlanksMessage\n        : $gettext(\n            'Alle Lcken mssen ausgefllt sein, um Lsungen anzuzeigen'\n          );\n    },\n  },\n});\n</script>\n\n<style scoped>\ninput[type='text'] {\n  height: 1em;\n}\n\n.fill-in-the-blanks-text {\n  word-break: break-word;\n}\n\n.correct {\n  background: #9dd8bb;\n  border: 1px solid #9dd8bb;\n  color: #255c41;\n}\n\n.incorrect {\n  background-color: #f7d0d0;\n  border: 1px solid #f7d0d0;\n  color: #b71c1c;\n  text-decoration: line-through;\n}\n\n.blank {\n  border-radius: 0.25em;\n  border: 1px solid #a0a0a0;\n  /* top, right, bottom, left */\n  padding: 0.1875em 0 0.1875em 0.5em;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  /* Calculated to be the minPx number spit out by autoGrowTextField */\n  width: 104px;\n}\n\n.blank.autocorrect:focus {\n  background: unset;\n  color: unset;\n  text-decoration: unset;\n  border: 1px solid #a0a0a0;\n}\n</style>\n","import { render } from \"./FillInTheBlanksViewer.vue?vue&type=template&id=991d4d3e&scoped=true&ts=true\"\nimport script from \"./FillInTheBlanksViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./FillInTheBlanksViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./FillInTheBlanksViewer.vue?vue&type=style&index=0&id=991d4d3e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-991d4d3e\"]])\n\nexport default __exports__","import { mergeProps as _mergeProps, resolveDirective as _resolveDirective, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-35ea3852\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\", \"alt\"]\nconst _hoisted_2 = {\n  key: 1,\n  class: \"placeholder\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _directive_disable_drag = _resolveDirective(\"disable-drag\")!\n\n  return (_ctx.isLoaded)\n    ? _withDirectives((_openBlock(), _createElementBlock(\"img\", _mergeProps({\n        key: 0,\n        src: _ctx.src,\n        alt: _ctx.alt,\n        onLoad: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onLoad && _ctx.onLoad(...args))),\n        onError: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onError && _ctx.onError(...args))),\n        class: \"lazy-image\"\n      }, _ctx.$attrs), null, 16, _hoisted_1)), [\n        [_directive_disable_drag]\n      ])\n    : (_openBlock(), _createElementBlock(\"span\", _hoisted_2))\n}","<template>\n  <img\n    v-if=\"isLoaded\"\n    :src=\"src\"\n    :alt=\"alt\"\n    @load=\"onLoad\"\n    @error=\"onError\"\n    class=\"lazy-image\"\n    v-bind=\"$attrs\"\n    v-disable-drag\n  />\n  <span v-else class=\"placeholder\" />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { requestQueueStore } from '@/store';\n\nexport default defineComponent({\n  name: 'LazyImage',\n\n  props: {\n    src: { type: String, required: true },\n    alt: { type: String, default: '' },\n  },\n  watch: {\n    src: function () {\n      // Here we load the image unconditionally when 'src' changes.\n      // You could try to use the observer to ensure that it is only loaded\n      // when the image intersects the viewport.\n      // But because this watcher will only run in the editor, I consider it\n      // unlikely that there will be issues loading the image unconditionally\n      // in the watcher.\n      this.enqueueImageLoad();\n    },\n  },\n  data() {\n    return {\n      isLoaded: false, // Tracks if the image has been successfully loaded\n    };\n  },\n  methods: {\n    onLoad() {\n      console.log(`Image loaded: ${this.src}`);\n    },\n\n    onError() {\n      console.error(`Failed to load image: ${this.src}`);\n    },\n\n    enqueueImageLoad() {\n      requestQueueStore.enqueue(async () => {\n        try {\n          // Simulate an image load request\n          const img = new Image();\n          img.src = this.src;\n\n          await new Promise<void>((resolve, reject) => {\n            img.onload = () => {\n              resolve();\n            };\n            img.onerror = () =>\n              reject(new Error(`Failed to load image: ${this.src}`));\n          });\n\n          this.isLoaded = true;\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    },\n  },\n  computed: {\n    useLazyLoading(): boolean {\n      return window.STUDIP.LernmoduleVueJS.LERNMODULE_LAZYLOADING;\n    },\n  },\n  mounted() {\n    if (!this.useLazyLoading) {\n      // Directly load the image\n      this.enqueueImageLoad();\n      return;\n    } else {\n      // Load image lazily when half a viewport away\n      const halfViewportHeight = `${window.innerHeight / 2}px`; // Calculate half of viewport height\n\n      const observer = new IntersectionObserver(\n        ([entry]) => {\n          if (entry.isIntersecting) {\n            this.enqueueImageLoad();\n            observer.unobserve(entry.target); // Stop observing\n            observer.disconnect(); // Clean up the observer\n          }\n        },\n        {\n          rootMargin: halfViewportHeight, // Use half of the viewport height as the margin\n          threshold: 0.01, // Trigger when a small portion intersects\n        }\n      );\n\n      observer.observe(this.$el as HTMLElement);\n    }\n  },\n});\n</script>\n\n<style scoped>\n.lazy-image {\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n  padding: 0;\n  margin: 0;\n  object-fit: contain;\n}\n\n.placeholder {\n  height: 100%;\n  width: 100%;\n  box-shadow: inset 0 2px 74px 0 #cbd5de;\n}\n</style>\n","import { render } from \"./LazyImage.vue?vue&type=template&id=35ea3852&scoped=true&ts=true\"\nimport script from \"./LazyImage.vue?vue&type=script&lang=ts\"\nexport * from \"./LazyImage.vue?vue&type=script&lang=ts\"\n\nimport \"./LazyImage.vue?vue&type=style&index=0&id=35ea3852&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-35ea3852\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = { class: \"h5pEditorTopPanel\" }\nconst _hoisted_4 = [\"data-tooltip\"]\nconst _hoisted_5 = { class: \"collapsable collapsed\" }\nconst _hoisted_6 = { class: \"collapsable collapsed\" }\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_studip_wysiwyg = _resolveComponent(\"studip-wysiwyg\")!\n  const _component_feedback_editor = _resolveComponent(\"feedback-editor\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Mark the Words')), 1),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addSolution && _ctx.addSolution(...args))),\n            class: \"button add-blank\",\n            type: \"button\"\n          }, _toDisplayString(_ctx.$gettext('Richtiges Wort markieren')), 1),\n          _createElementVNode(\"div\", {\n            class: \"tooltip tooltip-icon\",\n            \"data-tooltip\": _ctx.instructions\n          }, null, 8, _hoisted_4)\n        ]),\n        _createVNode(_component_studip_wysiwyg, {\n          modelValue: _ctx.modelTaskDefinition.template,\n          \"onUpdate:modelValue\": _ctx.onEditTemplate,\n          ref: \"wysiwyg\",\n          \"force-soft-breaks\": \"\",\n          \"remove-wrapping-p-tag\": \"\",\n          \"disable-autoformat\": \"\"\n        }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_5, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.modelTaskDefinition.retryAllowed) = $event)),\n            onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.retryAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.modelTaskDefinition.showSolutionsAllowed) = $event)),\n            onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.showSolutionsAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen anzeigen erlauben')), 1)\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_6, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Beschriftungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr berprfen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.modelTaskDefinition.strings.checkButton) = $event)),\n            onInput: _cache[6] || (_cache[6] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.checkButton'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.checkButton]\n          ])\n        ]),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.retryAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.modelTaskDefinition.strings.retryButton) = $event)),\n            onInput: _cache[8] || (_cache[8] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            disabled: !_ctx.modelTaskDefinition.retryAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_7), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.retryButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Lsungen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.modelTaskDefinition.strings.solutionsButton) = $event)),\n            onInput: _cache[10] || (_cache[10] = ($event: any) => (\n              _ctx.updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            )),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_8), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.solutionsButton]\n          ])\n        ], 2)\n      ]),\n      _createVNode(_component_feedback_editor, {\n        feedback: _ctx.modelTaskDefinition.feedback,\n        \"result-message\": _ctx.modelTaskDefinition.strings.resultMessage,\n        \"onUpdate:feedback\": _ctx.updateFeedback,\n        \"onUpdate:resultMessage\": _ctx.updateResultMessage\n      }, null, 8, [\"feedback\", \"result-message\", \"onUpdate:feedback\", \"onUpdate:resultMessage\"])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset>\n        <legend>{{ $gettext('Mark the Words') }}</legend>\n\n        <div class=\"h5pEditorTopPanel\">\n          <button @click=\"addSolution\" class=\"button add-blank\" type=\"button\">\n            {{ $gettext('Richtiges Wort markieren') }}\n          </button>\n\n          <div class=\"tooltip tooltip-icon\" :data-tooltip=\"instructions\" />\n        </div>\n\n        <studip-wysiwyg\n          :modelValue=\"modelTaskDefinition.template\"\n          @update:modelValue=\"onEditTemplate\"\n          ref=\"wysiwyg\"\n          force-soft-breaks\n          remove-wrapping-p-tag\n          disable-autoformat\n        />\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.retryAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrere Versuche erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.showSolutionsAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lsungen anzeigen erlauben') }}\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label>\n          {{ $gettext('Text fr berprfen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.checkButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.checkButton')\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.retryAllowed }\"\n        >\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            :disabled=\"!modelTaskDefinition.retryAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          {{ $gettext('Text fr Lsungen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.solutionsButton\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            \"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <feedback-editor\n        :feedback=\"modelTaskDefinition.feedback\"\n        :result-message=\"modelTaskDefinition.strings.resultMessage\"\n        @update:feedback=\"updateFeedback\"\n        @update:result-message=\"updateResultMessage\"\n      />\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport { MarkTheWordsTask } from '@/models/TaskDefinition';\nimport { Feedback } from '@/models/common';\nimport { $gettext } from '@/language/gettext';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\nimport FeedbackEditor from '@/components/FeedbackEditor.vue';\nimport produce from 'immer';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'MarkTheWordsEditor',\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  components: { FeedbackEditor, StudipWysiwyg },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<MarkTheWordsTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      modelTaskDefinition: cloneDeep(this.taskDefinition),\n    };\n  },\n  watch: {\n    // Synchronize state taskDefinition -> modelTaskDefinition.\n    taskDefinition: {\n      immediate: true,\n      handler: function (): void {\n        this.modelTaskDefinition = cloneDeep(this.taskDefinition);\n      },\n    },\n  },\n  methods: {\n    $gettext,\n\n    /**\n     * Surround the selected text with two asterisks\n     */\n    addSolution() {\n      const wysiwygEl = (this.$refs.wysiwyg as any)?.$el;\n      const editor = window.STUDIP.wysiwyg.getEditor(wysiwygEl);\n      if (!editor) {\n        console.error('getEditor(wysiwygEl) returned: ', editor);\n        throw new Error('Could not get reference to wysiwyg editor');\n      }\n      const selection = editor.model.document.selection;\n      const start = selection.getFirstPosition();\n      const end = selection.getLastPosition();\n      if (!start || !end) {\n        console.error('selection start: ', start, ' selection end: ', end);\n        throw new Error('Could not get selection in editor');\n      }\n      editor.model.change((writer) => {\n        writer.insertText('*', end);\n        writer.insertText('*', start);\n      });\n    },\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n\n    onEditTemplate(data: string): void {\n      // Copy new data from wysiwyg editor into task definition\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (draft: MarkTheWordsTask) => {\n            draft.template = data;\n          }\n        ),\n        undoBatch: 'taskDefinition.template',\n      });\n    },\n\n    updateTaskDefinition(undoBatch?: unknown) {\n      // Synchronize state modelTaskDefinition -> taskDefinition.\n      this.taskEditor!.performEdit({\n        newTaskDefinition: cloneDeep(this.modelTaskDefinition),\n        undoBatch: undoBatch ?? {},\n      });\n    },\n\n    updateFeedback(updatedFeedback: Feedback[]) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: MarkTheWordsTask) => {\n            taskDraft.feedback = updatedFeedback;\n          }\n        ),\n        undoBatch: 'taskDefinition.feedback',\n      });\n    },\n\n    updateResultMessage(updatedResultMessage: string) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: MarkTheWordsTask) => {\n            taskDraft.strings.resultMessage = updatedResultMessage;\n          }\n        ),\n        undoBatch: 'taskDefinition.strings.resultMessage',\n      });\n    },\n  },\n\n  computed: {\n    instructions(): string {\n      return $gettext(\n        'Markieren Sie ein Wort als Lsung, indem Sie ein Sternchen (*) vor und hinter dem Wort setzen oder markieren Sie ein Wort und klicken Sie den Richtiges Wort markierenButton.'\n      );\n    },\n  },\n});\n</script>\n\n<style scoped></style>\n","import { render } from \"./MarkTheWordsEditor.vue?vue&type=template&id=fc939f02&ts=true\"\nimport script from \"./MarkTheWordsEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./MarkTheWordsEditor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-8fc7d02c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"mark-the-words-text\" }\nconst _hoisted_3 = [\"aria-pressed\", \"onClick\", \"onKeydown\", \"onKeyup\", \"innerHTML\"]\nconst _hoisted_4 = [\"aria-pressed\", \"onClick\", \"onKeydown\", \"onKeyup\", \"innerHTML\"]\nconst _hoisted_5 = [\"innerHTML\"]\nconst _hoisted_6 = { key: 3 }\nconst _hoisted_7 = {\n  key: 4,\n  class: \"space\"\n}\nconst _hoisted_8 = { class: \"feedback-and-button-container\" }\nconst _hoisted_9 = { class: \"button-panel\" }\nconst _hoisted_10 = [\"textContent\"]\nconst _hoisted_11 = [\"textContent\"]\nconst _hoisted_12 = [\"textContent\"]\nconst _hoisted_13 = { key: 0 }\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" Marked words: \")\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\" template: \")\nconst _hoisted_16 = /*#__PURE__*/_createTextVNode(\" Split template: \")\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\" Parsed template: \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_feedback_element = _resolveComponent(\"feedback-element\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.parsedTemplate, (element) => {\n        return (_openBlock(), _createElementBlock(_Fragment, {\n          key: element.uuid\n        }, [\n          (element.type === 'solution')\n            ? (_openBlock(), _createElementBlock(\"span\", {\n                key: 0,\n                tabindex: \"0\",\n                role: \"button\",\n                \"aria-pressed\": _ctx.isMarked(element),\n                onClick: ($event: any) => (_ctx.onClickWord(element)),\n                onKeydown: ($event: any) => (_ctx.onWordKeydown($event, element)),\n                onKeyup: ($event: any) => (_ctx.onWordKeyup($event, element)),\n                class: _normalizeClass(['no-break', _ctx.classForWord(element)]),\n                innerHTML: element.text\n              }, null, 42, _hoisted_3))\n            : (element.type === 'word')\n              ? (_openBlock(), _createElementBlock(\"span\", {\n                  key: 1,\n                  tabindex: \"0\",\n                  role: \"button\",\n                  \"aria-pressed\": _ctx.isMarked(element),\n                  onClick: ($event: any) => (_ctx.onClickWord(element)),\n                  onKeydown: ($event: any) => (_ctx.onWordKeydown($event, element)),\n                  onKeyup: ($event: any) => (_ctx.onWordKeyup($event, element)),\n                  class: _normalizeClass(['no-break', _ctx.classForWord(element)]),\n                  innerHTML: element.text\n                }, null, 42, _hoisted_4))\n              : (element.type === 'punctuation')\n                ? (_openBlock(), _createElementBlock(\"span\", {\n                    key: 2,\n                    innerHTML: element.text\n                  }, null, 8, _hoisted_5))\n                : (element.type === 'line-break')\n                  ? (_openBlock(), _createElementBlock(\"br\", _hoisted_6))\n                  : (element.type === 'space')\n                    ? (_openBlock(), _createElementBlock(\"pre\", _hoisted_7, \" \"))\n                    : _createCommentVNode(\"\", true)\n        ], 64))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_8, [\n      (_ctx.showResults)\n        ? (_openBlock(), _createBlock(_component_feedback_element, {\n            key: 0,\n            \"achieved-points\": _ctx.score,\n            \"max-points\": _ctx.maxScore,\n            feedback: _ctx.task.feedback,\n            \"result-message\": _ctx.resultMessage\n          }, null, 8, [\"achieved-points\", \"max-points\", \"feedback\", \"result-message\"]))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_9, [\n        (_ctx.showCheckButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              textContent: _toDisplayString(_ctx.task.strings.checkButton),\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheck && _ctx.onClickCheck(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_10))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showSolutionsButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 1,\n              textContent: _toDisplayString(_ctx.task.strings.solutionsButton),\n              onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onClickShowSolutions && _ctx.onClickShowSolutions(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_11))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showRetryButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 2,\n              textContent: _toDisplayString(_ctx.task.strings.retryButton),\n              onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onClickRetry && _ctx.onClickRetry(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_12))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    (_ctx.debug)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.markedWords), 1),\n          _hoisted_15,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.task.template), 1),\n          _hoisted_16,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.splitTemplate), 1),\n          _hoisted_17,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.parsedTemplate), 1)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <div class=\"mark-the-words-text\">\n      <template v-for=\"element in parsedTemplate\" :key=\"element.uuid\">\n        <span\n          v-if=\"element.type === 'solution'\"\n          tabindex=\"0\"\n          role=\"button\"\n          :aria-pressed=\"isMarked(element)\"\n          @click=\"onClickWord(element)\"\n          @keydown=\"onWordKeydown($event, element)\"\n          @keyup=\"onWordKeyup($event, element)\"\n          :class=\"['no-break', classForWord(element)]\"\n          v-html=\"element.text\"\n        ></span>\n\n        <span\n          v-else-if=\"element.type === 'word'\"\n          tabindex=\"0\"\n          role=\"button\"\n          :aria-pressed=\"isMarked(element)\"\n          @click=\"onClickWord(element)\"\n          @keydown=\"onWordKeydown($event, element)\"\n          @keyup=\"onWordKeyup($event, element)\"\n          :class=\"['no-break', classForWord(element)]\"\n          v-html=\"element.text\"\n        ></span>\n\n        <span\n          v-else-if=\"element.type === 'punctuation'\"\n          v-html=\"element.text\"\n        ></span>\n\n        <br v-else-if=\"element.type === 'line-break'\" />\n\n        <!--  prettier-ignore-->\n        <pre v-else-if=\"element.type === 'space'\" class=\"space\"> </pre>\n      </template>\n    </div>\n\n    <!-- Feedback and button section -->\n    <div class=\"feedback-and-button-container\">\n      <feedback-element\n        v-if=\"showResults\"\n        :achieved-points=\"score\"\n        :max-points=\"maxScore\"\n        :feedback=\"task.feedback\"\n        :result-message=\"resultMessage\"\n      />\n\n      <div class=\"button-panel\">\n        <button\n          v-if=\"showCheckButton\"\n          v-text=\"task.strings.checkButton\"\n          @click=\"onClickCheck\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showSolutionsButton\"\n          v-text=\"task.strings.solutionsButton\"\n          @click=\"onClickShowSolutions\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showRetryButton\"\n          v-text=\"task.strings.retryButton\"\n          @click=\"onClickRetry\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n      </div>\n    </div>\n\n    <div v-if=\"debug\">\n      Marked words:\n      <pre>{{ markedWords }}</pre>\n      template:\n      <pre>{{ task.template }}</pre>\n      Split template:\n      <pre>{{ splitTemplate }}</pre>\n      Parsed template:\n      <pre>{{ parsedTemplate }}</pre>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { MarkTheWordsTask } from '@/models/TaskDefinition';\nimport { v4 as uuidv4 } from 'uuid';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\n\ntype Uuid = string;\n\ntype MarkTheWordsElement = Solution | Word | Space | Punctuation | LineBreak;\n\ninterface Solution {\n  type: 'solution';\n  uuid: Uuid;\n  text: string;\n}\n\ninterface Word {\n  type: 'word';\n  uuid: Uuid;\n  text: string;\n}\n\ninterface Space {\n  type: 'space';\n  uuid: Uuid;\n}\n\ninterface Punctuation {\n  type: 'punctuation';\n  uuid: Uuid;\n  text: string;\n}\n\ninterface LineBreak {\n  type: 'line-break';\n  uuid: Uuid;\n}\n\nexport default defineComponent({\n  name: 'MarkTheWordsViewer',\n  props: {\n    task: {\n      type: Object as PropType<MarkTheWordsTask>,\n      required: true,\n    },\n  },\n  components: {\n    FeedbackElement,\n  },\n  data() {\n    return {\n      markedWords: new Set<MarkTheWordsElement>(),\n      showResults: false,\n      showSolutions: false,\n      debug: false,\n    };\n  },\n  methods: {\n    onClickCheck() {\n      this.showResults = true;\n    },\n\n    onClickShowSolutions() {\n      this.showSolutions = true;\n    },\n\n    onClickRetry() {\n      this.showResults = false;\n      this.showSolutions = false;\n      this.markedWords.clear();\n    },\n\n    onClickWord(word: MarkTheWordsElement) {\n      if (this.showResults) return;\n\n      if (this.isMarked(word)) {\n        this.markedWords.delete(word);\n      } else {\n        this.markedWords.add(word);\n      }\n    },\n\n    /**\n     * Marks/unmarks a word using the enter key.\n     */\n    onWordKeydown(event: KeyboardEvent, word: MarkTheWordsElement) {\n      // The action button is activated by space on the keyup event, but the\n      // default action for space is already triggered on keydown. It needs to be\n      // prevented to stop scrolling the page before activating the button.\n      if (event.code === 'Space') {\n        event.preventDefault();\n      }\n      // If enter is pressed, activate the button\n      else if (event.code === 'Enter' || event.code === 'Return') {\n        event.preventDefault();\n        this.onClickWord(word);\n      }\n    },\n\n    /**\n     * Marks/unmarks a word with the space key.\n     */\n    onWordKeyup(event: KeyboardEvent, word: MarkTheWordsElement) {\n      if (event.code === 'Space') {\n        event.preventDefault();\n        this.onClickWord(word);\n      }\n    },\n\n    classForWord(word: MarkTheWordsElement) {\n      if (this.showResults) {\n        // User is done marking words and wants to see the results\n        if (this.isMarked(word)) {\n          return word.type === 'solution'\n            ? 'correct-answer'\n            : 'incorrect-answer';\n        }\n        // Word is not marked\n        return this.showSolutions && word.type === 'solution'\n          ? 'solution'\n          : 'static-word-no-hover';\n      }\n\n      // User is still working on the task\n      return this.isMarked(word) ? 'marked-word' : 'static-word';\n    },\n\n    isMarked(word: MarkTheWordsElement): boolean {\n      return this.markedWords.has(word);\n    },\n\n    sanitizeText(text: string) {\n      // Remove all opening and closing <p> tags and all occurrences of &nbsp;\n      return text.replace(/<\\/?p>/g, '').replace(/&nbsp;/g, ' ');\n    },\n  },\n  computed: {\n    splitTemplate(): string[] {\n      // Step 1: Sanitize the template (removes <p> tags and &nbsp;)\n      const cleanTemplate = this.sanitizeText(this.task.template);\n\n      // Step 2: Split by solutions (words surrounded by asterisks)\n      // This captures solutions as one piece and separates the rest of the text.\n      const splitBySolutions = cleanTemplate.split(/(\\*[^*]+\\*)/g);\n\n      // Step 3: Process each chunk: If it's a solution, leave it intact.\n      // If it's not a solution, split it further by line breaks, punctuation and spaces.\n      const finalSplit = splitBySolutions.flatMap((part) => {\n        if (/^\\*[^*]+\\*$/.test(part)) {\n          // This part is a solution (surrounded by asterisks), leave it intact\n          return part;\n        } else {\n          // This part is regular text, split by line breaks, spaces, and punctuation\n          return part.split(/(<br\\s*\\/?>|\\s+|[.,!?;:()])/g).filter(Boolean); // Remove empty parts\n        }\n      });\n\n      // Step 4: Return the final split array\n      return finalSplit;\n    },\n\n    parsedTemplate(): MarkTheWordsElement[] {\n      let parsedTemplate: MarkTheWordsElement[] = [];\n\n      this.splitTemplate.forEach((templateElement) => {\n        if (/^\\*[^*]+\\*$/.test(templateElement)) {\n          // If it's a solution (word surrounded by asterisks)\n          // Remove the asterisks first\n          const content = templateElement.replace(/\\*/g, '');\n\n          parsedTemplate.push({\n            type: 'solution',\n            uuid: uuidv4(),\n            text: content,\n          });\n        } else if (/^\\s+$/.test(templateElement)) {\n          // If it's a space\n          parsedTemplate.push({\n            type: 'space',\n            uuid: uuidv4(),\n          });\n        } else if (/^<br\\s*\\/?>$/.test(templateElement)) {\n          // If it's a line break\n          parsedTemplate.push({\n            type: 'line-break',\n            uuid: uuidv4(),\n          });\n        } else if (/[.,!?;:()]/.test(templateElement)) {\n          // If it's a punctuation mark\n          parsedTemplate.push({\n            type: 'punctuation',\n            uuid: uuidv4(),\n            text: templateElement,\n          });\n        } else {\n          // It's a regular word (including hyphenated words)\n          parsedTemplate.push({\n            type: 'word',\n            uuid: uuidv4(),\n            text: templateElement,\n          });\n        }\n      });\n\n      return parsedTemplate;\n    },\n\n    showCheckButton(): boolean {\n      return !this.showResults;\n    },\n\n    showRetryButton(): boolean {\n      return (\n        this.task.retryAllowed && this.showResults && !this.allAnswersAreCorrect\n      );\n    },\n\n    showSolutionsButton(): boolean {\n      return (\n        this.task.showSolutionsAllowed &&\n        this.showResults &&\n        !this.showSolutions &&\n        !this.allAnswersAreCorrect\n      );\n    },\n\n    score(): number {\n      let score = 0;\n\n      for (const element of this.markedWords) {\n        if (element.type === 'solution') {\n          score++;\n        } else {\n          score--;\n        }\n      }\n\n      if (score < 0) score = 0;\n\n      return score;\n    },\n\n    maxScore(): number {\n      let maxScore = 0;\n\n      for (const element of this.parsedTemplate) {\n        if (element.type === 'solution') {\n          maxScore++;\n        }\n      }\n\n      return maxScore;\n    },\n\n    resultMessage(): string {\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.score.toString()\n      );\n\n      resultMessage = resultMessage.replace(':total', this.maxScore.toString());\n\n      return resultMessage;\n    },\n\n    allAnswersAreCorrect(): boolean {\n      return this.score === this.maxScore;\n    },\n  },\n});\n</script>\n\n<style scoped>\n.static-word {\n  background: #ffffff;\n  color: #000000;\n}\n\n.static-word:hover {\n  box-shadow: 0 0 0 1px #cee0f4;\n  border-radius: 0.25em;\n  cursor: pointer;\n}\n\n.static-word-no-hover {\n  background: #ffffff;\n  color: #000000;\n}\n\n.marked-word {\n  box-shadow: 0 0 0 1px #cee0f4;\n  border-radius: 0.25em;\n  background-color: #d4f1f6;\n}\n\n.marked-word:hover {\n  box-shadow: 0 0 0 1px #cee0f4;\n  border-radius: 0.25em;\n  cursor: pointer;\n}\n\n.correct-answer {\n  color: #255c41;\n  box-shadow: 0 0 0 1px #d4f6e6;\n  border-radius: 0.25em;\n  background-color: #d4f6e6;\n}\n\n.solution {\n  color: #255c41;\n  box-shadow: 0 0 0 1px #d4f6e6;\n  border-radius: 0.25em;\n  background-color: #d4f6e6;\n  border: 1px #255c41 dashed;\n}\n\n.incorrect-answer {\n  color: #b71c1c;\n  box-shadow: 0 0 0 1px #f7d0d0;\n  border-radius: 0.25em;\n  background-color: #f7d0d0;\n  text-decoration: line-through;\n}\n\n.space {\n  font-family: Sans-Serif;\n  display: inline;\n}\n\n.no-break {\n  white-space: nowrap; /* Prevents line break inside the element */\n  display: inline-block; /* Makes sure it behaves like a block in inline context */\n}\n</style>\n","import { render } from \"./MarkTheWordsViewer.vue?vue&type=template&id=8fc7d02c&scoped=true&ts=true\"\nimport script from \"./MarkTheWordsViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./MarkTheWordsViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./MarkTheWordsViewer.vue?vue&type=style&index=0&id=8fc7d02c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8fc7d02c\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createTextVNode as _createTextVNode, createBlock as _createBlock, vModelText as _vModelText, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-e3fd84b0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = { class: \"memory-editor\" }\nconst _hoisted_4 = { class: \"cards-list\" }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = [\"textContent\"]\nconst _hoisted_7 = [\"onClick\", \"aria-label\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = {\n  key: 0,\n  class: \"edited-memory-card\"\n}\nconst _hoisted_10 = {\n  key: 1,\n  class: \"no-card-selected-placeholder\"\n}\nconst _hoisted_11 = { class: \"collapsable collapsed\" }\nconst _hoisted_12 = {\n  key: 0,\n  class: \"flipside-image-and-button-container\"\n}\nconst _hoisted_13 = { class: \"collapsable collapsed\" }\nconst _hoisted_14 = [\"disabled\"]\nconst _hoisted_15 = { class: \"collapsable collapsed\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemoryEditorCard = _resolveComponent(\"MemoryEditorCard\")!\n  const _component_LazyImage = _resolveComponent(\"LazyImage\")!\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", _hoisted_3, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Memory')), 1),\n        _createElementVNode(\"div\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.modelTaskDefinition.cards, (card, index) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: card.uuid,\n              class: _normalizeClass({\n              'cards-list-item': true,\n              'selected-card': index === _ctx.selectedCardIndex,\n            }),\n              onClick: ($event: any) => (_ctx.selectCard(index))\n            }, [\n              _createElementVNode(\"div\", {\n                textContent: _toDisplayString(_ctx.listEntryText(index, card)),\n                class: \"list-entry-text\"\n              }, null, 8, _hoisted_6),\n              _createElementVNode(\"button\", {\n                type: \"button\",\n                class: \"flex-child-element remove-card-button\",\n                onClick: _withModifiers(($event: any) => (_ctx.deleteCard(index)), [\"stop\"]),\n                \"aria-label\": _ctx.$pgettext('Karte im Memory Spiel', 'Karte lschen')\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.urlForIcon('trash'),\n                  alt: \"\"\n                }, null, 8, _hoisted_8)\n              ], 8, _hoisted_7)\n            ], 10, _hoisted_5))\n          }), 128)),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"button add add-card-button\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addCard && _ctx.addCard(...args)))\n          }, _toDisplayString(_ctx.$gettext('Karte hinzufgen')), 1)\n        ]),\n        (_ctx.modelTaskDefinition.cards[_ctx.selectedCardIndex])\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n              _createVNode(_component_MemoryEditorCard, {\n                card: _ctx.modelTaskDefinition.cards[_ctx.selectedCardIndex],\n                \"onUpdate:card\": _ctx.updateCard\n              }, null, 8, [\"card\", \"onUpdate:card\"])\n            ]))\n          : (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_10, [\n              _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Keine Karte ausgewhlt')), 1)\n            ]))\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_11, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.modelTaskDefinition.retryAllowed) = $event)),\n            onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.retryAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.modelTaskDefinition.squareLayout) = $event)),\n            onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.squareLayout]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Karten in einem Quadrat positionieren')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Rckseite')) + \" \", 1),\n          (\n              _ctx.modelTaskDefinition.flipside &&\n              _ctx.modelTaskDefinition.flipside.file_id\n            )\n            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, [\n                _createVNode(_component_LazyImage, {\n                  src: _ctx.fileIdToUrl(_ctx.modelTaskDefinition.flipside.file_id),\n                  alt: _ctx.modelTaskDefinition.flipside.altText,\n                  class: \"flipside-image\"\n                }, null, 8, [\"src\", \"alt\"]),\n                _createElementVNode(\"button\", {\n                  onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.deleteFlipsideImage && _ctx.deleteFlipsideImage(...args))),\n                  type: \"button\",\n                  class: \"button delete-flipside-image-button\"\n                }, _toDisplayString(_ctx.$gettext('Bild Lschen')), 1)\n              ]))\n            : (_openBlock(), _createBlock(_component_FileUpload, {\n                key: 1,\n                onFileUploaded: _ctx.onFlipsideImageUploaded\n              }, null, 8, [\"onFileUploaded\"]))\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_13, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Beschriftungen')), 1),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.retryAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.modelTaskDefinition.strings.retryButton) = $event)),\n            onInput: _cache[7] || (_cache[7] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            disabled: !_ctx.modelTaskDefinition.retryAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_14), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.retryButton]\n          ])\n        ], 2)\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_15, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Feedback')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Ergebnismitteilung:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.modelTaskDefinition.strings.resultMessage) = $event)),\n            onInput: _cache[9] || (_cache[9] = ($event: any) => (\n              _ctx.updateTaskDefinition('taskDefinition.strings.resultMessage')\n            )),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.resultMessage]\n          ])\n        ])\n      ])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset class=\"memory-editor\">\n        <legend>{{ $gettext('Memory') }}</legend>\n\n        <div class=\"cards-list\">\n          <div\n            v-for=\"(card, index) in modelTaskDefinition.cards\"\n            :key=\"card.uuid\"\n            :class=\"{\n              'cards-list-item': true,\n              'selected-card': index === selectedCardIndex,\n            }\"\n            @click=\"selectCard(index)\"\n          >\n            <div v-text=\"listEntryText(index, card)\" class=\"list-entry-text\" />\n\n            <!-- Apply .stop modifier so that the selectCard event handler on the\n            parent element doesn't get called when the delete button is clicked -->\n            <button\n              type=\"button\"\n              class=\"flex-child-element remove-card-button\"\n              @click.stop=\"deleteCard(index)\"\n              :aria-label=\"$pgettext('Karte im Memory Spiel', 'Karte lschen')\"\n            >\n              <img :src=\"urlForIcon('trash')\" alt=\"\" />\n            </button>\n          </div>\n\n          <button\n            type=\"button\"\n            class=\"button add add-card-button\"\n            @click=\"addCard\"\n          >\n            {{ $gettext('Karte hinzufgen') }}\n          </button>\n        </div>\n\n        <div\n          v-if=\"modelTaskDefinition.cards[selectedCardIndex]\"\n          class=\"edited-memory-card\"\n        >\n          <MemoryEditorCard\n            :card=\"modelTaskDefinition.cards[selectedCardIndex]\"\n            @update:card=\"updateCard\"\n          />\n        </div>\n\n        <fieldset v-else class=\"no-card-selected-placeholder\">\n          <legend>\n            {{ $gettext('Keine Karte ausgewhlt') }}\n          </legend>\n        </fieldset>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.retryAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrere Versuche erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.squareLayout\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Karten in einem Quadrat positionieren') }}\n        </label>\n\n        <label\n          >{{ $gettext('Rckseite') }}\n          <span\n            v-if=\"\n              modelTaskDefinition.flipside &&\n              modelTaskDefinition.flipside.file_id\n            \"\n            class=\"flipside-image-and-button-container\"\n          >\n            <LazyImage\n              :src=\"fileIdToUrl(modelTaskDefinition.flipside.file_id)\"\n              :alt=\"modelTaskDefinition.flipside.altText\"\n              class=\"flipside-image\"\n            />\n\n            <button\n              @click=\"deleteFlipsideImage\"\n              type=\"button\"\n              class=\"button delete-flipside-image-button\"\n            >\n              {{ $gettext('Bild Lschen') }}\n            </button>\n          </span>\n\n          <FileUpload v-else @file-uploaded=\"onFlipsideImageUploaded\" />\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.retryAllowed }\"\n        >\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            :disabled=\"!modelTaskDefinition.retryAllowed\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Feedback') }}</legend>\n\n        <label>\n          {{ $gettext('Ergebnismitteilung:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.resultMessage\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.resultMessage')\n            \"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n    </form>\n  </div>\n</template>\n\n<style scoped>\n.memory-editor {\n  display: flex;\n  gap: 1em;\n}\n\n.cards-list {\n  display: flex;\n  flex-direction: column;\n  flex: 0 0 200px;\n  max-width: 14em;\n}\n\n.cards-list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border: transparent 2px solid;\n  padding: 2px;\n  cursor: pointer;\n  user-select: none;\n}\n\n.selected-card {\n  border: #0a78d1 2px solid;\n}\n\n.edited-memory-card {\n  flex: 1 1 auto;\n}\n\n.no-card-selected-placeholder {\n  flex: 1 1 auto;\n  height: 150px;\n}\n\n.list-entry-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 11em;\n}\n\n.remove-card-button {\n  aspect-ratio: 1;\n  display: flex;\n  align-items: center;\n  border: 1px solid #28497c;\n  color: #28497c;\n  background: #fff;\n  cursor: pointer;\n}\n\n.remove-card-button:hover {\n  background: rgba(109, 114, 122, 0.2);\n}\n\n.add-card-button {\n  margin: 0.8em 0 0 0;\n}\n\n.delete-flipside-image-button {\n  margin: 0;\n}\n\n.flipside-image-and-button-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-end;\n  gap: 0.5em;\n}\n\n.memory-card-flipside {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  max-width: 14em;\n  aspect-ratio: 1;\n\n  border: 2px solid #d0d7e3;\n  color: #28497c;\n  background: #e7ebf1;\n}\n\n.flipside-image {\n  width: 12em;\n  height: 12em;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  margin: 0;\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport { fileIdToUrl, MemoryCard, MemoryTask } from '@/models/TaskDefinition';\nimport { $gettext, $pgettext } from '@/language/gettext';\nimport produce from 'immer';\nimport { v4 } from 'uuid';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { FileRef } from '@/routes/jsonApi';\nimport MemoryEditorCard from '@/components/MemoryEditorCard.vue';\nimport LazyImage from '@/components/LazyImage.vue';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'MemoryEditor',\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  components: { LazyImage, MemoryEditorCard, FileUpload },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<MemoryTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      selectedCardIndex: -1,\n      modelTaskDefinition: cloneDeep(this.taskDefinition),\n    };\n  },\n  watch: {\n    // Synchronize state taskDefinition -> modelTaskDefinition.\n    taskDefinition: {\n      immediate: true,\n      handler: function (): void {\n        this.modelTaskDefinition = cloneDeep(this.taskDefinition);\n      },\n    },\n  },\n  beforeMount(): void {\n    if (this.taskDefinition.cards.length > 0) {\n      this.selectedCardIndex = 0;\n    }\n  },\n  methods: {\n    fileIdToUrl,\n    $gettext,\n    $pgettext,\n    updateTaskDefinition(undoBatch?: unknown) {\n      // Synchronize state modelTaskDefinition -> taskDefinition.\n      this.taskEditor!.performEdit({\n        newTaskDefinition: cloneDeep(this.modelTaskDefinition),\n        undoBatch: undoBatch ?? {},\n      });\n    },\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n    selectCard(index: number) {\n      this.selectedCardIndex = index;\n    },\n    listEntryText(index: number, card: MemoryCard) {\n      let text = index + 1 + '. ';\n      text += $gettext('Paar');\n\n      /*\n      if (card.first.altText != '') {\n        text += card.first.altText;\n\n        if (card.second && card.second?.altText != '') {\n          text += ' ' + $gettext('und') + ' ' + card.second.altText;\n        }\n      } else {\n        text += $gettext('Paar');\n      }\n      */\n\n      return text;\n    },\n    addCard() {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.cards.push({\n          uuid: v4(),\n          first: {\n            uuid: v4(),\n            type: 'image',\n            file_id: '',\n            altText: '',\n          },\n        });\n      });\n      this.taskEditor!.performEdit({\n        newTaskDefinition: this.modelTaskDefinition,\n        undoBatch: {},\n      });\n      // Select the newly inserted card\n      this.selectedCardIndex = this.modelTaskDefinition.cards.length - 1;\n    },\n    deleteCard(index: number) {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.cards.splice(index, 1);\n      });\n\n      this.updateTaskDefinition();\n\n      // Adjust the selection index so the selected card doesn't unexpectedly change\n      if (index <= this.selectedCardIndex) {\n        this.selectedCardIndex = this.selectedCardIndex - 1;\n      }\n    },\n    updateCard(updatedCard: MemoryCard, undoBatch?: unknown) {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.cards[this.selectedCardIndex] = updatedCard;\n      });\n      this.updateTaskDefinition(undoBatch);\n    },\n    onFlipsideImageUploaded(file: FileRef): void {\n      const newTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.flipside = {\n          uuid: v4(),\n          type: 'image',\n          file_id: file.id,\n          altText: '',\n        };\n      });\n      this.taskEditor!.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    deleteFlipsideImage(): void {\n      const newTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.flipside = undefined;\n      });\n      this.taskEditor!.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n  },\n});\n</script>\n","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-de915fa4\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"memory-editor-card\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"image-memory-card-container\"\n}\nconst _hoisted_3 = { class: \"multimedia-element-wrapper\" }\nconst _hoisted_4 = { style: {\"align-self\":\"stretch\"} }\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = {\n  key: 0,\n  id: \"secondImage\",\n  class: \"image-memory-card-container\"\n}\nconst _hoisted_7 = { class: \"multimedia-element-wrapper\" }\nconst _hoisted_8 = { style: {\"align-self\":\"stretch\"} }\nconst _hoisted_9 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n\n  return (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_1, [\n    _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Karte')), 1),\n    _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext(_ctx.card.second ? 'Erstes Bild' : 'Bild')), 1),\n    (_ctx.card.first.type === 'image' && _ctx.card.first.file_id)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_MultimediaElement, {\n              element: _ctx.card.first\n            }, null, 8, [\"element\"])\n          ]),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClickDeleteImage('first'))),\n            class: \"button trash settings-item\"\n          }, _toDisplayString(_ctx.$gettext('Bild lschen')), 1),\n          _createElementVNode(\"label\", _hoisted_4, [\n            _createTextVNode(_toDisplayString(_ctx.$gettext('Bildbeschreibung')) + \" \", 1),\n            _createElementVNode(\"input\", {\n              type: \"text\",\n              value: _ctx.card.first.altText,\n              onInput: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onInputAltText($event, 'first'))),\n              class: \"settings-item\"\n            }, null, 40, _hoisted_5)\n          ])\n        ]))\n      : (_openBlock(), _createBlock(_component_FileUpload, {\n          key: 1,\n          onFileUploaded: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onUploadImage($event, 'first')))\n        })),\n    (_ctx.card.second)\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n          _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext('Zweites Bild')), 1),\n          (_ctx.card.second.type === 'image' && _ctx.card.second.file_id)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                _createElementVNode(\"div\", _hoisted_7, [\n                  _createVNode(_component_MultimediaElement, {\n                    element: _ctx.card.second,\n                    class: \"multimedia-element\"\n                  }, null, 8, [\"element\"])\n                ]),\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onClickDeleteImage('second'))),\n                  class: \"button trash settings-item\"\n                }, _toDisplayString(_ctx.$gettext('Bild lschen')), 1),\n                _createElementVNode(\"label\", _hoisted_8, [\n                  _createTextVNode(_toDisplayString(_ctx.$gettext('Bildbeschreibung')) + \" \", 1),\n                  _createElementVNode(\"input\", {\n                    type: \"text\",\n                    value: _ctx.card.second.altText,\n                    onInput: _cache[4] || (_cache[4] = ($event: any) => (_ctx.onInputAltText($event, 'second'))),\n                    class: \"settings-item\"\n                  }, null, 40, _hoisted_9)\n                ])\n              ]))\n            : (_openBlock(), _createBlock(_component_FileUpload, {\n                key: 1,\n                onFileUploaded: _cache[5] || (_cache[5] = ($event: any) => (_ctx.onUploadImage($event, 'second')))\n              }))\n        ], 64))\n      : (_ctx.card.first.file_id)\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 3,\n            type: \"button\",\n            onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.addSecondImage && _ctx.addSecondImage(...args))),\n            class: \"button add-image-button\"\n          }, _toDisplayString(_ctx.$gettext('Zweites Bild hinzufgen')), 1))\n        : _createCommentVNode(\"\", true)\n  ]))\n}","<template>\n  <fieldset class=\"memory-editor-card\">\n    <legend>{{ $gettext('Karte') }}</legend>\n\n    <label>{{ $gettext(card.second ? 'Erstes Bild' : 'Bild') }}</label>\n    <div\n      v-if=\"card.first.type === 'image' && card.first.file_id\"\n      class=\"image-memory-card-container\"\n    >\n      <div class=\"multimedia-element-wrapper\">\n        <MultimediaElement :element=\"card.first\" />\n      </div>\n\n      <button\n        type=\"button\"\n        @click=\"onClickDeleteImage('first')\"\n        class=\"button trash settings-item\"\n      >\n        {{ $gettext('Bild lschen') }}\n      </button>\n\n      <label style=\"align-self: stretch\"\n        >{{ $gettext('Bildbeschreibung') }}\n        <input\n          type=\"text\"\n          :value=\"card.first.altText\"\n          @input=\"onInputAltText($event, 'first')\"\n          class=\"settings-item\"\n        />\n      </label>\n    </div>\n    <FileUpload v-else @file-uploaded=\"onUploadImage($event, 'first')\" />\n\n    <template v-if=\"card.second\">\n      <label>{{ $gettext('Zweites Bild') }}</label>\n\n      <div\n        v-if=\"card.second.type === 'image' && card.second.file_id\"\n        id=\"secondImage\"\n        class=\"image-memory-card-container\"\n      >\n        <div class=\"multimedia-element-wrapper\">\n          <MultimediaElement\n            :element=\"card.second\"\n            class=\"multimedia-element\"\n          />\n        </div>\n\n        <button\n          type=\"button\"\n          @click=\"onClickDeleteImage('second')\"\n          class=\"button trash settings-item\"\n        >\n          {{ $gettext('Bild lschen') }}\n        </button>\n\n        <label style=\"align-self: stretch\"\n          >{{ $gettext('Bildbeschreibung') }}\n          <input\n            type=\"text\"\n            :value=\"card.second.altText\"\n            @input=\"onInputAltText($event, 'second')\"\n            class=\"settings-item\"\n          />\n        </label>\n      </div>\n      <FileUpload v-else @file-uploaded=\"onUploadImage($event, 'second')\" />\n    </template>\n\n    <button\n      v-else-if=\"card.first.file_id\"\n      type=\"button\"\n      @click=\"addSecondImage\"\n      class=\"button add-image-button\"\n    >\n      {{ $gettext('Zweites Bild hinzufgen') }}\n    </button>\n  </fieldset>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { MemoryCard } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { FileRef } from '@/routes/jsonApi';\nimport { v4 } from 'uuid';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\n\nexport default defineComponent({\n  name: 'MemoryEditorCard',\n  components: { MultimediaElement, FileUpload },\n  props: {\n    card: {\n      type: Object as PropType<MemoryCard>,\n      required: true,\n    },\n  },\n  methods: {\n    $gettext,\n    onUploadImage(file: FileRef, element: 'first' | 'second'): void {\n      // Why not use 'produce' here? I find it more readable, personally.\n      this.$emit('update:card', {\n        ...this.card,\n        [element]: {\n          ...this.card[element],\n          file_id: file.id,\n        },\n      });\n    },\n    onInputAltText(event: InputEvent, element: 'first' | 'second'): void {\n      const altText = (event.target as HTMLInputElement).value;\n      this.$emit(\n        'update:card',\n        {\n          ...this.card,\n          [element]: {\n            ...this.card[element],\n            altText,\n          },\n        },\n        this.card[element]?.uuid + '.altText'\n      );\n    },\n    addSecondImage(): void {\n      this.$emit('update:card', {\n        ...this.card,\n        second: {\n          uuid: v4(),\n          type: 'image',\n          file_id: '',\n          altText: '',\n        },\n      });\n    },\n    onClickDeleteImage(element: 'first' | 'second'): void {\n      if (element === 'first') {\n        this.$emit('update:card', {\n          ...this.card,\n          first: {\n            ...this.card.first,\n            file_id: '',\n          },\n        });\n      } else {\n        this.$emit('update:card', {\n          ...this.card,\n          second: undefined,\n        });\n      }\n    },\n  },\n});\n</script>\n\n<style scoped>\n.memory-editor-card {\n  flex: 1 1 auto;\n}\n\n.add-image-button {\n  margin: 0;\n}\n\n.multimedia-element-wrapper {\n  width: 12em;\n  height: 12em;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n\n  padding: 0.5em;\n  margin: 0;\n\n  overflow: hidden;\n}\n\n.image-memory-card-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  gap: 0.5em;\n}\n\n.settings-item {\n  /* top | right | bottom | left */\n  margin: 0.25em 0 0 0;\n}\n</style>\n","import { render } from \"./MemoryEditorCard.vue?vue&type=template&id=de915fa4&scoped=true&ts=true\"\nimport script from \"./MemoryEditorCard.vue?vue&type=script&lang=ts\"\nexport * from \"./MemoryEditorCard.vue?vue&type=script&lang=ts\"\n\nimport \"./MemoryEditorCard.vue?vue&type=style&index=0&id=de915fa4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-de915fa4\"]])\n\nexport default __exports__","import { render } from \"./MemoryEditor.vue?vue&type=template&id=e3fd84b0&scoped=true&ts=true\"\nimport script from \"./MemoryEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./MemoryEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./MemoryEditor.vue?vue&type=style&index=0&id=e3fd84b0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e3fd84b0\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-180b5606\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = {\n  key: 0,\n  style: {\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"flex-start\",\"gap\":\"0.25em\",\"padding-top\":\"1em\",\"padding-bottom\":\"0.5em\"}\n}\nconst _hoisted_3 = [\"textContent\"]\nconst _hoisted_4 = [\"textContent\"]\nconst _hoisted_5 = [\"textContent\"]\nconst _hoisted_6 = [\"textContent\"]\nconst _hoisted_7 = [\"textContent\"]\nconst _hoisted_8 = [\"textContent\"]\nconst _hoisted_9 = {\n  key: 0,\n  class: \"result-message\"\n}\nconst _hoisted_10 = { class: \"button-panel\" }\nconst _hoisted_11 = [\"textContent\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemoryViewerCard = _resolveComponent(\"MemoryViewerCard\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"memory-grid\",\n      style: _normalizeStyle({\n        gridTemplateColumns: _ctx.gridTemplateColumns,\n        gridTemplateRows: _ctx.gridTemplateRows,\n      })\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.cards, (card) => {\n        return (_openBlock(), _createBlock(_component_MemoryViewerCard, {\n          key: card.id,\n          card: card,\n          flipside: _ctx.task.flipside,\n          onClick: ($event: any) => (_ctx.onClickCard(card))\n        }, null, 8, [\"card\", \"flipside\", \"onClick\"]))\n      }), 128))\n    ], 4),\n    (_ctx.isPlayable)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", null, [\n            _createElementVNode(\"span\", {\n              class: \"memory-info-header\",\n              textContent: _toDisplayString(_ctx.$gettext('Zeit:'))\n            }, null, 8, _hoisted_3),\n            _createElementVNode(\"span\", {\n              textContent: _toDisplayString(\n            ' ' +\n            _ctx.$gettext('%{ time } Sekunden', {\n              time: this.timer.toString(),\n            })\n          )\n            }, null, 8, _hoisted_4)\n          ]),\n          _createElementVNode(\"div\", null, [\n            _createElementVNode(\"span\", {\n              class: \"memory-info-header\",\n              textContent: _toDisplayString(_ctx.$gettext('Umgedrehte Karten:'))\n            }, null, 8, _hoisted_5),\n            _createElementVNode(\"span\", {\n              textContent: _toDisplayString(' ' + this.amountOfFlips.toString())\n            }, null, 8, _hoisted_6)\n          ]),\n          _createElementVNode(\"div\", null, [\n            _createElementVNode(\"span\", {\n              class: \"memory-info-header\",\n              textContent: _toDisplayString(_ctx.$gettext('Aufgedeckte Paare:'))\n            }, null, 8, _hoisted_7),\n            _createElementVNode(\"span\", {\n              textContent: _toDisplayString(\n            ' ' +\n            _ctx.$gettext('%{ amountOfPairsSolved } von %{ totalAmountOfPairs }', {\n              amountOfPairsSolved: this.amountOfPairsSolved.toString(),\n              totalAmountOfPairs: this.totalAmountOfPairs.toString(),\n            })\n          )\n            }, null, 8, _hoisted_8)\n          ]),\n          (_ctx.showResults)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(this.resultMessage), 1))\n            : _createCommentVNode(\"\", true)\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_10, [\n      (_ctx.showRetryButton)\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 0,\n            textContent: _toDisplayString(this.task.strings.retryButton),\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClickTryAgain && _ctx.onClickTryAgain(...args))),\n            type: \"button\",\n            class: \"stud5p-button\"\n          }, null, 8, _hoisted_11))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <div\n      class=\"memory-grid\"\n      :style=\"{\n        gridTemplateColumns: gridTemplateColumns,\n        gridTemplateRows: gridTemplateRows,\n      }\"\n    >\n      <template v-for=\"card in this.cards\" :key=\"card.id\">\n        <MemoryViewerCard\n          :card=\"card\"\n          :flipside=\"task.flipside\"\n          @click=\"onClickCard(card)\"\n        />\n      </template>\n    </div>\n\n    <div\n      v-if=\"isPlayable\"\n      style=\"\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 0.25em;\n        padding-top: 1em;\n        padding-bottom: 0.5em;\n      \"\n    >\n      <div>\n        <span class=\"memory-info-header\" v-text=\"$gettext('Zeit:')\" />\n        <span\n          v-text=\"\n            ' ' +\n            $gettext('%{ time } Sekunden', {\n              time: this.timer.toString(),\n            })\n          \"\n        />\n      </div>\n\n      <div>\n        <span\n          class=\"memory-info-header\"\n          v-text=\"$gettext('Umgedrehte Karten:')\"\n        />\n        <span v-text=\"' ' + this.amountOfFlips.toString()\" />\n      </div>\n\n      <div>\n        <span\n          class=\"memory-info-header\"\n          v-text=\"$gettext('Aufgedeckte Paare:')\"\n        />\n        <span\n          v-text=\"\n            ' ' +\n            $gettext('%{ amountOfPairsSolved } von %{ totalAmountOfPairs }', {\n              amountOfPairsSolved: this.amountOfPairsSolved.toString(),\n              totalAmountOfPairs: this.totalAmountOfPairs.toString(),\n            })\n          \"\n        />\n      </div>\n\n      <div v-if=\"showResults\" class=\"result-message\">\n        {{ this.resultMessage }}\n      </div>\n    </div>\n\n    <div class=\"button-panel\">\n      <button\n        v-if=\"showRetryButton\"\n        v-text=\"this.task.strings.retryButton\"\n        @click=\"onClickTryAgain\"\n        type=\"button\"\n        class=\"stud5p-button\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport {\n  MemoryTask,\n  LernmoduleMultimediaElement,\n} from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport MemoryViewerCard from '@/components/MemoryViewerCard.vue';\nimport { v4 } from 'uuid';\n\nexport interface ViewerMemoryCard {\n  uuid: string;\n  type: string;\n  file_id: string | undefined;\n  altText: string | undefined;\n  content: string | undefined;\n  flipped: boolean;\n  solved: boolean;\n  matchingCardId: string | undefined;\n}\n\nexport default defineComponent({\n  name: 'MemoryViewer',\n  components: { MemoryViewerCard },\n  emits: ['updateAttempt'],\n  props: {\n    task: {\n      type: Object as PropType<MemoryTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      cards: [] as ViewerMemoryCard[],\n      firstFlippedCardId: undefined as string | undefined,\n      firstFlippedCardMatchingCardId: undefined as string | undefined,\n      amountOfFlips: 0 as number,\n\n      timer: 0, // Track elapsed time in seconds\n      timerStarted: false, // Flag to check if timer has started\n      timerInterval: null as number | null, // Store interval ID to control timer\n    };\n  },\n  methods: {\n    $gettext,\n\n    onClickCard(card: ViewerMemoryCard): void {\n      // do nothing if card is already open\n      if (card.flipped) return;\n\n      card.flipped = true;\n\n      // Start timer\n      if (!this.timerStarted) {\n        this.startTimer();\n      }\n\n      this.amountOfFlips++;\n\n      if (!this.firstFlippedCardId) {\n        // This is the first of two cards to be flipped around\n        // Reset all previous unsuccessful cardflips except the card we just flipped\n        this.resetAllUnsolvedCardsExcept(card.uuid);\n\n        this.firstFlippedCardId = card.uuid;\n        this.firstFlippedCardMatchingCardId = card.matchingCardId;\n      } else {\n        // We flipped the second card around, check if we got a pair\n        if (card.matchingCardId === this.firstFlippedCardMatchingCardId) {\n          // We found a pair!\n          // Set both cards' solved attribute to true\n          card.solved = true;\n          const firstCard = this.getCardById(this.firstFlippedCardId);\n          firstCard.solved = true;\n        }\n\n        this.firstFlippedCardId = undefined;\n        this.firstFlippedCardMatchingCardId = undefined;\n      }\n    },\n\n    startTimer() {\n      this.timerStarted = true;\n\n      // Start a timer that increments every second\n      this.timerInterval = setInterval(() => {\n        this.timer++;\n      }, 1000) as unknown as number;\n    },\n\n    stopTimer() {\n      // Stop the timer and clear the interval\n      if (this.timerInterval !== null) {\n        clearInterval(this.timerInterval);\n        this.timerInterval = null; // Reset after clearing\n      }\n\n      this.timerStarted = false;\n    },\n\n    resetAllUnsolvedCardsExcept(exceptionId: string): void {\n      for (const card of this.cards) {\n        if (!card.solved && card.uuid !== exceptionId) {\n          card.flipped = false;\n        }\n      }\n    },\n\n    onClickTryAgain(): void {\n      this.amountOfFlips = 0;\n      this.timer = 0;\n      this.firstFlippedCardId = undefined;\n      this.resetCards();\n      this.shuffleCards();\n    },\n\n    resetCards(): void {\n      // Set all cards' flipped and solved attribute to false\n      for (const card of this.cards) {\n        card.flipped = false;\n        card.solved = false;\n      }\n    },\n\n    shuffleCards(): void {\n      // Shuffle the cards\n      // https://stackoverflow.com/a/46545530\n      this.cards = this.cards\n        .map((card) => ({ card, sort: Math.random() }))\n        .sort((card1, card2) => card1.sort - card2.sort)\n        .map(({ card }) => card);\n    },\n\n    getCardById(cardId: string): ViewerMemoryCard {\n      const card = this.cards.find((card) => card.uuid === cardId);\n      if (!card) {\n        throw new Error('No card found with the given ID: ' + cardId);\n      }\n      return card;\n    },\n\n    createCard(\n      element: LernmoduleMultimediaElement,\n      matchingCardId: string\n    ): ViewerMemoryCard {\n      return {\n        uuid: element.uuid,\n        type: element.type,\n        file_id: element.type !== 'text' ? element.file_id : undefined,\n        altText: element.type !== 'text' ? element.altText : undefined,\n        content: element.type === 'text' ? element.content : undefined,\n        flipped: false,\n        solved: false,\n        matchingCardId,\n      };\n    },\n  },\n\n  computed: {\n    totalAmountOfPairs(): number {\n      return this.task.cards.length;\n    },\n\n    isPlayable(): boolean {\n      for (const card of this.task.cards) {\n        if (\n          (card.first.type === 'image' || card.first.type === 'audio') &&\n          card.first.file_id\n        ) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    amountOfPairsSolved(): number {\n      let amountOfCardsSolved = 0;\n      for (const card of this.cards) {\n        if (card.solved) amountOfCardsSolved++;\n      }\n      return amountOfCardsSolved / 2;\n    },\n\n    gameIsOver(): boolean {\n      return (\n        this.totalAmountOfPairs > 0 &&\n        this.amountOfPairsSolved === this.totalAmountOfPairs\n      );\n    },\n\n    showResults(): boolean {\n      return this.gameIsOver;\n    },\n\n    showRetryButton(): boolean {\n      return this.gameIsOver;\n    },\n\n    resultMessage(): string {\n      return this.task.strings.resultMessage;\n    },\n\n    gridTemplateColumns(): string {\n      if (this.task.squareLayout) {\n        const columns = Math.ceil(Math.sqrt(this.cards.length));\n        return `repeat(${columns}, 1fr)`;\n      } else {\n        return 'repeat(auto-fill, minmax(12em, 1fr))'; // Responsive behavior\n      }\n    },\n\n    gridTemplateRows(): string {\n      if (this.task.squareLayout) {\n        const rows = Math.ceil(\n          this.cards.length / Math.ceil(Math.sqrt(this.cards.length))\n        );\n        return `repeat(${rows}, 1fr)`;\n      } else {\n        return 'auto'; // For responsive layout, let the rows be created automatically\n      }\n    },\n  },\n  watch: {\n    task: {\n      handler() {\n        console.log('watcher for this.task');\n        this.firstFlippedCardId = undefined;\n        this.amountOfFlips = 0;\n\n        // Generate cards\n        this.cards = this.task.cards.flatMap((card) => {\n          if (!card.second) {\n            // Single card: create original and duplicate\n            const original = this.createCard(card.first, card.uuid);\n            const duplicate = this.createCard(\n              { ...card.first, uuid: v4() },\n              card.uuid\n            );\n            return [original, duplicate];\n          } else {\n            // Paired cards: create first and second\n            const firstCard = this.createCard(card.first, card.uuid);\n            const secondCard = this.createCard(card.second, card.uuid);\n            return [firstCard, secondCard];\n          }\n        });\n\n        // Shuffle the cards\n        this.shuffleCards();\n      },\n      immediate: true, // Ensure that the watcher is also called immediately when the component is first mounted\n    },\n    gameIsOver(newValue) {\n      if (newValue) {\n        this.stopTimer();\n      }\n    },\n  },\n});\n</script>\n\n<style scoped>\n.memory-grid {\n  display: grid;\n  grid-gap: 1.5em;\n  justify-items: center;\n}\n\n.memory-info-header {\n  font-weight: bold;\n}\n\n.result-message {\n  font-weight: bold;\n  font-size: 2em;\n  color: #1a73d9;\n}\n</style>\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '../assets/memoryCardBack.png'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6a6f67ea\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"memory-card-back\" }\nconst _hoisted_2 = [\"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n  const _component_lazy_image = _resolveComponent(\"lazy-image\")!\n  const _directive_disable_drag = _resolveDirective(\"disable-drag\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"button\", {\n    type: \"button\",\n    class: _normalizeClass([\"memory-card no-select\", { flipped: _ctx.card.flipped }])\n  }, [\n    _createElementVNode(\"span\", {\n      class: _normalizeClass([\"memory-card-front\", { 'solved-card': _ctx.card.solved }])\n    }, [\n      _createVNode(_component_MultimediaElement, { element: _ctx.card }, null, 8, [\"element\"])\n    ], 2),\n    _createElementVNode(\"span\", _hoisted_1, [\n      (_ctx.flipside)\n        ? (_openBlock(), _createBlock(_component_lazy_image, {\n            key: 0,\n            src: _ctx.fileIdToUrl(_ctx.flipside.file_id),\n            alt: _ctx.flipside.altText,\n            class: \"memory-card-back-image\"\n          }, null, 8, [\"src\", \"alt\"]))\n        : (_openBlock(), _createElementBlock(\"img\", {\n            key: 1,\n            src: _imports_0,\n            alt: _ctx.$gettext('Rckseite einer Memory Karte.'),\n            class: \"memory-card-back-image\"\n          }, null, 8, _hoisted_2))\n    ])\n  ], 2)), [\n    [_directive_disable_drag]\n  ])\n}","<template>\n  <button\n    type=\"button\"\n    class=\"memory-card no-select\"\n    :class=\"{ flipped: card.flipped }\"\n    v-disable-drag\n  >\n    <span class=\"memory-card-front\" :class=\"{ 'solved-card': card.solved }\">\n      <MultimediaElement :element=\"card\" />\n    </span>\n    <span class=\"memory-card-back\">\n      <lazy-image\n        v-if=\"flipside\"\n        :src=\"fileIdToUrl(flipside.file_id)\"\n        :alt=\"flipside.altText\"\n        class=\"memory-card-back-image\"\n      />\n      <img\n        v-else\n        src=\"../assets/memoryCardBack.png\"\n        :alt=\"$gettext('Rckseite einer Memory Karte.')\"\n        class=\"memory-card-back-image\"\n      />\n    </span>\n  </button>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { ViewerMemoryCard } from '@/components/MemoryViewer.vue';\nimport { fileIdToUrl } from '@/models/TaskDefinition';\nimport LazyImage from '@/components/LazyImage.vue';\nimport { $gettext } from '@/language/gettext';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\nimport { ImageFileElement } from '@/models/common';\n\nexport default defineComponent({\n  name: 'MemoryViewerCard',\n  components: { MultimediaElement, LazyImage },\n  props: {\n    card: {\n      type: Object as PropType<ViewerMemoryCard>,\n      required: true,\n    },\n    flipside: {\n      type: Object as PropType<ImageFileElement>,\n      required: false,\n    },\n  },\n  computed: {},\n  methods: { $gettext, fileIdToUrl },\n});\n</script>\n\n<style scoped>\nbutton {\n  all: unset; /* Reset browser styles for all buttons in this component */\n}\n\n.memory-card {\n  width: 11em;\n  height: 11em;\n\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n\n  padding: 0.5em;\n  margin: 0;\n\n  transform-style: preserve-3d;\n  perspective: 1000px;\n\n  transition: transform 0.48s ease-in-out, box-shadow 0.24s ease-in-out;\n}\n\n.flipped {\n  transform: rotate3d(0, 1, 0, 180deg);\n}\n\n.memory-card-front,\n.memory-card-back {\n  width: 11em;\n  height: 11em;\n\n  position: absolute;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  backface-visibility: hidden;\n  overflow: hidden;\n}\n\n.memory-card-front {\n  transform: rotateY(180deg); /* Start rotated, flipped with the back side */\n}\n\n.memory-card-back {\n  transform: rotateY(0deg); /* Back side is initially visible */\n}\n\n.memory-card-back-image {\n  height: 100%;\n  width: 100%;\n  object-fit: contain;\n\n  border-radius: 0.25em;\n}\n\n.memory-card:not(.flipped):hover {\n  cursor: grab;\n  border: 2px solid #7ba4d3;\n  box-shadow: 0 0 10px 0 #406ef3;\n}\n\n.solved-card {\n  animation: foundPairEffect 1s ease-in-out;\n  animation-fill-mode: forwards; /* Ensures final state persists */\n}\n\n@keyframes foundPairEffect {\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0.6;\n  }\n}\n</style>\n","import { render } from \"./MemoryViewerCard.vue?vue&type=template&id=6a6f67ea&scoped=true&ts=true\"\nimport script from \"./MemoryViewerCard.vue?vue&type=script&lang=ts\"\nexport * from \"./MemoryViewerCard.vue?vue&type=script&lang=ts\"\n\nimport \"./MemoryViewerCard.vue?vue&type=style&index=0&id=6a6f67ea&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6a6f67ea\"]])\n\nexport default __exports__","import { render } from \"./MemoryViewer.vue?vue&type=template&id=180b5606&scoped=true&ts=true\"\nimport script from \"./MemoryViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./MemoryViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./MemoryViewer.vue?vue&type=style&index=0&id=180b5606&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-180b5606\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveDirective as _resolveDirective, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-20c78112\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"multimedia-element\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"image-element-wrapper\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"image-element-placeholder\"\n}\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-element\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_LazyImage = _resolveComponent(\"LazyImage\")!\n  const _directive_disable_drag = _resolveDirective(\"disable-drag\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"span\", _hoisted_1, [\n    (_ctx.element.type === 'image')\n      ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, [\n          (_ctx.element.file_id)\n            ? (_openBlock(), _createBlock(_component_LazyImage, {\n                key: 0,\n                src: _ctx.fileIdToUrl(_ctx.element.file_id),\n                alt: _ctx.element.altText,\n                class: \"image-element\"\n              }, null, 8, [\"src\", \"alt\"]))\n            : (_openBlock(), _createElementBlock(\"span\", _hoisted_3))\n        ]))\n      : (_ctx.element.type === 'text')\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, [\n            _createElementVNode(\"span\", null, _toDisplayString(_ctx.element.content), 1)\n          ]))\n        : _createCommentVNode(\"\", true)\n  ])), [\n    [_directive_disable_drag]\n  ])\n}","<template>\n  <span class=\"multimedia-element\" v-disable-drag>\n    <span v-if=\"element.type === 'image'\" class=\"image-element-wrapper\">\n      <LazyImage\n        v-if=\"element.file_id\"\n        :src=\"fileIdToUrl(element.file_id)\"\n        :alt=\"element.altText\"\n        class=\"image-element\"\n      />\n      <span v-else class=\"image-element-placeholder\" />\n    </span>\n    <span v-else-if=\"element.type === 'text'\" class=\"text-element\">\n      <span> {{ element.content }} </span>\n    </span>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport {\n  fileIdToUrl,\n  LernmoduleMultimediaElement,\n} from '@/models/TaskDefinition';\nimport LazyImage from '@/components/LazyImage.vue';\n\nexport default defineComponent({\n  name: 'MultimediaElement',\n  components: { LazyImage },\n  props: {\n    element: {\n      type: Object as PropType<LernmoduleMultimediaElement>,\n      required: true,\n    },\n  },\n  methods: { fileIdToUrl },\n});\n</script>\n\n<style scoped>\n.multimedia-element {\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.image-element {\n  width: 100%;\n  height: 100%;\n\n  border-radius: 0.25em;\n}\n\n.image-element-wrapper {\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: white;\n\n  box-shadow: inset 0 2px 74px 0 #cbd5de;\n  border-radius: 0.25em;\n}\n\n.image-element-placeholder {\n  width: 100%;\n  height: 100%;\n}\n\n.text-element {\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import { render } from \"./MultimediaElement.vue?vue&type=template&id=20c78112&scoped=true&ts=true\"\nimport script from \"./MultimediaElement.vue?vue&type=script&lang=ts\"\nexport * from \"./MultimediaElement.vue?vue&type=script&lang=ts\"\n\nimport \"./MultimediaElement.vue?vue&type=style&index=0&id=20c78112&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20c78112\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createBlock as _createBlock, normalizeStyle as _normalizeStyle, createVNode as _createVNode, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelText as _vModelText, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-70d5756a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = { class: \"pairing-editor\" }\nconst _hoisted_4 = { class: \"pairs-overview\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"selected-pair\"\n}\nconst _hoisted_6 = { class: \"remove-pair-button-container\" }\nconst _hoisted_7 = [\"textContent\"]\nconst _hoisted_8 = { class: \"collapsable collapsed\" }\nconst _hoisted_9 = { class: \"collapsable collapsed\" }\nconst _hoisted_10 = [\"disabled\"]\nconst _hoisted_11 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PairingEditorPair = _resolveComponent(\"PairingEditorPair\")!\n  const _component_PairingEditorCard = _resolveComponent(\"PairingEditorCard\")!\n  const _component_FeedbackEditor = _resolveComponent(\"FeedbackEditor\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", _hoisted_3, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Pairing')), 1),\n        _createElementVNode(\"div\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.modelTaskDefinition.pairs, (pair, index) => {\n            return (_openBlock(), _createBlock(_component_PairingEditorPair, {\n              key: pair.uuid,\n              class: _normalizeClass({\n              selected: index === _ctx.selectedPairIndex,\n            }),\n              pair: _ctx.modelTaskDefinition.pairs[index],\n              onClick: ($event: any) => (_ctx.onClickPair(index))\n            }, null, 8, [\"class\", \"pair\", \"onClick\"]))\n          }), 128)),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"add-pair-button\",\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClickAddPair())),\n            style: _normalizeStyle(_ctx.addPairButtonBackgroundImage)\n          }, null, 4)\n        ]),\n        (_ctx.selectedPair)\n          ? (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_5, [\n              _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Paar')), 1),\n              _createVNode(_component_PairingEditorCard, {\n                title: _ctx.$gettext('Karte 1'),\n                \"multimedia-element\": _ctx.selectedPair.draggableElement,\n                onElementChanged: _ctx.onChangeDraggableElement\n              }, null, 8, [\"title\", \"multimedia-element\", \"onElementChanged\"]),\n              _createVNode(_component_PairingEditorCard, {\n                title: _ctx.$gettext('Karte 2'),\n                \"multimedia-element\": _ctx.selectedPair.targetElement,\n                onElementChanged: _ctx.onChangeTargetElement\n              }, null, 8, [\"title\", \"multimedia-element\", \"onElementChanged\"]),\n              _createElementVNode(\"div\", _hoisted_6, [\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onClickDeletePair(_ctx.selectedPairIndex))),\n                  textContent: _toDisplayString(_ctx.$gettext('Paar lschen')),\n                  class: \"button trash remove-pair-button\"\n                }, null, 8, _hoisted_7)\n              ])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_8, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.modelTaskDefinition.retryAllowed) = $event)),\n            onChange: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.retryAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.modelTaskDefinition.showSolutionsAllowed) = $event)),\n            onChange: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.showSolutionsAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen anzeigen erlauben')), 1)\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_9, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Beschriftungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr berprfen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.modelTaskDefinition.strings.checkButton) = $event)),\n            onInput: _cache[7] || (_cache[7] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.checkButton'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.checkButton]\n          ])\n        ]),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.retryAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.modelTaskDefinition.strings.retryButton) = $event)),\n            onInput: _cache[9] || (_cache[9] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            disabled: !_ctx.modelTaskDefinition.retryAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_10), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.retryButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Lsungen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((_ctx.modelTaskDefinition.strings.solutionsButton) = $event)),\n            onInput: _cache[11] || (_cache[11] = ($event: any) => (\n              _ctx.updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            )),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_11), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.solutionsButton]\n          ])\n        ], 2)\n      ]),\n      _createVNode(_component_FeedbackEditor, {\n        feedback: _ctx.modelTaskDefinition.feedback,\n        \"result-message\": _ctx.modelTaskDefinition.strings.resultMessage,\n        \"onUpdate:feedback\": _ctx.updateFeedback,\n        \"onUpdate:resultMessage\": _ctx.updateResultMessage\n      }, null, 8, [\"feedback\", \"result-message\", \"onUpdate:feedback\", \"onUpdate:resultMessage\"])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset class=\"pairing-editor\">\n        <legend>{{ $gettext('Pairing') }}</legend>\n\n        <div class=\"pairs-overview\">\n          <PairingEditorPair\n            v-for=\"(pair, index) in modelTaskDefinition.pairs\"\n            :key=\"pair.uuid\"\n            :class=\"{\n              selected: index === selectedPairIndex,\n            }\"\n            :pair=\"modelTaskDefinition.pairs[index]\"\n            @click=\"onClickPair(index)\"\n          />\n\n          <button\n            type=\"button\"\n            class=\"add-pair-button\"\n            @click=\"onClickAddPair()\"\n            :style=\"addPairButtonBackgroundImage\"\n          />\n        </div>\n\n        <fieldset v-if=\"selectedPair\" class=\"selected-pair\">\n          <legend>{{ $gettext('Paar') }}</legend>\n\n          <PairingEditorCard\n            :title=\"$gettext('Karte 1')\"\n            :multimedia-element=\"selectedPair.draggableElement\"\n            @element-changed=\"onChangeDraggableElement\"\n          />\n\n          <PairingEditorCard\n            :title=\"$gettext('Karte 2')\"\n            :multimedia-element=\"selectedPair.targetElement\"\n            @element-changed=\"onChangeTargetElement\"\n          />\n\n          <div class=\"remove-pair-button-container\">\n            <button\n              type=\"button\"\n              @click=\"onClickDeletePair(selectedPairIndex)\"\n              v-text=\"$gettext('Paar lschen')\"\n              class=\"button trash remove-pair-button\"\n            />\n          </div>\n        </fieldset>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.retryAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrere Versuche erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.showSolutionsAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lsungen anzeigen erlauben') }}\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label>\n          {{ $gettext('Text fr berprfen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.checkButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.checkButton')\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.retryAllowed }\"\n        >\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            :disabled=\"!modelTaskDefinition.retryAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          {{ $gettext('Text fr Lsungen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.solutionsButton\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            \"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <FeedbackEditor\n        :feedback=\"modelTaskDefinition.feedback\"\n        :result-message=\"modelTaskDefinition.strings.resultMessage\"\n        @update:feedback=\"updateFeedback\"\n        @update:result-message=\"updateResultMessage\"\n      />\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport {\n  fileIdToUrl,\n  LernmoduleMultimediaElement,\n  Pair,\n  PairingTask,\n} from '@/models/TaskDefinition';\nimport { Feedback } from '@/models/common';\nimport { $gettext } from '@/language/gettext';\nimport produce from 'immer';\nimport { v4 } from 'uuid';\nimport PairingEditorPair from '@/components/PairingEditorPair.vue';\nimport PairingEditorCard from '@/components/PairingEditorCard.vue';\nimport FeedbackEditor from '@/components/FeedbackEditor.vue';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'PairingEditor',\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  components: {\n    PairingEditorPair,\n    PairingEditorCard,\n    FeedbackEditor,\n  },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<PairingTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      modelTaskDefinition: cloneDeep(this.taskDefinition),\n      selectedPairIndex: -1,\n    };\n  },\n  watch: {\n    // Synchronize state taskDefinition -> modelTaskDefinition.\n    taskDefinition: {\n      immediate: true,\n      handler: function (): void {\n        this.modelTaskDefinition = cloneDeep(this.taskDefinition);\n      },\n    },\n  },\n  beforeMount(): void {\n    if (this.taskDefinition.pairs.length > 0) {\n      this.selectedPairIndex = 0;\n    }\n  },\n  methods: {\n    fileIdToUrl,\n\n    $gettext,\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n\n    updateTaskDefinition(undoBatch?: unknown) {\n      // Synchronize state modelTaskDefinition -> taskDefinition.\n      this.taskEditor!.performEdit({\n        newTaskDefinition: cloneDeep(this.modelTaskDefinition),\n        undoBatch: undoBatch ?? {},\n      });\n    },\n\n    onClickPair(index: number) {\n      this.selectedPairIndex = index;\n    },\n\n    onClickAddPair() {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.pairs.push({\n          uuid: v4(),\n          draggableElement: {\n            uuid: v4(),\n            type: 'image',\n            file_id: '',\n            altText: '',\n          },\n          targetElement: {\n            uuid: v4(),\n            type: 'image',\n            file_id: '',\n            altText: '',\n          },\n        });\n      });\n\n      this.updateTaskDefinition();\n\n      // Select the newly inserted card\n      this.selectedPairIndex = this.modelTaskDefinition.pairs.length - 1;\n    },\n\n    onClickDeletePair(index: number) {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.pairs.splice(index, 1);\n      });\n\n      this.updateTaskDefinition();\n\n      // Adjust the selection index so the selected card doesn't unexpectedly change\n      if (this.modelTaskDefinition.pairs.length === 0) {\n        this.selectedPairIndex = -1;\n      } else if (index <= this.selectedPairIndex) {\n        this.selectedPairIndex = Math.max(0, this.selectedPairIndex - 1);\n      }\n    },\n\n    onChangeDraggableElement(payload: {\n      updatedElement: LernmoduleMultimediaElement;\n      undoBatch?: unknown;\n    }): void {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.pairs[this.selectedPairIndex].draggableElement =\n          payload.updatedElement;\n      });\n\n      this.updateTaskDefinition(payload.undoBatch);\n    },\n\n    onChangeTargetElement(payload: {\n      updatedElement: LernmoduleMultimediaElement;\n      undoBatch?: unknown;\n    }): void {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.pairs[this.selectedPairIndex].targetElement =\n          payload.updatedElement;\n      });\n\n      this.updateTaskDefinition(payload.undoBatch);\n    },\n\n    updateFeedback(updatedFeedback: Feedback[]) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: PairingTask) => {\n            taskDraft.feedback = updatedFeedback;\n          }\n        ),\n        undoBatch: 'taskDefinition.feedback',\n      });\n    },\n\n    updateResultMessage(updatedResultMessage: string) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: PairingTask) => {\n            taskDraft.strings.resultMessage = updatedResultMessage;\n          }\n        ),\n        undoBatch: 'taskDefinition.strings.resultMessage',\n      });\n    },\n  },\n  computed: {\n    debug: () => window.STUDIP.LernmoduleVueJS.LERNMODULE_DEBUG,\n\n    selectedPair(): Pair | undefined {\n      return this.modelTaskDefinition.pairs[this.selectedPairIndex];\n    },\n\n    addPairButtonBackgroundImage() {\n      return {\n        backgroundImage: `url(${this.urlForIcon('add')})`,\n      };\n    },\n  },\n});\n</script>\n\n<style scoped>\n.pairing-editor {\n  display: flex;\n  gap: 1em;\n}\n\n.pairs-overview {\n  flex-grow: 1;\n  /* Adapted from https://stackoverflow.com/a/46099319/7359454 */\n  display: grid;\n  /* 8em fixed width image + 2 x 0.25em padding + 2 x 0.125em border */\n  grid-template-columns: repeat(auto-fill, 8.75em);\n  /* 2 x 8em fixed height images + 0.25em gap + 2 x 0.25em padding + 2 x 0.125em border */\n  grid-auto-rows: 17em;\n  justify-content: space-around;\n  row-gap: 1em;\n  column-gap: 0.5em;\n}\n\n.selected-pair {\n  flex-grow: 0;\n  flex-shrink: 0;\n  width: 275px;\n}\n\n.add-pair-button {\n  aspect-ratio: 1;\n\n  border: solid 2px rgba(0, 0, 0, 0);\n  border-radius: 0.25em;\n\n  background-size: 40%;\n  background-repeat: no-repeat;\n  background-position: center;\n\n  cursor: pointer;\n}\n\n.add-pair-button:hover {\n  filter: brightness(0.9);\n}\n\n.remove-pair-button {\n  margin-right: 0;\n}\n\n.remove-pair-button-container {\n  text-align: end;\n  margin-top: 0.5em;\n}\n</style>\n","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c8b6ce94\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  type: \"button\",\n  class: \"pairing-editor-pair\"\n}\nconst _hoisted_2 = { class: \"pair-element\" }\nconst _hoisted_3 = { class: \"pair-element\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n\n  return (_openBlock(), _createElementBlock(\"button\", _hoisted_1, [\n    _createElementVNode(\"span\", _hoisted_2, [\n      (_ctx.pair.draggableElement)\n        ? (_openBlock(), _createBlock(_component_MultimediaElement, {\n            key: 0,\n            element: _ctx.pair.draggableElement\n          }, null, 8, [\"element\"]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"span\", _hoisted_3, [\n      (_ctx.pair.targetElement)\n        ? (_openBlock(), _createBlock(_component_MultimediaElement, {\n            key: 0,\n            element: _ctx.pair.targetElement\n          }, null, 8, [\"element\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","<template>\n  <button type=\"button\" class=\"pairing-editor-pair\">\n    <span class=\"pair-element\">\n      <MultimediaElement\n        v-if=\"pair.draggableElement\"\n        :element=\"pair.draggableElement\"\n      />\n    </span>\n    <span class=\"pair-element\">\n      <MultimediaElement\n        v-if=\"pair.targetElement\"\n        :element=\"pair.targetElement\"\n      />\n    </span>\n  </button>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { $gettext } from '@/language/gettext';\nimport { Pair } from '@/models/TaskDefinition';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\n\nexport default defineComponent({\n  name: 'PairingEditorPair',\n  components: { MultimediaElement },\n  props: {\n    pair: {\n      type: Object as PropType<Pair>,\n      required: true,\n    },\n  },\n  methods: {\n    $gettext,\n  },\n});\n</script>\n\n<style scoped>\n.pairing-editor-pair {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n\n  padding: 0.25em;\n  margin: 0;\n\n  overflow: hidden;\n\n  cursor: pointer;\n}\n\n.pairing-editor-pair.selected {\n  border: 2px solid #7ba4d3;\n  box-shadow: 0 0 10px 0 #406ef3;\n}\n\n.pairing-editor-pair:not(.disabled):not(.selected):hover {\n  border: 2px solid #7ba4d3;\n  box-shadow: 0 0 10px 0 #406ef3;\n}\n\n.pair-element {\n  width: 8em;\n  height: 8em;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  overflow: hidden;\n}\n</style>\n","import { render } from \"./PairingEditorPair.vue?vue&type=template&id=c8b6ce94&scoped=true&ts=true\"\nimport script from \"./PairingEditorPair.vue?vue&type=script&lang=ts\"\nexport * from \"./PairingEditorPair.vue?vue&type=script&lang=ts\"\n\nimport \"./PairingEditorPair.vue?vue&type=style&index=0&id=c8b6ce94&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c8b6ce94\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5df590ee\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"pairing-editor-card\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"multimedia-element-container\"\n}\nconst _hoisted_3 = { class: \"multimedia-element-wrapper\" }\nconst _hoisted_4 = [\"textContent\"]\nconst _hoisted_5 = {\n  key: 1,\n  class: \"pairing-file-upload\"\n}\nconst _hoisted_6 = { style: {\"align-self\":\"stretch\"} }\nconst _hoisted_7 = [\"value\"]\nconst _hoisted_8 = { key: 1 }\nconst _hoisted_9 = { style: {\"align-self\":\"stretch\"} }\nconst _hoisted_10 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n\n  return (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_1, [\n    _createElementVNode(\"legend\", null, _toDisplayString(_ctx.title), 1),\n    (_ctx.multimediaElement.type == 'image')\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          (_ctx.multimediaElement.file_id)\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                _createElementVNode(\"div\", _hoisted_3, [\n                  _createVNode(_component_MultimediaElement, { element: _ctx.multimediaElement }, null, 8, [\"element\"])\n                ]),\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClickRemoveImage())),\n                  textContent: _toDisplayString(_ctx.$gettext('Bild lschen')),\n                  class: \"button trash element-pair-settings-item\"\n                }, null, 8, _hoisted_4)\n              ], 64))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                _createVNode(_component_FileUpload, {\n                  onFileUploaded: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onUploadImage($event)))\n                })\n              ])),\n          _createElementVNode(\"label\", _hoisted_6, [\n            _createTextVNode(_toDisplayString(_ctx.$gettext('Bildbeschreibung')) + \" \", 1),\n            _createElementVNode(\"input\", {\n              type: \"text\",\n              value: _ctx.multimediaElement.altText,\n              onInput: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onInputAltText($event))),\n              class: \"element-pair-settings-item\"\n            }, null, 40, _hoisted_7)\n          ])\n        ]))\n      : (_ctx.multimediaElement.type == 'text')\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n            _createElementVNode(\"label\", _hoisted_9, [\n              _createTextVNode(_toDisplayString(_ctx.$gettext('Inhalt')) + \" \", 1),\n              _createElementVNode(\"textarea\", {\n                type: \"text\",\n                value: _ctx.multimediaElement.content,\n                onInput: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onInputContent($event))),\n                class: \"element-pair-settings-item\"\n              }, null, 40, _hoisted_10)\n            ])\n          ]))\n        : _createCommentVNode(\"\", true)\n  ]))\n}","<template>\n  <fieldset class=\"pairing-editor-card\">\n    <legend>{{ title }}</legend>\n\n    <!--    <label>\n      {{ $gettext('Typ') }}\n      <select :value=\"multimediaElement.type\" @change=\"onChangeType($event)\">\n        <option :value=\"'image'\">\n          {{ $gettext('Bild') }}\n        </option>\n        <option :value=\"'text'\">\n          {{ $gettext('Text') }}\n        </option>\n      </select>\n    </label>-->\n\n    <div\n      v-if=\"multimediaElement.type == 'image'\"\n      class=\"multimedia-element-container\"\n    >\n      <template v-if=\"multimediaElement.file_id\">\n        <div class=\"multimedia-element-wrapper\">\n          <MultimediaElement :element=\"multimediaElement\" />\n        </div>\n        <button\n          type=\"button\"\n          @click=\"onClickRemoveImage()\"\n          v-text=\"$gettext('Bild lschen')\"\n          class=\"button trash element-pair-settings-item\"\n        />\n      </template>\n      <div v-else class=\"pairing-file-upload\">\n        <FileUpload @file-uploaded=\"onUploadImage($event)\" />\n      </div>\n\n      <label style=\"align-self: stretch\">\n        {{ $gettext('Bildbeschreibung') }}\n        <input\n          type=\"text\"\n          :value=\"multimediaElement.altText\"\n          @input=\"onInputAltText($event)\"\n          class=\"element-pair-settings-item\"\n        />\n      </label>\n    </div>\n\n    <div v-else-if=\"multimediaElement.type == 'text'\">\n      <label style=\"align-self: stretch\">\n        {{ $gettext('Inhalt') }}\n        <textarea\n          type=\"text\"\n          :value=\"multimediaElement.content\"\n          @input=\"onInputContent($event)\"\n          class=\"element-pair-settings-item\"\n        />\n      </label>\n    </div>\n  </fieldset>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport {\n  LernmoduleMultimediaElement,\n  MultimediaElementType,\n} from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { v4 } from 'uuid';\nimport { FileRef } from '@/routes/jsonApi';\nimport { ImageFileElement } from '@/models/common';\n\nexport default defineComponent({\n  name: 'PairingEditorCard',\n  components: { FileUpload, MultimediaElement },\n  props: {\n    title: {\n      type: String,\n      required: true,\n    },\n    multimediaElement: {\n      type: Object as PropType<LernmoduleMultimediaElement>,\n      required: true,\n    },\n  },\n  emits: {\n    elementChanged(payload: {\n      updatedElement: LernmoduleMultimediaElement;\n      undoBatch?: unknown;\n    }) {\n      return true;\n    },\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    $gettext,\n    createNewLernmoduleMultimediaElement(\n      type: MultimediaElementType\n    ): LernmoduleMultimediaElement {\n      switch (type) {\n        case 'image':\n          return {\n            uuid: v4(),\n            type: type,\n            file_id: '',\n            altText: '',\n          };\n        case 'audio':\n          return {\n            uuid: v4(),\n            type: type,\n            file_id: '',\n            altText: '',\n          };\n        case 'text':\n          return {\n            uuid: v4(),\n            type: type,\n            content: '',\n          };\n        default:\n          throw new Error(\n            $gettext('Ungltiges MultimediaElementType: ') + type\n          );\n      }\n    },\n    onChangeType(event: Event) {\n      const target = event.target as HTMLSelectElement;\n      const selectedType = target.value as MultimediaElementType;\n      this.$emit('elementChanged', {\n        updatedElement: this.createNewLernmoduleMultimediaElement(selectedType),\n      });\n    },\n    onClickRemoveImage() {\n      this.$emit('elementChanged', {\n        updatedElement: {\n          ...(this.multimediaElement as ImageFileElement),\n          file_id: '',\n        },\n      });\n    },\n    onUploadImage(file: FileRef): void {\n      const updatedElement = { ...this.multimediaElement, file_id: file.id };\n      this.$emit('elementChanged', { updatedElement });\n    },\n    onInputAltText(event: Event) {\n      const target = event.target as HTMLInputElement;\n      const newAltText = target.value;\n      const updatedElement = { ...this.multimediaElement, altText: newAltText };\n      this.$emit('elementChanged', {\n        updatedElement,\n        undoBatch: { field: 'altText', uuid: this.multimediaElement.uuid },\n      });\n    },\n    onInputContent(event: Event) {\n      const target = event.target as HTMLInputElement;\n      const newContent = target.value;\n      const updatedElement = { ...this.multimediaElement, content: newContent };\n      this.$emit('elementChanged', {\n        updatedElement,\n        undoBatch: { field: 'content', uuid: this.multimediaElement.uuid },\n      });\n    },\n  },\n  computed: {},\n});\n</script>\n\n<style scoped>\n.pairing-editor-card {\n  flex: 1 1 auto;\n}\n\n.multimedia-element-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 0.5em;\n}\n\n.multimedia-element-wrapper {\n  width: 8em;\n  height: 8em;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n\n  padding: 0.5em;\n  margin: 0;\n\n  overflow: hidden;\n}\n\n.element-pair-settings-item {\n  /* top | right | bottom | left */\n  margin: 0.25em 0 0 0;\n}\n\n.pairing-file-upload,\n.pairing-file-upload input[type='file'] {\n  max-width: 100%;\n}\n</style>\n","import { render } from \"./PairingEditorCard.vue?vue&type=template&id=5df590ee&scoped=true&ts=true\"\nimport script from \"./PairingEditorCard.vue?vue&type=script&lang=ts\"\nexport * from \"./PairingEditorCard.vue?vue&type=script&lang=ts\"\n\nimport \"./PairingEditorCard.vue?vue&type=style&index=0&id=5df590ee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5df590ee\"]])\n\nexport default __exports__","import { render } from \"./PairingEditor.vue?vue&type=template&id=70d5756a&scoped=true&ts=true\"\nimport script from \"./PairingEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./PairingEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./PairingEditor.vue?vue&type=style&index=0&id=70d5756a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-70d5756a\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeClass as _normalizeClass, withModifiers as _withModifiers, createElementVNode as _createElementVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-96ded43e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"pairing-columns\" }\nconst _hoisted_3 = [\"draggable\", \"onDragstart\", \"onClick\"]\nconst _hoisted_4 = { class: \"targetElementsColumn\" }\nconst _hoisted_5 = { class: \"feedback-and-button-container\" }\nconst _hoisted_6 = { class: \"button-panel\" }\nconst _hoisted_7 = [\"textContent\"]\nconst _hoisted_8 = [\"textContent\"]\nconst _hoisted_9 = [\"textContent\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n  const _component_PairingViewerTargetElement = _resolveComponent(\"PairingViewerTargetElement\")!\n  const _component_FeedbackElement = _resolveComponent(\"FeedbackElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", {\n        class: \"draggableElementsColumn\",\n        draggable: \"false\",\n        onDragover: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"prevent\"])),\n        onDragenter: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"prevent\"])),\n        onDrop: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onDropOnInteractiveElements($event)))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.draggableElements, (draggableElementId) => {\n          return (_openBlock(), _createElementBlock(\"button\", {\n            type: \"button\",\n            key: draggableElementId,\n            draggable: \n            !_ctx.isDraggableElementUsed(draggableElementId) && !_ctx.showResults\n          ,\n            onDragstart: ($event: any) => (_ctx.startDragElement($event, draggableElementId)),\n            onDragend: _cache[0] || (_cache[0] = ($event: any) => (_ctx.endDragElement())),\n            onClick: ($event: any) => (_ctx.onClickDraggableElement(draggableElementId)),\n            class: _normalizeClass([\"draggableElement\", {\n            disabled:\n              _ctx.isDraggableElementUsed(draggableElementId) ||\n              _ctx.draggedElementId === draggableElementId,\n            immovable: _ctx.showResults,\n            selected: _ctx.elementIdInteractedWith === draggableElementId,\n          }])\n          }, [\n            _createVNode(_component_MultimediaElement, {\n              element: _ctx.getElementById(draggableElementId),\n              ref_for: true,\n              ref: \"draggableImages\"\n            }, null, 8, [\"element\"])\n          ], 42, _hoisted_3))\n        }), 128))\n      ], 32),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.task.pairs, (pair) => {\n          return (_openBlock(), _createBlock(_component_PairingViewerTargetElement, {\n            class: _normalizeClass({\n            outlined:\n              !_ctx.elementsDraggedOntoTargets.hasOwnProperty(\n                pair.targetElement.uuid\n              ) &&\n              (_ctx.draggedElementId || _ctx.elementIdInteractedWith),\n          }),\n            \"draggable-image\": \n            _ctx.getElementDraggedOntoTarget(pair.targetElement.uuid)\n          ,\n            \"target-image\": _ctx.getElementById(pair.targetElement.uuid),\n            isCorrect: _ctx.isAnswerCorrect(pair.targetElement.uuid),\n            showResult: _ctx.showResults,\n            key: pair.uuid,\n            onDrop: ($event: any) => (_ctx.onDropOnTargetElement($event, pair.targetElement.uuid)),\n            onDragstart: ($event: any) => (_ctx.startDragTargetElement($event, pair.targetElement.uuid)),\n            onDragend: _cache[4] || (_cache[4] = ($event: any) => (_ctx.endDragTargetElement())),\n            onDragover: _cache[5] || (_cache[5] = _withModifiers(() => {}, [\"prevent\"])),\n            onDragenter: _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"prevent\"])),\n            onClick: ($event: any) => (_ctx.onClickTargetElement(pair.targetElement.uuid))\n          }, null, 8, [\"class\", \"draggable-image\", \"target-image\", \"isCorrect\", \"showResult\", \"onDrop\", \"onDragstart\", \"onClick\"]))\n        }), 128))\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      (_ctx.showResults)\n        ? (_openBlock(), _createBlock(_component_FeedbackElement, {\n            key: 0,\n            achievedPoints: _ctx.correctAnswers,\n            maxPoints: _ctx.maxPoints,\n            resultMessage: _ctx.resultMessage,\n            feedback: _ctx.task.feedback\n          }, null, 8, [\"achievedPoints\", \"maxPoints\", \"resultMessage\", \"feedback\"]))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_ctx.showCheckButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              textContent: _toDisplayString(_ctx.task.strings.checkButton),\n              onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.onClickCheck())),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_7))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showSolutionsButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 1,\n              textContent: _toDisplayString(_ctx.task.strings.solutionsButton),\n              onClick: _cache[8] || (_cache[8] = ($event: any) => (_ctx.onClickShowSolution())),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_8))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showRetryButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 2,\n              textContent: _toDisplayString(_ctx.task.strings.retryButton),\n              onClick: _cache[9] || (_cache[9] = ($event: any) => (_ctx.onClickTryAgain())),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_9))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <div class=\"pairing-columns\">\n      <div\n        class=\"draggableElementsColumn\"\n        draggable=\"false\"\n        @dragover.prevent\n        @dragenter.prevent\n        @drop=\"onDropOnInteractiveElements($event)\"\n      >\n        <button\n          type=\"button\"\n          v-for=\"draggableElementId in draggableElements\"\n          :key=\"draggableElementId\"\n          :draggable=\"\n            !isDraggableElementUsed(draggableElementId) && !showResults\n          \"\n          @dragstart=\"startDragElement($event, draggableElementId)\"\n          @dragend=\"endDragElement()\"\n          @click=\"onClickDraggableElement(draggableElementId)\"\n          class=\"draggableElement\"\n          :class=\"{\n            disabled:\n              isDraggableElementUsed(draggableElementId) ||\n              draggedElementId === draggableElementId,\n            immovable: showResults,\n            selected: elementIdInteractedWith === draggableElementId,\n          }\"\n        >\n          <MultimediaElement\n            :element=\"getElementById(draggableElementId)\"\n            ref=\"draggableImages\"\n          />\n        </button>\n      </div>\n\n      <div class=\"targetElementsColumn\">\n        <PairingViewerTargetElement\n          v-for=\"pair in task.pairs\"\n          :class=\"{\n            outlined:\n              !elementsDraggedOntoTargets.hasOwnProperty(\n                pair.targetElement.uuid\n              ) &&\n              (draggedElementId || elementIdInteractedWith),\n          }\"\n          :draggable-image=\"\n            getElementDraggedOntoTarget(pair.targetElement.uuid)\n          \"\n          :target-image=\"getElementById(pair.targetElement.uuid)\"\n          :isCorrect=\"isAnswerCorrect(pair.targetElement.uuid)\"\n          :showResult=\"showResults\"\n          :key=\"pair.uuid\"\n          @drop=\"onDropOnTargetElement($event, pair.targetElement.uuid)\"\n          @dragstart=\"startDragTargetElement($event, pair.targetElement.uuid)\"\n          @dragend=\"endDragTargetElement()\"\n          @dragover.prevent\n          @dragenter.prevent\n          @click=\"onClickTargetElement(pair.targetElement.uuid)\"\n        />\n      </div>\n    </div>\n\n    <div class=\"feedback-and-button-container\">\n      <FeedbackElement\n        v-if=\"showResults\"\n        :achievedPoints=\"correctAnswers\"\n        :maxPoints=\"maxPoints\"\n        :resultMessage=\"resultMessage\"\n        :feedback=\"task.feedback\"\n      />\n\n      <div class=\"button-panel\">\n        <button\n          v-if=\"showCheckButton\"\n          v-text=\"task.strings.checkButton\"\n          @click=\"onClickCheck()\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showSolutionsButton\"\n          v-text=\"task.strings.solutionsButton\"\n          @click=\"onClickShowSolution()\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showRetryButton\"\n          v-text=\"task.strings.retryButton\"\n          @click=\"onClickTryAgain()\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport {\n  fileIdToUrl,\n  LernmoduleMultimediaElement,\n  PairingTask,\n} from '@/models/TaskDefinition';\nimport PairingViewerTargetElement from '@/components/PairingViewerTargetElement.vue';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\n\ntype Uuid = string;\n\nexport default defineComponent({\n  name: 'PairingViewer',\n  components: {\n    MultimediaElement,\n    PairingViewerTargetElement,\n    FeedbackElement,\n  },\n  props: {\n    task: {\n      type: Object as PropType<PairingTask>,\n      required: true,\n    },\n  },\n  emits: ['updateAttempt'],\n  data() {\n    return {\n      elementIdInteractedWith: undefined as Uuid | undefined,\n      draggedElementId: undefined as Uuid | undefined,\n      // We used Record instead of Set because I wasn't sure if sets are\n      // reactive in Vue 3.\n      // Record from target ID -> draggable element ID.\n      elementsDraggedOntoTargets: {} as Record<Uuid, Uuid>,\n      showResults: false as boolean,\n      showSolutions: false as boolean,\n      originalScore: null as number | null,\n    };\n  },\n  methods: {\n    fileIdToUrl,\n\n    isAnswerCorrect(targetId: Uuid): boolean {\n      const userInput = this.elementsDraggedOntoTargets[targetId];\n      if (!userInput) {\n        return false;\n      }\n      // A little bit awkward -- we have to find the pair to which the target\n      // belongs so that we can check whether the user's solution is right\n      // This method itself is therefore O(n), giving an O(n^2) if you check\n      // every user answer in a loop every time the user makes an input.\n      // But it should be fine, because even if there are 50 elements in a set\n      // (very unlikely), this comes out to 2500 comparisons, which should\n      // complete in under a millisecond.\n      const pair = this.task.pairs.find(\n        (pair) => pair.targetElement.uuid === targetId\n      );\n      if (!pair) {\n        throw new Error(\n          'could not find the pair to which the target id ' +\n            targetId +\n            ' belongs'\n        );\n      }\n      return pair.draggableElement.uuid === userInput;\n    },\n\n    getElementDraggedOntoTarget(\n      targetId: Uuid\n    ): LernmoduleMultimediaElement | undefined {\n      const draggedElementId = this.elementsDraggedOntoTargets[targetId];\n      if (draggedElementId) {\n        return this.getElementById(draggedElementId);\n      } else {\n        return undefined;\n      }\n    },\n\n    startDragElement(dragEvent: DragEvent, elementId: Uuid): void {\n      /**\n       * TODO #27: After creating MultimediaElement: Refactor drag-drop interactions.\n       * The HTML5 drag-drop is hard to use with our planned refactoring\n       * to create the component 'MultimediaElement'.\n       * Since for HTML5 drag-drop, we have to do some hacking to make the\n       * ghost image look correct, and this hacking is not very robust and\n       * will fail for text/audio type content.\n       * So instead of using HTML5 drag-drop (draggable=true, ondrag, ondrop), let's\n       * use pointer events (pointerdown, pointermove and pointerup) and pointer capture API.\n       * (See Gitlab for rest of comment...)\n       */\n      if (!this.isDraggableElementUsed(elementId)) {\n        console.log('Dragging element:', elementId);\n        this.elementIdInteractedWith = elementId;\n        this.draggedElementId = elementId;\n\n        dragEvent.dataTransfer!.dropEffect = 'move';\n        dragEvent.dataTransfer!.effectAllowed = 'move';\n      }\n    },\n\n    endDragElement(): void {\n      this.elementIdInteractedWith = undefined;\n      this.draggedElementId = undefined;\n    },\n\n    startDragTargetElement(dragEvent: DragEvent, targetElementId: Uuid): void {\n      dragEvent.dataTransfer!.dropEffect = 'move';\n      dragEvent.dataTransfer!.effectAllowed = 'move';\n      // Remember that the element has been dragged away from a target\n      // where it had been placed by the user\n      dragEvent.dataTransfer!.setData('targetId', targetElementId);\n\n      // Check if an element has been dragged onto the target already\n      const userDraggedElementId =\n        this.elementsDraggedOntoTargets[targetElementId];\n      if (userDraggedElementId) {\n        this.elementIdInteractedWith = userDraggedElementId;\n\n        console.log(\n          'Dragging element:',\n          this.elementIdInteractedWith,\n          'from target element',\n          targetElementId\n        );\n      }\n    },\n\n    endDragTargetElement() {\n      this.elementIdInteractedWith = undefined;\n      this.draggedElementId = undefined;\n    },\n\n    onDropOnTargetElement(event: DragEvent, targetElementId: Uuid): void {\n      if (!this.elementIdInteractedWith) {\n        return;\n      }\n\n      // If the element has been dragged away from another target, then it should\n      // be removed from that target when it is dropped onto this target.\n      const otherTargetId = event.dataTransfer?.getData('targetId');\n      if (otherTargetId) {\n        delete this.elementsDraggedOntoTargets[otherTargetId];\n      }\n      // Save the dragged element onto the target where it has been dropped\n      this.elementsDraggedOntoTargets[targetElementId] =\n        this.elementIdInteractedWith;\n\n      console.log(\n        'Dropped element:',\n        this.elementIdInteractedWith,\n        'on target:',\n        targetElementId\n      );\n      // Mark that the drag interaction is over.\n      this.elementIdInteractedWith = undefined;\n      this.draggedElementId = undefined;\n    },\n\n    getElementById(elementId: string): LernmoduleMultimediaElement {\n      const element = this.elementsById[elementId];\n      if (!element) {\n        throw new Error('No element found with the given ID: ' + elementId);\n      }\n      return element;\n    },\n\n    onClickTargetElement(targetElementId: Uuid): void {\n      console.log('Clicked on target element', targetElementId);\n\n      // Do nothing if we are displaying the results already\n      if (this.showResults) return;\n\n      // Remove the element, if any, that has been dragged by the user onto\n      // the target they have clicked.\n      const usedElementId = this.elementsDraggedOntoTargets[targetElementId];\n      if (usedElementId) {\n        delete this.elementsDraggedOntoTargets[targetElementId];\n      }\n      // Check if the user clicked a draggable element and wants to put it here\n      if (this.elementIdInteractedWith) {\n        this.elementsDraggedOntoTargets[targetElementId] =\n          this.elementIdInteractedWith;\n        this.elementIdInteractedWith = undefined;\n      }\n    },\n\n    // This has a complexity of O(n).  When it is called in our v-for to set\n    // the class of every draggable element, it makes it O(n^2).\n    // But that should be OK, because no one will put more than (say) 100\n    // elements in a single task, right?\n    isDraggableElementUsed(draggableElementId: Uuid): boolean {\n      return Object.values(this.elementsDraggedOntoTargets).includes(\n        draggableElementId\n      );\n    },\n\n    onClickDraggableElement(elementId: Uuid): void {\n      if (!this.isDraggableElementUsed(elementId) && !this.showResults) {\n        console.log('Clicked on element:', elementId);\n        this.elementIdInteractedWith = elementId;\n      }\n    },\n\n    onDropOnInteractiveElements(event: DragEvent): void {\n      if (!this.elementIdInteractedWith) {\n        return;\n      }\n\n      // If the element has been dragged away from a target, then it should\n      // be removed from that target when it is dropped here.\n      const otherTargetId = event.dataTransfer?.getData('targetId');\n      if (otherTargetId) {\n        delete this.elementsDraggedOntoTargets[otherTargetId];\n      }\n\n      console.log('Returned element:', this.elementIdInteractedWith);\n\n      // Mark that the interaction is over.\n      this.elementIdInteractedWith = undefined;\n    },\n\n    onClickCheck(): void {\n      this.showResults = true;\n      this.originalScore = this.correctAnswers;\n    },\n\n    onClickShowSolution(): void {\n      this.showSolutions = true;\n\n      // Fill elementsDraggedOntoTargets with the correct answers\n      this.task.pairs.forEach((pair) => {\n        this.elementsDraggedOntoTargets[pair.targetElement.uuid] =\n          pair.draggableElement.uuid;\n      });\n    },\n\n    onClickTryAgain(): void {\n      this.showResults = false;\n      this.showSolutions = false;\n      this.elementsDraggedOntoTargets = {};\n      this.originalScore = null;\n    },\n  },\n  computed: {\n    draggableElements(): Uuid[] {\n      // Shuffle the elements\n      // https://stackoverflow.com/a/46545530\n      return this.task.pairs\n        .map((pair) => ({ pair: pair, sort: Math.random() }))\n        .sort((pair1, pair2) => pair1.sort - pair2.sort)\n        .map(({ pair }) => pair.draggableElement.uuid);\n    },\n\n    elementsById(): Record<Uuid, LernmoduleMultimediaElement> {\n      const elementsById: Record<Uuid, LernmoduleMultimediaElement> = {};\n      for (const pair of this.task.pairs) {\n        elementsById[pair.draggableElement.uuid] = pair.draggableElement;\n        elementsById[pair.targetElement.uuid] = pair.targetElement;\n      }\n      return elementsById;\n    },\n\n    correctAnswers(): number {\n      // If solutions are shown, return the original score instead of recalculating\n      if (this.showSolutions && this.originalScore !== null) {\n        return this.originalScore;\n      }\n\n      let correctAnswers = 0;\n      for (const pair of this.task.pairs) {\n        if (this.isAnswerCorrect(pair.targetElement.uuid)) correctAnswers++;\n      }\n      return correctAnswers;\n    },\n\n    maxPoints(): number {\n      return this.task.pairs.length;\n    },\n\n    resultMessage(): string {\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.correctAnswers.toString()\n      );\n\n      resultMessage = resultMessage.replace(\n        ':total',\n        this.maxPoints.toString()\n      );\n\n      return resultMessage;\n    },\n\n    showCheckButton(): boolean {\n      return !this.showResults;\n    },\n\n    showRetryButton(): boolean {\n      return (\n        this.task.retryAllowed && this.showResults && !this.allAnswersAreCorrect\n      );\n    },\n\n    showSolutionsButton(): boolean {\n      return (\n        this.task.showSolutionsAllowed &&\n        this.showResults &&\n        !this.showSolutions &&\n        !this.allAnswersAreCorrect\n      );\n    },\n\n    allAnswersAreCorrect(): boolean {\n      return this.correctAnswers === this.maxPoints;\n    },\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n.pairing-columns {\n  display: flex;\n  flex-direction: row;\n}\n\n.draggableElementsColumn {\n  @extend .pairing-elements-grid;\n  flex-grow: 1;\n  user-select: none;\n  margin: 0.5em;\n}\n\n.targetElementsColumn {\n  @extend .pairing-elements-grid;\n  flex-grow: 1;\n  user-select: none;\n  margin: 0.5em;\n  border-radius: 0.25em;\n  background-color: #eef1f4;\n}\n\n.pairing-elements-grid {\n  /* Adapted from https://stackoverflow.com/a/46099319/7359454 */\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(9em, auto));\n  grid-auto-rows: max-content;\n  justify-content: space-around;\n  row-gap: 1em;\n  column-gap: 0.5em;\n  padding: 0.5em;\n}\n\n.disabled {\n  cursor: default;\n  opacity: 25%;\n}\n\n.outlined {\n  cursor: pointer;\n  border: 2px dashed #dbe2e8;\n}\n\n.draggableElement {\n  display: flex;\n  margin: unset;\n  width: 8em;\n  height: 8em;\n  box-sizing: content-box;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n  padding: 0.5em;\n}\n\n.draggableElement.selected {\n  border: 2px solid #7ba4d3;\n  box-shadow: 0 0 10px 0 #406ef3;\n}\n\n.draggableElement:not(.disabled):not(.immovable):not(.selected):hover {\n  cursor: grab;\n  border: 2px solid #7ba4d3;\n  box-shadow: 0 0 10px 0 #406ef3;\n}\n</style>\n","import { resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-315196fa\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"image-container back\" }\nconst _hoisted_2 = [\"draggable\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n\n  return (_openBlock(), _createElementBlock(\"button\", {\n    type: \"button\",\n    class: _normalizeClass([\"grid-square\", {\n      'two-images': !!this.draggableImage,\n      'one-image': !this.draggableImage,\n      correct: this.isCorrect,\n      incorrect: !this.isCorrect,\n      showResult: this.showResult,\n    }])\n  }, [\n    (this.draggableImage)\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createVNode(_component_MultimediaElement, {\n              element: _ctx.targetImage,\n              class: _normalizeClass([\"image\", {\n            correct: this.isCorrect,\n            incorrect: !this.isCorrect,\n            showResult: this.showResult,\n          }])\n            }, null, 8, [\"element\", \"class\"])\n          ]),\n          _createElementVNode(\"div\", {\n            class: \"image-container front\",\n            draggable: !this.showResult\n          }, [\n            _createVNode(_component_MultimediaElement, {\n              element: _ctx.draggableImage,\n              class: _normalizeClass([\"image\", {\n            correct: this.isCorrect,\n            incorrect: !this.isCorrect,\n            showResult: this.showResult,\n          }])\n            }, null, 8, [\"element\", \"class\"])\n          ], 8, _hoisted_2)\n        ], 64))\n      : (_openBlock(), _createBlock(_component_MultimediaElement, {\n          key: 1,\n          element: _ctx.targetImage\n        }, null, 8, [\"element\"]))\n  ], 2))\n}","<template>\n  <button\n    type=\"button\"\n    class=\"grid-square\"\n    :class=\"{\n      'two-images': !!this.draggableImage,\n      'one-image': !this.draggableImage,\n      correct: this.isCorrect,\n      incorrect: !this.isCorrect,\n      showResult: this.showResult,\n    }\"\n  >\n    <template v-if=\"this.draggableImage\">\n      <div class=\"image-container back\">\n        <MultimediaElement\n          :element=\"targetImage\"\n          class=\"image\"\n          :class=\"{\n            correct: this.isCorrect,\n            incorrect: !this.isCorrect,\n            showResult: this.showResult,\n          }\"\n        />\n      </div>\n      <div class=\"image-container front\" :draggable=\"!this.showResult\">\n        <MultimediaElement\n          :element=\"draggableImage\"\n          class=\"image\"\n          :class=\"{\n            correct: this.isCorrect,\n            incorrect: !this.isCorrect,\n            showResult: this.showResult,\n          }\"\n        />\n      </div>\n    </template>\n    <MultimediaElement v-else :element=\"targetImage\" />\n  </button>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { fileIdToUrl } from '@/models/TaskDefinition';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\nimport { ImageFileElement } from '@/models/common';\n\nexport default defineComponent({\n  name: 'TargetImage',\n  components: { MultimediaElement },\n  props: {\n    draggableImage: {\n      type: Object as PropType<ImageFileElement>,\n      required: false,\n    },\n    targetImage: {\n      type: Object as PropType<ImageFileElement>,\n      required: true,\n    },\n    isCorrect: {\n      type: Boolean,\n      required: false,\n    },\n    showResult: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  computed: {},\n  methods: { fileIdToUrl },\n});\n</script>\n\n<style scoped>\n.grid-square {\n  display: flex;\n  margin: unset;\n  width: 8em;\n  height: 8em;\n  box-sizing: content-box;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n  padding: 0.5em;\n}\n\n.grid-square.one-image {\n  display: flex;\n  justify-content: center;\n}\n\n.grid-square.two-images {\n  position: relative;\n}\n\n.grid-square.two-images .image {\n  border-radius: 0.5em;\n  border: 2px solid #dbe2e8;\n  padding: 0.25em;\n  background: white;\n}\n\n.grid-square.two-images:not(:hover):not(.showResult) {\n  background: unset;\n  border: 2px solid transparent;\n}\n\n.grid-square.two-images:is(.correct):is(.showResult) {\n  border: 2px solid #64a877;\n  box-shadow: inset 0 0 120px #64a877;\n}\n\n.grid-square.two-images:is(.incorrect):is(.showResult) {\n  border: 2px solid #dd2e2e;\n  box-shadow: inset 0 0 120px #dd2e2e;\n}\n\n.grid-square.two-images:hover:not(.showResult) {\n  cursor: grab;\n  border: 2px solid #7ba4d3;\n  box-shadow: inset 0 0 72px #cbd5de, 0 0 10px 0 #406ef3;\n}\n\n.grid-square.two-images:hover .image:is(.showResult) {\n  cursor: default;\n}\n\n.image-container {\n  position: absolute;\n  width: 60%;\n  height: 60%;\n}\n\n.image-container.front {\n  top: 0.25em;\n  left: 0.25em;\n}\n\n.image-container.back {\n  bottom: 0.25em;\n  right: 0.25em;\n}\n\n.image {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  object-position: center;\n  box-sizing: border-box;\n}\n</style>\n","import { render } from \"./PairingViewerTargetElement.vue?vue&type=template&id=315196fa&scoped=true&ts=true\"\nimport script from \"./PairingViewerTargetElement.vue?vue&type=script&lang=ts\"\nexport * from \"./PairingViewerTargetElement.vue?vue&type=script&lang=ts\"\n\nimport \"./PairingViewerTargetElement.vue?vue&type=style&index=0&id=315196fa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-315196fa\"]])\n\nexport default __exports__","import { render } from \"./PairingViewer.vue?vue&type=template&id=96ded43e&scoped=true&ts=true\"\nimport script from \"./PairingViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./PairingViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./PairingViewer.vue?vue&type=style&index=0&id=96ded43e&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-96ded43e\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3555d82a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = { class: \"answer-title\" }\nconst _hoisted_4 = [\"title\", \"aria-label\", \"onClick\"]\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = { class: \"answer-row\" }\nconst _hoisted_7 = [\"checked\", \"onInput\"]\nconst _hoisted_8 = [\"onUpdate:modelValue\", \"onInput\"]\nconst _hoisted_9 = { class: \"collapsable collapsed feedback\" }\nconst _hoisted_10 = [\"onUpdate:modelValue\", \"onInput\"]\nconst _hoisted_11 = [\"onUpdate:modelValue\", \"onInput\"]\nconst _hoisted_12 = [\"onUpdate:modelValue\", \"onInput\"]\nconst _hoisted_13 = { class: \"collapsable collapsed\" }\nconst _hoisted_14 = { class: \"collapsable collapsed\" }\nconst _hoisted_15 = [\"disabled\"]\nconst _hoisted_16 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_studip_wysiwyg = _resolveComponent(\"studip-wysiwyg\")!\n  const _component_feedback_editor = _resolveComponent(\"feedback-editor\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Question')), 1),\n        _createElementVNode(\"label\", null, [\n          _createVNode(_component_studip_wysiwyg, {\n            modelValue: _ctx.taskDefinition.question,\n            \"onUpdate:modelValue\": _ctx.onEditQuestion,\n            \"force-soft-breaks\": \"\",\n            \"remove-wrapping-p-tag\": \"\",\n            \"disable-autoformat\": \"\"\n          }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.modelTaskDefinition.answers, (answer, i) => {\n          return (_openBlock(), _createElementBlock(\"fieldset\", {\n            key: answer.uuid,\n            class: \"answer collapsable collapsed\"\n          }, [\n            _createElementVNode(\"legend\", _hoisted_3, [\n              _createTextVNode(_toDisplayString(answer.text) + \" \", 1),\n              _createElementVNode(\"button\", {\n                title: _ctx.$gettext('Antwort lschen'),\n                \"aria-label\": _ctx.$gettext('Antwort lschen'),\n                onClick: ($event: any) => (_ctx.removeAnswer(i)),\n                type: \"button\",\n                class: \"button-with-icon\"\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.urlForIcon('trash'),\n                  alt: \"\"\n                }, null, 8, _hoisted_5)\n              ], 8, _hoisted_4)\n            ]),\n            _createElementVNode(\"div\", _hoisted_6, [\n              _createElementVNode(\"input\", {\n                checked: _ctx.taskDefinition.answers[i].correct,\n                onInput: ($event: any) => (_ctx.onInputAnswerCorrect($event, i)),\n                type: \"checkbox\"\n              }, null, 40, _hoisted_7),\n              _withDirectives(_createElementVNode(\"input\", {\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.modelTaskDefinition.answers[i].text) = $event),\n                onInput: ($event: any) => (_ctx.updateTaskDefinition(`taskDefinition.answers[${i}].text`)),\n                type: \"text\"\n              }, null, 40, _hoisted_8), [\n                [_vModelText, _ctx.modelTaskDefinition.answers[i].text]\n              ])\n            ]),\n            _createElementVNode(\"fieldset\", _hoisted_9, [\n              _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Hinweis und Feedback')), 1),\n              _createElementVNode(\"label\", null, [\n                _createElementVNode(\"span\", null, _toDisplayString(_ctx.$gettext('Hinweis:')), 1),\n                _withDirectives(_createElementVNode(\"input\", {\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.modelTaskDefinition.answers[i].strings.hint) = $event),\n                  onInput: ($event: any) => (\n                  _ctx.updateTaskDefinition(\n                    `taskDefinition.answers[${i}].strings.hint`\n                  )\n                ),\n                  type: \"text\"\n                }, null, 40, _hoisted_10), [\n                  [_vModelText, _ctx.modelTaskDefinition.answers[i].strings.hint]\n                ])\n              ]),\n              _createElementVNode(\"label\", null, [\n                _createElementVNode(\"span\", null, _toDisplayString(_ctx.$gettext('Feedback, wenn ausgewhlt:')), 1),\n                _withDirectives(_createElementVNode(\"input\", {\n                  \"onUpdate:modelValue\": ($event: any) => ((\n                  _ctx.modelTaskDefinition.answers[i].strings.feedbackSelected\n                ) = $event),\n                  onInput: ($event: any) => (\n                  _ctx.updateTaskDefinition(\n                    `taskDefinition.answers[${i}].strings.feedbackSelected`\n                  )\n                ),\n                  type: \"text\"\n                }, null, 40, _hoisted_11), [\n                  [_vModelText, \n                  _ctx.modelTaskDefinition.answers[i].strings.feedbackSelected\n                ]\n                ])\n              ]),\n              _createElementVNode(\"label\", null, [\n                _createElementVNode(\"span\", null, _toDisplayString(_ctx.$gettext('Feedback, wenn nicht ausgewhlt:')), 1),\n                _withDirectives(_createElementVNode(\"input\", {\n                  \"onUpdate:modelValue\": ($event: any) => ((\n                  _ctx.modelTaskDefinition.answers[i].strings.feedbackNotSelected\n                ) = $event),\n                  onInput: ($event: any) => (\n                  _ctx.updateTaskDefinition(\n                    `taskDefinition.answers[${i}].strings.feedbackNotSelected`\n                  )\n                ),\n                  type: \"text\"\n                }, null, 40, _hoisted_12), [\n                  [_vModelText, \n                  _ctx.modelTaskDefinition.answers[i].strings.feedbackNotSelected\n                ]\n                ])\n              ])\n            ])\n          ]))\n        }), 128)),\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addAnswer && _ctx.addAnswer(...args))),\n          type: \"button\",\n          class: \"button\"\n        }, _toDisplayString(_ctx.$gettext('Neue Antwort')), 1)\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_13, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.modelTaskDefinition.canAnswerMultiple) = $event)),\n            onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.canAnswerMultiple]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrfachauswahl erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.modelTaskDefinition.randomOrder) = $event)),\n            onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.randomOrder]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Antworten in zuflliger Reihenfolge anzeigen')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.modelTaskDefinition.retryAllowed) = $event)),\n            onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.retryAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.modelTaskDefinition.showSolutionsAllowed) = $event)),\n            onChange: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.showSolutionsAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen anzeigen erlauben')), 1)\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_14, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Beschriftungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr berprfen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.modelTaskDefinition.strings.checkButton) = $event)),\n            onInput: _cache[10] || (_cache[10] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.checkButton'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.checkButton]\n          ])\n        ]),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.retryAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((_ctx.modelTaskDefinition.strings.retryButton) = $event)),\n            onInput: _cache[12] || (_cache[12] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            disabled: !_ctx.modelTaskDefinition.retryAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_15), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.retryButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Lsungen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((_ctx.modelTaskDefinition.strings.solutionsButton) = $event)),\n            onInput: _cache[14] || (_cache[14] = ($event: any) => (\n              _ctx.updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            )),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_16), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.solutionsButton]\n          ])\n        ], 2)\n      ]),\n      _createVNode(_component_feedback_editor, {\n        feedback: _ctx.modelTaskDefinition.feedback,\n        \"result-message\": _ctx.modelTaskDefinition.strings.resultMessage,\n        \"onUpdate:feedback\": _ctx.updateFeedback,\n        \"onUpdate:resultMessage\": _ctx.updateResultMessage\n      }, null, 8, [\"feedback\", \"result-message\", \"onUpdate:feedback\", \"onUpdate:resultMessage\"])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset>\n        <legend>{{ $gettext('Question') }}</legend>\n\n        <label>\n          <studip-wysiwyg\n            :modelValue=\"taskDefinition.question\"\n            @update:modelValue=\"onEditQuestion\"\n            force-soft-breaks\n            remove-wrapping-p-tag\n            disable-autoformat\n          />\n        </label>\n\n        <fieldset\n          v-for=\"(answer, i) in modelTaskDefinition.answers\"\n          :key=\"answer.uuid\"\n          class=\"answer collapsable collapsed\"\n        >\n          <legend class=\"answer-title\">\n            {{ answer.text }}\n            <button\n              :title=\"$gettext('Antwort lschen')\"\n              :aria-label=\"$gettext('Antwort lschen')\"\n              @click=\"removeAnswer(i)\"\n              type=\"button\"\n              class=\"button-with-icon\"\n            >\n              <img :src=\"urlForIcon('trash')\" alt=\"\" />\n            </button>\n          </legend>\n\n          <div class=\"answer-row\">\n            <input\n              :checked=\"taskDefinition.answers[i].correct\"\n              @input=\"onInputAnswerCorrect($event, i)\"\n              type=\"checkbox\"\n            />\n\n            <input\n              v-model=\"modelTaskDefinition.answers[i].text\"\n              @input=\"updateTaskDefinition(`taskDefinition.answers[${i}].text`)\"\n              type=\"text\"\n            />\n          </div>\n\n          <fieldset class=\"collapsable collapsed feedback\">\n            <legend>{{ $gettext('Hinweis und Feedback') }}</legend>\n\n            <label>\n              <span>{{ $gettext('Hinweis:') }}</span>\n              <input\n                v-model=\"modelTaskDefinition.answers[i].strings.hint\"\n                @input=\"\n                  updateTaskDefinition(\n                    `taskDefinition.answers[${i}].strings.hint`\n                  )\n                \"\n                type=\"text\"\n              />\n            </label>\n\n            <label>\n              <span>{{ $gettext('Feedback, wenn ausgewhlt:') }}</span>\n              <input\n                v-model=\"\n                  modelTaskDefinition.answers[i].strings.feedbackSelected\n                \"\n                @input=\"\n                  updateTaskDefinition(\n                    `taskDefinition.answers[${i}].strings.feedbackSelected`\n                  )\n                \"\n                type=\"text\"\n              />\n            </label>\n\n            <label>\n              <span>{{ $gettext('Feedback, wenn nicht ausgewhlt:') }}</span>\n              <input\n                v-model=\"\n                  modelTaskDefinition.answers[i].strings.feedbackNotSelected\n                \"\n                @input=\"\n                  updateTaskDefinition(\n                    `taskDefinition.answers[${i}].strings.feedbackNotSelected`\n                  )\n                \"\n                type=\"text\"\n              />\n            </label>\n          </fieldset>\n        </fieldset>\n\n        <button @click=\"addAnswer\" type=\"button\" class=\"button\">\n          {{ $gettext('Neue Antwort') }}\n        </button>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.canAnswerMultiple\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrfachauswahl erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.randomOrder\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Antworten in zuflliger Reihenfolge anzeigen') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.retryAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrere Versuche erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.showSolutionsAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lsungen anzeigen erlauben') }}\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label>\n          {{ $gettext('Text fr berprfen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.checkButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.checkButton')\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.retryAllowed }\"\n        >\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            :disabled=\"!modelTaskDefinition.retryAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          {{ $gettext('Text fr Lsungen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.solutionsButton\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            \"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <feedback-editor\n        :feedback=\"modelTaskDefinition.feedback\"\n        :result-message=\"modelTaskDefinition.strings.resultMessage\"\n        @update:feedback=\"updateFeedback\"\n        @update:result-message=\"updateResultMessage\"\n      />\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport { QuestionTask } from '@/models/TaskDefinition';\nimport { Feedback } from '@/models/common';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\nimport { $gettext } from '@/language/gettext';\nimport produce from 'immer';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport FeedbackEditor from '@/components/FeedbackEditor.vue';\nimport { v4 } from 'uuid';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'QuestionEditor',\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  components: { FeedbackEditor, StudipWysiwyg },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<QuestionTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      // We use this as a helping means to allow us to use v-model for the\n      // inputs for the many different options that are used in this task.\n      // There are a lot of different strings to be typed in, checkboxes\n      // to be checked and so on. This saves us the effort of writing 11 more\n      // event handlers analogous to onInputAnswerCorrect.\n      // Instead, we just write a catchall function 'updateTaskDefinition'\n      // which we can call to copy modelTaskDefinition into taskDefinition.\n      modelTaskDefinition: cloneDeep(this.taskDefinition),\n    };\n  },\n  watch: {\n    // Synchronize state taskDefinition -> modelTaskDefinition.\n    taskDefinition: {\n      immediate: true,\n      handler: function (): void {\n        this.modelTaskDefinition = cloneDeep(this.taskDefinition);\n      },\n    },\n  },\n  methods: {\n    $gettext,\n    // An example of how you would write an event handler to replace v-model\n    // and completely avoid using modelTaskDefinition.\n    // I think it is OK for just one or two inputs, but if you have 10+ of them,\n    // then that would be a lot of boilerplate, and I prefer the solution\n    // using 'modelTaskDefinition', 'updateTaskDefinition' and the watcher\n    // to sync data in the other direction.\n    onInputAnswerCorrect(ev: InputEvent, answerIndex: number): void {\n      const value = (ev.target as HTMLInputElement).checked;\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.taskDefinition,\n          (draft: QuestionTask) => {\n            draft.answers[answerIndex].correct = value;\n          }\n        ),\n        undoBatch: {},\n      });\n    },\n    onEditQuestion(data: string): void {\n      // Copy new data from wysiwyg editor into task definition\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.taskDefinition,\n          (draft: QuestionTask) => {\n            draft.question = data;\n          }\n        ),\n        undoBatch: 'taskDefinition.question',\n      });\n      // Note this is not a perfect 'undoBatch' because normally you expect\n      // a sequence of edits in the text to produce a sequence of undo/redo\n      // steps... E.g. you type in one place, click to navigate to a different\n      // place in the text, then start typing there... You would expect\n      // this to produce two distinct steps in the undo/redo stack.\n      // But if the 'undoBatch' is simply 'taskDefinition.question', the\n      // undo/redo states will all be merged together into one step.\n      // TODO can we access CKEditor internal state to produce a more apt\n      // 'undoBatch'?\n    },\n\n    updateTaskDefinition(undoBatch?: unknown) {\n      // Synchronize state modelTaskDefinition -> taskDefinition.\n      this.taskEditor!.performEdit({\n        newTaskDefinition: cloneDeep(this.modelTaskDefinition),\n        undoBatch: undoBatch ?? {},\n      });\n    },\n\n    addAnswer(): void {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.taskDefinition,\n          (draft: QuestionTask) => {\n            draft.answers.push({\n              uuid: v4(),\n              text: this.$gettext('Neue Antwort'),\n              correct: true,\n              strings: {\n                hint: '',\n                feedbackSelected: '',\n                feedbackNotSelected: '',\n              },\n            });\n          }\n        ),\n      });\n    },\n\n    removeAnswer(answerToRemoveIndex: number): void {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.taskDefinition,\n          (draft: QuestionTask) => {\n            draft.answers.splice(answerToRemoveIndex, 1);\n          }\n        ),\n        undoBatch: {},\n      });\n    },\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n\n    updateFeedback(updatedFeedback: Feedback[], undoBatch: unknown) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.taskDefinition,\n          (taskDraft: QuestionTask) => {\n            taskDraft.feedback = updatedFeedback;\n          }\n        ),\n        undoBatch: undoBatch,\n      });\n    },\n\n    updateResultMessage(updatedResultMessage: string) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.taskDefinition,\n          (taskDraft: QuestionTask) => {\n            taskDraft.strings.resultMessage = updatedResultMessage;\n          }\n        ),\n        undoBatch: 'taskDefinition.strings.resultMessage',\n      });\n    },\n  },\n});\n</script>\n\n<style scoped>\n.answer {\n  max-width: 48em;\n}\n\n.answer-title {\n  position: relative;\n}\n\n.answer-row {\n  display: flex;\n  gap: 0.25em;\n  margin-bottom: 0.75em;\n}\n\n.button-with-icon {\n  /* Positioning */\n  position: absolute;\n  top: 50%;\n  right: 0.1em;\n  transform: translateY(-50%);\n  z-index: 10;\n\n  /* Children layout*/\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  /* Shape & size */\n  aspect-ratio: 1 / 1;\n  height: 100%;\n  width: auto;\n  border-radius: 50%;\n\n  /* Appearance */\n  border: 1px solid rgba(40, 73, 124, 0.1); /* Light translucent border for depth */\n}\n\n.button-with-icon:hover {\n  background: rgba(100%, 100%, 100%, 0.75); /* Lighter background on hover */\n}\n\n.feedback {\n  margin: 0.5em 0 0 0;\n}\n</style>\n","import { render } from \"./QuestionEditor.vue?vue&type=template&id=3555d82a&scoped=true&ts=true\"\nimport script from \"./QuestionEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./QuestionEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./QuestionEditor.vue?vue&type=style&index=0&id=3555d82a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3555d82a\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelRadio as _vModelRadio, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-46775c00\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = [\"innerHTML\"]\nconst _hoisted_3 = [\"value\", \"onUpdate:modelValue\", \"disabled\"]\nconst _hoisted_4 = [\"data-tooltip\"]\nconst _hoisted_5 = {\n  key: 0,\n  class: \"answer-feedback\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"answer-feedback\"\n}\nconst _hoisted_7 = [\"value\", \"disabled\"]\nconst _hoisted_8 = [\"data-tooltip\"]\nconst _hoisted_9 = {\n  key: 0,\n  class: \"answer-feedback\"\n}\nconst _hoisted_10 = {\n  key: 1,\n  class: \"answer-feedback\"\n}\nconst _hoisted_11 = { class: \"feedback-and-button-container\" }\nconst _hoisted_12 = { class: \"button-panel\" }\nconst _hoisted_13 = [\"textContent\"]\nconst _hoisted_14 = [\"textContent\"]\nconst _hoisted_15 = [\"textContent\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_FeedbackElement = _resolveComponent(\"FeedbackElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"div\", {\n        innerHTML: this.task.question\n      }, null, 8, _hoisted_2),\n      (_ctx.task.canAnswerMultiple)\n        ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(_ctx.answers, (answer) => {\n            return (_openBlock(), _createElementBlock(_Fragment, {\n              key: answer.uuid\n            }, [\n              _createElementVNode(\"label\", {\n                class: _normalizeClass(_ctx.classForAnswer(answer))\n              }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  class: \"answer-checkbox\",\n                  value: answer.text,\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.selectedAnswers[answer.text]) = $event),\n                  disabled: _ctx.isSubmitted\n                }, null, 8, _hoisted_3), [\n                  [_vModelCheckbox, _ctx.selectedAnswers[answer.text]]\n                ]),\n                _createTextVNode(\" \" + _toDisplayString(answer.text), 1),\n                (answer.strings.hint && !_ctx.isSubmitted)\n                  ? (_openBlock(), _createElementBlock(\"span\", {\n                      key: 0,\n                      class: \"tooltip tooltip-icon answer-tooltip\",\n                      \"data-tooltip\": answer.strings.hint\n                    }, null, 8, _hoisted_4))\n                  : _createCommentVNode(\"\", true)\n              ], 2),\n              (_ctx.isSubmitted)\n                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                    (\n                answer.strings.feedbackSelected && _ctx.selectedAnswers[answer.text]\n              )\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString(answer.strings.feedbackSelected), 1))\n                      : (\n                answer.strings.feedbackNotSelected &&\n                !_ctx.selectedAnswers[answer.text]\n              )\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(answer.strings.feedbackNotSelected), 1))\n                        : _createCommentVNode(\"\", true)\n                  ], 64))\n                : _createCommentVNode(\"\", true)\n            ], 64))\n          }), 128))\n        : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(_ctx.answers, (answer, i) => {\n            return (_openBlock(), _createElementBlock(_Fragment, { key: i }, [\n              _createElementVNode(\"label\", {\n                class: _normalizeClass(_ctx.classForAnswer(answer))\n              }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"radio\",\n                  class: \"answer-radiobutton\",\n                  value: answer,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.selectedAnswer) = $event)),\n                  disabled: _ctx.isSubmitted\n                }, null, 8, _hoisted_7), [\n                  [_vModelRadio, _ctx.selectedAnswer]\n                ]),\n                _createTextVNode(\" \" + _toDisplayString(answer.text) + \" \", 1),\n                (answer.strings.hint && !_ctx.isSubmitted)\n                  ? (_openBlock(), _createElementBlock(\"span\", {\n                      key: 0,\n                      class: \"tooltip tooltip-icon answer-tooltip\",\n                      \"data-tooltip\": answer.strings.hint\n                    }, null, 8, _hoisted_8))\n                  : _createCommentVNode(\"\", true)\n              ], 2),\n              (_ctx.isSubmitted)\n                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                    (answer.strings.feedbackSelected && _ctx.selectedAnswer == answer)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(answer.strings.feedbackSelected), 1))\n                      : (\n                answer.strings.feedbackNotSelected && _ctx.selectedAnswer !== answer\n              )\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _toDisplayString(answer.strings.feedbackNotSelected), 1))\n                        : _createCommentVNode(\"\", true)\n                  ], 64))\n                : _createCommentVNode(\"\", true)\n            ], 64))\n          }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_11, [\n      (_ctx.isSubmitted)\n        ? (_openBlock(), _createBlock(_component_FeedbackElement, {\n            key: 0,\n            \"achieved-points\": _ctx.points,\n            \"max-points\": _ctx.maxPoints,\n            \"result-message\": _ctx.resultMessage,\n            feedback: _ctx.task.feedback\n          }, null, 8, [\"achieved-points\", \"max-points\", \"result-message\", \"feedback\"]))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_12, [\n        (_ctx.showCheckButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              textContent: _toDisplayString(this.task.strings.checkButton),\n              onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheckButton && _ctx.onClickCheckButton(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_13))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showRetryButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 1,\n              textContent: _toDisplayString(this.task.strings.retryButton),\n              onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onClickRetryButton && _ctx.onClickRetryButton(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_14))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showSolutionsButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 2,\n              textContent: _toDisplayString(this.task.strings.solutionsButton),\n              onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onClickShowSolutionsButton && _ctx.onClickShowSolutionsButton(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_15))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <div>\n      <div v-html=\"this.task.question\" />\n      <template v-if=\"task.canAnswerMultiple\">\n        <template v-for=\"answer in answers\" :key=\"answer.uuid\">\n          <label :class=\"classForAnswer(answer)\">\n            <input\n              type=\"checkbox\"\n              class=\"answer-checkbox\"\n              :value=\"answer.text\"\n              v-model=\"selectedAnswers[answer.text]\"\n              :disabled=\"isSubmitted\"\n            />\n            {{ answer.text }}\n            <!--   Data-tooltip is a reference used by Stud.IP's javascript code based on jQuery.\n            See resources/assets/javascripts/bootstrap/tooltip.js.\n            This code has the limitation in 5.4 that it only reads the\n            content stored in this attribute a single time.  This is ultimately\n            due to the way it is accessed:\n            Line 13: let data = $(this).data();\n            This StackOverflow answer explains that the data attribute is only\n            read once and cached afterwards: https://stackoverflow.com/a/28176641\n            That is why the tooltip has not updated reactively in the viewer.\n            You will have to work around it somehow.\n            I found that deleting the whole 'hint' causes the hint icon to\n            disappear. Then, adding a new hint with different text inside\n            causes it to reappear with the updated text. -->\n            <span\n              v-if=\"answer.strings.hint && !isSubmitted\"\n              class=\"tooltip tooltip-icon answer-tooltip\"\n              :data-tooltip=\"answer.strings.hint\"\n            />\n          </label>\n\n          <template v-if=\"isSubmitted\">\n            <div\n              v-if=\"\n                answer.strings.feedbackSelected && selectedAnswers[answer.text]\n              \"\n              class=\"answer-feedback\"\n            >\n              {{ answer.strings.feedbackSelected }}\n            </div>\n\n            <div\n              v-else-if=\"\n                answer.strings.feedbackNotSelected &&\n                !selectedAnswers[answer.text]\n              \"\n              class=\"answer-feedback\"\n            >\n              {{ answer.strings.feedbackNotSelected }}\n            </div>\n          </template>\n        </template>\n      </template>\n\n      <template v-else>\n        <template v-for=\"(answer, i) in answers\" :key=\"i\">\n          <label :class=\"classForAnswer(answer)\">\n            <input\n              type=\"radio\"\n              class=\"answer-radiobutton\"\n              :value=\"answer\"\n              v-model=\"selectedAnswer\"\n              :disabled=\"isSubmitted\"\n            />\n            {{ answer.text }}\n            <span\n              v-if=\"answer.strings.hint && !isSubmitted\"\n              class=\"tooltip tooltip-icon answer-tooltip\"\n              :data-tooltip=\"answer.strings.hint\"\n            />\n          </label>\n\n          <template v-if=\"isSubmitted\">\n            <div\n              v-if=\"answer.strings.feedbackSelected && selectedAnswer == answer\"\n              class=\"answer-feedback\"\n            >\n              {{ answer.strings.feedbackSelected }}\n            </div>\n\n            <div\n              v-else-if=\"\n                answer.strings.feedbackNotSelected && selectedAnswer !== answer\n              \"\n              class=\"answer-feedback\"\n            >\n              {{ answer.strings.feedbackNotSelected }}\n            </div>\n          </template>\n        </template>\n      </template>\n    </div>\n\n    <div class=\"feedback-and-button-container\">\n      <FeedbackElement\n        v-if=\"isSubmitted\"\n        :achieved-points=\"points\"\n        :max-points=\"maxPoints\"\n        :result-message=\"resultMessage\"\n        :feedback=\"task.feedback\"\n      />\n\n      <div class=\"button-panel\">\n        <button\n          v-if=\"showCheckButton\"\n          v-text=\"this.task.strings.checkButton\"\n          @click=\"onClickCheckButton\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showRetryButton\"\n          v-text=\"this.task.strings.retryButton\"\n          @click=\"onClickRetryButton\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showSolutionsButton\"\n          v-text=\"this.task.strings.solutionsButton\"\n          @click=\"onClickShowSolutionsButton\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { QuestionAnswer, QuestionTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\n\nexport default defineComponent({\n  name: 'QuestionViewer',\n  props: {\n    task: {\n      type: Object as PropType<QuestionTask>,\n      required: true,\n    },\n  },\n  components: { FeedbackElement },\n  data() {\n    return {\n      selectedAnswers: {} as Record<string, boolean>,\n      selectedAnswer: {} as QuestionAnswer | undefined,\n      isSubmitted: false,\n      showSolutions: false,\n    };\n  },\n  methods: {\n    $gettext,\n\n    onClickCheckButton(): void {\n      this.isSubmitted = true;\n    },\n\n    onClickRetryButton(): void {\n      this.isSubmitted = false;\n      this.showSolutions = false;\n      this.selectedAnswers = {};\n      this.selectedAnswer = undefined;\n    },\n\n    onClickShowSolutionsButton(): void {\n      this.showSolutions = true;\n    },\n\n    classForAnswer(answer: QuestionAnswer): string {\n      if (this.showSolutions) {\n        if (answer.correct) return 'answer correct';\n      }\n\n      if (this.isSubmitted) {\n        if (this.task.canAnswerMultiple) {\n          if (this.selectedAnswers[answer.text]) {\n            if (answer.correct) {\n              return 'answer correct';\n            } else {\n              return 'answer incorrect';\n            }\n          } else {\n            return 'answer submitted';\n          }\n        } else {\n          if (this.selectedAnswer === answer) {\n            if (answer.correct) {\n              return 'answer correct';\n            } else {\n              return 'answer incorrect';\n            }\n          } else {\n            return 'answer submitted';\n          }\n        }\n      } else {\n        return 'answer unsubmitted';\n      }\n    },\n  },\n  computed: {\n    answers(): QuestionAnswer[] {\n      if (this.task.randomOrder) {\n        return this.task.answers\n          .map((answer) => ({ answer: answer, sort: Math.random() }))\n          .sort((answer1, answer2) => answer1.sort - answer2.sort)\n          .map(({ answer }) => answer);\n      } else {\n        return this.task.answers;\n      }\n    },\n\n    maxPoints(): number {\n      if (this.task.canAnswerMultiple) {\n        let maxPoints = 0;\n        this.task.answers.forEach((answer) => {\n          if (answer.correct) {\n            maxPoints++;\n          }\n        });\n        return maxPoints;\n      } else {\n        return 1;\n      }\n    },\n\n    points(): number {\n      if (this.task.canAnswerMultiple) {\n        let points = 0;\n\n        this.task.answers.forEach((answer) => {\n          if (this.selectedAnswers[answer.text]) {\n            if (answer.correct) {\n              points++;\n            } else {\n              points--;\n            }\n          }\n        });\n\n        // Cannot get less than 0 points\n        if (points < 0) points = 0;\n\n        return points;\n      } else {\n        return this.selectedAnswer && this.selectedAnswer.correct ? 1 : 0;\n      }\n    },\n\n    reachedMaxPoints(): boolean {\n      return this.points === this.maxPoints;\n    },\n\n    showCheckButton(): boolean {\n      return !this.isSubmitted;\n    },\n\n    showRetryButton(): boolean {\n      return (\n        this.task.retryAllowed && this.isSubmitted && !this.reachedMaxPoints\n      );\n    },\n\n    showSolutionsButton(): boolean {\n      return (\n        this.task.showSolutionsAllowed &&\n        this.isSubmitted &&\n        !this.showSolutions &&\n        !this.reachedMaxPoints\n      );\n    },\n\n    resultMessage(): string {\n      if (!this.task.strings.resultMessage) return '';\n\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.points.toString()\n      );\n\n      resultMessage = resultMessage.replace(\n        ':total',\n        this.maxPoints.toString()\n      );\n\n      return resultMessage;\n    },\n  },\n});\n</script>\n\n<style scoped>\n.answer {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  border-radius: 0.3em;\n  margin: 0.5em 0;\n\n  border: 0.1em solid transparent;\n  background: #ddd;\n}\n\n.unsubmitted {\n  cursor: pointer;\n}\n\n.unsubmitted:hover {\n  background: #ececec;\n}\n\n.submitted {\n  cursor: default;\n}\n\n.correct {\n  border: 0.1em solid #b6e4ce;\n  background: #b6e4ce;\n  color: #255c41;\n  box-shadow: 0 0.1em 0 #a2bdb0;\n}\n\n.incorrect {\n  border: 0.1em solid #fbd7d8;\n  background: #fbd7d8;\n  color: #b71c1c;\n  box-shadow: 0 0.1em 0 #deb8b8;\n}\n\n.answer-checkbox,\n.answer-radiobutton {\n  margin: 0 0.4em 0 0.4em;\n}\n\n.answer-tooltip {\n  display: flex;\n  margin-left: 0.25em;\n}\n\n.answer-feedback {\n  margin-left: 0.25em;\n  border-left: 6px solid rgba(10, 10, 10, 0.1) !important;\n  padding: 0.01em 16px;\n}\n</style>\n","import { render } from \"./QuestionViewer.vue?vue&type=template&id=46775c00&scoped=true&ts=true\"\nimport script from \"./QuestionViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./QuestionViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./QuestionViewer.vue?vue&type=style&index=0&id=46775c00&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-46775c00\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelText as _vModelText, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-79b0e546\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = { class: \"sequencing-editor\" }\nconst _hoisted_4 = { class: \"cards-list\" }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = [\"textContent\"]\nconst _hoisted_7 = [\"onClick\", \"aria-label\"]\nconst _hoisted_8 = [\"src\"]\nconst _hoisted_9 = {\n  key: 1,\n  class: \"no-card-selected-placeholder\"\n}\nconst _hoisted_10 = { class: \"collapsable collapsed\" }\nconst _hoisted_11 = { class: \"collapsable collapsed\" }\nconst _hoisted_12 = [\"disabled\"]\nconst _hoisted_13 = [\"disabled\"]\nconst _hoisted_14 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_SequencingEditorCard = _resolveComponent(\"SequencingEditorCard\")!\n  const _component_FeedbackEditor = _resolveComponent(\"FeedbackEditor\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", _hoisted_2, [\n      _createElementVNode(\"fieldset\", _hoisted_3, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Sequencing')), 1),\n        _createElementVNode(\"div\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.modelTaskDefinition.cards, (card, index) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: card.uuid,\n              class: _normalizeClass({\n              'cards-list-item': true,\n              'selected-card': index === _ctx.selectedCardIndex,\n            }),\n              onClick: ($event: any) => (_ctx.selectCard(index))\n            }, [\n              _createElementVNode(\"div\", {\n                textContent: _toDisplayString(_ctx.listEntryText(index, card)),\n                class: \"list-entry-text\"\n              }, null, 8, _hoisted_6),\n              _createElementVNode(\"button\", {\n                type: \"button\",\n                class: \"remove-card-button\",\n                onClick: _withModifiers(($event: any) => (_ctx.deleteCard(index)), [\"stop\"]),\n                \"aria-label\": _ctx.$gettext('Karte lschen')\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.urlForIcon('trash'),\n                  alt: \"\"\n                }, null, 8, _hoisted_8)\n              ], 8, _hoisted_7)\n            ], 10, _hoisted_5))\n          }), 128)),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"button add add-card-button\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addCard && _ctx.addCard(...args)))\n          }, _toDisplayString(_ctx.$gettext('Karte hinzufgen')), 1)\n        ]),\n        (_ctx.modelTaskDefinition.cards[_ctx.selectedCardIndex])\n          ? (_openBlock(), _createBlock(_component_SequencingEditorCard, {\n              key: 0,\n              card: _ctx.modelTaskDefinition.cards[_ctx.selectedCardIndex],\n              \"card-index\": _ctx.selectedCardIndex\n            }, null, 8, [\"card\", \"card-index\"]))\n          : (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_9, [\n              _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Keine Karte ausgewhlt')), 1)\n            ]))\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_10, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.modelTaskDefinition.retryAllowed) = $event)),\n            onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.retryAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.modelTaskDefinition.resumeAllowed) = $event)),\n            onChange: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.resumeAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Fortsetzen des aktuellen Spielstands erlauben')), 1)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.modelTaskDefinition.showSolutionsAllowed) = $event)),\n            onChange: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.updateTaskDefinition && _ctx.updateTaskDefinition(...args))),\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, _ctx.modelTaskDefinition.showSolutionsAllowed]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen anzeigen erlauben')), 1)\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_11, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Beschriftungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr berprfen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.modelTaskDefinition.strings.checkButton) = $event)),\n            onInput: _cache[8] || (_cache[8] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.checkButton'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.checkButton]\n          ])\n        ]),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.retryAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.modelTaskDefinition.strings.retryButton) = $event)),\n            onInput: _cache[10] || (_cache[10] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            disabled: !_ctx.modelTaskDefinition.retryAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_12), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.retryButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({ 'setting-disabled': !_ctx.modelTaskDefinition.resumeAllowed })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Fortsetzen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((_ctx.modelTaskDefinition.strings.resumeButton) = $event)),\n            onInput: _cache[12] || (_cache[12] = ($event: any) => (_ctx.updateTaskDefinition('taskDefinition.strings.resumeButton'))),\n            disabled: !_ctx.modelTaskDefinition.resumeAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_13), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.resumeButton]\n          ])\n        ], 2),\n        _createElementVNode(\"label\", {\n          class: _normalizeClass({\n            'setting-disabled': !_ctx.modelTaskDefinition.showSolutionsAllowed,\n          })\n        }, [\n          _createTextVNode(_toDisplayString(_ctx.$gettext('Text fr Lsungen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((_ctx.modelTaskDefinition.strings.solutionsButton) = $event)),\n            onInput: _cache[14] || (_cache[14] = ($event: any) => (\n              _ctx.updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            )),\n            disabled: !_ctx.modelTaskDefinition.showSolutionsAllowed,\n            type: \"text\"\n          }, null, 40, _hoisted_14), [\n            [_vModelText, _ctx.modelTaskDefinition.strings.solutionsButton]\n          ])\n        ], 2)\n      ]),\n      _createVNode(_component_FeedbackEditor, {\n        feedback: _ctx.modelTaskDefinition.feedback,\n        \"result-message\": _ctx.modelTaskDefinition.strings.resultMessage,\n        \"onUpdate:feedback\": _ctx.updateFeedback,\n        \"onUpdate:resultMessage\": _ctx.updateResultMessage\n      }, null, 8, [\"feedback\", \"result-message\", \"onUpdate:feedback\", \"onUpdate:resultMessage\"])\n    ])\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset class=\"sequencing-editor\">\n        <legend>{{ $gettext('Sequencing') }}</legend>\n\n        <div class=\"cards-list\">\n          <div\n            v-for=\"(card, index) in modelTaskDefinition.cards\"\n            :key=\"card.uuid\"\n            :class=\"{\n              'cards-list-item': true,\n              'selected-card': index === selectedCardIndex,\n            }\"\n            @click=\"selectCard(index)\"\n          >\n            <div v-text=\"listEntryText(index, card)\" class=\"list-entry-text\" />\n\n            <!-- Apply .stop modifier so that the selectCard event handler on the\n            parent element doesn't get called when the delete button is clicked -->\n            <button\n              type=\"button\"\n              class=\"remove-card-button\"\n              @click.stop=\"deleteCard(index)\"\n              :aria-label=\"$gettext('Karte lschen')\"\n            >\n              <img :src=\"urlForIcon('trash')\" alt=\"\" />\n            </button>\n          </div>\n\n          <button\n            type=\"button\"\n            class=\"button add add-card-button\"\n            @click=\"addCard\"\n          >\n            {{ $gettext('Karte hinzufgen') }}\n          </button>\n        </div>\n\n        <SequencingEditorCard\n          v-if=\"modelTaskDefinition.cards[selectedCardIndex]\"\n          :card=\"modelTaskDefinition.cards[selectedCardIndex]\"\n          :card-index=\"selectedCardIndex\"\n        />\n\n        <fieldset v-else class=\"no-card-selected-placeholder\">\n          <legend>\n            {{ $gettext('Keine Karte ausgewhlt') }}\n          </legend>\n        </fieldset>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.retryAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Mehrere Versuche erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.resumeAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Fortsetzen des aktuellen Spielstands erlauben') }}\n        </label>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.showSolutionsAllowed\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Lsungen anzeigen erlauben') }}\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label>\n          {{ $gettext('Text fr berprfen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.checkButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.checkButton')\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.retryAllowed }\"\n        >\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            :disabled=\"!modelTaskDefinition.retryAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{ 'setting-disabled': !modelTaskDefinition.resumeAllowed }\"\n        >\n          {{ $gettext('Text fr Fortsetzen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.resumeButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.resumeButton')\"\n            :disabled=\"!modelTaskDefinition.resumeAllowed\"\n            type=\"text\"\n          />\n        </label>\n\n        <label\n          :class=\"{\n            'setting-disabled': !modelTaskDefinition.showSolutionsAllowed,\n          }\"\n        >\n          {{ $gettext('Text fr Lsungen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.solutionsButton\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.solutionsButton')\n            \"\n            :disabled=\"!modelTaskDefinition.showSolutionsAllowed\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <FeedbackEditor\n        :feedback=\"modelTaskDefinition.feedback\"\n        :result-message=\"modelTaskDefinition.strings.resultMessage\"\n        @update:feedback=\"updateFeedback\"\n        @update:result-message=\"updateResultMessage\"\n      />\n    </form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport {\n  LernmoduleMultimediaElement,\n  SequencingTask,\n} from '@/models/TaskDefinition';\nimport { Feedback } from '@/models/common';\nimport { $gettext } from '@/language/gettext';\nimport produce from 'immer';\nimport { v4 } from 'uuid';\nimport SequencingEditorCard from '@/components/SequencingEditorCard.vue';\nimport FeedbackEditor from '@/components/FeedbackEditor.vue';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\n\nexport default defineComponent({\n  name: 'SequencingEditor',\n  components: { SequencingEditorCard, FeedbackEditor },\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<SequencingTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      selectedCardIndex: -1,\n      modelTaskDefinition: cloneDeep(this.taskDefinition),\n    };\n  },\n  watch: {\n    // Synchronize state taskDefinition -> modelTaskDefinition.\n    taskDefinition: {\n      immediate: true,\n      handler: function (): void {\n        this.modelTaskDefinition = cloneDeep(this.taskDefinition);\n      },\n    },\n  },\n  beforeMount(): void {\n    if (this.modelTaskDefinition.cards.length > 0) {\n      this.selectedCardIndex = 0;\n    }\n  },\n  methods: {\n    $gettext,\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n\n    updateTaskDefinition(undoBatch?: unknown) {\n      // Synchronize state modelTaskDefinition -> taskDefinition.\n      this.taskEditor!.performEdit({\n        newTaskDefinition: cloneDeep(this.modelTaskDefinition),\n        undoBatch: undoBatch ?? {},\n      });\n    },\n\n    selectCard(index: number) {\n      this.selectedCardIndex = index;\n    },\n\n    addCard() {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.cards.push({\n          type: 'image',\n          uuid: v4(),\n          file_id: '',\n          altText: '',\n        });\n      });\n\n      this.updateTaskDefinition();\n\n      // Select the newly inserted image\n      this.selectedCardIndex = this.modelTaskDefinition.cards.length - 1;\n    },\n\n    deleteCard(index: number) {\n      this.modelTaskDefinition = produce(this.modelTaskDefinition, (draft) => {\n        draft.cards.splice(index, 1);\n      });\n\n      this.updateTaskDefinition();\n\n      // Adjust the selection index so the selected card doesn't unexpectedly change\n      if (index <= this.selectedCardIndex) {\n        this.selectedCardIndex = this.selectedCardIndex - 1;\n      }\n    },\n\n    listEntryText(index: number, card: LernmoduleMultimediaElement) {\n      let text = index + 1 + '. ';\n\n      if (card.type === 'image' && card.altText != '') {\n        text += card.altText;\n      } else {\n        text += $gettext('Bild');\n      }\n      return text;\n    },\n\n    updateFeedback(updatedFeedback: Feedback[]) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: SequencingTask) => {\n            taskDraft.feedback = updatedFeedback;\n          }\n        ),\n        undoBatch: 'taskDefinition.feedback',\n      });\n    },\n\n    updateResultMessage(updatedResultMessage: string) {\n      this.taskEditor!.performEdit({\n        newTaskDefinition: produce(\n          this.modelTaskDefinition,\n          (taskDraft: SequencingTask) => {\n            taskDraft.strings.resultMessage = updatedResultMessage;\n          }\n        ),\n        undoBatch: 'taskDefinition.strings.resultMessage',\n      });\n    },\n  },\n});\n</script>\n\n<style scoped>\n.sequencing-editor {\n  display: flex;\n  gap: 1em;\n}\n\n.cards-list {\n  display: flex;\n  flex-direction: column;\n  flex: 0 0 200px;\n  max-width: 14em;\n}\n\n.cards-list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border: transparent 2px solid;\n  padding: 2px;\n  cursor: pointer;\n  user-select: none;\n}\n\n.cards-list-item:last-of-type {\n  margin-bottom: 0.8em;\n}\n\n.selected-card {\n  border: #0a78d1 2px solid;\n}\n\n.list-entry-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 11em;\n}\n\n.remove-card-button {\n  aspect-ratio: 1;\n  display: flex;\n  align-items: center;\n  border: 1px solid #28497c;\n  color: #28497c;\n  background: #fff;\n  cursor: pointer;\n}\n\n.remove-card-button:hover {\n  background: rgba(109, 114, 122, 0.2);\n}\n\n.add-card-button {\n  margin: 0 0 0 0;\n}\n\n.no-card-selected-placeholder {\n  flex: 1 1 auto;\n  height: 150px;\n}\n</style>\n","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-20dc9589\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"sequencing-editor-card\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"image-card-container\"\n}\nconst _hoisted_3 = { class: \"multimedia-element-wrapper\" }\nconst _hoisted_4 = { style: {\"align-self\":\"stretch\"} }\nconst _hoisted_5 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n\n  return (_openBlock(), _createElementBlock(\"fieldset\", _hoisted_1, [\n    _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Karte')), 1),\n    _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext('Bild')), 1),\n    (_ctx.card.type == 'image' && _ctx.card.file_id)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_MultimediaElement, { element: _ctx.card }, null, 8, [\"element\"])\n          ]),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClickDeleteImage && _ctx.onClickDeleteImage(...args))),\n            class: \"button trash settings-item\"\n          }, _toDisplayString(_ctx.$gettext('Bild lschen')), 1),\n          _createElementVNode(\"label\", _hoisted_4, [\n            _createTextVNode(_toDisplayString(_ctx.$gettext('Bildbeschreibung')) + \" \", 1),\n            _createElementVNode(\"input\", {\n              type: \"text\",\n              value: _ctx.card.altText,\n              onInput: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onInputAltText && _ctx.onInputAltText(...args))),\n              class: \"settings-item\"\n            }, null, 40, _hoisted_5)\n          ])\n        ]))\n      : (_openBlock(), _createBlock(_component_FileUpload, {\n          key: 1,\n          onFileUploaded: _ctx.onUploadImage\n        }, null, 8, [\"onFileUploaded\"]))\n  ]))\n}","<template>\n  <fieldset class=\"sequencing-editor-card\">\n    <legend>{{ $gettext('Karte') }}</legend>\n\n    <label>{{ $gettext('Bild') }}</label>\n    <div\n      v-if=\"card.type == 'image' && card.file_id\"\n      class=\"image-card-container\"\n    >\n      <div class=\"multimedia-element-wrapper\">\n        <MultimediaElement :element=\"card\" />\n      </div>\n\n      <button\n        type=\"button\"\n        @click=\"onClickDeleteImage\"\n        class=\"button trash settings-item\"\n      >\n        {{ $gettext('Bild lschen') }}\n      </button>\n\n      <label style=\"align-self: stretch\">\n        {{ $gettext('Bildbeschreibung') }}\n        <input\n          type=\"text\"\n          :value=\"card.altText\"\n          @input=\"onInputAltText\"\n          class=\"settings-item\"\n        />\n      </label>\n    </div>\n\n    <FileUpload v-else @file-uploaded=\"onUploadImage\" />\n  </fieldset>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport { $gettext } from '@/language/gettext';\nimport {\n  fileIdToUrl,\n  LernmoduleMultimediaElement,\n  MultimediaElementType,\n  SequencingTask,\n} from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport produce from 'immer';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { FileRef } from '@/routes/jsonApi';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\nimport { v4 } from 'uuid';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { ImageFileElement } from '@/models/common';\n\nexport default defineComponent({\n  name: 'SequencingEditorCard',\n  components: { MultimediaElement, FileUpload },\n  setup() {\n    return {\n      taskEditor: inject<TaskEditorState>(taskEditorStateSymbol),\n    };\n  },\n  props: {\n    card: {\n      type: Object as PropType<LernmoduleMultimediaElement>,\n      required: true,\n    },\n    cardIndex: {\n      type: Number as PropType<number>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      debug: false,\n    };\n  },\n  methods: {\n    fileIdToUrl,\n    $gettext,\n    onUploadImage(file: FileRef): void {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        if (draft.cards[this.cardIndex].type === 'image') {\n          (draft.cards[this.cardIndex] as ImageFileElement).file_id = file.id;\n        }\n      });\n      this.taskEditor!.performEdit({\n        newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    onInputAltText(ev: InputEvent): void {\n      const value = (ev.target as HTMLInputElement).value;\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        if (draft.cards[this.cardIndex].type === 'image') {\n          (draft.cards[this.cardIndex] as ImageFileElement).altText = value;\n        }\n      });\n      this.taskEditor!.performEdit({\n        newTaskDefinition,\n        undoBatch: { type: 'EditedImageAltText' },\n      });\n    },\n    onClickDeleteImage(): void {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        if (draft.cards[this.cardIndex].type === 'image') {\n          (draft.cards[this.cardIndex] as ImageFileElement).file_id = '';\n        }\n      });\n\n      this.taskEditor!.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    onChangeType(event: Event) {\n      const target = event.target as HTMLSelectElement;\n      const selectedType = target.value as MultimediaElementType;\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.cards[this.cardIndex].type = selectedType;\n      });\n\n      this.taskEditor!.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    createNewLernmoduleMultimediaElement(\n      type: MultimediaElementType\n    ): LernmoduleMultimediaElement {\n      switch (type) {\n        case 'image':\n          return {\n            uuid: v4(),\n            type: type,\n            file_id: '',\n            altText: '',\n          };\n        case 'audio':\n          return {\n            uuid: v4(),\n            type: type,\n            file_id: '',\n            altText: '',\n          };\n        case 'text':\n          return {\n            uuid: v4(),\n            type: type,\n            content: '',\n          };\n        default:\n          throw new Error(\n            $gettext('Ungltiges MultimediaElementType: ') + type\n          );\n      }\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as SequencingTask,\n  },\n});\n</script>\n\n<style scoped>\n.sequencing-editor-card {\n  flex: 1 1 auto;\n}\n\n.multimedia-element-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n\n  width: 11.5em;\n  height: 11.5em;\n  padding: 0.5em;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n}\n\n.image-card-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  gap: 0.5em;\n}\n\n.settings-item {\n  /* top | right | bottom | left */\n  margin: 0.25em 0 0 0;\n}\n</style>\n","import { render } from \"./SequencingEditorCard.vue?vue&type=template&id=20dc9589&scoped=true&ts=true\"\nimport script from \"./SequencingEditorCard.vue?vue&type=script&lang=ts\"\nexport * from \"./SequencingEditorCard.vue?vue&type=script&lang=ts\"\n\nimport \"./SequencingEditorCard.vue?vue&type=style&index=0&id=20dc9589&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20dc9589\"]])\n\nexport default __exports__","import { render } from \"./SequencingEditor.vue?vue&type=template&id=79b0e546&scoped=true&ts=true\"\nimport script from \"./SequencingEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./SequencingEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./SequencingEditor.vue?vue&type=style&index=0&id=79b0e546&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-79b0e546\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7ac5812a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = {\n  class: \"card-row\",\n  tabIndex: \"-1\"\n}\nconst _hoisted_3 = [\"aria-label\", \"draggable\", \"onDragstart\", \"onDrag\", \"onDragend\", \"onDragover\", \"onClick\", \"onKeydown\"]\nconst _hoisted_4 = { class: \"image-wrapper\" }\nconst _hoisted_5 = { class: \"feedback-and-button-container\" }\nconst _hoisted_6 = { class: \"button-panel\" }\nconst _hoisted_7 = [\"textContent\"]\nconst _hoisted_8 = [\"textContent\"]\nconst _hoisted_9 = [\"textContent\"]\nconst _hoisted_10 = [\"textContent\"]\nconst _hoisted_11 = {\n  \"aria-live\": \"polite\",\n  \"aria-atomic\": \"true\",\n  style: {\"position\":\"absolute\",\"width\":\"1px\",\"height\":\"1px\",\"overflow\":\"hidden\"}\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MultimediaElement = _resolveComponent(\"MultimediaElement\")!\n  const _component_FeedbackElement = _resolveComponent(\"FeedbackElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.cards, (card, index) => {\n        return (_openBlock(), _createElementBlock(\"button\", {\n          type: \"button\",\n          \"aria-label\": _ctx.getAriaLabel(card, index),\n          key: card.uuid,\n          ref_for: true,\n          ref: 'card-' + index,\n          class: _normalizeClass([\"card\", {\n          dragged: _ctx.cardInteractedWith === card,\n          disabled: _ctx.isShowingResults,\n          correct: _ctx.isShowingResults && _ctx.isCardInCorrectPosition(card),\n          incorrect: _ctx.isShowingResults && !_ctx.isCardInCorrectPosition(card),\n        }]),\n          draggable: !_ctx.isShowingResults,\n          onDragstart: (event) => _ctx.startDragCard(card, event),\n          onDrag: ($event: any) => (_ctx.onDrag(card)),\n          onDragend: ($event: any) => (_ctx.endDragCard(card)),\n          onDragover: ($event: any) => (_ctx.onDragOver(card)),\n          onClick: ($event: any) => (_ctx.onClickCard(card)),\n          onKeydown: (event) => _ctx.onKeydown(card, event)\n        }, [\n          _createElementVNode(\"span\", _hoisted_4, [\n            _createVNode(_component_MultimediaElement, { element: card }, null, 8, [\"element\"])\n          ]),\n          _createElementVNode(\"span\", {\n            class: \"image-description\",\n            onDragover: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n            onDragenter: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"prevent\"]))\n          }, _toDisplayString(card.altText), 33)\n        ], 42, _hoisted_3))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      (_ctx.isShowingResults && !_ctx.isShowingSolutions)\n        ? (_openBlock(), _createBlock(_component_FeedbackElement, {\n            key: 0,\n            achievedPoints: _ctx.correctAnswers,\n            maxPoints: _ctx.maxPoints,\n            resultMessage: _ctx.resultMessage,\n            feedback: _ctx.task.feedback\n          }, null, 8, [\"achievedPoints\", \"maxPoints\", \"resultMessage\", \"feedback\"]))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_ctx.showCheckButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              textContent: _toDisplayString(_ctx.task.strings.checkButton),\n              onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheckButton && _ctx.onClickCheckButton(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_7))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showRetryButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 1,\n              textContent: _toDisplayString(_ctx.task.strings.retryButton),\n              onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onClickRetryButton && _ctx.onClickRetryButton(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_8))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showResumeButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 2,\n              textContent: _toDisplayString(_ctx.task.strings.resumeButton),\n              onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onClickResumeButton && _ctx.onClickResumeButton(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_9))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showSolutionsButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 3,\n              textContent: _toDisplayString(_ctx.task.strings.solutionsButton),\n              onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onClickSolutionsButton && _ctx.onClickSolutionsButton(...args))),\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_10))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_11, _toDisplayString(_ctx.screenReaderAnnouncement), 1)\n  ]))\n}","<template>\n  <div class=\"stud5p-task\">\n    <div class=\"card-row\" tabIndex=\"-1\">\n      <button\n        type=\"button\"\n        v-for=\"(card, index) in cards\"\n        :aria-label=\"getAriaLabel(card, index)\"\n        :key=\"card.uuid\"\n        :ref=\"'card-' + index\"\n        class=\"card\"\n        :class=\"{\n          dragged: cardInteractedWith === card,\n          disabled: isShowingResults,\n          correct: isShowingResults && isCardInCorrectPosition(card),\n          incorrect: isShowingResults && !isCardInCorrectPosition(card),\n        }\"\n        :draggable=\"!isShowingResults\"\n        @dragstart=\"(event) => startDragCard(card, event)\"\n        @drag=\"onDrag(card)\"\n        @dragend=\"endDragCard(card)\"\n        @dragover=\"onDragOver(card)\"\n        @click=\"onClickCard(card)\"\n        @keydown=\"(event) => onKeydown(card, event)\"\n      >\n        <span class=\"image-wrapper\">\n          <MultimediaElement :element=\"card\" />\n        </span>\n\n        <span class=\"image-description\" @dragover.prevent @dragenter.prevent>\n          {{ card.altText }}\n        </span>\n      </button>\n    </div>\n\n    <div class=\"feedback-and-button-container\">\n      <FeedbackElement\n        v-if=\"isShowingResults && !isShowingSolutions\"\n        :achievedPoints=\"correctAnswers\"\n        :maxPoints=\"maxPoints\"\n        :resultMessage=\"resultMessage\"\n        :feedback=\"task.feedback\"\n      />\n\n      <div class=\"button-panel\">\n        <button\n          v-if=\"showCheckButton\"\n          v-text=\"task.strings.checkButton\"\n          @click=\"onClickCheckButton\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showRetryButton\"\n          v-text=\"task.strings.retryButton\"\n          @click=\"onClickRetryButton\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showResumeButton\"\n          v-text=\"task.strings.resumeButton\"\n          @click=\"onClickResumeButton\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n\n        <button\n          v-if=\"showSolutionsButton\"\n          v-text=\"task.strings.solutionsButton\"\n          @click=\"onClickSolutionsButton\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n      </div>\n    </div>\n\n    <div\n      aria-live=\"polite\"\n      aria-atomic=\"true\"\n      style=\"position: absolute; width: 1px; height: 1px; overflow: hidden\"\n    >\n      {{ screenReaderAnnouncement }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport {\n  fileIdToUrl,\n  SequencingTask,\n  LernmoduleMultimediaElement,\n} from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\nimport MultimediaElement from '@/components/MultimediaElement.vue';\n\ntype Uuid = string;\n\nexport default defineComponent({\n  name: 'SequencingViewer',\n\n  components: {\n    MultimediaElement,\n    FeedbackElement,\n  },\n\n  props: {\n    task: {\n      type: Object as PropType<SequencingTask>,\n      required: true,\n    },\n  },\n\n  emits: ['updateAttempt'],\n\n  data() {\n    return {\n      cards: [] as LernmoduleMultimediaElement[],\n      cardInteractedWith: undefined as LernmoduleMultimediaElement | undefined,\n      isShowingResults: false as boolean,\n      isShowingSolutions: false as boolean,\n      screenReaderAnnouncement: '' as string,\n    };\n  },\n\n  methods: {\n    fileIdToUrl,\n\n    $gettext,\n\n    startDragCard(card: LernmoduleMultimediaElement, event: DragEvent) {\n      console.log('Starting to drag card', card.uuid);\n      this.cardInteractedWith = card;\n    },\n\n    onDrag(card: LernmoduleMultimediaElement) {\n      console.log('Dragging card', card.uuid);\n    },\n\n    endDragCard(card: LernmoduleMultimediaElement) {\n      console.log('Ending to drag card', card.uuid);\n      this.cardInteractedWith = undefined;\n    },\n\n    onDragOver(card: LernmoduleMultimediaElement) {\n      if (this.cardInteractedWith && this.cardInteractedWith != card) {\n        const fromIndex = this.cards.indexOf(this.cardInteractedWith);\n        const toIndex = this.cards.indexOf(card);\n\n        console.log(\n          'Dragging card',\n          this.cardInteractedWith?.uuid,\n          '(',\n          fromIndex,\n          ') over target',\n          card.uuid,\n          '(',\n          toIndex,\n          ')'\n        );\n\n        this.moveInArray(fromIndex, toIndex);\n      }\n    },\n\n    onClickCard(card: LernmoduleMultimediaElement) {\n      if (this.isShowingSolutions || this.isShowingResults) return;\n\n      if (this.cardInteractedWith) {\n        const fromIndex = this.cards.indexOf(this.cardInteractedWith);\n        const toIndex = this.cards.indexOf(card);\n        this.moveInArray(fromIndex, toIndex);\n        this.cardInteractedWith = undefined;\n      } else {\n        this.cardInteractedWith = card;\n      }\n    },\n\n    onKeydown(card: LernmoduleMultimediaElement, event: KeyboardEvent) {\n      if (this.isShowingResults || this.isShowingSolutions) return;\n\n      const currentlySelectedIndex = this.cards.indexOf(card);\n      const previouslySelectedIndex = this.cardInteractedWith\n        ? this.cards.indexOf(this.cardInteractedWith)\n        : -1;\n\n      switch (event.key) {\n        case 'Enter':\n        case ' ':\n          event.preventDefault();\n          // If an card is already selected and it's different from the current one\n          if (this.cardInteractedWith && this.cardInteractedWith !== card) {\n            // Move the already selected card to the position of the currently selected card\n            this.moveInArray(previouslySelectedIndex, currentlySelectedIndex);\n            this.screenReaderAnnouncement = this.$gettext(\n              'Moved %1 to position %2.'\n            )\n              .replace('%1', this.cardInteractedWith.uuid)\n              .replace('%2', String(currentlySelectedIndex + 1)); // Convert number to string\n\n            this.cardInteractedWith = undefined;\n            this.moveFocus(currentlySelectedIndex);\n          } else {\n            // Select or deselect the card\n            this.cardInteractedWith = this.cardInteractedWith\n              ? undefined\n              : card;\n            this.screenReaderAnnouncement = this.cardInteractedWith\n              ? `Selected ${card.uuid} on position ${\n                  currentlySelectedIndex + 1\n                } for moving.`\n              : 'Selection cleared.';\n          }\n          break;\n\n        case 'Escape':\n          this.cardInteractedWith = undefined;\n          this.screenReaderAnnouncement = 'Selection canceled.';\n          break;\n      }\n    },\n\n    moveFocus(cardIndex: number) {\n      // Wait for the DOM to update before applying focus\n      this.$nextTick(() => {\n        const buttonRef = this.$refs[\n          `card-${cardIndex}`\n        ] as HTMLButtonElement[];\n        if (buttonRef && buttonRef[0]) {\n          // Check if the buttonRef exists and is not undefined\n          buttonRef[0].focus(); // Set focus on the new button\n        }\n      });\n    },\n\n    getAriaLabel(card: LernmoduleMultimediaElement, index: number) {\n      if (!this.isShowingResults) {\n        return `${card.uuid} on position ${index + 1}`;\n      } else {\n        return `${card.uuid} on position ${index + 1} is ${\n          this.isCardInCorrectPosition(card) ? 'correct' : 'not correct'\n        }`;\n      }\n    },\n\n    moveInArray(fromIndex: number, toIndex: number) {\n      let element = this.cards[fromIndex];\n      this.cards.splice(fromIndex, 1);\n      this.cards.splice(toIndex, 0, element);\n    },\n\n    isCardInCorrectPosition(card: LernmoduleMultimediaElement): boolean {\n      const index = this.cards.findIndex(\n        (cardToCheck) => cardToCheck.uuid === card.uuid\n      );\n      return index !== -1 && this.task.cards[index].uuid === card.uuid;\n    },\n\n    onClickCheckButton() {\n      this.isShowingResults = true;\n      this.screenReaderAnnouncement = this.resultMessage;\n    },\n\n    onClickSolutionsButton() {\n      this.isShowingSolutions = true;\n      this.resetCards();\n    },\n\n    onClickResumeButton() {\n      this.isShowingResults = false;\n    },\n\n    onClickRetryButton() {\n      this.isShowingResults = false;\n      this.isShowingSolutions = false;\n      this.shuffleCards();\n    },\n\n    shuffleCards() {\n      // Shuffle the cards\n      // https://stackoverflow.com/a/46545530\n      this.cards = this.cards\n        .map((card) => ({ card: card, sort: Math.random() }))\n        .sort((card1, card2) => card1.sort - card2.sort)\n        .map(({ card }) => card);\n    },\n\n    resetCards() {\n      this.cards = this.task.cards;\n    },\n  },\n\n  computed: {\n    showCheckButton(): boolean {\n      return !this.isShowingResults;\n    },\n\n    showRetryButton(): boolean {\n      return this.task.retryAllowed && this.isShowingResults;\n    },\n\n    showResumeButton(): boolean {\n      return (\n        this.task.resumeAllowed &&\n        this.isShowingResults &&\n        !this.isShowingSolutions &&\n        !this.allAnswersAreCorrect\n      );\n    },\n\n    showSolutionsButton(): boolean {\n      return (\n        this.task.showSolutionsAllowed &&\n        this.isShowingResults &&\n        !this.isShowingSolutions &&\n        !this.allAnswersAreCorrect\n      );\n    },\n\n    correctAnswers(): number {\n      let correctAnswers = 0;\n      for (let i = 0; i < this.task.cards.length; i++) {\n        if (this.task.cards[i].uuid === this.cards[i].uuid) {\n          correctAnswers++;\n        }\n      }\n      return correctAnswers;\n    },\n\n    maxPoints(): number {\n      return this.task.cards.length;\n    },\n\n    allAnswersAreCorrect(): boolean {\n      return this.correctAnswers === this.maxPoints;\n    },\n\n    resultMessage(): string {\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.correctAnswers.toString()\n      );\n\n      resultMessage = resultMessage.replace(\n        ':total',\n        this.maxPoints.toString()\n      );\n\n      return resultMessage;\n    },\n  },\n\n  watch: {\n    task: {\n      handler() {\n        console.log('watcher for this.task');\n        this.cards = [...this.task.cards];\n        this.shuffleCards();\n      },\n      immediate: true, // Ensure that the watcher is also called immediately when the component is first mounted\n    },\n  },\n});\n</script>\n\n<style scoped>\n.card-row {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 0.5em;\n}\n\n.card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n\n  width: 11.5em;\n  height: 13.5em;\n  padding: 0.5em 0.5em 0 0.5em;\n\n  border: 2px solid #dbe2e8;\n  border-radius: 0.5em;\n  background: white;\n\n  cursor: grab;\n  user-select: none;\n\n  transition: background-color 0.12s ease, border 0.12s ease,\n    box-shadow 0.12s ease;\n}\n\n.card:not(.disabled):focus,\n.card:not(.disabled):active,\n.card:not(.disabled):hover {\n  border: 2px solid #7ba4d3;\n  box-shadow: 0 0 10px 0 #406ef3;\n}\n\n.dragged {\n  border: 2px solid #7ba4d3;\n  box-shadow: 0 0 10px 0 #406ef3;\n  background-color: #dcf6ff;\n}\n\n.correct {\n  background-color: #9dd8bb;\n  border-color: #9dd8bb;\n}\n\n.incorrect {\n  background-color: #f7d0d0;\n  border-color: #f7d0d0;\n}\n\n.disabled {\n  cursor: default;\n}\n\n.image-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  flex: 1; /* Occupy remaining vertical space */\n  width: 100%;\n\n  overflow: hidden;\n}\n\n.image-description {\n  width: 100%;\n  height: 2em;\n\n  padding-top: 0.4em;\n\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n}\n</style>\n","import { render } from \"./SequencingViewer.vue?vue&type=template&id=7ac5812a&scoped=true&ts=true\"\nimport script from \"./SequencingViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./SequencingViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./SequencingViewer.vue?vue&type=style&index=0&id=7ac5812a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7ac5812a\"]])\n\nexport default __exports__","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"textarea\", {\n    value: _ctx.modelValue,\n    ref: \"studip_wysiwyg\",\n    class: \"studip-wysiwyg\",\n    onInput: _cache[0] || (_cache[0] = ($event: any) => (_ctx.updateValue($event.target.value)))\n  }, null, 40, _hoisted_1))\n}","<template>\n  <textarea\n    :value=\"modelValue\"\n    ref=\"studip_wysiwyg\"\n    class=\"studip-wysiwyg\"\n    @input=\"updateValue($event.target.value)\"\n  />\n</template>\n\n<script lang=\"ts\">\n// need v-model to provide and get content -> <studip-wysiwyg v-model=\"content\" />\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'studip-wysiwyg',\n  props: {\n    modelValue: String,\n    forceSoftBreaks: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    removeWrappingPTag: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    disableAutoformat: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    insertHtmlComment: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      fallbackActive: false,\n    };\n  },\n  mounted() {\n    let ckeInit = this.initCKE();\n    if (!ckeInit) {\n      this.fallbackActive = true;\n    }\n  },\n  watch: {\n    modelValue(value: string) {\n      if (!this.fallbackActive) {\n        // Copy the new value into CKEditor (only if it's changed)\n        const textAreaElement = this.$refs\n          .studip_wysiwyg as HTMLTextAreaElement;\n        const ckeditor = window.STUDIP.wysiwyg.getEditor(textAreaElement)!;\n        const currentData = this.getAdjustedCkeditorData();\n        if (currentData !== value) {\n          ckeditor.data.set(value);\n        }\n      }\n    },\n  },\n  methods: {\n    initCKE() {\n      const textAreaElement = this.$refs.studip_wysiwyg as HTMLTextAreaElement;\n      // Process the jQuery event 'wysiwyg.load' which is triggered asynchronously\n      // after the wysiwyg editor is mounted using the 'replace()' method.\n      textAreaElement.onload = (event: any) => {\n        console.info('load');\n        let ckeditor = window.STUDIP.wysiwyg.getEditor(textAreaElement)!;\n        ckeditor.model.document.on('change:data', () => {\n          let data = this.getAdjustedCkeditorData();\n          this.$emit('update:modelValue', data);\n        });\n        ckeditor.editing.view.document.on(\n          'enter',\n          (evt, data) => {\n            if (this.forceSoftBreaks) {\n              // Override 'enter' to insert <br /> instead of <p></p> in the editor.\n              // This produces HTML which is more easily parsed in our various learning tasks.\n              // Source: https://github.com/ckeditor/ckeditor5/issues/1141#issuecomment-403403526\n              ckeditor.execute('shiftEnter');\n              data.preventDefault();\n              evt.stop();\n            }\n          },\n          { priority: 'high' }\n        );\n        if (this.disableAutoformat) {\n          // Disable the autoformat plugin so that *asterisks* surrounding text\n          // are not automatically converted into italic formatting.\n          // We use this syntax in the editor for various tasks, such as Fill In The Blanks.\n          // (It might be nicer to disable this using 'removePlugins' option in\n          // the config for CKEditor5, but the interface of STUDIP.wysiwyg.replace()\n          // does not allow us to alter the CKEditor5 config.)\n          const autoformat = ckeditor.plugins.get('Autoformat');\n          (autoformat as unknown as { isEnabled: boolean }).isEnabled = false;\n        }\n      };\n      // This asynchronous method does not return a promise.  Instead, it fires\n      // a 'load' event, which is processed in the above event handler. >:|\n      window.STUDIP.wysiwyg.replace(textAreaElement);\n      return true;\n    },\n    updateValue(value: unknown) {\n      if (this.fallbackActive) {\n        this.$emit('update:modelValue', value);\n      }\n    },\n    getAdjustedCkeditorData(): string {\n      const textAreaElement = this.$refs.studip_wysiwyg as HTMLTextAreaElement;\n      let ckeditor = window.STUDIP.wysiwyg.getEditor(textAreaElement)!;\n      let data = ckeditor.getData();\n      if (this.removeWrappingPTag) {\n        // Remove the <p> tag wrapping the editor's contents.\n        // These tags are inserted automatically by CKEditor5.\n        // It appears to be a WONTFIX on their end.\n        // See https://github.com/ckeditor/ckeditor5/issues/1537\n        data = data.replace(/<p>(.*?)/, '$1').replace(/(.*?)<\\/p>/, '$1');\n      }\n      if (this.insertHtmlComment) {\n        /**\n         Insert <!--HTML--> at the start of the text so it is recognized by studip as a\n         raw HTML that should be inserted as-is into a PHP page when formatted\n         using htmlReady.\n         */\n        // This regex is the one used in Markup.class.php to recognize HTML\n        const regex = /^\\s*<!--\\s*HTML.*?-->/i;\n        if (!regex.test(data)) {\n          data = '<!--HTML-->'.concat(data);\n        }\n      }\n      return data;\n    },\n  },\n});\n</script>\n\n<style></style>\n","import { render } from \"./StudipWysiwyg.vue?vue&type=template&id=3e03439d&ts=true\"\nimport script from \"./StudipWysiwyg.vue?vue&type=script&lang=ts\"\nexport * from \"./StudipWysiwyg.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script setup lang=\"ts\"></script>\n\n<template>\n  <div class=\"stud5p-task\">Crossword Editor</div>\n</template>\n\n<style scoped></style>\n","import { render } from \"./CrosswordEditor.vue?vue&type=template&id=77ba1a90\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script setup lang=\"ts\"></script>\n\n<template>\n  <div class=\"stud5p-task\">Crossword Viewer</div>\n</template>\n\n<style scoped></style>\n","import { render } from \"./CrosswordViewer.vue?vue&type=template&id=30bf1dc6\"\nconst script = {}\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, vModelText as _vModelText, normalizeClass as _normalizeClass, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-46a54772\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"find-the-hotspots-editor\"\n}\nconst _hoisted_4 = { class: \"button-bar\" }\nconst _hoisted_5 = [\"title\"]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"svg\", {\n  width: \"20\",\n  height: \"20\",\n  viewBox: \"0 0 32 32\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, [\n  /*#__PURE__*/_createElementVNode(\"rect\", {\n    x: \"1\",\n    y: \"1\",\n    width: \"30\",\n    height: \"30\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2px\",\n    rx: \"2\"\n  })\n], -1))\nconst _hoisted_7 = [\n  _hoisted_6\n]\nconst _hoisted_8 = [\"title\"]\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"svg\", {\n  width: \"20\",\n  height: \"20\",\n  viewBox: \"0 0 32 32\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, [\n  /*#__PURE__*/_createElementVNode(\"circle\", {\n    cx: \"16\",\n    cy: \"16\",\n    r: \"15\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2px\"\n  })\n], -1))\nconst _hoisted_10 = [\n  _hoisted_9\n]\nconst _hoisted_11 = { key: 1 }\nconst _hoisted_12 = { class: \"collapsable collapsed\" }\nconst _hoisted_13 = { style: {\"margin-bottom\":\"0\",\"width\":\"fit-content\"} }\nconst _hoisted_14 = { style: {\"display\":\"flex\",\"align-items\":\"center\",\"gap\":\"0.25em\"} }\nconst _hoisted_15 = [\"disabled\", \"max\"]\nconst _hoisted_16 = { style: {\"width\":\"fit-content\"} }\nconst _hoisted_17 = { style: {\"display\":\"flex\",\"align-items\":\"center\",\"gap\":\"0.25em\"} }\nconst _hoisted_18 = [\"disabled\", \"min\"]\nconst _hoisted_19 = { key: 1 }\nconst _hoisted_20 = { class: \"collapsable collapsed\" }\nconst _hoisted_21 = { class: \"collapsable collapsed\" }\nconst _hoisted_22 = {\n  key: 0,\n  style: { flexBasis: '50%', flexGrow: 0, flexShrink: 0 }\n}\n\nimport {\n  inject,\n  PropType,\n  provide,\n  ref,\n  watch,\n  computed,\n} from 'vue';\nimport FileUpload from '@/components/FileUpload.vue';\nimport produce from 'immer';\nimport { v4 } from 'uuid';\nimport { FileRef } from '@/routes/jsonApi';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { FindTheHotspotsTask, Hotspot } from '@/models/FindTheHotspotsTask';\nimport { findTheHotspotsEditorStateSymbol } from '@/components/findTheHotspots/findTheHotspotsEditorState';\nimport ImageWithHotspots from '@/components/findTheHotspots/ImageWithHotspots.vue';\nimport { cloneDeep } from 'lodash';\nimport { $gettext } from '@/language/gettext';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  props: {\n  taskDefinition: {\n    type: Object as PropType<FindTheHotspotsTask>,\n    required: true,\n  },\n},\n  setup(__props) {\n\nconst props = __props\n\nconst taskEditor = inject<TaskEditorState>(taskEditorStateSymbol);\n\n\n\nconst debug = window.STUDIP.LernmoduleVueJS.LERNMODULE_DEBUG;\n\n// State\nconst modelTaskDefinition = ref<FindTheHotspotsTask>(\n  cloneDeep(props.taskDefinition)\n);\nconst selectedHotspotId = ref<string | undefined>(undefined);\nconst limitHotspotsToFind = ref<boolean>(false);\nconst hotspotsToFind = ref<number | null>(null);\nconst limitClicks = ref<boolean>(false);\nconst allowedClicks = ref<number | null>(null);\nconst imageWithHotspotsRef = ref<\n  InstanceType<typeof ImageWithHotspots> | undefined\n>();\n\nprovide(findTheHotspotsEditorStateSymbol, {\n  selectedHotspotId,\n  selectHotspot,\n  deleteSelectedHotspot,\n  changeHotspotCorrectness,\n  setHotspotFeedback,\n  dragHotspot,\n  resizeHotspot,\n});\n\n// Computed properties\nconst numberOfCorrectHotspots = computed(\n  () =>\n    modelTaskDefinition.value.hotspots.filter((hotspot) => hotspot.correct)\n      .length\n);\n\nconst numberOfHotspotsToFind = computed(\n  () => modelTaskDefinition.value.hotspotsToFind\n);\n\nconst numberOfClicksAllowed = computed(\n  () => modelTaskDefinition.value.allowedClicks\n);\n\n// Watchers\nwatch(\n  () => props.taskDefinition,\n  (newTaskDefinition, oldTaskDefinition) => {\n    modelTaskDefinition.value = cloneDeep(newTaskDefinition);\n  },\n  { deep: true }\n);\n\nwatch(numberOfCorrectHotspots, (newValue) => {\n  // Reset settings if numberOfCorrectHotspots changes\n  limitHotspotsToFind.value = false;\n  limitClicks.value = false;\n  updateHotspotsToFindInTaskDefinition();\n});\n\nfunction updateTaskDefinition(undoBatch?: unknown): void {\n  // Synchronize state modelTaskDefinition -> taskDefinition.\n  console.log('update task definition');\n  taskEditor!.performEdit({\n    newTaskDefinition: cloneDeep(modelTaskDefinition.value),\n    undoBatch: undoBatch ?? {},\n  });\n}\n\nfunction updateAllowedClicksInTaskDefinition(): void {\n  if (!limitClicks.value) {\n    // If the setting is not checked we set the allowedClicks value to 0 which means unlimited clicks\n    allowedClicks.value = null;\n    modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n      draft.allowedClicks = 0;\n    });\n  } else {\n    // If the setting is checked we need to make sure we set a valid value for the limit\n    if (\n      allowedClicks.value &&\n      allowedClicks.value >=\n        (numberOfHotspotsToFind.value\n          ? numberOfHotspotsToFind.value\n          : numberOfCorrectHotspots.value)\n    ) {\n      // We already have a valid value, set it in the taskDefinition\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.allowedClicks = allowedClicks.value as number;\n        }\n      );\n    } else {\n      // The value in allowedClicks is not valid, make it valid\n      allowedClicks.value = Math.max(\n        numberOfHotspotsToFind.value\n          ? numberOfHotspotsToFind.value\n          : numberOfCorrectHotspots.value,\n        1\n      );\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.allowedClicks = allowedClicks.value as number;\n        }\n      );\n    }\n  }\n\n  updateTaskDefinition();\n}\n\nfunction updateHotspotsToFindInTaskDefinition(): void {\n  if (!limitHotspotsToFind.value) {\n    // If the setting is not checked we set the hotspotsToFind value to 0 which means all\n    hotspotsToFind.value = null;\n    modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n      draft.hotspotsToFind = 0;\n    });\n  } else {\n    // If the setting is checked we need to make sure we set a valid value for the limit\n    if (\n      hotspotsToFind.value &&\n      hotspotsToFind.value <= numberOfCorrectHotspots.value\n    ) {\n      // We already have a valid value, let's set it in the taskDefinition\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.hotspotsToFind = hotspotsToFind.value\n            ? hotspotsToFind.value\n            : numberOfCorrectHotspots.value;\n        }\n      );\n    } else {\n      // The value in hotspotsToFind is not valid, let's make it valid\n      hotspotsToFind.value = Math.max(numberOfCorrectHotspots.value, 1);\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.hotspotsToFind = hotspotsToFind.value\n            ? hotspotsToFind.value\n            : numberOfCorrectHotspots.value;\n        }\n      );\n    }\n  }\n\n  updateTaskDefinition();\n\n  // If we changed the number of hotspotsToFind we also need to update\n  // the allowed clicks limit to make sure the task is still valid\n  updateAllowedClicksInTaskDefinition();\n}\n\nfunction onImageUploaded(file: FileRef): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.image = {\n      uuid: v4(),\n      type: 'image',\n      file_id: file.id,\n      altText: '',\n    };\n  });\n\n  updateTaskDefinition();\n}\n\nfunction addRectangularHotspot(): void {\n  const imgEl = document.querySelector('.hotspots-image');\n  const imageWidthPixels = imgEl ? imgEl.clientWidth : 10;\n  const imageHeightPixels = imgEl ? imgEl.clientHeight : 10;\n  let hotspotWidthPercent: number, hotspotHeightPercent: number;\n  const size = 0.3;\n  const smallestDim = imageWidthPixels > imageHeightPixels ? 'height' : 'width';\n  if (smallestDim === 'height') {\n    hotspotHeightPercent = size;\n    const hotspotHeightPixels = hotspotHeightPercent * imageHeightPixels;\n    hotspotWidthPercent = hotspotHeightPixels / imageWidthPixels;\n  } else {\n    hotspotWidthPercent = size;\n    const hotspotWidthPixels = hotspotWidthPercent * imageWidthPixels;\n    hotspotHeightPercent = hotspotWidthPixels / imageHeightPixels;\n  }\n\n  const newHotspot: Hotspot = {\n    uuid: v4(),\n    type: 'rectangle',\n    x: 0.5 - hotspotWidthPercent / 2,\n    y: 0.5 - hotspotHeightPercent / 2,\n    width: hotspotWidthPercent,\n    height: hotspotHeightPercent,\n    correct: true,\n    feedback: '',\n  };\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.hotspots.push(newHotspot);\n  });\n\n  updateTaskDefinition();\n\n  selectHotspot(newHotspot.uuid);\n}\n\nfunction addEllipseHotspot(): void {\n  const imgEl = document.querySelector('.hotspots-image');\n  const imageWidthPixels = imgEl ? imgEl.clientWidth : 10;\n  const imageHeightPixels = imgEl ? imgEl.clientHeight : 10;\n  let hotspotWidthPercent: number, hotspotHeightPercent: number;\n  const size = 0.3;\n  const smallestDim = imageWidthPixels > imageHeightPixels ? 'height' : 'width';\n  if (smallestDim === 'height') {\n    hotspotHeightPercent = size;\n    const hotspotHeightPixels = hotspotHeightPercent * imageHeightPixels;\n    hotspotWidthPercent = hotspotHeightPixels / imageWidthPixels;\n  } else {\n    hotspotWidthPercent = size;\n    const hotspotWidthPixels = hotspotWidthPercent * imageWidthPixels;\n    hotspotHeightPercent = hotspotWidthPixels / imageHeightPixels;\n  }\n\n  const newHotspot: Hotspot = {\n    uuid: v4(),\n    type: 'ellipse',\n    x: 0.5 - hotspotWidthPercent / 2,\n    y: 0.5 - hotspotHeightPercent / 2,\n    width: hotspotWidthPercent,\n    height: hotspotHeightPercent,\n    correct: true,\n    feedback: '',\n  };\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.hotspots.push(newHotspot);\n  });\n\n  updateTaskDefinition();\n\n  selectHotspot(newHotspot.uuid);\n}\n\nfunction removeAllHotspots(): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.hotspots = [];\n  });\n\n  updateTaskDefinition();\n}\n\nfunction deleteImage(): void {\n  // Delete the image and also remove all hotspots\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.image = {\n      type: 'none',\n    };\n    draft.hotspots = [];\n  });\n\n  updateTaskDefinition();\n}\n\nfunction deleteSelectedHotspot(): void {\n  if (!selectedHotspotId.value) {\n    console.error(\n      'Called deleteSelectedHotspot, but selectedHotspotId is undefined'\n    );\n    return;\n  }\n  deleteHotspot(selectedHotspotId.value);\n}\n\nfunction deleteHotspot(id: string): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const index = draft.hotspots.findIndex((hotspot) => hotspot.uuid === id);\n    if (index === -1) {\n      throw new Error('No hotspot with id ' + id + ' found.');\n    }\n    draft.hotspots.splice(index, 1);\n  });\n\n  updateTaskDefinition();\n}\n\nfunction changeHotspotCorrectness(correct: boolean): void {\n  if (!selectedHotspotId.value) {\n    console.error(\n      'Called deleteSelectedHotspot, but selectedHotspotId is undefined'\n    );\n    return;\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find(\n      (hotspot) => hotspot.uuid === selectedHotspotId.value\n    );\n    if (hotspot) {\n      hotspot.correct = correct;\n    }\n  });\n\n  updateTaskDefinition();\n}\n\nfunction setHotspotFeedback(feedback: string): void {\n  console.log('setHotspotFeedback', feedback);\n\n  if (!selectedHotspotId.value) {\n    console.error(\n      'Called setHotspotFeedback, but selectedHotspot is undefined'\n    );\n    return;\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find(\n      (hotspot) => hotspot.uuid === selectedHotspotId.value\n    );\n    if (hotspot) {\n      hotspot.feedback = feedback;\n    }\n  });\n\n  updateTaskDefinition('task.hotspots.feedback' + selectedHotspotId.value);\n}\n\nfunction selectHotspot(id: string): void {\n  selectedHotspotId.value = id;\n}\n\nfunction dragHotspot(\n  dragId: string,\n  hotspotId: string,\n  xFraction: number,\n  yFraction: number\n): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find((h) => h.uuid === hotspotId);\n    if (!hotspot) {\n      throw new Error(`Hotspot with id ${hotspotId} not found`);\n    }\n    hotspot.x = xFraction;\n    hotspot.y = yFraction;\n  });\n\n  updateTaskDefinition(dragId);\n}\n\nfunction resizeHotspot(\n  dragId: string,\n  hotspotId: string,\n  xFraction: number,\n  yFraction: number,\n  width: number,\n  height: number\n): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find((h) => h.uuid === hotspotId);\n    if (!hotspot) {\n      throw new Error(`Hotspot with id ${hotspotId} not found`);\n    }\n    hotspot.x = xFraction;\n    hotspot.y = yFraction;\n    hotspot.width = width;\n    hotspot.height = height;\n  });\n\n  updateTaskDefinition(dragId);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"form\", _hoisted_2, [\n        _createElementVNode(\"fieldset\", null, [\n          _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Find the Hotspots')), 1),\n          (__props.taskDefinition.image.type === 'image')\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                _createElementVNode(\"div\", _hoisted_4, [\n                  _createElementVNode(\"button\", {\n                    onClick: addRectangularHotspot,\n                    type: \"button\",\n                    class: \"hotspot-button\",\n                    title: _unref($gettext)('Rechteckigen Hotspot hinzufgen')\n                  }, _hoisted_7, 8, _hoisted_5),\n                  _createElementVNode(\"button\", {\n                    onClick: addEllipseHotspot,\n                    type: \"button\",\n                    class: \"hotspot-button\",\n                    title: _unref($gettext)('Runden Hotspot hinzufgen')\n                  }, _hoisted_10, 8, _hoisted_8),\n                  _createElementVNode(\"button\", {\n                    onClick: removeAllHotspots,\n                    type: \"button\",\n                    class: \"hotspot-button\"\n                  }, _toDisplayString(_unref($gettext)('Alle Hotspots entfernen')), 1),\n                  _createElementVNode(\"button\", {\n                    onClick: deleteImage,\n                    type: \"button\",\n                    class: \"hotspot-button\"\n                  }, _toDisplayString(_unref($gettext)('Bild lschen')), 1)\n                ]),\n                _createVNode(ImageWithHotspots, {\n                  ref_key: \"imageWithHotspotsRef\",\n                  ref: imageWithHotspotsRef,\n                  hotspots: __props.taskDefinition.hotspots,\n                  image: __props.taskDefinition.image\n                }, null, 8, [\"hotspots\", \"image\"])\n              ]))\n            : (_openBlock(), _createElementBlock(\"label\", _hoisted_11, [\n                _createTextVNode(_toDisplayString(_unref($gettext)('Neues Bild hochladen')) + \" \", 1),\n                _createVNode(FileUpload, {\n                  onFileUploaded: onImageUploaded,\n                  accept: 'image/*'\n                })\n              ]))\n        ]),\n        _createElementVNode(\"fieldset\", _hoisted_12, [\n          _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Einstellungen')), 1),\n          (_unref(numberOfCorrectHotspots))\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                _createElementVNode(\"label\", _hoisted_13, [\n                  _createElementVNode(\"span\", _hoisted_14, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((limitHotspotsToFind).value = $event)),\n                      onChange: updateHotspotsToFindInTaskDefinition,\n                      type: \"checkbox\"\n                    }, null, 544), [\n                      [_vModelCheckbox, limitHotspotsToFind.value]\n                    ]),\n                    _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Anzahl zu findender Hotspots begrenzen auf:')) + \" \", 1),\n                    _withDirectives(_createElementVNode(\"input\", {\n                      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((hotspotsToFind).value = $event)),\n                      style: {\"margin-bottom\":\"0.25em\",\"width\":\"4em\",\"padding\":\"0 0.25em 0 0.25em\"},\n                      disabled: !limitHotspotsToFind.value,\n                      class: _normalizeClass({ 'setting-disabled': !limitHotspotsToFind.value }),\n                      onChange: updateHotspotsToFindInTaskDefinition,\n                      type: \"number\",\n                      min: 1,\n                      max: _unref(numberOfCorrectHotspots)\n                    }, null, 42, _hoisted_15), [\n                      [_vModelText, hotspotsToFind.value]\n                    ])\n                  ])\n                ]),\n                _createElementVNode(\"label\", _hoisted_16, [\n                  _createElementVNode(\"span\", _hoisted_17, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((limitClicks).value = $event)),\n                      onChange: updateAllowedClicksInTaskDefinition,\n                      type: \"checkbox\"\n                    }, null, 544), [\n                      [_vModelCheckbox, limitClicks.value]\n                    ]),\n                    _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Anzahl erlaubter Klicks begrenzen auf: ')) + \" \", 1),\n                    _withDirectives(_createElementVNode(\"input\", {\n                      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((allowedClicks).value = $event)),\n                      style: {\"margin-bottom\":\"0.25em\",\"width\":\"4em\",\"padding\":\"0 0.25em 0 0.25em\"},\n                      disabled: !limitClicks.value,\n                      class: _normalizeClass({ 'setting-disabled': !limitClicks.value }),\n                      onChange: updateAllowedClicksInTaskDefinition,\n                      type: \"number\",\n                      min: \n                  Math.max(\n                    modelTaskDefinition.value.hotspotsToFind\n                      ? modelTaskDefinition.value.hotspotsToFind\n                      : _unref(numberOfCorrectHotspots),\n                    1\n                  )\n                \n                    }, null, 42, _hoisted_18), [\n                      [_vModelText, allowedClicks.value]\n                    ])\n                  ])\n                ])\n              ], 64))\n            : (_openBlock(), _createElementBlock(\"label\", _hoisted_19, _toDisplayString(_unref($gettext)('Fgen Sie mindestens einen korrekten Hotspot hinzu.')), 1))\n        ]),\n        _createElementVNode(\"fieldset\", _hoisted_20, [\n          _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Beschriftungen')), 1),\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_unref($gettext)('Text fr Wiederholen-Button:')) + \" \", 1),\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((modelTaskDefinition.value.strings.retryButton) = $event)),\n              onInput: _cache[5] || (_cache[5] = ($event: any) => (updateTaskDefinition('taskDefinition.strings.retryButton'))),\n              type: \"text\"\n            }, null, 544), [\n              [_vModelText, modelTaskDefinition.value.strings.retryButton]\n            ])\n          ])\n        ]),\n        _createElementVNode(\"fieldset\", _hoisted_21, [\n          _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Feedback')), 1),\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_unref($gettext)(\n              'Ergebnismitteilung (mgliche Variablen :correct und :total):'\n            )) + \" \", 1),\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((modelTaskDefinition.value.strings.resultMessage) = $event)),\n              onInput: _cache[7] || (_cache[7] = ($event: any) => (\n              updateTaskDefinition('taskDefinition.strings.resultMessage')\n            )),\n              type: \"text\"\n            }, null, 544), [\n              [_vModelText, modelTaskDefinition.value.strings.resultMessage]\n            ])\n          ]),\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_unref($gettext)('Feedback, wenn in den leeren Bereich geklickt wurde:')) + \" \", 1),\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((modelTaskDefinition.value.strings.feedbackWhenClickingBackground) = $event)),\n              onInput: _cache[9] || (_cache[9] = ($event: any) => (\n              updateTaskDefinition(\n                'taskDefinition.strings.feedbackWhenClickingBackground'\n              )\n            )),\n              type: \"text\"\n            }, null, 544), [\n              [_vModelText, modelTaskDefinition.value.strings.feedbackWhenClickingBackground]\n            ])\n          ]),\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_unref($gettext)(\n              'Feedback, wenn auf einen bereits gefundenen Hotspot geklickt wurde:'\n            )) + \" \", 1),\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((\n              modelTaskDefinition.value.strings.feedbackWhenClickingHotspotAgain\n            ) = $event)),\n              onInput: _cache[11] || (_cache[11] = ($event: any) => (\n              updateTaskDefinition(\n                'taskDefinition.strings.feedbackWhenClickingHotspotAgain'\n              )\n            )),\n              type: \"text\"\n            }, null, 544), [\n              [_vModelText, \n              modelTaskDefinition.value.strings.feedbackWhenClickingHotspotAgain\n            ]\n            ])\n          ])\n        ])\n      ])\n    ]),\n    (_unref(debug) && true)\n      ? (_openBlock(), _createElementBlock(\"pre\", _hoisted_22, _toDisplayString({\n        numberOfCorrectHotspots: _unref(numberOfCorrectHotspots),\n        limitHotspotsToFind: limitHotspotsToFind.value,\n        hotspotsToFind: hotspotsToFind.value,\n        limitClicks: limitClicks.value,\n        allowedClicks: allowedClicks.value,\n        numberOfClicksAllowed: _unref(numberOfClicksAllowed),\n        numberOfHotspotsToFind: _unref(numberOfHotspotsToFind),\n      }), 1))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\">\n      <fieldset>\n        <legend>{{ $gettext('Find the Hotspots') }}</legend>\n\n        <div\n          v-if=\"taskDefinition.image.type === 'image'\"\n          class=\"find-the-hotspots-editor\"\n        >\n          <div class=\"button-bar\">\n            <button\n              @click=\"addRectangularHotspot\"\n              type=\"button\"\n              class=\"hotspot-button\"\n              :title=\"$gettext('Rechteckigen Hotspot hinzufgen')\"\n            >\n              <svg\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 32 32\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <rect\n                  x=\"1\"\n                  y=\"1\"\n                  width=\"30\"\n                  height=\"30\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  stroke-width=\"2px\"\n                  rx=\"2\"\n                />\n              </svg>\n            </button>\n            <button\n              @click=\"addEllipseHotspot\"\n              type=\"button\"\n              class=\"hotspot-button\"\n              :title=\"$gettext('Runden Hotspot hinzufgen')\"\n            >\n              <svg\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 32 32\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <circle\n                  cx=\"16\"\n                  cy=\"16\"\n                  r=\"15\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  stroke-width=\"2px\"\n                />\n              </svg>\n            </button>\n            <button\n              @click=\"removeAllHotspots\"\n              type=\"button\"\n              class=\"hotspot-button\"\n            >\n              {{ $gettext('Alle Hotspots entfernen') }}\n            </button>\n            <button @click=\"deleteImage\" type=\"button\" class=\"hotspot-button\">\n              {{ $gettext('Bild lschen') }}\n            </button>\n          </div>\n          <ImageWithHotspots\n            ref=\"imageWithHotspotsRef\"\n            :hotspots=\"taskDefinition.hotspots\"\n            :image=\"taskDefinition.image\"\n          />\n        </div>\n\n        <label v-else>\n          {{ $gettext('Neues Bild hochladen') }}\n          <FileUpload @file-uploaded=\"onImageUploaded\" :accept=\"'image/*'\" />\n        </label>\n      </fieldset>\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n        <template v-if=\"numberOfCorrectHotspots\">\n          <label style=\"margin-bottom: 0; width: fit-content\">\n            <span style=\"display: flex; align-items: center; gap: 0.25em\">\n              <input\n                v-model=\"limitHotspotsToFind\"\n                @change=\"updateHotspotsToFindInTaskDefinition\"\n                type=\"checkbox\"\n              />\n              {{ $gettext('Anzahl zu findender Hotspots begrenzen auf:') }}\n              <input\n                v-model=\"hotspotsToFind\"\n                style=\"\n                  margin-bottom: 0.25em;\n                  width: 4em;\n                  padding: 0 0.25em 0 0.25em;\n                \"\n                :disabled=\"!limitHotspotsToFind\"\n                :class=\"{ 'setting-disabled': !limitHotspotsToFind }\"\n                @change=\"updateHotspotsToFindInTaskDefinition\"\n                type=\"number\"\n                :min=\"1\"\n                :max=\"numberOfCorrectHotspots\"\n              />\n            </span>\n          </label>\n\n          <label style=\"width: fit-content\">\n            <span style=\"display: flex; align-items: center; gap: 0.25em\">\n              <input\n                v-model=\"limitClicks\"\n                @change=\"updateAllowedClicksInTaskDefinition\"\n                type=\"checkbox\"\n              />\n              {{ $gettext('Anzahl erlaubter Klicks begrenzen auf: ') }}\n              <input\n                v-model=\"allowedClicks\"\n                style=\"\n                  margin-bottom: 0.25em;\n                  width: 4em;\n                  padding: 0 0.25em 0 0.25em;\n                \"\n                :disabled=\"!limitClicks\"\n                :class=\"{ 'setting-disabled': !limitClicks }\"\n                @change=\"updateAllowedClicksInTaskDefinition\"\n                type=\"number\"\n                :min=\"\n                  Math.max(\n                    modelTaskDefinition.hotspotsToFind\n                      ? modelTaskDefinition.hotspotsToFind\n                      : numberOfCorrectHotspots,\n                    1\n                  )\n                \"\n              />\n            </span>\n          </label>\n        </template>\n        <label v-else>{{\n          $gettext('Fgen Sie mindestens einen korrekten Hotspot hinzu.')\n        }}</label>\n      </fieldset>\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label>\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Feedback') }}</legend>\n\n        <label>\n          {{\n            $gettext(\n              'Ergebnismitteilung (mgliche Variablen :correct und :total):'\n            )\n          }}\n          <input\n            v-model=\"modelTaskDefinition.strings.resultMessage\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.resultMessage')\n            \"\n            type=\"text\"\n          />\n        </label>\n\n        <label>\n          {{ $gettext('Feedback, wenn in den leeren Bereich geklickt wurde:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.feedbackWhenClickingBackground\"\n            @input=\"\n              updateTaskDefinition(\n                'taskDefinition.strings.feedbackWhenClickingBackground'\n              )\n            \"\n            type=\"text\"\n          />\n        </label>\n\n        <label>\n          {{\n            $gettext(\n              'Feedback, wenn auf einen bereits gefundenen Hotspot geklickt wurde:'\n            )\n          }}\n          <input\n            v-model=\"\n              modelTaskDefinition.strings.feedbackWhenClickingHotspotAgain\n            \"\n            @input=\"\n              updateTaskDefinition(\n                'taskDefinition.strings.feedbackWhenClickingHotspotAgain'\n              )\n            \"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n    </form>\n  </div>\n  <pre\n    v-if=\"debug && true\"\n    :style=\"{ flexBasis: '50%', flexGrow: 0, flexShrink: 0 }\"\n    >{{\n      {\n        numberOfCorrectHotspots,\n        limitHotspotsToFind,\n        hotspotsToFind,\n        limitClicks,\n        allowedClicks,\n        numberOfClicksAllowed,\n        numberOfHotspotsToFind,\n      }\n    }}</pre\n  >\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  inject,\n  PropType,\n  provide,\n  ref,\n  defineProps,\n  watch,\n  computed,\n} from 'vue';\nimport FileUpload from '@/components/FileUpload.vue';\nimport produce from 'immer';\nimport { v4 } from 'uuid';\nimport { FileRef } from '@/routes/jsonApi';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { FindTheHotspotsTask, Hotspot } from '@/models/FindTheHotspotsTask';\nimport { findTheHotspotsEditorStateSymbol } from '@/components/findTheHotspots/findTheHotspotsEditorState';\nimport ImageWithHotspots from '@/components/findTheHotspots/ImageWithHotspots.vue';\nimport { cloneDeep } from 'lodash';\nimport { $gettext } from '@/language/gettext';\n\nconst taskEditor = inject<TaskEditorState>(taskEditorStateSymbol);\n\nconst props = defineProps({\n  taskDefinition: {\n    type: Object as PropType<FindTheHotspotsTask>,\n    required: true,\n  },\n});\n\nconst debug = window.STUDIP.LernmoduleVueJS.LERNMODULE_DEBUG;\n\n// State\nconst modelTaskDefinition = ref<FindTheHotspotsTask>(\n  cloneDeep(props.taskDefinition)\n);\nconst selectedHotspotId = ref<string | undefined>(undefined);\nconst limitHotspotsToFind = ref<boolean>(false);\nconst hotspotsToFind = ref<number | null>(null);\nconst limitClicks = ref<boolean>(false);\nconst allowedClicks = ref<number | null>(null);\nconst imageWithHotspotsRef = ref<\n  InstanceType<typeof ImageWithHotspots> | undefined\n>();\n\nprovide(findTheHotspotsEditorStateSymbol, {\n  selectedHotspotId,\n  selectHotspot,\n  deleteSelectedHotspot,\n  changeHotspotCorrectness,\n  setHotspotFeedback,\n  dragHotspot,\n  resizeHotspot,\n});\n\n// Computed properties\nconst numberOfCorrectHotspots = computed(\n  () =>\n    modelTaskDefinition.value.hotspots.filter((hotspot) => hotspot.correct)\n      .length\n);\n\nconst numberOfHotspotsToFind = computed(\n  () => modelTaskDefinition.value.hotspotsToFind\n);\n\nconst numberOfClicksAllowed = computed(\n  () => modelTaskDefinition.value.allowedClicks\n);\n\n// Watchers\nwatch(\n  () => props.taskDefinition,\n  (newTaskDefinition, oldTaskDefinition) => {\n    modelTaskDefinition.value = cloneDeep(newTaskDefinition);\n  },\n  { deep: true }\n);\n\nwatch(numberOfCorrectHotspots, (newValue) => {\n  // Reset settings if numberOfCorrectHotspots changes\n  limitHotspotsToFind.value = false;\n  limitClicks.value = false;\n  updateHotspotsToFindInTaskDefinition();\n});\n\nfunction updateTaskDefinition(undoBatch?: unknown): void {\n  // Synchronize state modelTaskDefinition -> taskDefinition.\n  console.log('update task definition');\n  taskEditor!.performEdit({\n    newTaskDefinition: cloneDeep(modelTaskDefinition.value),\n    undoBatch: undoBatch ?? {},\n  });\n}\n\nfunction updateAllowedClicksInTaskDefinition(): void {\n  if (!limitClicks.value) {\n    // If the setting is not checked we set the allowedClicks value to 0 which means unlimited clicks\n    allowedClicks.value = null;\n    modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n      draft.allowedClicks = 0;\n    });\n  } else {\n    // If the setting is checked we need to make sure we set a valid value for the limit\n    if (\n      allowedClicks.value &&\n      allowedClicks.value >=\n        (numberOfHotspotsToFind.value\n          ? numberOfHotspotsToFind.value\n          : numberOfCorrectHotspots.value)\n    ) {\n      // We already have a valid value, set it in the taskDefinition\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.allowedClicks = allowedClicks.value as number;\n        }\n      );\n    } else {\n      // The value in allowedClicks is not valid, make it valid\n      allowedClicks.value = Math.max(\n        numberOfHotspotsToFind.value\n          ? numberOfHotspotsToFind.value\n          : numberOfCorrectHotspots.value,\n        1\n      );\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.allowedClicks = allowedClicks.value as number;\n        }\n      );\n    }\n  }\n\n  updateTaskDefinition();\n}\n\nfunction updateHotspotsToFindInTaskDefinition(): void {\n  if (!limitHotspotsToFind.value) {\n    // If the setting is not checked we set the hotspotsToFind value to 0 which means all\n    hotspotsToFind.value = null;\n    modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n      draft.hotspotsToFind = 0;\n    });\n  } else {\n    // If the setting is checked we need to make sure we set a valid value for the limit\n    if (\n      hotspotsToFind.value &&\n      hotspotsToFind.value <= numberOfCorrectHotspots.value\n    ) {\n      // We already have a valid value, let's set it in the taskDefinition\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.hotspotsToFind = hotspotsToFind.value\n            ? hotspotsToFind.value\n            : numberOfCorrectHotspots.value;\n        }\n      );\n    } else {\n      // The value in hotspotsToFind is not valid, let's make it valid\n      hotspotsToFind.value = Math.max(numberOfCorrectHotspots.value, 1);\n      modelTaskDefinition.value = produce(\n        modelTaskDefinition.value,\n        (draft) => {\n          draft.hotspotsToFind = hotspotsToFind.value\n            ? hotspotsToFind.value\n            : numberOfCorrectHotspots.value;\n        }\n      );\n    }\n  }\n\n  updateTaskDefinition();\n\n  // If we changed the number of hotspotsToFind we also need to update\n  // the allowed clicks limit to make sure the task is still valid\n  updateAllowedClicksInTaskDefinition();\n}\n\nfunction onImageUploaded(file: FileRef): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.image = {\n      uuid: v4(),\n      type: 'image',\n      file_id: file.id,\n      altText: '',\n    };\n  });\n\n  updateTaskDefinition();\n}\n\nfunction addRectangularHotspot(): void {\n  const imgEl = document.querySelector('.hotspots-image');\n  const imageWidthPixels = imgEl ? imgEl.clientWidth : 10;\n  const imageHeightPixels = imgEl ? imgEl.clientHeight : 10;\n  let hotspotWidthPercent: number, hotspotHeightPercent: number;\n  const size = 0.3;\n  const smallestDim = imageWidthPixels > imageHeightPixels ? 'height' : 'width';\n  if (smallestDim === 'height') {\n    hotspotHeightPercent = size;\n    const hotspotHeightPixels = hotspotHeightPercent * imageHeightPixels;\n    hotspotWidthPercent = hotspotHeightPixels / imageWidthPixels;\n  } else {\n    hotspotWidthPercent = size;\n    const hotspotWidthPixels = hotspotWidthPercent * imageWidthPixels;\n    hotspotHeightPercent = hotspotWidthPixels / imageHeightPixels;\n  }\n\n  const newHotspot: Hotspot = {\n    uuid: v4(),\n    type: 'rectangle',\n    x: 0.5 - hotspotWidthPercent / 2,\n    y: 0.5 - hotspotHeightPercent / 2,\n    width: hotspotWidthPercent,\n    height: hotspotHeightPercent,\n    correct: true,\n    feedback: '',\n  };\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.hotspots.push(newHotspot);\n  });\n\n  updateTaskDefinition();\n\n  selectHotspot(newHotspot.uuid);\n}\n\nfunction addEllipseHotspot(): void {\n  const imgEl = document.querySelector('.hotspots-image');\n  const imageWidthPixels = imgEl ? imgEl.clientWidth : 10;\n  const imageHeightPixels = imgEl ? imgEl.clientHeight : 10;\n  let hotspotWidthPercent: number, hotspotHeightPercent: number;\n  const size = 0.3;\n  const smallestDim = imageWidthPixels > imageHeightPixels ? 'height' : 'width';\n  if (smallestDim === 'height') {\n    hotspotHeightPercent = size;\n    const hotspotHeightPixels = hotspotHeightPercent * imageHeightPixels;\n    hotspotWidthPercent = hotspotHeightPixels / imageWidthPixels;\n  } else {\n    hotspotWidthPercent = size;\n    const hotspotWidthPixels = hotspotWidthPercent * imageWidthPixels;\n    hotspotHeightPercent = hotspotWidthPixels / imageHeightPixels;\n  }\n\n  const newHotspot: Hotspot = {\n    uuid: v4(),\n    type: 'ellipse',\n    x: 0.5 - hotspotWidthPercent / 2,\n    y: 0.5 - hotspotHeightPercent / 2,\n    width: hotspotWidthPercent,\n    height: hotspotHeightPercent,\n    correct: true,\n    feedback: '',\n  };\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.hotspots.push(newHotspot);\n  });\n\n  updateTaskDefinition();\n\n  selectHotspot(newHotspot.uuid);\n}\n\nfunction removeAllHotspots(): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.hotspots = [];\n  });\n\n  updateTaskDefinition();\n}\n\nfunction deleteImage(): void {\n  // Delete the image and also remove all hotspots\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.image = {\n      type: 'none',\n    };\n    draft.hotspots = [];\n  });\n\n  updateTaskDefinition();\n}\n\nfunction deleteSelectedHotspot(): void {\n  if (!selectedHotspotId.value) {\n    console.error(\n      'Called deleteSelectedHotspot, but selectedHotspotId is undefined'\n    );\n    return;\n  }\n  deleteHotspot(selectedHotspotId.value);\n}\n\nfunction deleteHotspot(id: string): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const index = draft.hotspots.findIndex((hotspot) => hotspot.uuid === id);\n    if (index === -1) {\n      throw new Error('No hotspot with id ' + id + ' found.');\n    }\n    draft.hotspots.splice(index, 1);\n  });\n\n  updateTaskDefinition();\n}\n\nfunction changeHotspotCorrectness(correct: boolean): void {\n  if (!selectedHotspotId.value) {\n    console.error(\n      'Called deleteSelectedHotspot, but selectedHotspotId is undefined'\n    );\n    return;\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find(\n      (hotspot) => hotspot.uuid === selectedHotspotId.value\n    );\n    if (hotspot) {\n      hotspot.correct = correct;\n    }\n  });\n\n  updateTaskDefinition();\n}\n\nfunction setHotspotFeedback(feedback: string): void {\n  console.log('setHotspotFeedback', feedback);\n\n  if (!selectedHotspotId.value) {\n    console.error(\n      'Called setHotspotFeedback, but selectedHotspot is undefined'\n    );\n    return;\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find(\n      (hotspot) => hotspot.uuid === selectedHotspotId.value\n    );\n    if (hotspot) {\n      hotspot.feedback = feedback;\n    }\n  });\n\n  updateTaskDefinition('task.hotspots.feedback' + selectedHotspotId.value);\n}\n\nfunction selectHotspot(id: string): void {\n  selectedHotspotId.value = id;\n}\n\nfunction dragHotspot(\n  dragId: string,\n  hotspotId: string,\n  xFraction: number,\n  yFraction: number\n): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find((h) => h.uuid === hotspotId);\n    if (!hotspot) {\n      throw new Error(`Hotspot with id ${hotspotId} not found`);\n    }\n    hotspot.x = xFraction;\n    hotspot.y = yFraction;\n  });\n\n  updateTaskDefinition(dragId);\n}\n\nfunction resizeHotspot(\n  dragId: string,\n  hotspotId: string,\n  xFraction: number,\n  yFraction: number,\n  width: number,\n  height: number\n): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    const hotspot = draft.hotspots.find((h) => h.uuid === hotspotId);\n    if (!hotspot) {\n      throw new Error(`Hotspot with id ${hotspotId} not found`);\n    }\n    hotspot.x = xFraction;\n    hotspot.y = yFraction;\n    hotspot.width = width;\n    hotspot.height = height;\n  });\n\n  updateTaskDefinition(dragId);\n}\n</script>\n\n<style scoped>\n.find-the-hotspots-editor {\n  border: 1px solid #ccc;\n}\n\n.button-bar {\n  display: flex;\n  gap: 0.5em;\n  padding: 0.25em;\n  border-bottom: 1px solid #ccc;\n  background: #f5f5f5;\n}\n\n.hotspot-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #444;\n\n  cursor: pointer;\n\n  background: linear-gradient(to bottom, #fff 0, #f2f2f2 100%);\n  border: 1px solid #ccc;\n  border-radius: 0.25em;\n  padding: 0.75em;\n\n  &:hover {\n    border: 1px solid #999;\n  }\n\n  &:nth-child(2) {\n    margin-right: auto;\n  }\n}\n</style>\n","import script from \"./FindTheHotspotsEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FindTheHotspotsEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FindTheHotspotsEditor.vue?vue&type=style&index=0&id=46a54772&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-46a54772\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, unref as _unref, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-bb237ee8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { style: {\"position\":\"relative\"} }\nconst _hoisted_3 = { class: \"feedback-and-button-container\" }\nconst _hoisted_4 = { class: \"feedback-container\" }\nconst _hoisted_5 = { class: \"feedback-text\" }\nconst _hoisted_6 = { class: \"button-panel\" }\nconst _hoisted_7 = [\"textContent\"]\n\nimport {\n  PropType,\n  computed,\n  provide,\n  ref,\n  watch,\n} from 'vue';\nimport { FindTheHotspotsTask } from '@/models/FindTheHotspotsTask';\nimport ImageWithHotspots from '@/components/findTheHotspots/ImageWithHotspots.vue';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\nimport { findTheHotspotsViewerStateSymbol } from '@/components/findTheHotspots/findTheHotspotsViewerState';\n\ninterface Click {\n  x: number;\n  y: number;\n  hotspot: string;\n  correct: boolean;\n  feedback: string;\n}\n\n// State\n\nexport default /*#__PURE__*/_defineComponent({\n  props: {\n  task: {\n    type: Object as PropType<FindTheHotspotsTask>,\n    required: true,\n  },\n},\n  emits: ['updateAttempt'],\n  setup(__props) {\n\nconst props = __props\n\n\n\nprovide(findTheHotspotsViewerStateSymbol, {\n  clickHotspot,\n  clickBackground,\n});\n\nwatch(\n  () => props.task,\n  () => {\n    resetViewerState();\n  },\n  { deep: true }\n);\n\n\n\nconst clickHistory = ref<Click[]>([]);\nconst points = ref<number>(0);\nconst clicks = ref<number>(0);\nconst clickedHotspots = ref<string[]>([]);\n\n// Computed properties\nconst showResults = computed(() => clicks.value > 0);\n\nconst maxPoints = computed(() => {\n  if (props.task?.hotspotsToFind > 0) {\n    return props.task?.hotspotsToFind;\n  } else {\n    return props.task.hotspots.filter((hotspot) => hotspot.correct).length;\n  }\n});\n\nconst editable = computed(() =>\n  props.task.allowedClicks > 0\n    ? points.value < maxPoints.value && clicks.value < props.task?.allowedClicks\n    : points.value < maxPoints.value\n);\n\nconst resultMessage = computed(() => {\n  let result = props.task.strings.resultMessage.replace(\n    ':correct',\n    points.value.toString()\n  );\n  result = result.replace(':total', maxPoints.value.toString());\n\n  return result;\n});\n\nconst feedback = computed(() => {\n  // Returns the most recent click feedback\n  return clickHistory.value.at(-1)?.feedback;\n});\n\nconst showRetryButton = computed(() => {\n  return !editable.value;\n});\n\n// Functions\nfunction resetViewerState(): void {\n  points.value = 0;\n  clicks.value = 0;\n  clickedHotspots.value = [];\n  clickHistory.value = [];\n}\n\nfunction clickHotspot(id: string | undefined, x: number, y: number): void {\n  if (!editable.value) return;\n\n  console.log('Viewer: Clicked hotspot with id', id);\n  if (!id) {\n    console.error('No id for clicked hotspot.');\n    return;\n  }\n\n  const hotspot = props.task.hotspots.find((hotspot) => hotspot.uuid === id);\n  if (!hotspot) {\n    console.error('No hotspot for given id:', id);\n    return;\n  }\n\n  if (clickedHotspots.value.includes(id) && hotspot.correct) {\n    const index = clickHistory.value.findIndex((click) => click.hotspot === id);\n    if (index !== -1) {\n      const click = clickHistory.value[index];\n      click.x = x;\n      click.y = y;\n      click.feedback = props.task.strings.feedbackWhenClickingHotspotAgain;\n      clickHistory.value.splice(index, 1);\n      clickHistory.value.push(click);\n    }\n  } else {\n    clickedHotspots.value?.push(id);\n    clicks.value++;\n\n    if (hotspot.correct) {\n      points.value++;\n    }\n\n    const click = {\n      x: x,\n      y: y,\n      hotspot: id,\n      correct: hotspot.correct,\n      feedback: hotspot.feedback,\n    };\n    clickHistory.value.push(click);\n  }\n}\n\nfunction clickBackground(x: number, y: number): void {\n  if (!editable.value) return;\n  console.log('Viewer: Clicked background');\n  clicks.value++;\n\n  const click = {\n    x: x,\n    y: y,\n    hotspot: '',\n    correct: false,\n    feedback: props.task?.strings.feedbackWhenClickingBackground,\n  };\n  clickHistory.value.push(click);\n}\n\nfunction onClickRetry(): void {\n  resetViewerState();\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(ImageWithHotspots, {\n        hotspots: __props.task.hotspots,\n        image: __props.task.image\n      }, null, 8, [\"hotspots\", \"image\"]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(clickHistory.value, (click, index) => {\n        return (_openBlock(), _createElementBlock(\"span\", {\n          key: `${click.x}-${click.y}`,\n          class: _normalizeClass([\"click-indicator\", {\n          pulse: index === clickHistory.value.length - 1,\n          correct: click.correct,\n          incorrect: !click.correct,\n        }]),\n          style: _normalizeStyle({\n          left: `${click.x - 16}px`,\n          top: `${click.y - 16}px`,\n        })\n        }, _toDisplayString(click.correct ? '' : ''), 7))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_unref(showResults))\n          ? (_openBlock(), _createBlock(FeedbackElement, {\n              key: 0,\n              achievedPoints: points.value,\n              maxPoints: _unref(maxPoints),\n              \"result-message\": _unref(resultMessage)\n            }, null, 8, [\"achievedPoints\", \"maxPoints\", \"result-message\"]))\n          : _createCommentVNode(\"\", true),\n        _createElementVNode(\"div\", _hoisted_5, _toDisplayString(_unref(feedback)), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_unref(showRetryButton))\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              textContent: _toDisplayString(__props.task.strings.retryButton),\n              onClick: onClickRetry,\n              type: \"button\",\n              class: \"stud5p-button\"\n            }, null, 8, _hoisted_7))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"stud5p-task\">\n    <div style=\"position: relative\">\n      <ImageWithHotspots :hotspots=\"task.hotspots\" :image=\"task.image\" />\n      <span\n        v-for=\"(click, index) in clickHistory\"\n        :key=\"`${click.x}-${click.y}`\"\n        class=\"click-indicator\"\n        :class=\"{\n          pulse: index === clickHistory.length - 1,\n          correct: click.correct,\n          incorrect: !click.correct,\n        }\"\n        :style=\"{\n          left: `${click.x - 16}px`,\n          top: `${click.y - 16}px`,\n        }\"\n      >\n        {{ click.correct ? '' : '' }}\n      </span>\n    </div>\n    <div class=\"feedback-and-button-container\">\n      <div class=\"feedback-container\">\n        <FeedbackElement\n          v-if=\"showResults\"\n          :achievedPoints=\"points\"\n          :maxPoints=\"maxPoints\"\n          :result-message=\"resultMessage\"\n        />\n        <div class=\"feedback-text\">{{ feedback }}</div>\n      </div>\n\n      <div class=\"button-panel\">\n        <button\n          v-if=\"showRetryButton\"\n          v-text=\"task.strings.retryButton\"\n          @click=\"onClickRetry\"\n          type=\"button\"\n          class=\"stud5p-button\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  defineProps,\n  PropType,\n  computed,\n  provide,\n  ref,\n  defineEmits,\n  watch,\n} from 'vue';\nimport { FindTheHotspotsTask } from '@/models/FindTheHotspotsTask';\nimport ImageWithHotspots from '@/components/findTheHotspots/ImageWithHotspots.vue';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\nimport { findTheHotspotsViewerStateSymbol } from '@/components/findTheHotspots/findTheHotspotsViewerState';\n\nconst props = defineProps({\n  task: {\n    type: Object as PropType<FindTheHotspotsTask>,\n    required: true,\n  },\n});\n\nprovide(findTheHotspotsViewerStateSymbol, {\n  clickHotspot,\n  clickBackground,\n});\n\nwatch(\n  () => props.task,\n  () => {\n    resetViewerState();\n  },\n  { deep: true }\n);\n\ndefineEmits(['updateAttempt']);\n\ninterface Click {\n  x: number;\n  y: number;\n  hotspot: string;\n  correct: boolean;\n  feedback: string;\n}\n\n// State\nconst clickHistory = ref<Click[]>([]);\nconst points = ref<number>(0);\nconst clicks = ref<number>(0);\nconst clickedHotspots = ref<string[]>([]);\n\n// Computed properties\nconst showResults = computed(() => clicks.value > 0);\n\nconst maxPoints = computed(() => {\n  if (props.task?.hotspotsToFind > 0) {\n    return props.task?.hotspotsToFind;\n  } else {\n    return props.task.hotspots.filter((hotspot) => hotspot.correct).length;\n  }\n});\n\nconst editable = computed(() =>\n  props.task.allowedClicks > 0\n    ? points.value < maxPoints.value && clicks.value < props.task?.allowedClicks\n    : points.value < maxPoints.value\n);\n\nconst resultMessage = computed(() => {\n  let result = props.task.strings.resultMessage.replace(\n    ':correct',\n    points.value.toString()\n  );\n  result = result.replace(':total', maxPoints.value.toString());\n\n  return result;\n});\n\nconst feedback = computed(() => {\n  // Returns the most recent click feedback\n  return clickHistory.value.at(-1)?.feedback;\n});\n\nconst showRetryButton = computed(() => {\n  return !editable.value;\n});\n\n// Functions\nfunction resetViewerState(): void {\n  points.value = 0;\n  clicks.value = 0;\n  clickedHotspots.value = [];\n  clickHistory.value = [];\n}\n\nfunction clickHotspot(id: string | undefined, x: number, y: number): void {\n  if (!editable.value) return;\n\n  console.log('Viewer: Clicked hotspot with id', id);\n  if (!id) {\n    console.error('No id for clicked hotspot.');\n    return;\n  }\n\n  const hotspot = props.task.hotspots.find((hotspot) => hotspot.uuid === id);\n  if (!hotspot) {\n    console.error('No hotspot for given id:', id);\n    return;\n  }\n\n  if (clickedHotspots.value.includes(id) && hotspot.correct) {\n    const index = clickHistory.value.findIndex((click) => click.hotspot === id);\n    if (index !== -1) {\n      const click = clickHistory.value[index];\n      click.x = x;\n      click.y = y;\n      click.feedback = props.task.strings.feedbackWhenClickingHotspotAgain;\n      clickHistory.value.splice(index, 1);\n      clickHistory.value.push(click);\n    }\n  } else {\n    clickedHotspots.value?.push(id);\n    clicks.value++;\n\n    if (hotspot.correct) {\n      points.value++;\n    }\n\n    const click = {\n      x: x,\n      y: y,\n      hotspot: id,\n      correct: hotspot.correct,\n      feedback: hotspot.feedback,\n    };\n    clickHistory.value.push(click);\n  }\n}\n\nfunction clickBackground(x: number, y: number): void {\n  if (!editable.value) return;\n  console.log('Viewer: Clicked background');\n  clicks.value++;\n\n  const click = {\n    x: x,\n    y: y,\n    hotspot: '',\n    correct: false,\n    feedback: props.task?.strings.feedbackWhenClickingBackground,\n  };\n  clickHistory.value.push(click);\n}\n\nfunction onClickRetry(): void {\n  resetViewerState();\n}\n</script>\n\n<style scoped>\n.click-indicator {\n  position: absolute;\n  cursor: default;\n\n  width: 32px;\n  height: 32px;\n  line-height: 32px;\n  font-size: 16px;\n  border-radius: 50%;\n  text-align: center;\n  pointer-events: none;\n\n  box-shadow: 0 0 0.25em 0 rgba(0, 0, 0, 0.5);\n\n  &.correct {\n    color: #39692e;\n    background: #d1e2ce;\n  }\n\n  &.incorrect {\n    color: #c33f62;\n    background: #e6ced1;\n  }\n}\n\n@keyframes pulse {\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n.pulse {\n  animation: pulse 0.25s ease-in-out 0s 1;\n}\n\n.feedback-text {\n  font-size: 1.25em;\n  font-weight: bold;\n  color: #1a73d9;\n}\n\n.feedback-container {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 0.75em;\n}\n</style>\n","import script from \"./FindTheHotspotsViewer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FindTheHotspotsViewer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FindTheHotspotsViewer.vue?vue&type=style&index=0&id=bb237ee8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bb237ee8\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4179f505\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"image-and-hotspots-container\",\n  ref: \"root\"\n}\nconst _hoisted_2 = [\"id\", \"onClick\", \"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_3 = [\"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_4 = {\n  key: 0,\n  style: { flexBasis: '50%', flexGrow: 0, flexShrink: 0 }\n}\nconst _hoisted_5 = {\n  key: 1,\n  style: { flexBasis: '50%', flexGrow: 0, flexShrink: 0 }\n}\nconst _hoisted_6 = { style: {\"display\":\"flex\",\"margin-bottom\":\"0\",\"align-items\":\"flex-start\"} }\nconst _hoisted_7 = { style: {\"display\":\"flex\",\"margin-bottom\":\"0\",\"align-items\":\"center\"} }\nconst _hoisted_8 = [\"checked\"]\nconst _hoisted_9 = [\"title\"]\nconst _hoisted_10 = [\"value\", \"title\"]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"arrow\",\n  \"data-popper-arrow\": \"\"\n}, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_LazyImage = _resolveComponent(\"LazyImage\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"image-and-hotspots-container-wrapper\", {\n      debug: _ctx.debug,\n    }]),\n    ref: \"wrapper\"\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.hotspots, (hotspot) => {\n        return (_openBlock(), _createElementBlock(\"button\", {\n          key: hotspot.uuid,\n          type: \"button\",\n          class: _normalizeClass([\"hotspot\", {\n          'invisible-hotspot': !_ctx.editor,\n          selected: _ctx.editor?.selectedHotspotId.value === hotspot.uuid,\n        }]),\n          id: `hotspot-${_ctx.uid}-${hotspot.uuid}`,\n          style: _normalizeStyle(_ctx.getHotspotStyle(hotspot)),\n          onClick: ($event: any) => (_ctx.onClickHotspot($event, hotspot)),\n          onPointerdown: ($event: any) => (_ctx.onPointerdownHotspot($event, hotspot)),\n          onPointermove: ($event: any) => (_ctx.onPointermoveHotspot($event, hotspot)),\n          onPointerup: ($event: any) => (_ctx.onPointerupHotspot($event, hotspot))\n        }, [\n          (_ctx.editor)\n            ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(_ctx.resizeHandles, (handle) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  key: handle,\n                  class: _normalizeClass([\"resize-handle\", handle]),\n                  onPointerdown: _withModifiers(($event: any) => (\n              _ctx.onPointerdownResizeHandle($event, handle, hotspot)\n            ), [\"stop\"]),\n                  onPointermove: _withModifiers(($event: any) => (\n              _ctx.onPointermoveResizeHandle($event, handle, hotspot)\n            ), [\"stop\"]),\n                  onPointerup: _withModifiers(($event: any) => (_ctx.onPointerupResizeHandle($event, handle, hotspot)), [\"stop\"])\n                }, null, 42, _hoisted_3))\n              }), 128))\n            : _createCommentVNode(\"\", true)\n        ], 46, _hoisted_2))\n      }), 128)),\n      _createVNode(_component_LazyImage, {\n        src: _ctx.fileIdToUrl(_ctx.image.file_id),\n        alt: _ctx.image.altText,\n        onClick: _ctx.onClickBackground,\n        class: \"hotspots-image\"\n      }, null, 8, [\"src\", \"alt\", \"onClick\"])\n    ], 512),\n    (_ctx.debug && _ctx.editor)\n      ? (_openBlock(), _createElementBlock(\"pre\", _hoisted_4, _toDisplayString({ selectedHotspot: _ctx.selectedHotspot, dragState: _ctx.dragState }), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.debug && _ctx.viewer)\n      ? (_openBlock(), _createElementBlock(\"pre\", _hoisted_5, _toDisplayString({ selectedHotspot: _ctx.selectedHotspot, dragState: _ctx.dragState }), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.editor)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 2,\n          ref: \"selectedHotspotTooltip\",\n          class: _normalizeClass([\"selected-hotspot-tooltip\", {\n        hidden: !_ctx.selectedHotspot,\n      }])\n        }, [\n          _createElementVNode(\"div\", _hoisted_6, [\n            _createElementVNode(\"label\", _hoisted_7, [\n              _createElementVNode(\"input\", {\n                checked: _ctx.selectedHotspot?.correct,\n                type: \"checkbox\",\n                onChange: _cache[0] || (_cache[0] = ($event: any) => (_ctx.editor!.changeHotspotCorrectness($event.target.checked)))\n              }, null, 40, _hoisted_8),\n              _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Korrekt')), 1)\n            ]),\n            _createElementVNode(\"button\", {\n              type: \"button\",\n              class: \"small-button trash\",\n              style: {\"margin-left\":\"auto\"},\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.editor!.deleteSelectedHotspot())),\n              title: _ctx.$gettext('Diesen Hotspot lschen')\n            }, null, 8, _hoisted_9)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_ctx.$gettext('Feedback:')) + \" \", 1),\n            _createElementVNode(\"input\", {\n              value: (_ctx.selectedHotspot as Hotspot)?.feedback,\n              onInput: _cache[2] || (_cache[2] = ($event: any) => (_ctx.editor!.setHotspotFeedback($event.target.value))),\n              type: \"text\",\n              title: _ctx.$gettext('Feedback bei Klick auf diesen Hotspot')\n            }, null, 40, _hoisted_10)\n          ]),\n          _hoisted_11\n        ], 2))\n      : _createCommentVNode(\"\", true)\n  ], 2))\n}","<template>\n  <div\n    class=\"image-and-hotspots-container-wrapper\"\n    :class=\"{\n      debug: debug,\n    }\"\n    ref=\"wrapper\"\n  >\n    <div class=\"image-and-hotspots-container\" ref=\"root\">\n      <!--  In the editor, hotspots are visible. In the viewer, they should be\n      invisible. We can tell whether we are in the editor or the viewer based\n      on whether the value of the injected field 'editor' is defined. -->\n      <button\n        v-for=\"hotspot in hotspots\"\n        :key=\"hotspot.uuid\"\n        type=\"button\"\n        class=\"hotspot\"\n        :class=\"{\n          'invisible-hotspot': !editor,\n          selected: editor?.selectedHotspotId.value === hotspot.uuid,\n        }\"\n        :id=\"`hotspot-${uid}-${hotspot.uuid}`\"\n        :style=\"getHotspotStyle(hotspot)\"\n        @click=\"onClickHotspot($event, hotspot)\"\n        @pointerdown=\"onPointerdownHotspot($event, hotspot)\"\n        @pointermove=\"onPointermoveHotspot($event, hotspot)\"\n        @pointerup=\"onPointerupHotspot($event, hotspot)\"\n      >\n        <template v-if=\"editor\">\n          <div\n            v-for=\"handle in resizeHandles\"\n            :key=\"handle\"\n            class=\"resize-handle\"\n            :class=\"handle\"\n            @pointerdown.stop=\"\n              onPointerdownResizeHandle($event, handle, hotspot)\n            \"\n            @pointermove.stop=\"\n              onPointermoveResizeHandle($event, handle, hotspot)\n            \"\n            @pointerup.stop=\"onPointerupResizeHandle($event, handle, hotspot)\"\n          />\n        </template>\n      </button>\n      <LazyImage\n        :src=\"fileIdToUrl(image.file_id)\"\n        :alt=\"image.altText\"\n        @click=\"onClickBackground\"\n        class=\"hotspots-image\"\n      />\n    </div>\n    <pre\n      v-if=\"debug && editor\"\n      :style=\"{ flexBasis: '50%', flexGrow: 0, flexShrink: 0 }\"\n      >{{ { selectedHotspot, dragState } }}</pre\n    >\n    <pre\n      v-if=\"debug && viewer\"\n      :style=\"{ flexBasis: '50%', flexGrow: 0, flexShrink: 0 }\"\n      >{{ { selectedHotspot, dragState } }}</pre\n    >\n    <div\n      ref=\"selectedHotspotTooltip\"\n      v-if=\"editor\"\n      class=\"selected-hotspot-tooltip\"\n      :class=\"{\n        hidden: !selectedHotspot,\n      }\"\n    >\n      <div style=\"display: flex; margin-bottom: 0; align-items: flex-start\">\n        <label style=\"display: flex; margin-bottom: 0; align-items: center\">\n          <input\n            :checked=\"selectedHotspot?.correct\"\n            type=\"checkbox\"\n            @change=\"editor!.changeHotspotCorrectness($event.target.checked)\"\n          />\n          {{ $gettext('Korrekt') }}\n        </label>\n        <button\n          type=\"button\"\n          class=\"small-button trash\"\n          style=\"margin-left: auto\"\n          @click=\"editor!.deleteSelectedHotspot()\"\n          :title=\"$gettext('Diesen Hotspot lschen')\"\n        />\n      </div>\n      <label>\n        {{ $gettext('Feedback:') }}\n        <input\n          :value=\"(selectedHotspot as Hotspot)?.feedback\"\n          @input=\"editor!.setHotspotFeedback($event.target.value)\"\n          type=\"text\"\n          :title=\"$gettext('Feedback bei Klick auf diesen Hotspot')\"\n        />\n      </label>\n      <div class=\"arrow\" data-popper-arrow></div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport LazyImage from '@/components/LazyImage.vue';\nimport { Hotspot } from '@/models/FindTheHotspotsTask';\nimport { fileIdToUrl } from '@/models/TaskDefinition';\nimport { ImageFileElement } from '@/models/common';\nimport {\n  FindTheHotspotsEditorState,\n  findTheHotspotsEditorStateSymbol,\n} from '@/components/findTheHotspots/findTheHotspotsEditorState';\nimport {\n  FindTheHotspotsViewerState,\n  findTheHotspotsViewerStateSymbol,\n} from '@/components/findTheHotspots/findTheHotspotsViewerState';\nimport { createPopper, Instance } from '@popperjs/core';\nimport { v4 } from 'uuid';\nimport { ResizeHandle } from '@/models/InteractiveVideoTask';\nimport { $gettext } from '@/language/gettext';\n\ntype DragState =\n  | {\n      type: 'dragHotspot';\n      dragId: string;\n      hotspotId: string;\n      pointerStartPos: [number, number]; // clientX, clientY\n      hotspotStartPos: [number, number]; // fraction x, fraction y\n    }\n  | {\n      type: 'resizeHotspot';\n      dragId: string;\n      hotspotId: string;\n      pointerStartPos: [number, number]; // clientX, clientY\n      hotspotStartPos: [number, number]; // fraction x, fraction y\n      hotspotStartSize: [number, number]; // fraction x, fraction y\n      handle: string;\n    }\n  | undefined;\n\nexport default defineComponent({\n  name: 'ImageWithHotspots',\n  components: { LazyImage },\n  setup() {\n    return {\n      editor: inject<FindTheHotspotsEditorState | undefined>(\n        findTheHotspotsEditorStateSymbol,\n        // Supply a default value to suppress the vue warning about missing\n        // injection in the viewer:\n        // [Vue warn]: injection \"Symbol(Find The Hotspots Editor state)\" not found.\n        undefined\n      ),\n      viewer: inject<FindTheHotspotsViewerState | undefined>(\n        findTheHotspotsViewerStateSymbol,\n        // Supply a default value to suppress the vue warning about missing\n        // injection in the viewer:\n        // [Vue warn]: injection \"Symbol(Find The Hotspots Viewer state)\" not found.\n        undefined\n      ),\n    };\n  },\n  props: {\n    hotspots: {\n      type: Object as PropType<Hotspot[]>,\n      required: true,\n    },\n    image: {\n      type: Object as PropType<ImageFileElement>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      popperInstance: undefined as Instance | undefined,\n      dragState: undefined as DragState,\n    };\n  },\n  computed: {\n    debug(): boolean {\n      return window.STUDIP.LernmoduleVueJS.LERNMODULE_DEBUG && false;\n    },\n    // A unique ID for this instance of ImageWithHotspots, so that we can refer\n    // to elements inside of it by ID when there are multiple instances\n    // (e.g. viewer and editor) on the same page.\n    uid(): string {\n      return v4();\n    },\n    selectedHotspot(): Hotspot | undefined {\n      return this.hotspots.find(\n        (h) => h.uuid === this.editor?.selectedHotspotId.value\n      );\n    },\n    resizeHandles() {\n      return [\n        'left',\n        'top-left',\n        'top',\n        'top-right',\n        'right',\n        'bottom-right',\n        'bottom',\n        'bottom-left',\n      ] as const;\n    },\n  },\n  watch: {\n    selectedHotspot: {\n      immediate: true,\n      handler: function (hotspot: Hotspot | undefined) {\n        this.popperInstance?.destroy();\n        if (hotspot) {\n          // Run on next tick, because we need to wait for the hotspotElement\n          // to be rendered by Vue, in case it isn't yet visible at the moment this\n          // watcher is triggered.\n          // For example, if the user deletes the currently selected hotspot\n          // and then clicks undo, the hotspotElement will not be visible until\n          // the next reactivity \"tick\" has elapsed.\n          this.$nextTick(() => {\n            const hotspotElement = document.getElementById(\n              `hotspot-${this.uid}-${hotspot.uuid}`\n            ) as HTMLElement;\n            const tooltipElement = this.$refs\n              .selectedHotspotTooltip as HTMLElement;\n            this.popperInstance = createPopper(hotspotElement, tooltipElement, {\n              placement: 'top',\n              modifiers: [\n                {\n                  name: 'offset',\n                  options: {\n                    offset: [0, 14],\n                  },\n                },\n              ],\n            });\n          });\n        }\n      },\n    },\n  },\n  methods: {\n    $gettext,\n    fileIdToUrl,\n    onClickBackground(event: PointerEvent) {\n      if (this.editor) {\n        this.editor?.selectHotspot(undefined);\n      } else if (this.viewer) {\n        // Get the click coordinates relative to the wrapper element\n        const wrapperRect = (\n          this.$refs.wrapper as HTMLElement\n        ).getBoundingClientRect();\n\n        let clickX = event.clientX - wrapperRect.left;\n        let clickY = event.clientY - wrapperRect.top;\n\n        this.viewer.clickBackground(clickX, clickY);\n      }\n    },\n    onClickHotspot(event: PointerEvent, hotspot: Hotspot) {\n      console.log('onClickHotspot', hotspot);\n\n      if (this.editor) {\n        this.editor?.selectHotspot(hotspot.uuid);\n      } else if (this.viewer) {\n        // Get the click coordinates relative to the wrapper element\n        const wrapperRect = (\n          this.$refs.wrapper as HTMLElement\n        ).getBoundingClientRect();\n\n        let clickX = event.clientX - wrapperRect.left;\n        let clickY = event.clientY - wrapperRect.top;\n\n        this.viewer.clickHotspot(hotspot.uuid, clickX, clickY);\n      }\n    },\n    onPointerdownHotspot(event: PointerEvent, hotspot: Hotspot) {\n      console.log('onPointerDownHotspot');\n      if (!this.editor) {\n        return;\n      }\n      this.editor.selectHotspot(hotspot.uuid);\n      this.dragState = {\n        type: 'dragHotspot',\n        hotspotId: hotspot.uuid,\n        dragId: v4(),\n        pointerStartPos: [event.clientX, event.clientY],\n        hotspotStartPos: [hotspot.x, hotspot.y],\n      };\n      (event.target as HTMLElement).setPointerCapture(event.pointerId);\n    },\n    onPointerupHotspot(event: PointerEvent, hotspot: Hotspot) {\n      console.log('onPointerUpHotspot');\n      this.dragState = undefined;\n      (event.target as HTMLElement).releasePointerCapture(event.pointerId);\n    },\n    onPointermoveHotspot(event: PointerEvent, hotspot: Hotspot) {\n      if (\n        this.dragState?.type === 'dragHotspot' &&\n        this.dragState.hotspotId === hotspot.uuid\n      ) {\n        const rootRect = (\n          this.$refs.root as HTMLElement\n        ).getBoundingClientRect();\n        const hotspotEl = event.currentTarget as HTMLElement;\n\n        const clientDx = event.clientX - this.dragState.pointerStartPos[0];\n        const dxFraction = clientDx / rootRect.width;\n        const xFraction = this.dragState.hotspotStartPos[0] + dxFraction;\n        const hotspotWidth = hotspotEl.clientWidth / rootRect.width;\n        const minX = 0.05 - hotspotWidth;\n        const maxX = 0.95;\n        const clampedXFraction = Math.min(maxX, Math.max(minX, xFraction));\n\n        const clientDy = event.clientY - this.dragState.pointerStartPos[1];\n        const dyFraction = clientDy / rootRect.height;\n        const yFraction = this.dragState.hotspotStartPos[1] + dyFraction;\n        const hotspotHeight = hotspotEl.clientHeight / rootRect.height;\n        const minY = 0.05 - hotspotHeight;\n        const maxY = 0.95;\n        const clampedYFraction = Math.min(maxY, Math.max(minY, yFraction));\n\n        const id = this.dragState.hotspotId;\n        this.editor?.dragHotspot(\n          this.dragState.dragId,\n          id,\n          clampedXFraction,\n          clampedYFraction\n        );\n        this.popperInstance?.update();\n      }\n    },\n    onPointerdownResizeHandle(\n      event: PointerEvent,\n      handle: ResizeHandle,\n      hotspot: Hotspot\n    ) {\n      console.log('onPointerDownResizeHandle');\n      if (!this.editor) {\n        return;\n      }\n      this.editor.selectHotspot(hotspot.uuid);\n      this.dragState = {\n        type: 'resizeHotspot',\n        dragId: v4(),\n        hotspotId: hotspot.uuid,\n        pointerStartPos: [event.clientX, event.clientY],\n        hotspotStartPos: [hotspot.x, hotspot.y],\n        hotspotStartSize: [hotspot.width, hotspot.height],\n        handle,\n      };\n      (event.target as HTMLElement).setPointerCapture(event.pointerId);\n    },\n    onPointerupResizeHandle(\n      event: PointerEvent,\n      handle: ResizeHandle,\n      hotspot: Hotspot\n    ) {\n      console.log('onPointerUpResizeHandle');\n      this.dragState = undefined;\n      (event.target as HTMLElement).releasePointerCapture(event.pointerId);\n    },\n    onPointermoveResizeHandle(\n      event: PointerEvent,\n      handle: ResizeHandle,\n      hotspot: Hotspot\n    ) {\n      if (\n        this.dragState?.type === 'resizeHotspot' &&\n        this.dragState.hotspotId === hotspot.uuid\n      ) {\n        const rootRect = (\n          this.$refs.root as HTMLElement\n        ).getBoundingClientRect();\n        const {\n          hotspotStartPos: [xInitial, yInitial],\n          hotspotStartSize: [widthInitial, heightInitial],\n        } = this.dragState;\n        let newX = xInitial;\n        let newWidth = widthInitial;\n        let newY = yInitial;\n        let newHeight = heightInitial;\n\n        // Convert pointer movement in pixels to fractions of root rect width/height\n        const dxPointerPixels =\n          event.clientX - this.dragState.pointerStartPos[0];\n        const dxPointer = dxPointerPixels / rootRect.width;\n\n        const dyPointerPixels =\n          event.clientY - this.dragState.pointerStartPos[1];\n        const dyPointer = dyPointerPixels / rootRect.height;\n\n        // Horizontal resizing\n        if (\n          handle === 'left' ||\n          handle === 'top-left' ||\n          handle === 'bottom-left'\n        ) {\n          if (dxPointer > widthInitial) {\n            newX = xInitial + widthInitial;\n            newWidth = dxPointer - widthInitial;\n          } else {\n            newX = xInitial + dxPointer;\n            newWidth = widthInitial - dxPointer;\n          }\n        } else if (\n          handle === 'right' ||\n          handle === 'top-right' ||\n          handle === 'bottom-right'\n        ) {\n          if (-dxPointer > widthInitial) {\n            newX = xInitial + widthInitial + dxPointer;\n            newWidth = -dxPointer - widthInitial;\n          } else {\n            newX = xInitial;\n            newWidth = widthInitial + dxPointer;\n          }\n        }\n\n        // Vertical resizing\n        if (\n          handle === 'top-left' ||\n          handle === 'top' ||\n          handle === 'top-right'\n        ) {\n          if (dyPointer > heightInitial) {\n            newY = yInitial + heightInitial;\n            newHeight = dyPointer - heightInitial;\n          } else {\n            newY = yInitial + dyPointer;\n            newHeight = heightInitial - dyPointer;\n          }\n        } else if (\n          handle === 'bottom-left' ||\n          handle === 'bottom' ||\n          handle === 'bottom-right'\n        ) {\n          if (-dyPointer > heightInitial) {\n            newY = yInitial + heightInitial + dyPointer;\n            newHeight = -dyPointer - heightInitial;\n          } else {\n            newY = yInitial;\n            newHeight = heightInitial + dyPointer;\n          }\n        }\n\n        // Prevent shrinking the hotspot below a minimum size\n        let filteredHeight = hotspot.height,\n          filteredWidth = hotspot.width,\n          filteredX = hotspot.x,\n          filteredY = hotspot.y;\n        const newHeightPixels = newHeight * rootRect.height;\n        const newWidthPixels = newWidth * rootRect.width;\n        const minPixelDimension = 20;\n        if (newHeightPixels > minPixelDimension) {\n          filteredHeight = newHeight;\n          filteredY = newY;\n        }\n        if (newWidthPixels > minPixelDimension) {\n          filteredWidth = newWidth;\n          filteredX = newX;\n        }\n\n        // Prevent moving the hotspot completely off screen\n        const isOffscreenX =\n          filteredX > 0.95 || filteredX + filteredWidth < 0.05;\n        const isOffscreenY =\n          filteredY > 0.95 || filteredY + filteredHeight < 0.05;\n        if (isOffscreenX) {\n          filteredX = hotspot.x;\n          filteredWidth = hotspot.width;\n        }\n        if (isOffscreenY) {\n          filteredY = hotspot.y;\n          filteredHeight = hotspot.height;\n        }\n\n        this.editor!.resizeHotspot(\n          this.dragState.dragId,\n          hotspot.uuid,\n          filteredX,\n          filteredY,\n          filteredWidth,\n          filteredHeight\n        );\n        this.popperInstance?.update();\n      }\n    },\n    getHotspotStyle(hotspot: Hotspot): Partial<CSSStyleDeclaration> {\n      if (hotspot.type === 'rectangle') {\n        return {\n          left: `${hotspot.x * 100}%`,\n          top: `${hotspot.y * 100}%`,\n          width: `${hotspot.width * 100}%`,\n          height: `${hotspot.height * 100}%`,\n        };\n      } else {\n        return {\n          left: `${hotspot.x * 100}%`,\n          top: `${hotspot.y * 100}%`,\n          width: `${hotspot.width * 100}%`,\n          height: `${hotspot.height * 100}%`,\n          borderRadius: '50%',\n        };\n      }\n    },\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n.image-and-hotspots-container-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &.debug {\n    align-items: flex-start;\n    justify-content: flex-start;\n  }\n}\n\n.image-and-hotspots-container {\n  display: flex;\n  position: relative;\n  overflow: hidden;\n  max-height: 400px;\n}\n\n.hotspots-image {\n  user-select: none;\n  max-height: 400px;\n  width: 100%;\n}\n\n$hotspotBorderWidth: 2px;\n\nbutton.hotspot {\n  /* CSS Reset for button styles */\n  padding: 0;\n  //border: none;\n  font: inherit;\n  color: inherit;\n  //background-color: transparent;\n  cursor: pointer;\n  box-sizing: border-box;\n\n  position: absolute;\n  border: $hotspotBorderWidth dashed rgba(0, 0, 0, 0.7);\n  background-color: rgba(255, 255, 255, 0.5);\n\n  // This class isn't called 'invisible' or 'hidden', because there are Stud.IP\n  // CSS classes with those names that set display: none;\n  &.invisible-hotspot {\n    opacity: 0;\n    cursor: unset;\n    border: unset;\n    background: unset;\n    // Ensure that keyboard-only users are able to see the hotspot, if any,\n    // that they have focused with the keyboard.  (Accessibility standards)\n    &:focus {\n      opacity: unset;\n    }\n\n    &.correct {\n      color: #255c41;\n      background-image: radial-gradient(\n        circle at center,\n        rgba(157, 216, 187, 0.3) 0,\n        transparent 80%\n      );\n      background-size: 100% 100%;\n      background-position: center;\n    }\n\n    &.incorrect {\n      color: #b71c1c;\n      background-image: radial-gradient(\n        circle at center,\n        rgba(247, 208, 208, 0.3) 0,\n        transparent 80%\n      );\n      background-size: 100% 100%;\n      background-position: center;\n    }\n  }\n\n  &.selected {\n    border-color: #0a78d1;\n  }\n\n  &.selected .resize-handle {\n    $size: 12px;\n    position: absolute;\n    background: white;\n    border: 1px solid #0a78d1;\n    width: $size;\n    height: $size;\n    box-sizing: border-box;\n\n    &.top-left {\n      cursor: nwse-resize;\n      top: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n      left: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n    }\n\n    &.top {\n      cursor: ns-resize;\n      top: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n      left: calc(50% - $size / 2);\n    }\n\n    &.top-right {\n      cursor: nesw-resize;\n      top: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n      right: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n    }\n\n    &.right {\n      cursor: ew-resize;\n      top: calc(50% - $size / 2);\n      right: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n    }\n\n    &.bottom-right {\n      cursor: nwse-resize;\n      bottom: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n      right: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n    }\n\n    &.bottom {\n      cursor: ns-resize;\n      bottom: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n      left: calc(50% - $size / 2);\n    }\n\n    &.bottom-left {\n      cursor: nesw-resize;\n      bottom: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n      left: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n    }\n\n    &.left {\n      cursor: ew-resize;\n      top: calc(50% - $size / 2);\n      left: calc(0% - $size / 2 - $hotspotBorderWidth / 2);\n    }\n  }\n}\n\n.selected-hotspot-tooltip {\n  &.hidden {\n    display: none;\n  }\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5em;\n  background: white;\n  color: black;\n  border-radius: 12px;\n  border: #0a78d1 2px solid;\n  padding: 8px;\n  > .arrow,\n  > .arrow::before {\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    background: inherit;\n  }\n\n  > .arrow {\n    visibility: hidden;\n  }\n\n  > .arrow::before {\n    visibility: visible;\n    content: '';\n    transform: translateX(-$hotspotBorderWidth) rotate(45deg);\n  }\n\n  &[data-popper-placement^='top'] > .arrow {\n    bottom: -5px;\n  }\n\n  &[data-popper-placement^='bottom'] > .arrow {\n    top: -7px;\n  }\n\n  &[data-popper-placement^='left'] > .arrow {\n    right: -4px;\n  }\n\n  &[data-popper-placement^='right'] > .arrow {\n    left: -4px;\n  }\n\n  &[data-popper-placement^='top'] > .arrow:before {\n    border-bottom: #0a78d1 2px solid;\n    border-right: #0a78d1 2px solid;\n  }\n\n  &[data-popper-placement^='bottom'] > .arrow:before {\n    border-top: #0a78d1 2px solid;\n    border-left: #0a78d1 2px solid;\n  }\n}\n</style>\n","import { render } from \"./ImageWithHotspots.vue?vue&type=template&id=4179f505&scoped=true&ts=true\"\nimport script from \"./ImageWithHotspots.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageWithHotspots.vue?vue&type=script&lang=ts\"\n\nimport \"./ImageWithHotspots.vue?vue&type=style&index=0&id=4179f505&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4179f505\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = [\"textContent\"]\nconst _hoisted_3 = [\"textContent\"]\nconst _hoisted_4 = { class: \"collapsable collapsed\" }\nconst _hoisted_5 = { class: \"collapsable collapsed\" }\nconst _hoisted_6 = { class: \"collapsable collapsed\" }\n\nimport { computed, inject, PropType, ref, watch } from 'vue';\nimport { FindTheWordsTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\nimport produce from 'immer';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  props: {\n  taskDefinition: {\n    type: Object as PropType<FindTheWordsTask>,\n    required: true,\n  },\n},\n  setup(__props) {\n\nconst props = __props\n\nconst taskEditor = inject<TaskEditorState>(taskEditorStateSymbol);\n\n\n\nconst debug = window.STUDIP.LernmoduleVueJS.LERNMODULE_DEBUG;\n\n// State\nconst modelTaskDefinition = ref<FindTheWordsTask>(\n  cloneDeep(props.taskDefinition)\n);\nconst wordsInputMessage = ref<string>('');\nconst userInput = ref<string>(modelTaskDefinition.value.words);\nconst lastValidInput = ref<string>(modelTaskDefinition.value.words);\nconst numbersInputMessage = ref<string>('');\n\nconst words = computed(() => {\n  if (props.taskDefinition?.words) {\n    return props.taskDefinition.words\n      .split(',')\n      .filter((word) => word.trim())\n      .map((word) => word.trim().toUpperCase());\n  }\n  return [];\n});\n\nwatch(\n  () => props.taskDefinition,\n  (newTaskDefinition, oldTaskDefinition) => {\n    modelTaskDefinition.value = cloneDeep(newTaskDefinition);\n  },\n  { deep: true }\n);\n\nfunction clearMessages(): void {\n  wordsInputMessage.value = '';\n  numbersInputMessage.value = '';\n}\n\nfunction onInputWords(words: string): void {\n  let wordArray = words\n    .split(',')\n    .filter((word) => word.trim())\n    .map((word) => word.trim().toUpperCase());\n\n  let longestWord = 0;\n  for (const word of wordArray) {\n    if (word.length > longestWord) {\n      longestWord = word.length;\n    }\n  }\n\n  const tooLongWord = longestWord > 20;\n  const tooManyWords = wordArray.length > 20;\n\n  if (tooLongWord) {\n    wordsInputMessage.value = $gettext(\n      'Wrter drfen nicht lnger als 20 Zeichen sein.'\n    );\n    userInput.value = lastValidInput.value;\n    return;\n  } else if (tooManyWords) {\n    wordsInputMessage.value = $gettext(\n      'Es drfen maximal 20 Wrter eingegeben werden.'\n    );\n    userInput.value = lastValidInput.value;\n    return;\n  } else {\n    wordsInputMessage.value = '';\n    lastValidInput.value = words;\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.words = words;\n  });\n\n  if (longestWord > modelTaskDefinition.value.size) {\n    numbersInputMessage.value = '';\n    modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n      draft.size = longestWord;\n    });\n  }\n\n  // Synchronize state modelTaskDefinition -> taskDefinition.\n  console.log('update task definition');\n  taskEditor!.performEdit({\n    newTaskDefinition: cloneDeep(modelTaskDefinition.value),\n  });\n}\n\nfunction onInputSize(size: number): void {\n  let longestWord = 0;\n\n  for (const word of words.value) {\n    console.log(word, word.length);\n    if (word.length > longestWord) {\n      longestWord = word.length;\n    }\n  }\n\n  let num = Number(size);\n  if (num > 20) {\n    console.log(num);\n    num = 20;\n  }\n  if (num < longestWord) {\n    num = longestWord;\n    numbersInputMessage.value = $gettext(\n      'Minimum %{ characters } da ein Wort mit %{ characters } Zeichen existiert',\n      { characters: num.toString() }\n    );\n  } else {\n    numbersInputMessage.value = '';\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.size = num;\n  });\n\n  updateTaskDefinition('size');\n}\n\nfunction onInputAlphabet(alphabet: string): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.alphabet = alphabet;\n  });\n\n  updateTaskDefinition('alphabet');\n}\n\nfunction resetAlphabet(): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.alphabet = 'abcdefghijklmnopqrstuvwxyz';\n  });\n\n  updateTaskDefinition();\n}\n\nfunction resetAlphabetToUsedLetters(): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.alphabet = Array.from(\n      new Set(draft.words.toLowerCase().replace(/[\\s,]/g, '').split(''))\n    ).join('');\n  });\n\n  updateTaskDefinition();\n}\n\nfunction updateTaskDefinition(undoBatch?: unknown): void {\n  // Synchronize state modelTaskDefinition -> taskDefinition.\n  console.log('update task definition');\n  taskEditor!.performEdit({\n    newTaskDefinition: cloneDeep(modelTaskDefinition.value),\n    undoBatch: undoBatch ?? {},\n  });\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"form\", {\n      class: \"default\",\n      onSubmit: _cache[26] || (_cache[26] = _withModifiers(() => {}, [\"prevent\"]))\n    }, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Find the Words')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)('Zu findende Wrter:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((userInput).value = $event)),\n            onInput: _cache[1] || (_cache[1] = ($event: any) => (onInputWords($event.target.value))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, userInput.value]\n          ]),\n          _createElementVNode(\"p\", {\n            textContent: _toDisplayString(wordsInputMessage.value)\n          }, null, 8, _hoisted_2)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)('Feldgre:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((modelTaskDefinition.value.size) = $event)),\n            onChange: _cache[3] || (_cache[3] = ($event: any) => (onInputSize($event.target.value))),\n            onBlur: _cache[4] || (_cache[4] = ($event: any) => (clearMessages())),\n            min: \"6\",\n            max: \"20\",\n            type: \"number\"\n          }, null, 544), [\n            [_vModelText, modelTaskDefinition.value.size]\n          ]),\n          _createElementVNode(\"p\", {\n            textContent: _toDisplayString(numbersInputMessage.value)\n          }, null, 8, _hoisted_3)\n        ]),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)('Zeichen, mit denen die Tafel aufgefllt wird:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((modelTaskDefinition.value.alphabet) = $event)),\n            onInput: _cache[6] || (_cache[6] = ($event: any) => (onInputAlphabet($event.target.value))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, modelTaskDefinition.value.alphabet]\n          ]),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"button\",\n            style: {\"white-space\":\"normal\"},\n            onClick: resetAlphabet\n          }, _toDisplayString(_unref($gettext)('Zurcksetzen auf A - Z')), 1),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"button\",\n            style: {\"white-space\":\"normal\"},\n            onClick: resetAlphabetToUsedLetters\n          }, _toDisplayString(_unref($gettext)('Buchstaben der Lsungswrter')), 1)\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_4, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((modelTaskDefinition.value.showWordList) = $event)),\n            onChange: updateTaskDefinition,\n            type: \"checkbox\"\n          }, null, 544), [\n            [_vModelCheckbox, modelTaskDefinition.value.showWordList]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Wortliste anzeigen')), 1)\n        ]),\n        _createElementVNode(\"fieldset\", null, [\n          _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Wortrichtungen')), 1),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((modelTaskDefinition.value.directions.e) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.e]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Horizontal nach rechts')), 1)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((modelTaskDefinition.value.directions.w) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.w]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Horizontal nach links')), 1)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((modelTaskDefinition.value.directions.s) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.s]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Vertikal nach unten')), 1)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((modelTaskDefinition.value.directions.n) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.n]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Vertikal nach oben')), 1)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((modelTaskDefinition.value.directions.ne) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.ne]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Diagonal nach oben rechts')), 1)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((modelTaskDefinition.value.directions.se) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.se]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Diagonal nach unten rechts')), 1)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => ((modelTaskDefinition.value.directions.nw) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.nw]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Diagonal nach oben links')), 1)\n          ]),\n          _createElementVNode(\"label\", null, [\n            _withDirectives(_createElementVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((modelTaskDefinition.value.directions.sw) = $event)),\n              onChange: updateTaskDefinition,\n              type: \"checkbox\"\n            }, null, 544), [\n              [_vModelCheckbox, modelTaskDefinition.value.directions.sw]\n            ]),\n            _createTextVNode(\" \" + _toDisplayString(_unref($gettext)('Diagonal nach unten links')), 1)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_5, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Beschriftungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)('Titel der Wortliste:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => ((modelTaskDefinition.value.strings.wordListTitle) = $event)),\n            onInput: _cache[17] || (_cache[17] = ($event: any) => (\n              updateTaskDefinition('taskDefinition.strings.wordListTitle')\n            )),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, modelTaskDefinition.value.strings.wordListTitle]\n          ])\n        ]),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)('Text fr berprfen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => ((modelTaskDefinition.value.strings.checkButton) = $event)),\n            onInput: _cache[19] || (_cache[19] = ($event: any) => (updateTaskDefinition('taskDefinition.strings.checkButton'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, modelTaskDefinition.value.strings.checkButton]\n          ])\n        ]),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)('Text fr Wiederholen-Button:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event: any) => ((modelTaskDefinition.value.strings.retryButton) = $event)),\n            onInput: _cache[21] || (_cache[21] = ($event: any) => (updateTaskDefinition('taskDefinition.strings.retryButton'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, modelTaskDefinition.value.strings.retryButton]\n          ])\n        ]),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)('Text fr Zeitanzeige:')) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event: any) => ((modelTaskDefinition.value.strings.timer) = $event)),\n            onInput: _cache[23] || (_cache[23] = ($event: any) => (updateTaskDefinition('taskDefinition.strings.timer'))),\n            type: \"text\"\n          }, null, 544), [\n            [_vModelText, modelTaskDefinition.value.strings.timer]\n          ])\n        ])\n      ]),\n      _createElementVNode(\"fieldset\", _hoisted_6, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_unref($gettext)('Feedback')), 1),\n        _createElementVNode(\"label\", null, [\n          _createTextVNode(_toDisplayString(_unref($gettext)(\n              'Ergebnismitteilung (mgliche Variablen :correct und :total):'\n            )) + \" \", 1),\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"text\",\n            \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event: any) => ((modelTaskDefinition.value.strings.resultMessage) = $event)),\n            onInput: _cache[25] || (_cache[25] = ($event: any) => (\n              updateTaskDefinition('taskDefinition.strings.resultMessage')\n            ))\n          }, null, 544), [\n            [_vModelText, modelTaskDefinition.value.strings.resultMessage]\n          ])\n        ])\n      ])\n    ], 32)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"stud5p-task\">\n    <form class=\"default\" @submit.prevent>\n      <fieldset>\n        <legend>{{ $gettext('Find the Words') }}</legend>\n        <label>\n          {{ $gettext('Zu findende Wrter:') }}\n          <input\n            v-model=\"userInput\"\n            @input=\"onInputWords($event.target.value)\"\n            type=\"text\"\n          />\n          <p v-text=\"wordsInputMessage\" />\n        </label>\n        <label>\n          {{ $gettext('Feldgre:') }}\n          <input\n            v-model=\"modelTaskDefinition.size\"\n            @change=\"onInputSize($event.target.value)\"\n            @blur=\"clearMessages()\"\n            min=\"6\"\n            max=\"20\"\n            type=\"number\"\n          />\n          <p v-text=\"numbersInputMessage\" />\n        </label>\n        <label>\n          {{ $gettext('Zeichen, mit denen die Tafel aufgefllt wird:') }}\n          <input\n            v-model=\"modelTaskDefinition.alphabet\"\n            @input=\"onInputAlphabet($event.target.value)\"\n            type=\"text\"\n          />\n          <button\n            type=\"button\"\n            class=\"button\"\n            style=\"white-space: normal\"\n            @click=\"resetAlphabet\"\n          >\n            {{ $gettext('Zurcksetzen auf A - Z') }}\n          </button>\n          <button\n            type=\"button\"\n            class=\"button\"\n            style=\"white-space: normal\"\n            @click=\"resetAlphabetToUsedLetters\"\n          >\n            {{ $gettext('Buchstaben der Lsungswrter') }}\n          </button>\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Einstellungen') }}</legend>\n\n        <label>\n          <input\n            v-model=\"modelTaskDefinition.showWordList\"\n            @change=\"updateTaskDefinition\"\n            type=\"checkbox\"\n          />\n          {{ $gettext('Wortliste anzeigen') }}\n        </label>\n\n        <fieldset>\n          <legend>{{ $gettext('Wortrichtungen') }}</legend>\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.e\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Horizontal nach rechts') }}\n          </label>\n\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.w\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Horizontal nach links') }}\n          </label>\n\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.s\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Vertikal nach unten') }}\n          </label>\n\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.n\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Vertikal nach oben') }}\n          </label>\n\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.ne\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Diagonal nach oben rechts') }}\n          </label>\n\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.se\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Diagonal nach unten rechts') }}\n          </label>\n\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.nw\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Diagonal nach oben links') }}\n          </label>\n\n          <label>\n            <input\n              v-model=\"modelTaskDefinition.directions.sw\"\n              @change=\"updateTaskDefinition\"\n              type=\"checkbox\"\n            />\n            {{ $gettext('Diagonal nach unten links') }}\n          </label>\n        </fieldset>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Beschriftungen') }}</legend>\n\n        <label>\n          {{ $gettext('Titel der Wortliste:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.wordListTitle\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.wordListTitle')\n            \"\n            type=\"text\"\n          />\n        </label>\n\n        <label>\n          {{ $gettext('Text fr berprfen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.checkButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.checkButton')\"\n            type=\"text\"\n          />\n        </label>\n\n        <label>\n          {{ $gettext('Text fr Wiederholen-Button:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.retryButton\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.retryButton')\"\n            type=\"text\"\n          />\n        </label>\n\n        <label>\n          {{ $gettext('Text fr Zeitanzeige:') }}\n          <input\n            v-model=\"modelTaskDefinition.strings.timer\"\n            @input=\"updateTaskDefinition('taskDefinition.strings.timer')\"\n            type=\"text\"\n          />\n        </label>\n      </fieldset>\n\n      <fieldset class=\"collapsable collapsed\">\n        <legend>{{ $gettext('Feedback') }}</legend>\n        <label>\n          {{\n            $gettext(\n              'Ergebnismitteilung (mgliche Variablen :correct und :total):'\n            )\n          }}\n          <input\n            type=\"text\"\n            v-model=\"modelTaskDefinition.strings.resultMessage\"\n            @input=\"\n              updateTaskDefinition('taskDefinition.strings.resultMessage')\n            \"\n          />\n        </label>\n      </fieldset>\n    </form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, defineProps, inject, PropType, ref, watch } from 'vue';\nimport { FindTheWordsTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport { cloneDeep } from 'lodash';\nimport produce from 'immer';\n\nconst taskEditor = inject<TaskEditorState>(taskEditorStateSymbol);\n\nconst props = defineProps({\n  taskDefinition: {\n    type: Object as PropType<FindTheWordsTask>,\n    required: true,\n  },\n});\n\nconst debug = window.STUDIP.LernmoduleVueJS.LERNMODULE_DEBUG;\n\n// State\nconst modelTaskDefinition = ref<FindTheWordsTask>(\n  cloneDeep(props.taskDefinition)\n);\nconst wordsInputMessage = ref<string>('');\nconst userInput = ref<string>(modelTaskDefinition.value.words);\nconst lastValidInput = ref<string>(modelTaskDefinition.value.words);\nconst numbersInputMessage = ref<string>('');\n\nconst words = computed(() => {\n  if (props.taskDefinition?.words) {\n    return props.taskDefinition.words\n      .split(',')\n      .filter((word) => word.trim())\n      .map((word) => word.trim().toUpperCase());\n  }\n  return [];\n});\n\nwatch(\n  () => props.taskDefinition,\n  (newTaskDefinition, oldTaskDefinition) => {\n    modelTaskDefinition.value = cloneDeep(newTaskDefinition);\n  },\n  { deep: true }\n);\n\nfunction clearMessages(): void {\n  wordsInputMessage.value = '';\n  numbersInputMessage.value = '';\n}\n\nfunction onInputWords(words: string): void {\n  let wordArray = words\n    .split(',')\n    .filter((word) => word.trim())\n    .map((word) => word.trim().toUpperCase());\n\n  let longestWord = 0;\n  for (const word of wordArray) {\n    if (word.length > longestWord) {\n      longestWord = word.length;\n    }\n  }\n\n  const tooLongWord = longestWord > 20;\n  const tooManyWords = wordArray.length > 20;\n\n  if (tooLongWord) {\n    wordsInputMessage.value = $gettext(\n      'Wrter drfen nicht lnger als 20 Zeichen sein.'\n    );\n    userInput.value = lastValidInput.value;\n    return;\n  } else if (tooManyWords) {\n    wordsInputMessage.value = $gettext(\n      'Es drfen maximal 20 Wrter eingegeben werden.'\n    );\n    userInput.value = lastValidInput.value;\n    return;\n  } else {\n    wordsInputMessage.value = '';\n    lastValidInput.value = words;\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.words = words;\n  });\n\n  if (longestWord > modelTaskDefinition.value.size) {\n    numbersInputMessage.value = '';\n    modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n      draft.size = longestWord;\n    });\n  }\n\n  // Synchronize state modelTaskDefinition -> taskDefinition.\n  console.log('update task definition');\n  taskEditor!.performEdit({\n    newTaskDefinition: cloneDeep(modelTaskDefinition.value),\n  });\n}\n\nfunction onInputSize(size: number): void {\n  let longestWord = 0;\n\n  for (const word of words.value) {\n    console.log(word, word.length);\n    if (word.length > longestWord) {\n      longestWord = word.length;\n    }\n  }\n\n  let num = Number(size);\n  if (num > 20) {\n    console.log(num);\n    num = 20;\n  }\n  if (num < longestWord) {\n    num = longestWord;\n    numbersInputMessage.value = $gettext(\n      'Minimum %{ characters } da ein Wort mit %{ characters } Zeichen existiert',\n      { characters: num.toString() }\n    );\n  } else {\n    numbersInputMessage.value = '';\n  }\n\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.size = num;\n  });\n\n  updateTaskDefinition('size');\n}\n\nfunction onInputAlphabet(alphabet: string): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.alphabet = alphabet;\n  });\n\n  updateTaskDefinition('alphabet');\n}\n\nfunction resetAlphabet(): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.alphabet = 'abcdefghijklmnopqrstuvwxyz';\n  });\n\n  updateTaskDefinition();\n}\n\nfunction resetAlphabetToUsedLetters(): void {\n  modelTaskDefinition.value = produce(modelTaskDefinition.value, (draft) => {\n    draft.alphabet = Array.from(\n      new Set(draft.words.toLowerCase().replace(/[\\s,]/g, '').split(''))\n    ).join('');\n  });\n\n  updateTaskDefinition();\n}\n\nfunction updateTaskDefinition(undoBatch?: unknown): void {\n  // Synchronize state modelTaskDefinition -> taskDefinition.\n  console.log('update task definition');\n  taskEditor!.performEdit({\n    newTaskDefinition: cloneDeep(modelTaskDefinition.value),\n    undoBatch: undoBatch ?? {},\n  });\n}\n</script>\n\n<style scoped></style>\n","import script from \"./FindTheWordsEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FindTheWordsEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, withModifiers as _withModifiers, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4ea5c8bd\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"stud5p-task\" }\nconst _hoisted_2 = { class: \"canvas-and-word-list-container\" }\nconst _hoisted_3 = [\"width\", \"height\"]\nconst _hoisted_4 = {\n  key: 0,\n  class: \"word-list\"\n}\nconst _hoisted_5 = [\"textContent\"]\nconst _hoisted_6 = [\"title\"]\nconst _hoisted_7 = { class: \"time-container\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"\", -1))\nconst _hoisted_9 = [\"textContent\"]\nconst _hoisted_10 = [\"textContent\"]\nconst _hoisted_11 = { class: \"feedback-and-button-container\" }\nconst _hoisted_12 = { class: \"feedback-container\" }\nconst _hoisted_13 = { class: \"button-panel\" }\nconst _hoisted_14 = [\"textContent\"]\nconst _hoisted_15 = [\"textContent\"]\nconst _hoisted_16 = [\"textContent\"]\nconst _hoisted_17 = { key: 1 }\n\nimport {\n  computed,\n  onBeforeUnmount,\n  onMounted,\n  PropType,\n  ref,\n  watch,\n} from 'vue';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\nimport { FindTheWordsTask } from '@/models/TaskDefinition';\nimport { v4 } from 'uuid';\nimport { $gettext } from '@/language/gettext';\n\ntype Direction =\n  | 'left'\n  | 'right'\n  | 'up'\n  | 'down'\n  | 'up-left'\n  | 'up-right'\n  | 'down-left'\n  | 'down-right'\n  | undefined;\n\ntype DragState =\n  | {\n      dragId: string;\n      startCell: [number, number];\n      currentCell: [number, number];\n      direction: Direction;\n    }\n  | undefined;\n\n// Props\n\nexport default /*#__PURE__*/_defineComponent({\n  props: {\n  task: {\n    type: Object as PropType<FindTheWordsTask>,\n    required: true,\n  },\n},\n  setup(__props) {\n\nconst props = __props\n\nconst WordSearch = require('@blex41/word-search');\n\n\n\n// State\nlet grid: string[][] = [];\nlet selectedCells: boolean[][] = [];\nlet correctCells: boolean[][] = [];\nlet solutionCoordinates: { x: number; y: number }[] = [];\nconst foundWords = ref<string[]>([]);\nconst dragState = ref<DragState>();\nconst taskSubmitted = ref<boolean>(false);\nconst showSolutions = ref<boolean>(false);\nconst timer = ref<number>(0); // Track elapsed time in seconds\nlet timerStarted: boolean = false; // Flag to check if timer has started\nlet timerInterval: number | null = null; // Store interval ID to control timer\n\n// Lifecycle Hooks\nonMounted(() => {\n  initializeGrid();\n  drawGrid();\n  document.addEventListener('pointerdown', onPointerdownOutsideCanvas);\n  document.addEventListener('pointerup', onPointerupOutsideCanvas);\n});\n\nonBeforeUnmount(() => {\n  document.removeEventListener('pointerdown', onPointerdownOutsideCanvas);\n  document.removeEventListener('pointerup', onPointerupOutsideCanvas);\n});\n\n// Computed properties\nconst gridSize = computed(() => {\n  return props.task?.size;\n});\n\nconst cellSize = computed(() => {\n  return 42;\n});\n\nconst canvasSize = computed(() => {\n  return gridSize.value * cellSize.value;\n});\n\nconst words = computed(() => {\n  if (props.task?.words) {\n    return props.task.words\n      .split(',')\n      .filter((word) => word.trim())\n      .map((word) => word.trim().toUpperCase());\n  }\n  return [];\n});\n\nconst disabledDirections = computed(() => {\n  let result = [];\n  if (props.task?.directions) {\n    if (!props.task.directions.n) result.push('N');\n    if (!props.task.directions.ne) result.push('NE');\n    if (!props.task.directions.e) result.push('E');\n    if (!props.task.directions.se) result.push('SE');\n    if (!props.task.directions.s) result.push('S');\n    if (!props.task.directions.sw) result.push('SW');\n    if (!props.task.directions.w) result.push('W');\n    if (!props.task.directions.nw) result.push('NW');\n  }\n  return result;\n});\n\nconst alphabet = computed(() => {\n  if (props.task?.alphabet) {\n    return props.task.alphabet\n      .toUpperCase()\n      .split('')\n      .filter((char) => char.match(/[0-9\\p{L}]/u));\n  }\n  return [];\n});\n\nconst score = computed(() => {\n  return foundWords.value.length;\n});\n\nconst maxScore = computed(() => {\n  return words.value.length;\n});\n\nconst taskCompleted = computed(() => {\n  return score.value === maxScore.value || taskSubmitted.value;\n});\n\nconst resultMessage = computed(() => {\n  let result = props.task.strings.resultMessage.replace(\n    ':correct',\n    score.value.toString()\n  );\n  result = result.replace(':total', maxScore.value.toString());\n\n  return result;\n});\n\nconst showCheckButton = computed(() => {\n  return !taskCompleted.value;\n});\n\n// Watchers\nwatch(\n  () => props.task,\n  () => {\n    initializeGrid();\n    drawGrid();\n  },\n  { deep: true }\n);\n\nwatch(\n  () => taskCompleted.value,\n  (newValue) => {\n    if (newValue) {\n      stopTimer();\n    }\n  }\n);\n\nfunction startTimer(): void {\n  timerStarted = true;\n\n  // Start a timer that increments every second\n  timerInterval = setInterval(() => {\n    timer.value++;\n  }, 1000) as unknown as number;\n}\n\nfunction stopTimer(): void {\n  // Stop the timer and clear the interval\n  if (timerInterval !== null) {\n    clearInterval(timerInterval);\n    timerInterval = null; // Reset after clearing\n  }\n\n  timerStarted = false;\n}\n\nfunction onClickCheck(): void {\n  taskSubmitted.value = true;\n  stopTimer();\n}\n\nfunction onClickRetry(): void {\n  taskSubmitted.value = false;\n  showSolutions.value = false;\n  timer.value = 0;\n  solutionCoordinates = [];\n  stopTimer();\n  initializeGrid();\n  drawGrid();\n}\n\nfunction onClickShowSolutions(): void {\n  showSolutions.value = true;\n  drawGrid();\n}\n\nfunction randomLetter() {\n  if (alphabet.value.length > 0) {\n    const randomIndex = Math.floor(Math.random() * alphabet.value.length);\n    return alphabet.value[randomIndex];\n  }\n  return '';\n}\n\nfunction resetSelectedCells() {\n  selectedCells = [];\n  for (let x = 0; x < gridSize.value; x++) {\n    selectedCells[x] = [];\n    for (let y = 0; y < gridSize.value; y++) {\n      selectedCells[x][y] = false;\n    }\n  }\n}\n\nfunction resetCorrectCells() {\n  correctCells = [];\n  for (let x = 0; x < gridSize.value; x++) {\n    correctCells[x] = [];\n    for (let y = 0; y < gridSize.value; y++) {\n      correctCells[x][y] = false;\n    }\n  }\n}\n\nfunction initializeGrid() {\n  resetSelectedCells();\n  resetCorrectCells();\n  foundWords.value = [];\n  solutionCoordinates = [];\n\n  const options = {\n    cols: gridSize.value,\n    rows: gridSize.value,\n    disabledDirections: disabledDirections.value,\n    dictionary: words.value,\n    maxWords: words.value.length,\n    backwardsProbability: 0.3,\n    upperCase: true,\n    diacritics: true,\n  };\n\n  // Create a new puzzle\n  let ws = new WordSearch(options);\n  let count = 1;\n  while (ws.words.length !== words.value.length && count <= 10) {\n    console.log(\n      'Es konnten nicht alle Wrter untergebracht werden. Versuche es bis zu 10 mal erneut:',\n      count + '. Versuch'\n    );\n    ws = new WordSearch(options);\n    count++;\n  }\n\n  ws.words.forEach((word: any) => {\n    solutionCoordinates.push(...word.path);\n  });\n\n  grid = [];\n  for (let x = 0; x < gridSize.value; x++) {\n    grid[x] = [];\n    for (let y = 0; y < gridSize.value; y++) {\n      if (solutionCoordinates.some((coord) => coord.x === x && coord.y === y)) {\n        grid[x][y] = ws.grid[y][x];\n      } else {\n        grid[x][y] = randomLetter();\n      }\n    }\n  }\n}\n\nfunction drawGrid() {\n  const canvas = document.getElementById('c') as HTMLCanvasElement;\n  if (!canvas) {\n    console.error('No Canvas');\n    return;\n  }\n  const ctx = canvas.getContext('2d');\n  if (ctx) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.font = 'bold 26px calibri';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    for (let x = 0; x < gridSize.value; x++) {\n      for (let y = 0; y < gridSize.value; y++) {\n        if (correctCells[x][y]) {\n          fillCell(x, y, '#d4f6e6');\n        }\n        if (!showSolutions.value && selectedCells[x][y]) {\n          fillCell(x, y, 'rgba(140, 180, 255, 0.34)');\n        }\n        if (\n          showSolutions.value &&\n          solutionCoordinates.some((coord) => coord.x === x && coord.y === y) &&\n          !correctCells[x][y]\n        ) {\n          fillCell(x, y, 'rgba(140, 180, 255, 0.34)');\n        }\n        ctx.strokeStyle = 'gainsboro';\n        ctx.strokeRect(\n          x * cellSize.value,\n          y * cellSize.value,\n          cellSize.value,\n          cellSize.value\n        );\n        ctx.fillStyle = '#404040';\n        ctx.fillText(\n          grid[x][y],\n          x * cellSize.value + cellSize.value / 2,\n          y * cellSize.value + cellSize.value / 2\n        );\n      }\n    }\n  }\n}\n\nfunction onPointerdownCanvas(event: PointerEvent) {\n  if (taskCompleted.value) return;\n\n  if (!timerStarted) {\n    console.log('Starting timer');\n    startTimer();\n  }\n\n  if (!dragState.value) {\n    // Start selection\n    const { cellX, cellY } = getCellUnderCursor(event);\n\n    dragState.value = {\n      dragId: v4(),\n      startCell: [cellX, cellY],\n      currentCell: [cellX, cellY],\n      direction: undefined,\n    };\n\n    resetSelectedCells();\n    selectedCells[cellX][cellY] = true;\n    drawGrid();\n  } else {\n    // We are already selecting with the two-clicks selection method and this\n    // is the second click, so we end the selection\n    endSelection();\n  }\n}\n\nfunction getCellUnderCursor(event: PointerEvent) {\n  const canvas = document.getElementById('c') as HTMLCanvasElement;\n  const rect = canvas.getBoundingClientRect();\n  const x = event.clientX - rect.left;\n  const y = event.clientY - rect.top;\n  const cellX = Math.max(\n    0,\n    Math.min(Math.floor(x / cellSize.value), gridSize.value - 1)\n  );\n  const cellY = Math.max(\n    0,\n    Math.min(Math.floor(y / cellSize.value), gridSize.value - 1)\n  );\n  return { cellX, cellY };\n}\n\nfunction onPointermoveCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    const { cellX, cellY } = getCellUnderCursor(event);\n\n    const direction = getDirection(\n      dragState.value.startCell[0],\n      dragState.value.startCell[1],\n      cellX,\n      cellY\n    );\n\n    resetSelectedCells();\n\n    selectedCells[dragState.value.startCell[0]][dragState.value.startCell[1]] =\n      true;\n\n    if (direction === 'left') {\n      for (\n        let xCoordinate = dragState.value.startCell[0];\n        xCoordinate >= cellX;\n        xCoordinate--\n      ) {\n        selectedCells[xCoordinate][dragState.value.startCell[1]] = true;\n      }\n    } else if (direction === 'right') {\n      for (\n        let xCoordinate = dragState.value.startCell[0];\n        xCoordinate <= cellX;\n        xCoordinate++\n      ) {\n        selectedCells[xCoordinate][dragState.value.startCell[1]] = true;\n      }\n    } else if (direction === 'up') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate >= cellY;\n        yCoordinate--\n      ) {\n        selectedCells[dragState.value.startCell[0]][yCoordinate] = true;\n      }\n    } else if (direction === 'down') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate <= cellY;\n        yCoordinate++\n      ) {\n        selectedCells[dragState.value.startCell[0]][yCoordinate] = true;\n      }\n    } else if (direction === 'up-right') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate >= cellY;\n        yCoordinate--\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] -\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    } else if (direction === 'up-left') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate >= cellY;\n        yCoordinate--\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] +\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    } else if (direction === 'down-left') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate <= cellY;\n        yCoordinate++\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] -\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    } else if (direction === 'down-right') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate <= cellY;\n        yCoordinate++\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] +\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    }\n\n    dragState.value = {\n      dragId: dragState.value.dragId,\n      startCell: dragState.value.startCell,\n      currentCell: [cellX, cellY],\n      direction: direction,\n    };\n\n    drawGrid();\n  }\n}\n\nfunction onPointerupCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    const { cellX, cellY } = getCellUnderCursor(event);\n\n    if (\n      dragState.value.startCell[0] != cellX ||\n      dragState.value.startCell[1] != cellY\n    ) {\n      // Moved the cursor to another cell before releasing, so we use click-and-hold selection and end the selection\n      endSelection();\n    }\n  }\n}\n\nfunction onPointerdownOutsideCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    endSelection();\n  }\n}\n\nfunction onPointerupOutsideCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    endSelection();\n  }\n}\n\nfunction endSelection() {\n  const selectedWord = getSelectedWord();\n  const reversedSelectedWord = selectedWord.split('').reverse().join('');\n  console.log('Selected:', selectedWord, reversedSelectedWord);\n\n  const isWordFound =\n    words.value.includes(selectedWord) ||\n    words.value.includes(reversedSelectedWord);\n\n  if (isWordFound) markSelectedWordCorrect();\n\n  const isNewWord =\n    !foundWords.value.includes(selectedWord) &&\n    !foundWords.value.includes(reversedSelectedWord);\n\n  if (isWordFound && isNewWord) {\n    if (words.value.includes(selectedWord)) {\n      console.log('Found:', selectedWord);\n      foundWords.value.push(selectedWord);\n    } else {\n      console.log('Found:', reversedSelectedWord);\n      foundWords.value.push(reversedSelectedWord);\n    }\n  }\n\n  dragState.value = undefined;\n  drawGrid();\n}\n\nfunction coordinatesAreValid(x: number, y: number): boolean {\n  return !(x < 0 || x >= gridSize.value || y < 0 || y >= gridSize.value);\n}\n\nfunction getSelectedWord(): string {\n  let selectedWord = '';\n\n  const startCell = dragState.value?.startCell;\n  const endCell = dragState.value?.currentCell;\n  const direction = dragState.value?.direction;\n\n  if (startCell && endCell) {\n    if (direction === 'left') {\n      for (let x = startCell[0]; x >= endCell[0]; x--) {\n        selectedWord += grid[x][startCell[1]];\n      }\n    } else if (direction === 'right') {\n      for (let x = startCell[0]; x <= endCell[0]; x++) {\n        selectedWord += grid[x][startCell[1]];\n      }\n    } else if (direction === 'up') {\n      for (let y = startCell[1]; y >= endCell[1]; y--) {\n        selectedWord += grid[startCell[0]][y];\n      }\n    } else if (direction === 'down') {\n      for (let y = startCell[1]; y <= endCell[1]; y++) {\n        selectedWord += grid[startCell[0]][y];\n      }\n    } else if (direction === 'up-left') {\n      for (let i = 0; i <= startCell[1] - endCell[1]; i++) {\n        const x = startCell[0] - i;\n        const y = startCell[1] - i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else if (direction === 'up-right') {\n      for (let i = 0; i <= startCell[1] - endCell[1]; i++) {\n        const x = startCell[0] + i;\n        const y = startCell[1] - i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else if (direction === 'down-left') {\n      for (let i = 0; i <= endCell[1] - startCell[1]; i++) {\n        const x = startCell[0] - i;\n        const y = startCell[1] + i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else if (direction === 'down-right') {\n      for (let i = 0; i <= endCell[1] - startCell[1]; i++) {\n        const x = startCell[0] + i;\n        const y = startCell[1] + i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else {\n      selectedWord = grid[startCell[0]][startCell[1]];\n    }\n  }\n\n  return selectedWord;\n}\n\nfunction fillCell(xCell: number, yCell: number, fillStyle: string) {\n  if (\n    xCell < 0 ||\n    xCell > gridSize.value - 1 ||\n    yCell < 0 ||\n    yCell > gridSize.value - 1\n  ) {\n    return;\n  }\n\n  const canvas = document.getElementById('c') as HTMLCanvasElement;\n  const ctx = canvas.getContext('2d');\n\n  if (ctx) {\n    ctx.fillStyle = fillStyle;\n    ctx.fillRect(\n      xCell * cellSize.value,\n      yCell * cellSize.value,\n      cellSize.value,\n      cellSize.value\n    );\n  }\n}\n\nfunction markSelectedWordCorrect() {\n  for (let x = 0; x < gridSize.value; x++) {\n    for (let y = 0; y < gridSize.value; y++) {\n      if (!correctCells[x][y]) {\n        correctCells[x][y] = selectedCells[x][y];\n      }\n    }\n  }\n\n  resetSelectedCells();\n}\n\nfunction getDirection(\n  startX: number,\n  startY: number,\n  x: number,\n  y: number\n): Direction {\n  const dx = x - startX;\n  const dy = y - startY;\n\n  if (dx === 0) {\n    if (dy > 0) {\n      return 'down';\n    } else if (dy < 0) {\n      return 'up';\n    }\n  } else if (dy === 0) {\n    if (dx > 0) {\n      return 'right';\n    } else if (dx < 0) {\n      return 'left';\n    }\n  } else if (dx >= 1 && dy >= 1) {\n    return 'down-right';\n  } else if (dx <= -1 && dy >= 1) {\n    return 'down-left';\n  } else if (dx >= 1 && dy <= -1) {\n    return 'up-right';\n  } else if (dx <= -1 && dy <= -1) {\n    return 'up-left';\n  } else {\n    return undefined;\n  }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_unref(words).length > 0)\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"canvas\", {\n              id: \"c\",\n              width: _unref(canvasSize),\n              height: _unref(canvasSize),\n              onPointerdown: _cache[0] || (_cache[0] = _withModifiers(($event: any) => (onPointerdownCanvas($event)), [\"stop\"])),\n              onPointermove: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (onPointermoveCanvas($event)), [\"stop\"])),\n              onPointerup: _cache[2] || (_cache[2] = _withModifiers(($event: any) => (onPointerupCanvas($event)), [\"stop\"]))\n            }, null, 40, _hoisted_3),\n            (__props.task.showWordList)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  _createElementVNode(\"h2\", {\n                    class: \"word-list-title\",\n                    textContent: _toDisplayString(__props.task.strings.wordListTitle)\n                  }, null, 8, _hoisted_5),\n                  _createElementVNode(\"ul\", null, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(words), (word) => {\n                      return (_openBlock(), _createElementBlock(\"li\", {\n                        key: word,\n                        title: word,\n                        class: _normalizeClass([\"word\", { 'found-word': foundWords.value.includes(word) }])\n                      }, _toDisplayString(word), 11, _hoisted_6))\n                    }), 128))\n                  ])\n                ]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _hoisted_8,\n            _createElementVNode(\"span\", {\n              class: \"time-info\",\n              textContent: _toDisplayString(__props.task.strings.timer)\n            }, null, 8, _hoisted_9),\n            _createElementVNode(\"span\", {\n              textContent: _toDisplayString(\n            Math.floor(timer.value / 60) +\n            ':' +\n            (timer.value % 60).toString().padStart(2, '0')\n          )\n            }, null, 8, _hoisted_10)\n          ]),\n          _createElementVNode(\"div\", _hoisted_11, [\n            _createElementVNode(\"div\", _hoisted_12, [\n              (_unref(taskCompleted))\n                ? (_openBlock(), _createBlock(FeedbackElement, {\n                    key: 0,\n                    achievedPoints: _unref(score),\n                    maxPoints: _unref(maxScore),\n                    \"result-message\": _unref(resultMessage)\n                  }, null, 8, [\"achievedPoints\", \"maxPoints\", \"result-message\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _createElementVNode(\"div\", _hoisted_13, [\n              (_unref(showCheckButton))\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 0,\n                    textContent: _toDisplayString(__props.task.strings.checkButton),\n                    onClick: onClickCheck,\n                    type: \"button\",\n                    class: \"stud5p-button\"\n                  }, null, 8, _hoisted_14))\n                : _createCommentVNode(\"\", true),\n              (_unref(taskCompleted))\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 1,\n                    textContent: _toDisplayString(__props.task.strings.retryButton),\n                    onClick: onClickRetry,\n                    type: \"button\",\n                    class: \"stud5p-button\"\n                  }, null, 8, _hoisted_15))\n                : _createCommentVNode(\"\", true),\n              (taskSubmitted.value && !showSolutions.value)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 2,\n                    textContent: _toDisplayString(__props.task.strings.solutionsButton),\n                    onClick: onClickShowSolutions,\n                    type: \"button\",\n                    class: \"stud5p-button\"\n                  }, null, 8, _hoisted_16))\n                : _createCommentVNode(\"\", true)\n            ])\n          ])\n        ], 64))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, _toDisplayString(_unref($gettext)(\n          'Fgen Sie Wrter hinzu um ein Find the Words Rtsel zu erstellen.'\n        )), 1))\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"stud5p-task\">\n    <template v-if=\"words.length > 0\">\n      <div class=\"canvas-and-word-list-container\">\n        <canvas\n          id=\"c\"\n          :width=\"canvasSize\"\n          :height=\"canvasSize\"\n          @pointerdown.stop=\"onPointerdownCanvas($event)\"\n          @pointermove.stop=\"onPointermoveCanvas($event)\"\n          @pointerup.stop=\"onPointerupCanvas($event)\"\n        />\n\n        <div class=\"word-list\" v-if=\"task.showWordList\">\n          <h2 class=\"word-list-title\" v-text=\"task.strings.wordListTitle\" />\n          <ul>\n            <template v-for=\"word in words\" :key=\"word\">\n              <li\n                :title=\"word\"\n                class=\"word\"\n                :class=\"{ 'found-word': foundWords.includes(word) }\"\n              >\n                {{ word }}\n              </li>\n            </template>\n          </ul>\n        </div>\n      </div>\n      <div class=\"time-container\">\n        <span></span>\n        <span class=\"time-info\" v-text=\"task.strings.timer\" />\n        <span\n          v-text=\"\n            Math.floor(timer / 60) +\n            ':' +\n            (timer % 60).toString().padStart(2, '0')\n          \"\n        />\n      </div>\n      <div class=\"feedback-and-button-container\">\n        <div class=\"feedback-container\">\n          <FeedbackElement\n            v-if=\"taskCompleted\"\n            :achievedPoints=\"score\"\n            :maxPoints=\"maxScore\"\n            :result-message=\"resultMessage\"\n          />\n        </div>\n\n        <div class=\"button-panel\">\n          <button\n            v-if=\"showCheckButton\"\n            v-text=\"task.strings.checkButton\"\n            @click=\"onClickCheck\"\n            type=\"button\"\n            class=\"stud5p-button\"\n          />\n\n          <button\n            v-if=\"taskCompleted\"\n            v-text=\"task.strings.retryButton\"\n            @click=\"onClickRetry\"\n            type=\"button\"\n            class=\"stud5p-button\"\n          />\n\n          <button\n            v-if=\"taskSubmitted && !showSolutions\"\n            v-text=\"task.strings.solutionsButton\"\n            @click=\"onClickShowSolutions\"\n            type=\"button\"\n            class=\"stud5p-button\"\n          />\n        </div>\n      </div>\n    </template>\n    <div v-else>\n      {{\n        $gettext(\n          'Fgen Sie Wrter hinzu um ein Find the Words Rtsel zu erstellen.'\n        )\n      }}\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  computed,\n  defineProps,\n  onBeforeUnmount,\n  onMounted,\n  PropType,\n  ref,\n  watch,\n} from 'vue';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\nimport { FindTheWordsTask } from '@/models/TaskDefinition';\nimport { v4 } from 'uuid';\nimport { $gettext } from '@/language/gettext';\n\nconst WordSearch = require('@blex41/word-search');\n\ntype Direction =\n  | 'left'\n  | 'right'\n  | 'up'\n  | 'down'\n  | 'up-left'\n  | 'up-right'\n  | 'down-left'\n  | 'down-right'\n  | undefined;\n\ntype DragState =\n  | {\n      dragId: string;\n      startCell: [number, number];\n      currentCell: [number, number];\n      direction: Direction;\n    }\n  | undefined;\n\n// Props\nconst props = defineProps({\n  task: {\n    type: Object as PropType<FindTheWordsTask>,\n    required: true,\n  },\n});\n\n// State\nlet grid: string[][] = [];\nlet selectedCells: boolean[][] = [];\nlet correctCells: boolean[][] = [];\nlet solutionCoordinates: { x: number; y: number }[] = [];\nconst foundWords = ref<string[]>([]);\nconst dragState = ref<DragState>();\nconst taskSubmitted = ref<boolean>(false);\nconst showSolutions = ref<boolean>(false);\nconst timer = ref<number>(0); // Track elapsed time in seconds\nlet timerStarted: boolean = false; // Flag to check if timer has started\nlet timerInterval: number | null = null; // Store interval ID to control timer\n\n// Lifecycle Hooks\nonMounted(() => {\n  initializeGrid();\n  drawGrid();\n  document.addEventListener('pointerdown', onPointerdownOutsideCanvas);\n  document.addEventListener('pointerup', onPointerupOutsideCanvas);\n});\n\nonBeforeUnmount(() => {\n  document.removeEventListener('pointerdown', onPointerdownOutsideCanvas);\n  document.removeEventListener('pointerup', onPointerupOutsideCanvas);\n});\n\n// Computed properties\nconst gridSize = computed(() => {\n  return props.task?.size;\n});\n\nconst cellSize = computed(() => {\n  return 42;\n});\n\nconst canvasSize = computed(() => {\n  return gridSize.value * cellSize.value;\n});\n\nconst words = computed(() => {\n  if (props.task?.words) {\n    return props.task.words\n      .split(',')\n      .filter((word) => word.trim())\n      .map((word) => word.trim().toUpperCase());\n  }\n  return [];\n});\n\nconst disabledDirections = computed(() => {\n  let result = [];\n  if (props.task?.directions) {\n    if (!props.task.directions.n) result.push('N');\n    if (!props.task.directions.ne) result.push('NE');\n    if (!props.task.directions.e) result.push('E');\n    if (!props.task.directions.se) result.push('SE');\n    if (!props.task.directions.s) result.push('S');\n    if (!props.task.directions.sw) result.push('SW');\n    if (!props.task.directions.w) result.push('W');\n    if (!props.task.directions.nw) result.push('NW');\n  }\n  return result;\n});\n\nconst alphabet = computed(() => {\n  if (props.task?.alphabet) {\n    return props.task.alphabet\n      .toUpperCase()\n      .split('')\n      .filter((char) => char.match(/[0-9\\p{L}]/u));\n  }\n  return [];\n});\n\nconst score = computed(() => {\n  return foundWords.value.length;\n});\n\nconst maxScore = computed(() => {\n  return words.value.length;\n});\n\nconst taskCompleted = computed(() => {\n  return score.value === maxScore.value || taskSubmitted.value;\n});\n\nconst resultMessage = computed(() => {\n  let result = props.task.strings.resultMessage.replace(\n    ':correct',\n    score.value.toString()\n  );\n  result = result.replace(':total', maxScore.value.toString());\n\n  return result;\n});\n\nconst showCheckButton = computed(() => {\n  return !taskCompleted.value;\n});\n\n// Watchers\nwatch(\n  () => props.task,\n  () => {\n    initializeGrid();\n    drawGrid();\n  },\n  { deep: true }\n);\n\nwatch(\n  () => taskCompleted.value,\n  (newValue) => {\n    if (newValue) {\n      stopTimer();\n    }\n  }\n);\n\nfunction startTimer(): void {\n  timerStarted = true;\n\n  // Start a timer that increments every second\n  timerInterval = setInterval(() => {\n    timer.value++;\n  }, 1000) as unknown as number;\n}\n\nfunction stopTimer(): void {\n  // Stop the timer and clear the interval\n  if (timerInterval !== null) {\n    clearInterval(timerInterval);\n    timerInterval = null; // Reset after clearing\n  }\n\n  timerStarted = false;\n}\n\nfunction onClickCheck(): void {\n  taskSubmitted.value = true;\n  stopTimer();\n}\n\nfunction onClickRetry(): void {\n  taskSubmitted.value = false;\n  showSolutions.value = false;\n  timer.value = 0;\n  solutionCoordinates = [];\n  stopTimer();\n  initializeGrid();\n  drawGrid();\n}\n\nfunction onClickShowSolutions(): void {\n  showSolutions.value = true;\n  drawGrid();\n}\n\nfunction randomLetter() {\n  if (alphabet.value.length > 0) {\n    const randomIndex = Math.floor(Math.random() * alphabet.value.length);\n    return alphabet.value[randomIndex];\n  }\n  return '';\n}\n\nfunction resetSelectedCells() {\n  selectedCells = [];\n  for (let x = 0; x < gridSize.value; x++) {\n    selectedCells[x] = [];\n    for (let y = 0; y < gridSize.value; y++) {\n      selectedCells[x][y] = false;\n    }\n  }\n}\n\nfunction resetCorrectCells() {\n  correctCells = [];\n  for (let x = 0; x < gridSize.value; x++) {\n    correctCells[x] = [];\n    for (let y = 0; y < gridSize.value; y++) {\n      correctCells[x][y] = false;\n    }\n  }\n}\n\nfunction initializeGrid() {\n  resetSelectedCells();\n  resetCorrectCells();\n  foundWords.value = [];\n  solutionCoordinates = [];\n\n  const options = {\n    cols: gridSize.value,\n    rows: gridSize.value,\n    disabledDirections: disabledDirections.value,\n    dictionary: words.value,\n    maxWords: words.value.length,\n    backwardsProbability: 0.3,\n    upperCase: true,\n    diacritics: true,\n  };\n\n  // Create a new puzzle\n  let ws = new WordSearch(options);\n  let count = 1;\n  while (ws.words.length !== words.value.length && count <= 10) {\n    console.log(\n      'Es konnten nicht alle Wrter untergebracht werden. Versuche es bis zu 10 mal erneut:',\n      count + '. Versuch'\n    );\n    ws = new WordSearch(options);\n    count++;\n  }\n\n  ws.words.forEach((word: any) => {\n    solutionCoordinates.push(...word.path);\n  });\n\n  grid = [];\n  for (let x = 0; x < gridSize.value; x++) {\n    grid[x] = [];\n    for (let y = 0; y < gridSize.value; y++) {\n      if (solutionCoordinates.some((coord) => coord.x === x && coord.y === y)) {\n        grid[x][y] = ws.grid[y][x];\n      } else {\n        grid[x][y] = randomLetter();\n      }\n    }\n  }\n}\n\nfunction drawGrid() {\n  const canvas = document.getElementById('c') as HTMLCanvasElement;\n  if (!canvas) {\n    console.error('No Canvas');\n    return;\n  }\n  const ctx = canvas.getContext('2d');\n  if (ctx) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.font = 'bold 26px calibri';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    for (let x = 0; x < gridSize.value; x++) {\n      for (let y = 0; y < gridSize.value; y++) {\n        if (correctCells[x][y]) {\n          fillCell(x, y, '#d4f6e6');\n        }\n        if (!showSolutions.value && selectedCells[x][y]) {\n          fillCell(x, y, 'rgba(140, 180, 255, 0.34)');\n        }\n        if (\n          showSolutions.value &&\n          solutionCoordinates.some((coord) => coord.x === x && coord.y === y) &&\n          !correctCells[x][y]\n        ) {\n          fillCell(x, y, 'rgba(140, 180, 255, 0.34)');\n        }\n        ctx.strokeStyle = 'gainsboro';\n        ctx.strokeRect(\n          x * cellSize.value,\n          y * cellSize.value,\n          cellSize.value,\n          cellSize.value\n        );\n        ctx.fillStyle = '#404040';\n        ctx.fillText(\n          grid[x][y],\n          x * cellSize.value + cellSize.value / 2,\n          y * cellSize.value + cellSize.value / 2\n        );\n      }\n    }\n  }\n}\n\nfunction onPointerdownCanvas(event: PointerEvent) {\n  if (taskCompleted.value) return;\n\n  if (!timerStarted) {\n    console.log('Starting timer');\n    startTimer();\n  }\n\n  if (!dragState.value) {\n    // Start selection\n    const { cellX, cellY } = getCellUnderCursor(event);\n\n    dragState.value = {\n      dragId: v4(),\n      startCell: [cellX, cellY],\n      currentCell: [cellX, cellY],\n      direction: undefined,\n    };\n\n    resetSelectedCells();\n    selectedCells[cellX][cellY] = true;\n    drawGrid();\n  } else {\n    // We are already selecting with the two-clicks selection method and this\n    // is the second click, so we end the selection\n    endSelection();\n  }\n}\n\nfunction getCellUnderCursor(event: PointerEvent) {\n  const canvas = document.getElementById('c') as HTMLCanvasElement;\n  const rect = canvas.getBoundingClientRect();\n  const x = event.clientX - rect.left;\n  const y = event.clientY - rect.top;\n  const cellX = Math.max(\n    0,\n    Math.min(Math.floor(x / cellSize.value), gridSize.value - 1)\n  );\n  const cellY = Math.max(\n    0,\n    Math.min(Math.floor(y / cellSize.value), gridSize.value - 1)\n  );\n  return { cellX, cellY };\n}\n\nfunction onPointermoveCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    const { cellX, cellY } = getCellUnderCursor(event);\n\n    const direction = getDirection(\n      dragState.value.startCell[0],\n      dragState.value.startCell[1],\n      cellX,\n      cellY\n    );\n\n    resetSelectedCells();\n\n    selectedCells[dragState.value.startCell[0]][dragState.value.startCell[1]] =\n      true;\n\n    if (direction === 'left') {\n      for (\n        let xCoordinate = dragState.value.startCell[0];\n        xCoordinate >= cellX;\n        xCoordinate--\n      ) {\n        selectedCells[xCoordinate][dragState.value.startCell[1]] = true;\n      }\n    } else if (direction === 'right') {\n      for (\n        let xCoordinate = dragState.value.startCell[0];\n        xCoordinate <= cellX;\n        xCoordinate++\n      ) {\n        selectedCells[xCoordinate][dragState.value.startCell[1]] = true;\n      }\n    } else if (direction === 'up') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate >= cellY;\n        yCoordinate--\n      ) {\n        selectedCells[dragState.value.startCell[0]][yCoordinate] = true;\n      }\n    } else if (direction === 'down') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate <= cellY;\n        yCoordinate++\n      ) {\n        selectedCells[dragState.value.startCell[0]][yCoordinate] = true;\n      }\n    } else if (direction === 'up-right') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate >= cellY;\n        yCoordinate--\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] -\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    } else if (direction === 'up-left') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate >= cellY;\n        yCoordinate--\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] +\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    } else if (direction === 'down-left') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate <= cellY;\n        yCoordinate++\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] -\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    } else if (direction === 'down-right') {\n      for (\n        let yCoordinate = dragState.value.startCell[1];\n        yCoordinate <= cellY;\n        yCoordinate++\n      ) {\n        const xCoordinate =\n          dragState.value.startCell[0] +\n          (yCoordinate - dragState.value.startCell[1]);\n        if (coordinatesAreValid(xCoordinate, yCoordinate)) {\n          selectedCells[xCoordinate][yCoordinate] = true;\n        }\n      }\n    }\n\n    dragState.value = {\n      dragId: dragState.value.dragId,\n      startCell: dragState.value.startCell,\n      currentCell: [cellX, cellY],\n      direction: direction,\n    };\n\n    drawGrid();\n  }\n}\n\nfunction onPointerupCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    const { cellX, cellY } = getCellUnderCursor(event);\n\n    if (\n      dragState.value.startCell[0] != cellX ||\n      dragState.value.startCell[1] != cellY\n    ) {\n      // Moved the cursor to another cell before releasing, so we use click-and-hold selection and end the selection\n      endSelection();\n    }\n  }\n}\n\nfunction onPointerdownOutsideCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    endSelection();\n  }\n}\n\nfunction onPointerupOutsideCanvas(event: PointerEvent) {\n  if (dragState.value) {\n    endSelection();\n  }\n}\n\nfunction endSelection() {\n  const selectedWord = getSelectedWord();\n  const reversedSelectedWord = selectedWord.split('').reverse().join('');\n  console.log('Selected:', selectedWord, reversedSelectedWord);\n\n  const isWordFound =\n    words.value.includes(selectedWord) ||\n    words.value.includes(reversedSelectedWord);\n\n  if (isWordFound) markSelectedWordCorrect();\n\n  const isNewWord =\n    !foundWords.value.includes(selectedWord) &&\n    !foundWords.value.includes(reversedSelectedWord);\n\n  if (isWordFound && isNewWord) {\n    if (words.value.includes(selectedWord)) {\n      console.log('Found:', selectedWord);\n      foundWords.value.push(selectedWord);\n    } else {\n      console.log('Found:', reversedSelectedWord);\n      foundWords.value.push(reversedSelectedWord);\n    }\n  }\n\n  dragState.value = undefined;\n  drawGrid();\n}\n\nfunction coordinatesAreValid(x: number, y: number): boolean {\n  return !(x < 0 || x >= gridSize.value || y < 0 || y >= gridSize.value);\n}\n\nfunction getSelectedWord(): string {\n  let selectedWord = '';\n\n  const startCell = dragState.value?.startCell;\n  const endCell = dragState.value?.currentCell;\n  const direction = dragState.value?.direction;\n\n  if (startCell && endCell) {\n    if (direction === 'left') {\n      for (let x = startCell[0]; x >= endCell[0]; x--) {\n        selectedWord += grid[x][startCell[1]];\n      }\n    } else if (direction === 'right') {\n      for (let x = startCell[0]; x <= endCell[0]; x++) {\n        selectedWord += grid[x][startCell[1]];\n      }\n    } else if (direction === 'up') {\n      for (let y = startCell[1]; y >= endCell[1]; y--) {\n        selectedWord += grid[startCell[0]][y];\n      }\n    } else if (direction === 'down') {\n      for (let y = startCell[1]; y <= endCell[1]; y++) {\n        selectedWord += grid[startCell[0]][y];\n      }\n    } else if (direction === 'up-left') {\n      for (let i = 0; i <= startCell[1] - endCell[1]; i++) {\n        const x = startCell[0] - i;\n        const y = startCell[1] - i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else if (direction === 'up-right') {\n      for (let i = 0; i <= startCell[1] - endCell[1]; i++) {\n        const x = startCell[0] + i;\n        const y = startCell[1] - i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else if (direction === 'down-left') {\n      for (let i = 0; i <= endCell[1] - startCell[1]; i++) {\n        const x = startCell[0] - i;\n        const y = startCell[1] + i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else if (direction === 'down-right') {\n      for (let i = 0; i <= endCell[1] - startCell[1]; i++) {\n        const x = startCell[0] + i;\n        const y = startCell[1] + i;\n        if (coordinatesAreValid(x, y)) {\n          selectedWord += grid[x][y];\n        } else {\n          break;\n        }\n      }\n    } else {\n      selectedWord = grid[startCell[0]][startCell[1]];\n    }\n  }\n\n  return selectedWord;\n}\n\nfunction fillCell(xCell: number, yCell: number, fillStyle: string) {\n  if (\n    xCell < 0 ||\n    xCell > gridSize.value - 1 ||\n    yCell < 0 ||\n    yCell > gridSize.value - 1\n  ) {\n    return;\n  }\n\n  const canvas = document.getElementById('c') as HTMLCanvasElement;\n  const ctx = canvas.getContext('2d');\n\n  if (ctx) {\n    ctx.fillStyle = fillStyle;\n    ctx.fillRect(\n      xCell * cellSize.value,\n      yCell * cellSize.value,\n      cellSize.value,\n      cellSize.value\n    );\n  }\n}\n\nfunction markSelectedWordCorrect() {\n  for (let x = 0; x < gridSize.value; x++) {\n    for (let y = 0; y < gridSize.value; y++) {\n      if (!correctCells[x][y]) {\n        correctCells[x][y] = selectedCells[x][y];\n      }\n    }\n  }\n\n  resetSelectedCells();\n}\n\nfunction getDirection(\n  startX: number,\n  startY: number,\n  x: number,\n  y: number\n): Direction {\n  const dx = x - startX;\n  const dy = y - startY;\n\n  if (dx === 0) {\n    if (dy > 0) {\n      return 'down';\n    } else if (dy < 0) {\n      return 'up';\n    }\n  } else if (dy === 0) {\n    if (dx > 0) {\n      return 'right';\n    } else if (dx < 0) {\n      return 'left';\n    }\n  } else if (dx >= 1 && dy >= 1) {\n    return 'down-right';\n  } else if (dx <= -1 && dy >= 1) {\n    return 'down-left';\n  } else if (dx >= 1 && dy <= -1) {\n    return 'up-right';\n  } else if (dx <= -1 && dy <= -1) {\n    return 'up-left';\n  } else {\n    return undefined;\n  }\n}\n</script>\n\n<style scoped>\n.canvas-and-word-list-container {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: center;\n}\n\n.word-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1em;\n  background: #f5f5f5;\n  padding: 0.5em;\n  border: 1px solid #ccc;\n  align-self: stretch;\n  max-width: 12em;\n}\n\n.word-list-title {\n  margin: 0;\n  font-weight: bold;\n}\n\n.word-list ul {\n  padding-left: 0.75em;\n  padding-right: 1.5em;\n}\n\n.word-list ul .found-word {\n  color: #255c41;\n  position: relative;\n}\n\n.word-list ul .found-word::after {\n  content: '';\n  position: absolute;\n  right: -1.5em;\n}\n\n.word {\n  overflow-wrap: break-word;\n}\n\n.time-container {\n  padding-top: 0.5em;\n  display: flex;\n  flex-direction: row;\n  gap: 0.25em;\n  justify-content: flex-start;\n  align-items: center;\n}\n\n.time-info {\n  font-weight: bold;\n}\n</style>\n","import script from \"./FindTheWordsViewer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FindTheWordsViewer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FindTheWordsViewer.vue?vue&type=style&index=0&id=4ea5c8bd&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4ea5c8bd\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" Task definition: \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_SelectVideo = _resolveComponent(\"SelectVideo\")!\n  const _component_TabComponent = _resolveComponent(\"TabComponent\")!\n  const _component_AddInteractions = _resolveComponent(\"AddInteractions\")!\n  const _component_TabsComponent = _resolveComponent(\"TabsComponent\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_TabsComponent, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_TabComponent, {\n          title: _ctx.$gettext('1. Video auswhlen'),\n          icon: \"video2\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_SelectVideo, { \"task-definition\": _ctx.taskDefinition }, null, 8, [\"task-definition\"])\n          ]),\n          _: 1\n        }, 8, [\"title\"]),\n        _createVNode(_component_TabComponent, {\n          title: _ctx.$gettext('2. Interaktionen hinzufgen'),\n          icon: \"content\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_AddInteractions, { \"task-definition\": _ctx.taskDefinition }, null, 8, [\"task-definition\"])\n          ]),\n          _: 1\n        }, 8, [\"title\"])\n      ]),\n      _: 1\n    }),\n    false\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _hoisted_2,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.taskDefinition), 1)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","<!-- Allow us to mutate the prop 'taskDefinition' as much as we want-->\n<!-- eslint-disable vue/no-mutating-props -->\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { InteractiveVideoTask } from '@/models/InteractiveVideoTask';\nimport { $gettext } from '@/language/gettext';\nimport TabsComponent from '@/components/courseware-components-ported-to-vue3/TabsComponent.vue';\nimport TabComponent from '@/components/courseware-components-ported-to-vue3/TabComponent.vue';\nimport AddInteractions from '@/components/interactiveVideo/AddInteractions.vue';\nimport SelectVideo from '@/components/interactiveVideo/SelectVideo.vue';\n\nexport default defineComponent({\n  name: 'InteractiveVideoEditor',\n  data() {\n    return {};\n  },\n  methods: {\n    $gettext,\n  },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  computed: {},\n  components: {\n    SelectVideo,\n    AddInteractions,\n    TabComponent,\n    TabsComponent,\n  },\n});\n</script>\n\n<template>\n  <TabsComponent>\n    <TabComponent :title=\"$gettext('1. Video auswhlen')\" icon=\"video2\">\n      <SelectVideo :task-definition=\"taskDefinition\" />\n    </TabComponent>\n    <TabComponent\n      :title=\"$gettext('2. Interaktionen hinzufgen')\"\n      icon=\"content\"\n    >\n      <AddInteractions :task-definition=\"taskDefinition\" />\n    </TabComponent>\n  </TabsComponent>\n  <div v-if=\"false\">\n    Task definition:\n    <pre>{{ taskDefinition }}</pre>\n  </div>\n</template>\n\n<style scoped></style>\n","<!-- Adapted from https://zerotomastery.io/blog/tab-component-design-with-vue/ -->\n<template>\n  <div class=\"tabs cw-tabs\">\n    <div role=\"tablist\" class=\"tab-buttons cw-tabs-nav\">\n      <button\n        v-for=\"tab in tabs\"\n        :key=\"tab.title\"\n        @click=\"activeTabHash = tab.hash\"\n        :class=\"{\n          'is-active': tab.hash === activeTabHash,\n          [`cw-tabs-nav-icon-text-${tab.icon}`]:\n            tab.icon !== '' && tab.name !== '',\n          [`cw-tabs-nav-icon-solo-${tab.icon}`]:\n            tab.icon !== '' && tab.name === '',\n        }\"\n        :aria-selected=\"tab.hash === activeTabHash\"\n        :aria-controls=\"tab.hash\"\n        :id=\"'#' + tab.hash\"\n        :tabindex=\"0\"\n      >\n        {{ tab.title }}\n      </button>\n    </div>\n    <slot />\n  </div>\n</template>\n\n<script>\nimport { computed, defineComponent } from 'vue';\n\nexport default defineComponent({\n  data() {\n    return {\n      activeTabHash: '',\n      tabs: [],\n    };\n  },\n  provide() {\n    return {\n      addTab: (tab) => {\n        const count = this.tabs.push(tab);\n\n        if (count === 1) {\n          this.activeTabHash = tab.hash;\n        }\n      },\n      activeTabHash: computed(() => this.activeTabHash),\n    };\n  },\n});\n</script>\n","import { render } from \"./TabsComponent.vue?vue&type=template&id=7796b88b\"\nimport script from \"./TabsComponent.vue?vue&type=script&lang=js\"\nexport * from \"./TabsComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- Adapted from https://zerotomastery.io/blog/tab-component-design-with-vue/ -->\n<template>\n  <div\n    role=\"tabpanel\"\n    class=\"cw-tab cw-tabs-content\"\n    :class=\"{ 'cw-tab-active': isActive }\"\n    v-show=\"isActive\"\n    :aria-labelledby=\"buttonSelector\"\n  >\n    <slot />\n  </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nexport default defineComponent({\n  inject: ['activeTabHash', 'addTab'],\n  props: {\n    title: {\n      type: String,\n      required: true,\n    },\n    icon: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n  data() {\n    return { hash: '', isActive: false };\n  },\n  created() {\n    this.hash = '#' + this.title.toLowerCase().replace(/ /g, '-');\n\n    this.addTab({\n      title: this.title,\n      hash: this.hash,\n      icon: this.icon,\n    });\n  },\n  watch: {\n    activeTabHash() {\n      this.isActive = this.activeTabHash === this.hash;\n    },\n  },\n  computed: {\n    buttonSelector() {\n      return '#' + this.hash;\n    },\n  },\n});\n</script>\n","import { render } from \"./TabComponent.vue?vue&type=template&id=800c4dce\"\nimport script from \"./TabComponent.vue?vue&type=script&lang=js\"\nexport * from \"./TabComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5ee2028d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"tick-label\" }\nconst _hoisted_2 = [\"onClick\", \"title\"]\nconst _hoisted_3 = { class: \"timeline-interactions\" }\nconst _hoisted_4 = [\"title\"]\nconst _hoisted_5 = { class: \"overflow-container\" }\nconst _hoisted_6 = [\"onClick\", \"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_7 = { class: \"timeline-interaction-label\" }\nconst _hoisted_8 = [\"title\", \"onClick\"]\nconst _hoisted_9 = [\"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_10 = [\"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_11 = { style: {\"white-space\":\"pre-wrap\",\"display\":\"none\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref: \"root\",\n    class: \"timeline-root\",\n    onDragoverCapture: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onDragOverTimeline && _ctx.onDragOverTimeline(...args)))\n  }, [\n    _createElementVNode(\"div\", {\n      class: \"timeline-axis\",\n      ref: \"timelineAxis\",\n      onPointerdown: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onPointerDownAxis && _ctx.onPointerDownAxis(...args)))\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.axisScale, (point, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"tick\",\n          key: index\n        }, [\n          _createElementVNode(\"div\", _hoisted_1, _toDisplayString(index % 5 === 0 ? _ctx.formatVideoTimestamp(point) : ' '), 1),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"tick-line\", {\n            major: index % 5 === 0,\n          }])\n          }, null, 2)\n        ]))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.visibleInteractions, (interaction) => {\n        return (_openBlock(), _createElementBlock(\"button\", {\n          key: interaction.id,\n          class: \"interaction-marker\",\n          style: _normalizeStyle(_ctx.interactionMarkerStyle(interaction)),\n          onPointerdown: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"stop\"])),\n          onClick: _withModifiers(($event: any) => {\n          _ctx.onClickInteraction(interaction);\n          _ctx.$emit('timelineSeek', interaction.startTime + 0.1);\n        }, [\"stop\"]),\n          title: \n          _ctx.$gettext('Zu %{ interaction } springen', {\n            interaction: _ctx.printInteractionType(interaction),\n          })\n        \n        }, null, 44, _hoisted_2))\n      }), 128))\n    ], 544),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"timeline\", { 'pan-timeline': this.dragState?.type === 'panTimeline' }]),\n      ref: \"timeline\",\n      onPointerdown: _cache[3] || (_cache[3] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.onPointerDownAxis && _ctx.onPointerDownAxis(...args)), [\"self\"])),\n      onWheel: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onWheel && _ctx.onWheel(...args))),\n      onContextmenu: _cache[5] || (_cache[5] = _withModifiers(() => {}, [\"prevent\"]))\n    }, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.visibleInteractions, (interaction) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: interaction.id,\n            class: _normalizeClass([\"timeline-interaction\", {\n            selected: _ctx.selectedInteractionId === interaction.id,\n          }]),\n            style: _normalizeStyle(_ctx.timelineInteractionStyle(interaction)),\n            title: _ctx.printInteractionType(interaction)\n          }, [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createElementVNode(\"button\", {\n                type: \"button\",\n                class: _normalizeClass([\"button select-interaction\", _ctx.iconForInteraction(interaction)]),\n                onClick: _withModifiers(($event: any) => (_ctx.onClickInteraction(interaction)), [\"stop\"]),\n                onPointerdown: ($event: any) => (_ctx.onPointerDownInteraction($event, interaction)),\n                onPointermove: ($event: any) => (_ctx.onPointerMoveInteraction($event, interaction)),\n                onPointerup: ($event: any) => (_ctx.onPointerUpInteraction($event, interaction))\n              }, [\n                _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.printInteractionType(interaction)), 1)\n              ], 42, _hoisted_6),\n              (interaction.endTime < _ctx.viewportEnd)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 0,\n                    type: \"button\",\n                    class: \"small-button trash delete-interaction\",\n                    title: _ctx.$gettext('Lschen'),\n                    onClick: ($event: any) => (_ctx.$emit('deleteInteraction', interaction.id))\n                  }, null, 8, _hoisted_8))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"interaction-drag-handle start\",\n              onPointerdown: ($event: any) => (_ctx.onPointerDownInteractionStart($event, interaction)),\n              onPointermove: ($event: any) => (_ctx.onPointerMoveInteractionStart($event, interaction)),\n              onPointerup: ($event: any) => (_ctx.onPointerUpInteractionStart($event, interaction))\n            }, null, 40, _hoisted_9),\n            _createElementVNode(\"div\", {\n              class: \"interaction-drag-handle end\",\n              onPointerdown: ($event: any) => (_ctx.onPointerDownInteractionEnd($event, interaction)),\n              onPointermove: ($event: any) => (_ctx.onPointerMoveInteractionEnd($event, interaction)),\n              onPointerup: ($event: any) => (_ctx.onPointerUpInteractionEnd($event, interaction))\n            }, null, 40, _hoisted_10)\n          ], 14, _hoisted_4))\n        }), 128))\n      ]),\n      _createElementVNode(\"div\", {\n        class: \"time-marker\",\n        draggable: \"true\",\n        onDragstart: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onDragStartTimeMarker && _ctx.onDragStartTimeMarker(...args))),\n        style: _normalizeStyle({\n          left: _ctx.positionForTimeMarker,\n        })\n      }, null, 36)\n    ], 34),\n    _createElementVNode(\"div\", _hoisted_11, _toDisplayString({\n          zoomTransform: _ctx.zoomTransform,\n          viewportWidthEm: _ctx.viewportWidthEm,\n          viewportWidthSeconds: _ctx.viewportWidthSeconds,\n          viewportStart: _ctx.viewportStart,\n          viewportEnd: _ctx.viewportEnd,\n          dragState: _ctx.dragState,\n        }), 1)\n  ], 544))\n}","<script lang=\"ts\">\nimport {\n  ComponentPublicInstance,\n  defineComponent,\n  inject,\n  PropType,\n  StyleValue,\n} from 'vue';\nimport { VideoMetadata } from '@/components/interactiveVideo/events';\nimport { throttle } from 'lodash';\nimport {\n  iconForInteraction,\n  Interaction,\n  InteractiveVideoTask,\n  printInteractionType,\n} from '@/models/InteractiveVideoTask';\nimport { $gettext } from '../../language/gettext';\nimport {\n  InteractiveVideoEditorState,\n  interactiveVideoEditorStateSymbol,\n} from '@/components/interactiveVideo/interactiveVideoEditorState';\nimport getEmValueFromElement from '@/components/interactiveVideo/getEmValueFromElement';\nimport { select } from 'd3-selection';\nimport { D3DragEvent, drag } from 'd3-drag';\n\ntype DragState =\n  | { type: 'timeMarker' }\n  | { type: 'panTimeline' }\n  | {\n      type: 'interaction';\n      id: string;\n      mouseStartPos: [number, number]; // clientX, clientY\n      interactionStartTime: number; // Seconds\n      interactionDuration: number; // Seconds\n    }\n  | {\n      type: 'interactionStart';\n      id: string;\n      time: number; // Seconds\n    }\n  | {\n      type: 'interactionEnd';\n      id: string;\n      time: number; // Seconds\n    }\n  | undefined;\nexport default defineComponent({\n  name: 'VideoTimeline',\n  setup() {\n    return {\n      editor: inject<InteractiveVideoEditorState>(\n        interactiveVideoEditorStateSymbol\n      ),\n    };\n  },\n  props: {\n    currentTime: {\n      type: Number,\n      required: true,\n    },\n    videoMetadata: {\n      type: Object as PropType<VideoMetadata>,\n      required: true,\n    },\n    task: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n    selectedInteractionId: {\n      type: String,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      dragState: undefined as DragState,\n      zoomTransform: { t: 0, k: 1 },\n      viewportWidthEm: 1,\n    };\n  },\n  mounted() {\n    // When timeline axis becomes visible, its width should be recalculated.\n    // TODO recalculate also when it changes size (e.g. window is resized)\n    const observer = new IntersectionObserver(() =>\n      this.recomputeViewportWidth()\n    );\n    observer.observe(this.$refs.timelineAxis as HTMLElement);\n\n    // Set up d3-drag\n    const dragTimeline = (ev: D3DragEvent<HTMLElement, unknown, unknown>) => {\n      const dSeconds = this.pixelsToSeconds(ev.dx);\n      const translate = this.zoomTransform.t - dSeconds;\n      this.zoomTransform.t = this.constrainZoomTranslate(translate);\n    };\n    const dragBehavior = drag<HTMLElement, unknown>()\n      .filter((event: D3DragEvent<HTMLElement, unknown, unknown>) => {\n        return (event as any).button !== 0; // All buttons except 'left click'\n      })\n      .on('start', () => {\n        this.dragState = { type: 'panTimeline' };\n      })\n      .on('drag', dragTimeline)\n      .on('end', () => {\n        this.dragState = undefined;\n      });\n    select(this.$refs.timeline as HTMLElement).call(dragBehavior);\n  },\n  watch: {\n    // Automatically scroll timeline to keep the current playback position in view\n    currentTime(currentTime: number) {\n      if (currentTime < this.viewportStart || currentTime > this.viewportEnd) {\n        this.zoomTransform.t = this.constrainZoomTranslate(currentTime - 0.5);\n      }\n    },\n  },\n  computed: {\n    visibleInteractions(): Interaction[] {\n      const visibleInteractions: Interaction[] = [];\n      for (let i of this.task.interactions) {\n        const isWithinViewport =\n          i.startTime < this.viewportEnd && i.endTime > this.viewportStart;\n        // An Interaction element should not suddenly disappear if it is dragged\n        // outside of the timeline viewport. That would cause the drag-drop\n        // interaction to unexpectedly end in a confusing way.\n        const isBeingDragged =\n          (this.dragState?.type === 'interaction' ||\n            this.dragState?.type === 'interactionStart' ||\n            this.dragState?.type === 'interactionEnd') &&\n          this.dragState.id === i.id;\n        if (isWithinViewport || isBeingDragged) {\n          visibleInteractions.push(i);\n        }\n      }\n      return visibleInteractions;\n    },\n    viewportWidthSeconds(): number {\n      const secondsPerEm = 0.5 / this.zoomTransform.k;\n      return this.viewportWidthEm * secondsPerEm;\n    },\n    viewportStart(): number {\n      return this.zoomTransform.t;\n    },\n    viewportEnd(): number {\n      return this.viewportStart + this.viewportWidthSeconds;\n    },\n    positionForTimeMarker(): string {\n      return `${this.secondsToTimelinePercentage(this.currentTime)}%`;\n    },\n    axisScale(): number[] {\n      const points = 25;\n      const start = this.viewportStart;\n      const end = this.viewportEnd;\n      const scale: number[] = [];\n      for (let i = 0; i < points; i++) {\n        scale.push(start + ((end - start) / points) * i);\n      }\n      scale.push(end);\n      return scale;\n    },\n  },\n  methods: {\n    iconForInteraction,\n    printInteractionType,\n    $gettext,\n    secondsToTimelinePercentage(seconds: number): number {\n      const deltaT = seconds - this.viewportStart;\n      return (deltaT / this.viewportWidthSeconds) * 100;\n    },\n    interactionMarkerStyle(\n      interaction: Interaction\n    ): Partial<CSSStyleDeclaration> {\n      return {\n        left: `${this.secondsToTimelinePercentage(interaction.startTime)}%`,\n      };\n    },\n    zoom(delta: number, time?: number) {\n      if (!time) {\n        time = (this.viewportStart + this.viewportEnd) / 2;\n      }\n      // Save information needed to recalculate 't' (translate) parameter after zoom\n      const viewportStart0 = this.zoomTransform.t;\n      const viewportWidth0 = this.viewportWidthSeconds;\n\n      // Calculate new zoom level\n      const exp = Math.exp(delta);\n      const newK = this.zoomTransform.k * exp;\n      // Prevent zooming too far in/out\n      this.zoomTransform.k = Math.max(0.005, Math.min(5, newK));\n\n      // Calculate new translation in order to keep the point under the mouse\n      // cursor stationary.\n      // viewportWidthSeconds is recalculated (because it's a computed property)\n      // after zoomTransform.k is modified in the previous block of code..\n      const viewportWidth1 = this.viewportWidthSeconds;\n      const viewportStart1 =\n        time - ((time - viewportStart0) / viewportWidth0) * viewportWidth1;\n      // Prevent panning before video start or after video end\n      this.zoomTransform.t = this.constrainZoomTranslate(viewportStart1);\n    },\n    onWheel(event: WheelEvent) {\n      event.preventDefault(); // Prevent scrolling page up/down\n      const t = this.xCoordinateToTime(event.clientX);\n      const delta = -event.deltaY / 1000;\n      this.zoom(delta, t);\n    },\n    constrainZoomTranslate(t: number): number {\n      return Math.max(0, Math.min(this.videoMetadata.length, t));\n    },\n    pixelsToEm(pixels: number): number {\n      const timeline = this.$refs.timelineAxis;\n      if (!timeline) {\n        return 1;\n      }\n      return (\n        getEmValueFromElement(this.$refs.timelineAxis as HTMLElement, pixels) ??\n        NaN\n      );\n    },\n    recomputeViewportWidth() {\n      const axis = this.$refs.timelineAxis as HTMLElement | null;\n      if (!axis) {\n        console.warn('recomputeViewportWidth: timelineAxis is null');\n        return;\n      }\n      const rect = axis.getBoundingClientRect();\n      const widthInEm = this.pixelsToEm(rect.width);\n      this.viewportWidthEm = widthInEm;\n    },\n    // Format video timestamp for timeline axis. e.g. 1m30s becomes 00;01;30;00\n    formatVideoTimestamp(timestampSeconds: number): string {\n      let hours = 0,\n        minutes = 0,\n        seconds = 0,\n        centiseconds = 0;\n      while (timestampSeconds >= 3600) {\n        hours++;\n        timestampSeconds -= 3600;\n      }\n      while (timestampSeconds >= 60) {\n        minutes++;\n        timestampSeconds -= 60;\n      }\n      while (timestampSeconds >= 1) {\n        seconds++;\n        timestampSeconds -= 1;\n      }\n      centiseconds = Math.floor(timestampSeconds * 100);\n      function twoDigits(n: number): string {\n        return n.toLocaleString('de-DE', {\n          minimumIntegerDigits: 2,\n          maximumFractionDigits: 0,\n        });\n      }\n      return `${twoDigits(hours)};${twoDigits(minutes)};${twoDigits(\n        seconds\n      )};${twoDigits(centiseconds)}`;\n    },\n    pixelsToSeconds(pixels: number): number {\n      const rect = (\n        this.$refs.timelineAxis as HTMLElement\n      ).getBoundingClientRect();\n      const fraction = pixels / rect.width;\n      return fraction * this.viewportWidthSeconds;\n    },\n    /**\n     * Convert the x coordinate in pixels on the timeline to a time in seconds\n     * in the video, clamped between 0 and the video's length.\n     */\n    xCoordinateToTime(clientX: number): number {\n      const rect = (\n        this.$refs.timelineAxis as HTMLElement\n      ).getBoundingClientRect();\n      const x = clientX - rect.left; //x position within the element.\n      const xFraction = x / rect.width;\n      const time = this.viewportStart + xFraction * this.viewportWidthSeconds;\n      const clampedTime = Math.min(\n        this.videoMetadata.length,\n        Math.max(0, time)\n      );\n      return clampedTime;\n    },\n    timelineInteractionStyle(interaction: Interaction): StyleValue {\n      const startDeltaT = interaction.startTime - this.viewportStart;\n      const startPercent = (startDeltaT / this.viewportWidthSeconds) * 100;\n      const endDeltaT = interaction.endTime - this.viewportStart;\n      const endPercent = (endDeltaT / this.viewportWidthSeconds) * 100;\n      return {\n        left: `${startPercent}%`,\n        width: `${endPercent - startPercent}%`,\n      };\n    },\n    onClickInteraction(interaction: Interaction) {\n      console.log('onClickInteraction');\n      this.$emit('clickInteraction', interaction);\n    },\n    onPointerDownInteraction(event: PointerEvent, interaction: Interaction) {\n      console.log('onPointerDownInteraction');\n      if (event.button !== 0) {\n        // Prevent unintentionally selecting interaction when dragging to\n        // scroll around in the timeline\n        return;\n      }\n      const interactionLength = interaction.endTime - interaction.startTime;\n      this.dragState = {\n        type: 'interaction',\n        id: interaction.id,\n        mouseStartPos: [event.clientX, event.clientY],\n        interactionStartTime: interaction.startTime,\n        interactionDuration: interactionLength,\n      };\n      (event.target as HTMLElement).setPointerCapture(event.pointerId);\n      this.editor!.selectInteraction(interaction.id);\n    },\n    onPointerMoveInteraction(event: PointerEvent, interaction: Interaction) {\n      if (\n        this.dragState?.type === 'interaction' &&\n        this.dragState.id === interaction.id\n      ) {\n        const mouseDx = event.clientX - this.dragState.mouseStartPos[0];\n        const rect = (\n          this.$refs.timelineAxis as HTMLElement\n        ).getBoundingClientRect();\n        const secondsPerPixel = this.viewportWidthSeconds / rect.width;\n        const dSeconds = mouseDx * secondsPerPixel;\n        const seconds = this.dragState.interactionStartTime + dSeconds;\n        // Prevent from dragging so far that the endTime > video length\n        const maxTime =\n          this.videoMetadata.length - this.dragState.interactionDuration;\n        const secondsClamped = Math.max(0, Math.min(maxTime, seconds));\n        const id = this.dragState.id;\n        this.editor?.dragInteractionTimeline(id, secondsClamped);\n      }\n    },\n    onPointerUpInteraction(event: PointerEvent, interaction: Interaction) {\n      console.log('onPointerUpInteraction');\n      this.dragState = undefined;\n      (event.target as HTMLElement).releasePointerCapture(event.pointerId);\n    },\n    onPointerDownInteractionStart(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = {\n        type: 'interactionStart',\n        id: interaction.id,\n        time: interaction.startTime,\n      };\n      (ev.target as HTMLElement).setPointerCapture(ev.pointerId);\n    },\n    onPointerDownInteractionEnd(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = {\n        type: 'interactionEnd',\n        id: interaction.id,\n        time: interaction.endTime,\n      };\n      (ev.target as HTMLElement).setPointerCapture(ev.pointerId);\n    },\n    onPointerMoveInteractionStart(ev: PointerEvent, interaction: Interaction) {\n      if (\n        this.dragState?.type === 'interactionStart' &&\n        this.dragState.id === interaction.id\n      ) {\n        const dSeconds = this.pixelsToSeconds(ev.movementX);\n        this.dragState.time += dSeconds;\n        const timeClamped = Math.max(\n          0,\n          Math.min(interaction.endTime - 1, this.dragState.time)\n        );\n        // TODO make undoable\n        interaction.startTime = timeClamped;\n      }\n    },\n    onPointerMoveInteractionEnd(ev: PointerEvent, interaction: Interaction) {\n      if (\n        this.dragState?.type === 'interactionEnd' &&\n        this.dragState.id === interaction.id\n      ) {\n        const dSeconds = this.pixelsToSeconds(ev.movementX);\n        this.dragState.time += dSeconds;\n        const secondsClamped = Math.max(\n          interaction.startTime + 1,\n          Math.min(this.videoMetadata.length, this.dragState.time)\n        );\n        // TODO make undoable\n        interaction.endTime = secondsClamped;\n      }\n    },\n    onPointerUpInteractionStart(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = undefined;\n      (ev.target as HTMLElement).releasePointerCapture(ev.pointerId);\n    },\n    onPointerUpInteractionEnd(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = undefined;\n      (ev.target as HTMLElement).releasePointerCapture(ev.pointerId);\n    },\n    onPointerDownAxis(e: PointerEvent) {\n      const time = this.xCoordinateToTime(e.clientX);\n      this.$emit('timelineSeek', time);\n    },\n    onDragStartTimeMarker(e: DragEvent) {\n      console.log('dragstart time marker');\n      this.dragState = { type: 'timeMarker' };\n    },\n    onDragOverTimeline(e: DragEvent) {\n      if (this.dragState?.type === 'timeMarker') {\n        e.preventDefault(); // Stop ghost image from flying back after drop\n        const time = this.xCoordinateToTime(e.clientX);\n        this.emitTimelineSeekThrottled(time);\n      }\n    },\n    emitTimelineSeekThrottled: throttle(function emitTimelineSeek(\n      this: ComponentPublicInstance,\n      time: number\n    ) {\n      this.$emit('timelineSeek', time);\n    },\n    100),\n  },\n});\n</script>\n\n<template>\n  <div ref=\"root\" class=\"timeline-root\" @dragover.capture=\"onDragOverTimeline\">\n    <div\n      class=\"timeline-axis\"\n      ref=\"timelineAxis\"\n      @pointerdown=\"onPointerDownAxis\"\n    >\n      <div class=\"tick\" v-for=\"(point, index) in axisScale\" :key=\"index\">\n        <div class=\"tick-label\">\n          {{ index % 5 === 0 ? formatVideoTimestamp(point) : ' ' }}\n        </div>\n        <div\n          class=\"tick-line\"\n          :class=\"{\n            major: index % 5 === 0,\n          }\"\n        ></div>\n      </div>\n      <button\n        v-for=\"interaction in visibleInteractions\"\n        :key=\"interaction.id\"\n        class=\"interaction-marker\"\n        :style=\"interactionMarkerStyle(interaction)\"\n        @pointerdown.stop\n        @click.stop=\"\n          onClickInteraction(interaction);\n          $emit('timelineSeek', interaction.startTime + 0.1);\n        \"\n        :title=\"\n          $gettext('Zu %{ interaction } springen', {\n            interaction: printInteractionType(interaction),\n          })\n        \"\n      ></button>\n    </div>\n    <div\n      class=\"timeline\"\n      :class=\"{ 'pan-timeline': this.dragState?.type === 'panTimeline' }\"\n      ref=\"timeline\"\n      @pointerdown.self=\"onPointerDownAxis\"\n      @wheel=\"onWheel\"\n      @contextmenu.prevent\n    >\n      <div class=\"timeline-interactions\">\n        <div\n          v-for=\"interaction in visibleInteractions\"\n          :key=\"interaction.id\"\n          class=\"timeline-interaction\"\n          :class=\"{\n            selected: selectedInteractionId === interaction.id,\n          }\"\n          :style=\"timelineInteractionStyle(interaction)\"\n          :title=\"printInteractionType(interaction)\"\n        >\n          <div class=\"overflow-container\">\n            <button\n              type=\"button\"\n              class=\"button select-interaction\"\n              :class=\"iconForInteraction(interaction)\"\n              @click.stop=\"onClickInteraction(interaction)\"\n              @pointerdown=\"onPointerDownInteraction($event, interaction)\"\n              @pointermove=\"onPointerMoveInteraction($event, interaction)\"\n              @pointerup=\"onPointerUpInteraction($event, interaction)\"\n            >\n              <span class=\"timeline-interaction-label\">\n                {{ printInteractionType(interaction) }}\n              </span>\n            </button>\n            <!--  The delete button is hidden (v-if) unless you can see the end\n            of the interaction within the timeline viewport, because otherwise,\n            you can 'tab' over to it while it's off screen, and that causes a\n            visual glitch, as the button is automatically scrolled into view. -->\n            <button\n              type=\"button\"\n              class=\"small-button trash delete-interaction\"\n              :title=\"$gettext('Lschen')\"\n              @click=\"$emit('deleteInteraction', interaction.id)\"\n              v-if=\"interaction.endTime < viewportEnd\"\n            ></button>\n          </div>\n          <div\n            class=\"interaction-drag-handle start\"\n            @pointerdown=\"onPointerDownInteractionStart($event, interaction)\"\n            @pointermove=\"onPointerMoveInteractionStart($event, interaction)\"\n            @pointerup=\"onPointerUpInteractionStart($event, interaction)\"\n          ></div>\n          <div\n            class=\"interaction-drag-handle end\"\n            @pointerdown=\"onPointerDownInteractionEnd($event, interaction)\"\n            @pointermove=\"onPointerMoveInteractionEnd($event, interaction)\"\n            @pointerup=\"onPointerUpInteractionEnd($event, interaction)\"\n          ></div>\n        </div>\n      </div>\n\n      <div\n        class=\"time-marker\"\n        draggable=\"true\"\n        @dragstart=\"onDragStartTimeMarker\"\n        :style=\"{\n          left: positionForTimeMarker,\n        }\"\n      />\n    </div>\n    <div style=\"white-space: pre-wrap; display: none\">\n      {{\n        {\n          zoomTransform,\n          viewportWidthEm,\n          viewportWidthSeconds,\n          viewportStart,\n          viewportEnd,\n          dragState: dragState,\n        }\n      }}\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.timeline-root {\n  position: relative;\n  margin-left: 1em;\n  margin-right: 1em;\n}\n.timeline {\n  position: relative;\n  width: 100%;\n  height: 5em;\n  border: 1px solid black;\n  cursor: text;\n\n  &.pan-timeline,\n  &.pan-timeline * {\n    cursor: move !important;\n  }\n\n  .time-marker {\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    height: 5em;\n    width: 2px;\n    background-color: blue;\n    &::before {\n      content: '';\n      position: absolute;\n      top: -1em;\n      height: 1em;\n      width: 1em;\n      background-color: blue;\n    }\n  }\n\n  .timeline-interactions {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n\n    .timeline-interaction {\n      position: absolute;\n      height: 100%;\n      background: var(--content-color-20);\n      cursor: default;\n\n      .overflow-container {\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        overflow: hidden;\n      }\n\n      button.select-interaction {\n        /* CSS Reset for button styles */\n        padding: 0;\n        font: inherit;\n        color: inherit;\n        background-color: transparent;\n        cursor: pointer;\n        box-sizing: border-box;\n        // Remove stud.ip 'button' class margin\n        margin: 0;\n\n        height: 100%;\n        width: 100%;\n        min-width: 0;\n        overflow: hidden;\n\n        box-sizing: border-box;\n        border: 2px solid darkgrey;\n\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-end;\n        &::before {\n          position: absolute;\n          left: 50%;\n          top: calc(50% - 16px);\n        }\n\n        .timeline-interaction-label {\n          width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          text-align: center;\n        }\n      }\n\n      &.selected {\n        z-index: 1;\n        button.select-interaction {\n          border: 2px solid black;\n          &:focus-visible {\n            outline: none;\n            border-style: dashed;\n          }\n        }\n      }\n      &:not(.selected) {\n        &:has(button:focus-visible) {\n          z-index: 2;\n        }\n        button.select-interaction {\n          &:focus-visible {\n            outline: none;\n            border: 2px dashed var(--content-color-80);\n          }\n        }\n      }\n\n      &:hover {\n        background: var(--content-color-40);\n      }\n\n      .interaction-drag-handle {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 5px;\n        cursor: ew-resize;\n        &.start {\n          left: -3px;\n        }\n        &.end {\n          right: -4px;\n        }\n      }\n\n      button.delete-interaction {\n        position: absolute;\n        top: 0;\n        right: 0;\n        padding: 0;\n        display: none;\n      }\n      &.selected button.delete-interaction {\n        display: block;\n      }\n    }\n  }\n}\n\n.timeline-axis {\n  position: relative;\n  top: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  gap: 1em;\n  cursor: text;\n  user-select: none;\n  .tick {\n    position: relative;\n    .tick-label {\n      position: absolute;\n      top: -1.5em;\n      transform: translateX(-50%);\n      text-align: center;\n      white-space: pre;\n    }\n    .tick-line {\n      width: 1px;\n      border-left: thin solid lightgray;\n      height: 1em;\n      &.major {\n        height: 1.5em;\n      }\n    }\n  }\n  .interaction-marker {\n    /* CSS Reset for button styles */\n    padding: 0;\n    border: none;\n    font: inherit;\n    color: inherit;\n    cursor: pointer;\n    box-sizing: border-box;\n\n    $radius: 0.85em;\n    position: absolute;\n    bottom: 0.5em;\n    shape-outside: circle();\n    clip-path: circle();\n    width: $radius;\n    height: $radius;\n    background-color: black;\n    &::after {\n      display: block;\n      content: ' ';\n      shape-outside: circle();\n      clip-path: circle();\n      width: calc($radius - 2px);\n      height: calc($radius - 2px);\n      transform: translate(1px, 0px);\n      background-color: var(--content-color-20);\n    }\n\n    &:hover {\n      &::after {\n        background-color: black;\n      }\n    }\n    // Ensure that an outline is drawn when element is focused with the keyboard\n    &:focus-visible {\n      clip-path: unset;\n      &::after {\n        border: 2px solid black;\n      }\n    }\n  }\n}\n</style>\n","/**\n * Get the equivalent EM value on a given element with a given pixel value.\n *\n * Normally the number of pixel specified should come from the element itself (e.g. element.style.height) since EM is\n * relative.\n *\n * @param {Object} element - The HTML element.\n * @param {Number} pixelValue - The number of pixel to convert in EM on this specific element.\n * @author Nicolas Bouvrette\n * @license CC BY-SA 3.0 https://stackoverflow.com/a/34540037/7359454\n * Adapted by Ann Yanich\n *\n * @returns {Boolean|undefined} The EM value, or undefined if unable to convert.\n */\nexport default function getEmValueFromElement(\n  element: Element,\n  pixelValue: number\n): number | undefined {\n  if (element.parentNode) {\n    const parentFontSize = parseFloat(\n      window.getComputedStyle(element.parentNode as Element).fontSize\n    );\n    const elementFontSize = parseFloat(\n      window.getComputedStyle(element).fontSize\n    );\n    const pixelValueOfOneEm =\n      (elementFontSize / parentFontSize) * elementFontSize;\n    return pixelValue / pixelValueOfOneEm;\n  }\n  return undefined;\n}\n","import { render } from \"./VideoTimeline.vue?vue&type=template&id=5ee2028d&scoped=true&ts=true\"\nimport script from \"./VideoTimeline.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoTimeline.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoTimeline.vue?vue&type=style&index=0&id=5ee2028d&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5ee2028d\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, createBlock as _createBlock, KeepAlive as _KeepAlive, resolveDynamicComponent as _resolveDynamicComponent, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-97c28a78\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"selected-interaction-properties\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"default\"\n}\nconst _hoisted_3 = { class: \"collapsable\" }\nconst _hoisted_4 = { class: \"start-and-end-time-inputs\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_VideoTimeInput = _resolveComponent(\"VideoTimeInput\")!\n  const _component_StudipWysiwyg = _resolveComponent(\"StudipWysiwyg\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"h3\", null, _toDisplayString(_ctx.$gettext('Interaktion')) + \" \\\"\" + _toDisplayString(_ctx.printInteractionType(_ctx.selectedInteraction)) + \"\\\" \", 1),\n    (_ctx.selectedInteraction)\n      ? (_openBlock(), _createElementBlock(\"form\", _hoisted_2, [\n          _createElementVNode(\"fieldset\", _hoisted_3, [\n            _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"label\", null, [\n                _createTextVNode(_toDisplayString(_ctx.$gettext('Start')) + \" \", 1),\n                _createVNode(_component_VideoTimeInput, {\n                  modelValue: _ctx.inputStartTime,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.inputStartTime) = $event)),\n                  \"onUpdate:error\": _cache[1] || (_cache[1] = (error) => (_ctx.inputStartTimeFormatError = error)),\n                  class: _normalizeClass([\"time-input\", {\n                invalid: _ctx.inputStartTimeErrors.length > 0,\n              }]),\n                  \"aria-invalid\": _ctx.inputStartTimeErrors.length > 0\n                }, null, 8, [\"modelValue\", \"class\", \"aria-invalid\"])\n              ]),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputStartTimeErrors, (error) => {\n                return (_openBlock(), _createElementBlock(\"p\", {\n                  class: \"validation-error\",\n                  key: error\n                }, _toDisplayString(error), 1))\n              }), 128)),\n              _createElementVNode(\"label\", null, [\n                _createTextVNode(_toDisplayString(_ctx.$gettext('Ende')) + \" \", 1),\n                _createVNode(_component_VideoTimeInput, {\n                  modelValue: _ctx.inputEndTime,\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.inputEndTime) = $event)),\n                  \"onUpdate:error\": _cache[3] || (_cache[3] = (error) => (_ctx.inputEndTimeFormatError = error)),\n                  class: _normalizeClass([\"time-input\", {\n                invalid: _ctx.inputEndTimeErrors.length > 0,\n              }]),\n                  \"aria-invalid\": _ctx.inputEndTimeErrors.length > 0\n                }, null, 8, [\"modelValue\", \"class\", \"aria-invalid\"])\n              ])\n            ]),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputEndTimeErrors, (error) => {\n              return (_openBlock(), _createElementBlock(\"p\", {\n                class: \"validation-error\",\n                key: error\n              }, _toDisplayString(error), 1))\n            }), 128)),\n            _createElementVNode(\"label\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"checkbox\",\n                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.selectedInteraction.pauseWhenVisible) = $event))\n              }, null, 512), [\n                [_vModelCheckbox, _ctx.selectedInteraction.pauseWhenVisible]\n              ]),\n              _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Video pausieren')), 1)\n            ])\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.selectedInteraction.type === 'overlay')\n      ? (_openBlock(), _createBlock(_KeepAlive, { key: 1 }, [\n          _createElementVNode(\"div\", null, [\n            (_openBlock(), _createBlock(_component_StudipWysiwyg, {\n              key: `${_ctx.selectedInteraction.id}-overlay-wysiwyg`,\n              modelValue: _ctx.selectedInteraction.content_wysiwyg,\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.selectedInteraction.content_wysiwyg) = $event))\n            }, null, 8, [\"modelValue\"]))\n          ])\n        ], 1024))\n      : (_ctx.selectedInteraction.type === 'lmbTask')\n        ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n            (_openBlock(), _createBlock(_KeepAlive, null, [\n              (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.editorForTaskType(_ctx.selectedInteraction.taskDefinition.task_type)), {\n                key: `${_ctx.selectedInteraction.id}-editor`,\n                taskDefinition: _ctx.selectedInteraction.taskDefinition\n              }, null, 8, [\"taskDefinition\"]))\n            ], 1024)),\n            (\n          _ctx.showViewerAboveEditor(_ctx.selectedInteraction.taskDefinition.task_type)\n        )\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                  _createElementVNode(\"h3\", null, _toDisplayString(_ctx.$gettext('Vorschau')), 1),\n                  (_openBlock(), _createBlock(_KeepAlive, null, [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(\n              _ctx.viewerForTaskType(_ctx.selectedInteraction.taskDefinition.task_type)\n            ), {\n                      class: \"lmb-task-preview\",\n                      key: `${_ctx.selectedInteraction.id}-viewer`,\n                      task: _ctx.selectedInteraction.taskDefinition\n                    }, null, 8, [\"task\"]))\n                  ], 1024))\n                ], 64))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        : _createCommentVNode(\"\", true)\n  ]))\n}","<template>\n  <div class=\"selected-interaction-properties\">\n    <h3>\n      {{ $gettext('Interaktion') }}\n      \"{{ printInteractionType(selectedInteraction) }}\"\n    </h3>\n    <form v-if=\"selectedInteraction\" class=\"default\">\n      <fieldset class=\"collapsable\">\n        <legend>\n          {{ $gettext('Einstellungen') }}\n        </legend>\n        <div class=\"start-and-end-time-inputs\">\n          <label>\n            {{ $gettext('Start') }}\n            <VideoTimeInput\n              v-model=\"inputStartTime\"\n              @update:error=\"(error) => (inputStartTimeFormatError = error)\"\n              class=\"time-input\"\n              :class=\"{\n                invalid: inputStartTimeErrors.length > 0,\n              }\"\n              :aria-invalid=\"inputStartTimeErrors.length > 0\"\n            />\n          </label>\n          <p\n            class=\"validation-error\"\n            v-for=\"error in inputStartTimeErrors\"\n            :key=\"error\"\n          >\n            {{ error }}\n          </p>\n          <label>\n            {{ $gettext('Ende') }}\n            <VideoTimeInput\n              v-model=\"inputEndTime\"\n              @update:error=\"(error) => (inputEndTimeFormatError = error)\"\n              class=\"time-input\"\n              :class=\"{\n                invalid: inputEndTimeErrors.length > 0,\n              }\"\n              :aria-invalid=\"inputEndTimeErrors.length > 0\"\n            />\n          </label>\n        </div>\n        <p\n          class=\"validation-error\"\n          v-for=\"error in inputEndTimeErrors\"\n          :key=\"error\"\n        >\n          {{ error }}\n        </p>\n        <label>\n          <!-- TODO don't mutate props -- this should be undoable -->\n          <!-- eslint-disable vue/no-mutating-props -->\n          <input\n            type=\"checkbox\"\n            v-model=\"selectedInteraction.pauseWhenVisible\"\n          />\n          {{ $gettext('Video pausieren') }}\n        </label>\n      </fieldset>\n    </form>\n    <template v-if=\"selectedInteraction.type === 'overlay'\">\n      <!-- Oddly, if this StudipWysiwyg is not wrapped in a div, it seems not to\n      work correctly. It keeps firing its mounted() function when hidden/shown,\n      (e.g. when you alternate between selecting an overlay and selecting another\n      Interaction), and it leads to many instances of the WYSIWYG editor\n      appearing next to each other.\n      I don't entirely understand it, but this is my workaround for the issue. -Ann -->\n      <KeepAlive>\n        <div>\n          <StudipWysiwyg\n            :key=\"`${selectedInteraction.id}-overlay-wysiwyg`\"\n            v-model=\"selectedInteraction.content_wysiwyg\"\n          />\n        </div>\n      </KeepAlive>\n    </template>\n    <template v-else-if=\"selectedInteraction.type === 'lmbTask'\">\n      <KeepAlive>\n        <component\n          :key=\"`${selectedInteraction.id}-editor`\"\n          :is=\"editorForTaskType(selectedInteraction.taskDefinition.task_type)\"\n          :taskDefinition=\"selectedInteraction.taskDefinition\"\n        />\n      </KeepAlive>\n      <template\n        v-if=\"\n          showViewerAboveEditor(selectedInteraction.taskDefinition.task_type)\n        \"\n      >\n        <h3>\n          {{ $gettext('Vorschau') }}\n        </h3>\n        <KeepAlive>\n          <component\n            class=\"lmb-task-preview\"\n            :key=\"`${selectedInteraction.id}-viewer`\"\n            :is=\"\n              viewerForTaskType(selectedInteraction.taskDefinition.task_type)\n            \"\n            :task=\"selectedInteraction.taskDefinition\"\n          />\n        </KeepAlive>\n      </template>\n    </template>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport {\n  Interaction,\n  printInteractionType,\n} from '@/models/InteractiveVideoTask';\nimport {\n  editorForTaskType,\n  showViewerAboveEditor,\n  viewerForTaskType,\n} from '@/models/TaskDefinition';\nimport { $gettext } from '../../language/gettext';\nimport {\n  InteractiveVideoEditorState,\n  interactiveVideoEditorStateSymbol,\n} from '@/components/interactiveVideo/interactiveVideoEditorState';\nimport VideoTimeInput from '@/components/interactiveVideo/VideoTimeInput.vue';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\n\nexport default defineComponent({\n  name: 'SelectedInteractionProperties',\n  components: { VideoTimeInput, StudipWysiwyg },\n  setup() {\n    return {\n      editor: inject<InteractiveVideoEditorState>(\n        interactiveVideoEditorStateSymbol\n      ),\n    };\n  },\n  props: {\n    selectedInteraction: {\n      type: Object as PropType<Interaction>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      inputStartTime: 0,\n      inputStartTimeFormatError: undefined as Error | undefined,\n      inputEndTime: 1,\n      inputEndTimeFormatError: undefined as Error | undefined,\n    };\n  },\n  methods: {\n    showViewerAboveEditor,\n    viewerForTaskType,\n    $gettext,\n    printInteractionType,\n    editorForTaskType,\n  },\n  watch: {\n    inputStartTime(value: number) {\n      if (this.inputStartTimeErrors.length === 0) {\n        // eslint-disable-next-line vue/no-mutating-props\n        this.selectedInteraction.startTime = value;\n      }\n      if (this.inputEndTimeErrors.length === 0) {\n        // eslint-disable-next-line vue/no-mutating-props\n        this.selectedInteraction.endTime = this.inputEndTime;\n      }\n    },\n    'selectedInteraction.startTime': {\n      handler: function (value: number) {\n        this.inputStartTime = value;\n      },\n      immediate: true,\n    },\n    inputEndTime(value: number) {\n      if (this.inputEndTimeErrors.length === 0) {\n        // eslint-disable-next-line vue/no-mutating-props\n        this.selectedInteraction.endTime = value;\n        /*\n         Scenario: startTime = 0, endTime = 4.\n         User begins to edit startTime and sets startTime = 5.\n         This is invalid (startTime > endTime) and is not applied.\n         Then, user edits endTime and sets endTime = 6.\n         Now, both inputs are valid. start < end. So, both should be applied.\n        */\n        if (this.inputStartTimeErrors.length === 0) {\n          // eslint-disable-next-line vue/no-mutating-props\n          this.selectedInteraction.startTime = this.inputStartTime;\n        }\n      }\n    },\n    'selectedInteraction.endTime': {\n      handler: function (value: number) {\n        this.inputEndTime = value;\n      },\n      immediate: true,\n    },\n  },\n  computed: {\n    inputStartTimeErrors(): string[] {\n      const errors: string[] = [];\n      if (this.inputStartTimeFormatError) {\n        errors.push(this.inputStartTimeFormatError.message);\n      }\n      if (this.inputStartTime < 0) {\n        errors.push($gettext('Das eingegebene Wert muss grer als 0 sein.'));\n      }\n      if (this.inputStartTime >= this.selectedInteraction.endTime) {\n        errors.push($gettext('Der Startpunkt muss vor dem Endpunkt sein.'));\n      }\n      // TODO check video length as well.\n      return errors;\n    },\n    inputEndTimeErrors(): string[] {\n      const errors: string[] = [];\n      if (this.inputEndTimeFormatError) {\n        errors.push(this.inputEndTimeFormatError.message);\n      }\n      if (this.inputEndTime < 0) {\n        errors.push($gettext('Das eingegebene Wert muss grer als 0 sein.'));\n      }\n      if (this.inputEndTime <= this.selectedInteraction.startTime) {\n        errors.push($gettext('Der Startpunkt muss vor dem Endpunkt sein.'));\n      }\n      // TODO check video length as well.\n      return errors;\n    },\n  },\n});\n</script>\n<style scoped lang=\"scss\">\nform.default .time-input {\n  max-width: 12em;\n}\n.start-and-end-time-inputs {\n  display: flex;\n  gap: 1em;\n}\n.lmb-task-preview {\n  margin-bottom: 1em;\n}\n</style>\n","import { vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.userInput) = $event)),\n    onBlur: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onBlurUserInput && _ctx.onBlurUserInput(...args)))\n  }, null, 544)), [\n    [_vModelText, _ctx.userInput]\n  ])\n}","<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { $gettext } from '@/language/gettext';\n\nexport default defineComponent({\n  name: 'VideoTimeInput',\n  props: {\n    modelValue: {\n      type: Number,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      userInput: '',\n    };\n  },\n  watch: {\n    modelValue: {\n      immediate: true,\n      handler(newValue: number) {\n        this.userInput = this.formatSeconds(newValue);\n      },\n    },\n    parsedUserInput() {\n      if (this.parsedUserInput instanceof Error) {\n        this.$emit('update:error', this.parsedUserInput);\n      } else {\n        this.$emit('update:error', undefined);\n      }\n    },\n  },\n  methods: {\n    onBlurUserInput() {\n      if (this.parsedUserInput instanceof Error) {\n        // Reset the input to a good value\n        this.userInput = this.formatSeconds(this.modelValue);\n        this.$emit('update:error', undefined);\n      } else {\n        this.$emit('update:modelValue', this.parsedUserInput);\n        this.$emit('update:error', undefined);\n      }\n    },\n    // Format a time in seconds as HH;MM;SS;SS (Centiseconds at end)\n    formatSeconds(time: number): string {\n      let hours = 0,\n        minutes = 0,\n        seconds = 0,\n        centiseconds = 0;\n      while (time >= 3600) {\n        time -= 3600;\n        hours += 1;\n      }\n      while (time >= 60) {\n        time -= 60;\n        minutes += 1;\n      }\n      while (time >= 1) {\n        time -= 1;\n        seconds += 1;\n      }\n      centiseconds = Math.floor(time * 100);\n      function twoDigits(n: number): string {\n        return n.toLocaleString('de-DE', {\n          minimumIntegerDigits: 2,\n          maximumFractionDigits: 0,\n        });\n      }\n      let string = `${twoDigits(hours)};${twoDigits(minutes)};${twoDigits(\n        seconds\n      )};${twoDigits(centiseconds)}`;\n      return string;\n    },\n  },\n  computed: {\n    /**\n     * Either the time the user input, converted into seconds, or an Error with\n     * a message explaining why the user's input was invalid.\n     */\n    parsedUserInput(): number | Error {\n      const timeRegexCentiseconds =\n        /^(\\d?\\d)[;:](\\d?\\d)[;:](\\d?\\d)[;:](\\d?\\d)$/;\n      const centisecondsMatch = timeRegexCentiseconds.exec(this.userInput);\n      if (centisecondsMatch) {\n        return (\n          parseInt(centisecondsMatch[1]) * 3600 +\n          parseInt(centisecondsMatch[2]) * 60 +\n          parseInt(centisecondsMatch[3]) +\n          parseInt(centisecondsMatch[4]) / 100\n        );\n      }\n      // If the exact format for a time with centiseconds isn't matched, use\n      // a more permissive regex.\n      // This regex is adapted from https://stackoverflow.com/a/8318367/7359454\n      // License CC BY-SA 3.0 https://creativecommons.org/licenses/by-sa/3.0/\n      // Accessed and adapted on 10.01.2024 by Ann Yanich\n      const timeRegexHhMmSs =\n        /^(?:(?:([0-9]?\\d)[;:])?([0-5]?\\d)[:;])?([0-5]?\\d)$/;\n      const hhMmSsMatch = timeRegexHhMmSs.exec(this.userInput);\n      if (!hhMmSsMatch || hhMmSsMatch.length !== 4) {\n        return new Error(\n          $gettext(\n            'Die Startposition muss der Syntax HH;MM;SS oder HH;MM;SS;SS entsprechen.'\n          )\n        );\n      }\n      // match[0] is the time string with colons,\n      // match[1] is hours (or undefined if not present),\n      // match[2] is minutes (or undefined if not present),\n      // and match[3] is seconds (always present).\n      if (hhMmSsMatch[1]) {\n        return (\n          parseInt(hhMmSsMatch[1]) * 3600 +\n          parseInt(hhMmSsMatch[2]) * 60 +\n          parseInt(hhMmSsMatch[3])\n        );\n      } else if (hhMmSsMatch[2]) {\n        return parseInt(hhMmSsMatch[2]) * 60 + parseInt(hhMmSsMatch[3]);\n      } else {\n        return parseInt(hhMmSsMatch[3]);\n      }\n    },\n  },\n});\n</script>\n\n<template>\n  <input type=\"text\" v-model=\"userInput\" @blur=\"onBlurUserInput\" />\n</template>\n\n<style scoped></style>\n","import { render } from \"./VideoTimeInput.vue?vue&type=template&id=9aba7cc0&ts=true\"\nimport script from \"./VideoTimeInput.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoTimeInput.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SelectedInteractionProperties.vue?vue&type=template&id=97c28a78&scoped=true&ts=true\"\nimport script from \"./SelectedInteractionProperties.vue?vue&type=script&lang=ts\"\nexport * from \"./SelectedInteractionProperties.vue?vue&type=script&lang=ts\"\n\nimport \"./SelectedInteractionProperties.vue?vue&type=style&index=0&id=97c28a78&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-97c28a78\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0c375bf1\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"add-interactions-root\" }\nconst _hoisted_2 = { class: \"toolbar-under-video\" }\nconst _hoisted_3 = { class: \"insert-interactions-buttons\" }\nconst _hoisted_4 = [\"title\"]\nconst _hoisted_5 = [\"onClick\", \"title\"]\nconst _hoisted_6 = { class: \"video-controls\" }\nconst _hoisted_7 = [\"title\"]\nconst _hoisted_8 = [\"title\"]\nconst _hoisted_9 = [\"title\"]\nconst _hoisted_10 = [\"title\"]\n\nimport {\n  computed,\n  inject,\n  nextTick,\n  PropType,\n  provide,\n  ref,\n} from 'vue';\nimport type {\n  Interaction,\n  InteractiveVideoTask,\n  OverlayInteraction,\n} from '@/models/InteractiveVideoTask';\nimport VideoPlayer from '@/components/interactiveVideo/VideoPlayer.vue';\nimport VideoTimeline from '@/components/interactiveVideo/VideoTimeline.vue';\nimport SelectedInteractionProperties from '@/components/interactiveVideo/SelectedInteractionProperties.vue';\nimport { VideoMetadata } from '@/components/interactiveVideo/events';\nimport {\n  iconForTaskType,\n  newTask,\n  printTaskType,\n  TaskDefinition,\n} from '@/models/TaskDefinition';\nimport { v4 } from 'uuid';\nimport { interactiveVideoEditorStateSymbol } from '@/components/interactiveVideo/interactiveVideoEditorState';\nimport { $gettext } from '../../language/gettext';\nimport { printInteractionType } from '@/models/InteractiveVideoTask';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport produce from 'immer';\nimport { isEqual } from 'lodash';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  props: {\n  taskDefinition: {\n    type: Object as PropType<InteractiveVideoTask>,\n    required: true,\n  },\n},\n  setup(__props) {\n\nconst props = __props\n\n\nconst currentTime = ref(0);\nconst videoMetadata = ref<VideoMetadata>({ length: 1 });\nconst selectedInteractionId = ref<string | undefined>(undefined);\nconst videoPlayer = ref<InstanceType<typeof VideoPlayer> | undefined>(\n  undefined\n);\nconst videoTimeline = ref<InstanceType<typeof VideoTimeline> | undefined>(\n  undefined\n);\nconst selectedInteractionProperties = ref<\n  InstanceType<typeof SelectedInteractionProperties> | undefined\n>(undefined);\n\nconst taskTypes: Array<TaskDefinition['task_type']> = [\n  'DragTheWords',\n  'FillInTheBlanks',\n  'FindTheHotspots',\n  'FindTheWords',\n  'MarkTheWords',\n  'Memory',\n  'Pairing',\n  'Question',\n  'Sequencing',\n];\n\nprovide(interactiveVideoEditorStateSymbol, {\n  selectInteraction,\n  selectedInteractionId,\n  editInteraction,\n  dragInteraction,\n  resizeOverlay,\n  deleteInteraction,\n  dragInteractionTimeline,\n});\n\n/**\n *  Do the necessary so that calls to performEdit from within the LMB Task\n *  editor will not overwrite the state of the Interactive Video task\n *  that contains them.\n *  TODO Make a graphic diagram of all provides/injects in LernmodulePlugin\n */\n\nprovide(taskEditorStateSymbol, {\n  performEdit: performEditForEditedLmbInteraction,\n});\n\nconst taskEditor = inject<TaskEditorState>(taskEditorStateSymbol);\n\nfunction performEditForEditedLmbInteraction(payload: {\n  newTaskDefinition: TaskDefinition;\n  undoBatch: unknown;\n}): void {\n  // Apply the new task definition for the edited interaction.\n  const newDefinition = produce(\n    props.taskDefinition,\n    (videoTask: InteractiveVideoTask) => {\n      const interactionIndex = videoTask.interactions.findIndex(\n        (i) => i.id === selectedInteractionId.value\n      );\n      if (interactionIndex === -1) {\n        throw new Error('cant find selected interaction in interactions array');\n      }\n      const interaction = videoTask.interactions[interactionIndex];\n      if (interaction.type !== 'lmbTask') {\n        throw new Error('Selected interaction is not of type lmbTask');\n      }\n      interaction.taskDefinition = payload.newTaskDefinition;\n    }\n  );\n  const undoBatch = isEqual(payload.undoBatch, {})\n    ? // If the edited interaction's LMB task editor sends empty object as undoBatch,\n      // pass it through. This way, a new undo/redo state will always be created.\n      {}\n    : // If it doesn't send the empty object, that means that this edit should\n      // be merged together with other edits with the same undoBatch to the same\n      // Interaction.\n      {\n        type: 'editedLmbInteractionTask',\n        interactionId: selectedInteractionId.value,\n        undoBatch: payload.undoBatch,\n      };\n  taskEditor!.performEdit({\n    newTaskDefinition: newDefinition,\n    undoBatch: undoBatch,\n  });\n}\n\nconst selectedInteraction = computed((): Interaction | undefined =>\n  props.taskDefinition.interactions.find(\n    (interaction) => interaction.id === selectedInteractionId.value\n  )\n);\n\nfunction selectInteraction(selectionId: string) {\n  selectedInteractionId.value = selectionId;\n}\nfunction editInteraction(id: string) {\n  selectedInteractionId.value = id;\n  nextTick(() => {\n    const el = selectedInteractionProperties.value?.$el as HTMLElement;\n    el.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start',\n    });\n  });\n}\nfunction onVideoMetadataChange(data: VideoMetadata) {\n  videoMetadata.value = data;\n}\nfunction onTimeUpdate(time: number) {\n  currentTime.value = time;\n}\nfunction onTimelineSeek(time: number) {\n  console.log('onTImelineSeek', time);\n  videoPlayer.value!.player!.currentTime(time);\n}\nfunction onClickZoomIn() {\n  videoTimeline.value!.zoom(0.18);\n}\nfunction onClickZoomOut() {\n  videoTimeline.value!.zoom(-0.18);\n}\nfunction onClickPlay() {\n  videoPlayer.value!.player!.play();\n}\nfunction onClickPause() {\n  videoPlayer.value!.player!.pause();\n}\nfunction insertOverlay() {\n  const interaction: OverlayInteraction = {\n    type: 'overlay',\n    v: 2,\n    id: v4(),\n    startTime: currentTime.value,\n    endTime: Math.min(videoMetadata.value.length, currentTime.value + 10),\n    x: 0.4,\n    y: 0.4,\n    width: 0.2,\n    height: 0.2,\n    content_wysiwyg: $gettext('Einblendung'),\n    pauseWhenVisible: true,\n  };\n  // TODO make undoable ?\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.push(interaction);\n  selectedInteractionId.value = interaction.id;\n}\n\nfunction insertLmbTaskInteraction(type: TaskDefinition['task_type']) {\n  console.log('insertLmbTaskInteraction', type);\n  const task = newTask(type);\n  const interaction: Interaction = {\n    type: 'lmbTask',\n    id: v4(),\n    taskDefinition: task,\n    startTime: currentTime.value,\n    endTime: Math.min(videoMetadata.value.length, currentTime.value + 10),\n    x: 0.5,\n    y: 0.5,\n    pauseWhenVisible: true,\n  };\n  // TODO make undoable ?\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.push(interaction);\n  selectedInteractionId.value = interaction.id;\n}\nfunction deleteInteraction(id: string) {\n  console.log('deleteInteraction', id);\n  const interaction = props.taskDefinition.interactions.find(\n    (i) => i.id === id\n  );\n  const prompt = $gettext('%{ interaction } lschen', {\n    interaction: printInteractionType(interaction),\n  });\n  const confirmed = window.confirm(prompt);\n  if (!confirmed) {\n    console.info('Delete prompt canceled by user');\n    return;\n  }\n  const index = props.taskDefinition.interactions.findIndex((i) => i.id === id);\n  // TODO make undoable... Don't want to delete a whole task permanently with no undo\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.splice(index, 1);\n}\nfunction dragInteraction(id: string, xFraction: number, yFraction: number) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  interaction.x = xFraction;\n  interaction.y = yFraction;\n}\nfunction resizeOverlay(\n  id: string,\n  x: number,\n  y: number,\n  width: number,\n  height: number\n) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  interaction.x = x;\n  interaction.y = y;\n  interaction.width = width;\n  interaction.height = height;\n}\nfunction dragInteractionTimeline(id: string, startTime: number) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  const duration = interaction.endTime - interaction.startTime;\n  interaction.endTime = startTime + duration;\n  interaction.startTime = startTime;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(VideoPlayer, {\n      ref_key: \"videoPlayer\",\n      ref: videoPlayer,\n      task: __props.taskDefinition,\n      onTimeupdate: onTimeUpdate,\n      onMetadataChange: onVideoMetadataChange,\n      onClickInteraction: _cache[0] || (_cache[0] = (i) => selectInteraction(i.id))\n    }, null, 8, [\"task\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"button item\",\n          onClick: insertOverlay,\n          title: \n            _unref($gettext)('%{ interactionType } einfgen', {\n              interactionType: _unref($gettext)('Einblendung'),\n            })\n          \n        }, null, 8, _hoisted_4),\n        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(taskTypes, (taskType) => {\n          return _createElementVNode(\"button\", {\n            key: taskType,\n            type: \"button\",\n            class: _normalizeClass([\"button\", _unref(iconForTaskType)(taskType)]),\n            onClick: ($event: any) => (insertLmbTaskInteraction(taskType)),\n            title: \n            _unref($gettext)('%{ interactionType } einfgen', {\n              interactionType: _unref(printTaskType)(taskType),\n            })\n          \n          }, null, 10, _hoisted_5)\n        }), 64))\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"button zoom-in\",\n          title: _unref($gettext)('Vergrern'),\n          onClick: onClickZoomIn\n        }, null, 8, _hoisted_7),\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"button zoom-out\",\n          title: _unref($gettext)('Verkleinern'),\n          onClick: onClickZoomOut\n        }, null, 8, _hoisted_8),\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"button play\",\n          title: _unref($gettext)('Abspielen'),\n          onClick: onClickPlay\n        }, null, 8, _hoisted_9),\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"button pause\",\n          title: _unref($gettext)('Pausieren'),\n          onClick: onClickPause\n        }, null, 8, _hoisted_10)\n      ])\n    ]),\n    _createVNode(VideoTimeline, {\n      class: \"video-timeline\",\n      ref_key: \"videoTimeline\",\n      ref: videoTimeline,\n      task: __props.taskDefinition,\n      currentTime: currentTime.value,\n      videoMetadata: videoMetadata.value,\n      selectedInteractionId: selectedInteractionId.value,\n      onTimelineSeek: onTimelineSeek,\n      onClickInteraction: _cache[1] || (_cache[1] = (i) => selectInteraction(i.id)),\n      onDeleteInteraction: deleteInteraction\n    }, null, 8, [\"task\", \"currentTime\", \"videoMetadata\", \"selectedInteractionId\"]),\n    (_unref(selectedInteraction))\n      ? (_openBlock(), _createBlock(SelectedInteractionProperties, {\n          key: 0,\n          ref_key: \"selectedInteractionProperties\",\n          ref: selectedInteractionProperties,\n          selectedInteraction: _unref(selectedInteraction)\n        }, null, 8, [\"selectedInteraction\"]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"add-interactions-root\">\n    <VideoPlayer\n      ref=\"videoPlayer\"\n      :task=\"taskDefinition\"\n      @timeupdate=\"onTimeUpdate\"\n      @metadataChange=\"onVideoMetadataChange\"\n      @clickInteraction=\"(i: Interaction) => selectInteraction(i.id)\"\n    />\n    <div class=\"toolbar-under-video\">\n      <div class=\"insert-interactions-buttons\">\n        <button\n          type=\"button\"\n          class=\"button item\"\n          @click=\"insertOverlay\"\n          :title=\"\n            $gettext('%{ interactionType } einfgen', {\n              interactionType: $gettext('Einblendung'),\n            })\n          \"\n        ></button>\n        <button\n          v-for=\"taskType in taskTypes\"\n          :key=\"taskType\"\n          type=\"button\"\n          class=\"button\"\n          :class=\"iconForTaskType(taskType)\"\n          @click=\"insertLmbTaskInteraction(taskType)\"\n          :title=\"\n            $gettext('%{ interactionType } einfgen', {\n              interactionType: printTaskType(taskType),\n            })\n          \"\n        ></button>\n      </div>\n      <div class=\"video-controls\">\n        <button\n          type=\"button\"\n          class=\"button zoom-in\"\n          :title=\"$gettext('Vergrern')\"\n          @click=\"onClickZoomIn\"\n        ></button>\n        <button\n          type=\"button\"\n          class=\"button zoom-out\"\n          :title=\"$gettext('Verkleinern')\"\n          @click=\"onClickZoomOut\"\n        ></button>\n        <button\n          type=\"button\"\n          class=\"button play\"\n          :title=\"$gettext('Abspielen')\"\n          @click=\"onClickPlay\"\n        ></button>\n        <button\n          type=\"button\"\n          class=\"button pause\"\n          :title=\"$gettext('Pausieren')\"\n          @click=\"onClickPause\"\n        ></button>\n      </div>\n    </div>\n\n    <VideoTimeline\n      class=\"video-timeline\"\n      ref=\"videoTimeline\"\n      :task=\"taskDefinition\"\n      :currentTime=\"currentTime\"\n      :videoMetadata=\"videoMetadata\"\n      :selectedInteractionId=\"selectedInteractionId\"\n      @timelineSeek=\"onTimelineSeek\"\n      @clickInteraction=\"(i: Interaction) => selectInteraction(i.id)\"\n      @deleteInteraction=\"deleteInteraction\"\n    />\n    <SelectedInteractionProperties\n      v-if=\"selectedInteraction\"\n      ref=\"selectedInteractionProperties\"\n      :selectedInteraction=\"selectedInteraction\"\n    />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.toolbar-under-video {\n  display: flex;\n  justify-content: space-between;\n}\n.insert-interactions-buttons button,\n.video-controls button {\n  // Make the buttons into little squares so a lot of them will fit next to each\n  // other in one row.\n  min-width: unset;\n  width: 0;\n}\n.add-interactions-root {\n  overflow: hidden;\n}\n.video-timeline {\n  margin-top: 2em;\n}\n\n.selected-interaction-properties {\n  margin-top: 1em;\n}\n</style>\n\n<script setup lang=\"ts\">\nimport {\n  computed,\n  defineProps,\n  inject,\n  nextTick,\n  PropType,\n  provide,\n  ref,\n} from 'vue';\nimport type {\n  Interaction,\n  InteractiveVideoTask,\n  OverlayInteraction,\n} from '@/models/InteractiveVideoTask';\nimport VideoPlayer from '@/components/interactiveVideo/VideoPlayer.vue';\nimport VideoTimeline from '@/components/interactiveVideo/VideoTimeline.vue';\nimport SelectedInteractionProperties from '@/components/interactiveVideo/SelectedInteractionProperties.vue';\nimport { VideoMetadata } from '@/components/interactiveVideo/events';\nimport {\n  iconForTaskType,\n  newTask,\n  printTaskType,\n  TaskDefinition,\n} from '@/models/TaskDefinition';\nimport { v4 } from 'uuid';\nimport { interactiveVideoEditorStateSymbol } from '@/components/interactiveVideo/interactiveVideoEditorState';\nimport { $gettext } from '../../language/gettext';\nimport { printInteractionType } from '@/models/InteractiveVideoTask';\nimport {\n  TaskEditorState,\n  taskEditorStateSymbol,\n} from '@/components/taskEditorState';\nimport produce from 'immer';\nimport { isEqual } from 'lodash';\n\nconst props = defineProps({\n  taskDefinition: {\n    type: Object as PropType<InteractiveVideoTask>,\n    required: true,\n  },\n});\nconst currentTime = ref(0);\nconst videoMetadata = ref<VideoMetadata>({ length: 1 });\nconst selectedInteractionId = ref<string | undefined>(undefined);\nconst videoPlayer = ref<InstanceType<typeof VideoPlayer> | undefined>(\n  undefined\n);\nconst videoTimeline = ref<InstanceType<typeof VideoTimeline> | undefined>(\n  undefined\n);\nconst selectedInteractionProperties = ref<\n  InstanceType<typeof SelectedInteractionProperties> | undefined\n>(undefined);\n\nconst taskTypes: Array<TaskDefinition['task_type']> = [\n  'DragTheWords',\n  'FillInTheBlanks',\n  'FindTheHotspots',\n  'FindTheWords',\n  'MarkTheWords',\n  'Memory',\n  'Pairing',\n  'Question',\n  'Sequencing',\n];\n\nprovide(interactiveVideoEditorStateSymbol, {\n  selectInteraction,\n  selectedInteractionId,\n  editInteraction,\n  dragInteraction,\n  resizeOverlay,\n  deleteInteraction,\n  dragInteractionTimeline,\n});\n\n/**\n *  Do the necessary so that calls to performEdit from within the LMB Task\n *  editor will not overwrite the state of the Interactive Video task\n *  that contains them.\n *  TODO Make a graphic diagram of all provides/injects in LernmodulePlugin\n */\n\nprovide(taskEditorStateSymbol, {\n  performEdit: performEditForEditedLmbInteraction,\n});\n\nconst taskEditor = inject<TaskEditorState>(taskEditorStateSymbol);\n\nfunction performEditForEditedLmbInteraction(payload: {\n  newTaskDefinition: TaskDefinition;\n  undoBatch: unknown;\n}): void {\n  // Apply the new task definition for the edited interaction.\n  const newDefinition = produce(\n    props.taskDefinition,\n    (videoTask: InteractiveVideoTask) => {\n      const interactionIndex = videoTask.interactions.findIndex(\n        (i) => i.id === selectedInteractionId.value\n      );\n      if (interactionIndex === -1) {\n        throw new Error('cant find selected interaction in interactions array');\n      }\n      const interaction = videoTask.interactions[interactionIndex];\n      if (interaction.type !== 'lmbTask') {\n        throw new Error('Selected interaction is not of type lmbTask');\n      }\n      interaction.taskDefinition = payload.newTaskDefinition;\n    }\n  );\n  const undoBatch = isEqual(payload.undoBatch, {})\n    ? // If the edited interaction's LMB task editor sends empty object as undoBatch,\n      // pass it through. This way, a new undo/redo state will always be created.\n      {}\n    : // If it doesn't send the empty object, that means that this edit should\n      // be merged together with other edits with the same undoBatch to the same\n      // Interaction.\n      {\n        type: 'editedLmbInteractionTask',\n        interactionId: selectedInteractionId.value,\n        undoBatch: payload.undoBatch,\n      };\n  taskEditor!.performEdit({\n    newTaskDefinition: newDefinition,\n    undoBatch: undoBatch,\n  });\n}\n\nconst selectedInteraction = computed((): Interaction | undefined =>\n  props.taskDefinition.interactions.find(\n    (interaction) => interaction.id === selectedInteractionId.value\n  )\n);\n\nfunction selectInteraction(selectionId: string) {\n  selectedInteractionId.value = selectionId;\n}\nfunction editInteraction(id: string) {\n  selectedInteractionId.value = id;\n  nextTick(() => {\n    const el = selectedInteractionProperties.value?.$el as HTMLElement;\n    el.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start',\n    });\n  });\n}\nfunction onVideoMetadataChange(data: VideoMetadata) {\n  videoMetadata.value = data;\n}\nfunction onTimeUpdate(time: number) {\n  currentTime.value = time;\n}\nfunction onTimelineSeek(time: number) {\n  console.log('onTImelineSeek', time);\n  videoPlayer.value!.player!.currentTime(time);\n}\nfunction onClickZoomIn() {\n  videoTimeline.value!.zoom(0.18);\n}\nfunction onClickZoomOut() {\n  videoTimeline.value!.zoom(-0.18);\n}\nfunction onClickPlay() {\n  videoPlayer.value!.player!.play();\n}\nfunction onClickPause() {\n  videoPlayer.value!.player!.pause();\n}\nfunction insertOverlay() {\n  const interaction: OverlayInteraction = {\n    type: 'overlay',\n    v: 2,\n    id: v4(),\n    startTime: currentTime.value,\n    endTime: Math.min(videoMetadata.value.length, currentTime.value + 10),\n    x: 0.4,\n    y: 0.4,\n    width: 0.2,\n    height: 0.2,\n    content_wysiwyg: $gettext('Einblendung'),\n    pauseWhenVisible: true,\n  };\n  // TODO make undoable ?\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.push(interaction);\n  selectedInteractionId.value = interaction.id;\n}\n\nfunction insertLmbTaskInteraction(type: TaskDefinition['task_type']) {\n  console.log('insertLmbTaskInteraction', type);\n  const task = newTask(type);\n  const interaction: Interaction = {\n    type: 'lmbTask',\n    id: v4(),\n    taskDefinition: task,\n    startTime: currentTime.value,\n    endTime: Math.min(videoMetadata.value.length, currentTime.value + 10),\n    x: 0.5,\n    y: 0.5,\n    pauseWhenVisible: true,\n  };\n  // TODO make undoable ?\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.push(interaction);\n  selectedInteractionId.value = interaction.id;\n}\nfunction deleteInteraction(id: string) {\n  console.log('deleteInteraction', id);\n  const interaction = props.taskDefinition.interactions.find(\n    (i) => i.id === id\n  );\n  const prompt = $gettext('%{ interaction } lschen', {\n    interaction: printInteractionType(interaction),\n  });\n  const confirmed = window.confirm(prompt);\n  if (!confirmed) {\n    console.info('Delete prompt canceled by user');\n    return;\n  }\n  const index = props.taskDefinition.interactions.findIndex((i) => i.id === id);\n  // TODO make undoable... Don't want to delete a whole task permanently with no undo\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.splice(index, 1);\n}\nfunction dragInteraction(id: string, xFraction: number, yFraction: number) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  interaction.x = xFraction;\n  interaction.y = yFraction;\n}\nfunction resizeOverlay(\n  id: string,\n  x: number,\n  y: number,\n  width: number,\n  height: number\n) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  interaction.x = x;\n  interaction.y = y;\n  interaction.width = width;\n  interaction.height = height;\n}\nfunction dragInteractionTimeline(id: string, startTime: number) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  const duration = interaction.endTime - interaction.startTime;\n  interaction.endTime = startTime + duration;\n  interaction.startTime = startTime;\n}\n</script>\n","import script from \"./AddInteractions.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AddInteractions.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AddInteractions.vue?vue&type=style&index=0&id=0c375bf1&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0c375bf1\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3980b12c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"picker\" }\nconst _hoisted_2 = { class: \"default\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_4 = { class: \"bottom-actions\" }\nconst _hoisted_5 = { class: \"default\" }\nconst _hoisted_6 = { class: \"bottom-actions\" }\nconst _hoisted_7 = {\n  key: 1,\n  class: \"video-preview\"\n}\nconst _hoisted_8 = { key: 0 }\nconst _hoisted_9 = [\"href\"]\nconst _hoisted_10 = { key: 1 }\nconst _hoisted_11 = [\"href\"]\nconst _hoisted_12 = { class: \"video-preview-actions\" }\nconst _hoisted_13 = { class: \"form default\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  disabled: \"\",\n  style: {\"display\":\"none\"},\n  \"aria-hidden\": \"true\"\n}, null, -1))\nconst _hoisted_15 = { class: \"start-at-setting\" }\nconst _hoisted_16 = { class: \"start-at-setting-flex\" }\nconst _hoisted_17 = {\n  key: 0,\n  class: \"errors\"\n}\nconst _hoisted_18 = { key: 0 }\nconst _hoisted_19 = { value: 'not disabled' }\nconst _hoisted_20 = { value: 'forward disabled' }\nconst _hoisted_21 = { value: 'forward and backward disabled' }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n  const _component_FilePicker = _resolveComponent(\"FilePicker\")!\n  const _component_VideoPlayer = _resolveComponent(\"VideoPlayer\")!\n  const _component_VideoTimeInput = _resolveComponent(\"VideoTimeInput\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (_ctx.taskDefinition.video.type === 'none')\n      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n          _createElementVNode(\"p\", null, _toDisplayString(_ctx.$gettext(\n          'Lade ein Video hoch oder fge einen Link zu einem Youtube-Video ein.'\n        )), 1),\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createElementVNode(\"form\", _hoisted_2, [\n              _createElementVNode(\"fieldset\", null, [\n                _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Stud.IP-Video')), 1),\n                _createElementVNode(\"label\", null, [\n                  _createTextVNode(_toDisplayString(_ctx.$gettext('Neues Video hochladen')) + \" \", 1),\n                  _hoisted_3,\n                  _createVNode(_component_FileUpload, {\n                    onFileUploaded: _ctx.onUploadStudipVideo,\n                    accept: 'video/*'\n                  }, null, 8, [\"onFileUploaded\"])\n                ]),\n                _createElementVNode(\"label\", null, [\n                  _createTextVNode(_toDisplayString(_ctx.$gettext('Vorhandenes Video auswhlen')) + \" \", 1),\n                  _createVNode(_component_FilePicker, {\n                    modelValue: _ctx.selectedFileId,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.selectedFileId) = $event)),\n                    \"is-video\": \"\",\n                    onSelectFile: _ctx.updateCurrentFile\n                  }, null, 8, [\"modelValue\", \"onSelectFile\"])\n                ]),\n                _createElementVNode(\"div\", _hoisted_4, [\n                  _createElementVNode(\"button\", {\n                    type: \"button\",\n                    class: \"button accept\",\n                    onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onSaveUploadedFile && _ctx.onSaveUploadedFile(...args)))\n                  }, _toDisplayString(_ctx.$gettext('bernehmen')), 1)\n                ])\n              ])\n            ]),\n            _createElementVNode(\"form\", _hoisted_5, [\n              _createElementVNode(\"fieldset\", null, [\n                _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Youtube-Video')), 1),\n                _createElementVNode(\"label\", null, [\n                  _createTextVNode(_toDisplayString(_ctx.$gettext('Youtube-URL')) + \" \", 1),\n                  _withDirectives(_createElementVNode(\"input\", {\n                    class: \"youtube-url-input\",\n                    type: \"text\",\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.youtubeUrlInput) = $event))\n                  }, null, 512), [\n                    [_vModelText, _ctx.youtubeUrlInput]\n                  ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_6, [\n                  _createElementVNode(\"button\", {\n                    type: \"submit\",\n                    class: \"button accept\",\n                    onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onSaveYoutubeVideo && _ctx.onSaveYoutubeVideo(...args)))\n                  }, _toDisplayString(_ctx.$gettext('bernehmen')), 1)\n                ])\n              ])\n            ])\n          ])\n        ], 64))\n      : _createCommentVNode(\"\", true),\n    (_ctx.taskDefinition.video.type !== 'none')\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          _createVNode(_component_VideoPlayer, {\n            ref: \"videoPlayer\",\n            task: _ctx.taskDefinition,\n            class: \"video-player\",\n            onTimeupdate: _ctx.onTimeUpdate\n          }, null, 8, [\"task\", \"onTimeupdate\"]),\n          (_ctx.taskDefinition.video.type === 'youtube')\n            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, [\n                _createTextVNode(_toDisplayString(_ctx.$gettext('Youtube-Video: ')) + \" \", 1),\n                _createElementVNode(\"a\", {\n                  href: _ctx.taskDefinition.video.url,\n                  target: \"_blank\"\n                }, _toDisplayString(_ctx.taskDefinition.video.url), 9, _hoisted_9)\n              ]))\n            : (_ctx.taskDefinition.video.type === 'studipFileReference')\n              ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, [\n                  _createTextVNode(_toDisplayString(_ctx.$gettext('Hochgeladenes Video: ')) + \" \", 1),\n                  _createElementVNode(\"a\", {\n                    href: _ctx.fileDetailsUrl(_ctx.taskDefinition.video.file_id),\n                    target: \"_blank\"\n                  }, [\n                    (_ctx.selectedFile)\n                      ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                          _createTextVNode(_toDisplayString(_ctx.selectedFile.name), 1)\n                        ], 64))\n                      : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                          _createTextVNode(_toDisplayString(_ctx.taskDefinition.video.file_id), 1)\n                        ], 64))\n                  ], 8, _hoisted_11)\n                ]))\n              : _createCommentVNode(\"\", true),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createElementVNode(\"button\", {\n              class: \"button trash\",\n              onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.deleteVideo && _ctx.deleteVideo(...args)))\n            }, _toDisplayString(_ctx.$gettext('Video lschen')), 1)\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"form\", _hoisted_13, [\n      _hoisted_14,\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"checkbox\",\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.taskDefinition.autoplay) = $event))\n          }, null, 512), [\n            [_vModelCheckbox, _ctx.taskDefinition.autoplay]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Automatisch abspielen')), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _createElementVNode(\"div\", _hoisted_16, [\n            _createElementVNode(\"label\", null, [\n              _createTextVNode(_toDisplayString(_ctx.$gettext('Anfangen um')) + \" \", 1),\n              _createVNode(_component_VideoTimeInput, {\n                class: _normalizeClass({ invalid: !!_ctx.startPositionInputError }),\n                \"aria-invalid\": !!_ctx.startPositionInputError,\n                modelValue: _ctx.taskDefinition.startAt,\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.taskDefinition.startAt) = $event)),\n                \"onUpdate:error\": _cache[7] || (_cache[7] = (error) => (_ctx.startPositionInputError = error))\n              }, null, 8, [\"class\", \"aria-invalid\", \"modelValue\"])\n            ]),\n            _createElementVNode(\"button\", {\n              type: \"button\",\n              class: \"button\",\n              onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onClickUseCurrentTime && _ctx.onClickUseCurrentTime(...args)))\n            }, _toDisplayString(_ctx.$gettext('Aktuelle Position setzen')), 1)\n          ]),\n          (_ctx.startPositionInputError)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, _toDisplayString(_ctx.startPositionInputError), 1))\n            : _createCommentVNode(\"\", true)\n        ]),\n        false\n          ? (_openBlock(), _createElementBlock(\"label\", _hoisted_18, [\n              _createTextVNode(_toDisplayString(_ctx.$gettext('Navigation deaktivieren')) + \" \", 1),\n              _withDirectives(_createElementVNode(\"select\", {\n                \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.taskDefinition.disableNavigation) = $event))\n              }, [\n                _createElementVNode(\"option\", _hoisted_19, _toDisplayString(_ctx.$gettext('Nicht deaktiviert')), 1),\n                _createElementVNode(\"option\", _hoisted_20, _toDisplayString(_ctx.$gettext('Vorspulen deaktiviert')), 1),\n                _createElementVNode(\"option\", _hoisted_21, _toDisplayString(_ctx.$gettext('Vorspulen und Rckspulen deaktiviert')), 1)\n              ], 512), [\n                [_vModelSelect, _ctx.taskDefinition.disableNavigation]\n              ])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ], 64))\n}","<!-- Allow us to mutate the prop 'taskDefinition' as much as we want-->\n<!-- eslint-disable vue/no-mutating-props -->\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport VideoPlayer from '@/components/interactiveVideo/VideoPlayer.vue';\nimport { $gettext } from '@/language/gettext';\nimport { InteractiveVideoTask, Video } from '@/models/InteractiveVideoTask';\nimport FileUpload from '@/components/FileUpload.vue';\nimport VideoTimeInput from '@/components/interactiveVideo/VideoTimeInput.vue';\nimport FilePicker, {\n  FilePickerFile,\n} from '@/components/courseware-components-ported-to-vue3/FilePicker.vue';\nimport { FileRef, fileRefsSchema } from '@/routes/jsonApi';\nimport { fileDetailsUrl, fileIdToUrl } from '@/models/TaskDefinition';\nimport { mapActions, mapGetters } from 'vuex';\n\nfunction formatSecondsToHhMmSs(time: number): string {\n  let hours = 0,\n    minutes = 0,\n    seconds = 0;\n  while (time > 3600) {\n    time -= 3600;\n    hours += 1;\n  }\n  while (time > 60) {\n    time -= 60;\n    minutes += 1;\n  }\n  seconds = time;\n  function twoDigits(n: number): string {\n    return n.toLocaleString('de-DE', {\n      minimumIntegerDigits: 2,\n      maximumFractionDigits: 0,\n    });\n  }\n  return `${twoDigits(hours)}:${twoDigits(minutes)}:${twoDigits(seconds)}`;\n}\n\nexport default defineComponent({\n  name: 'SelectVideo',\n  props: {\n    taskDefinition: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      youtubeUrlInput: '',\n      startPositionInputError: undefined as Error | undefined,\n      currentTime: 0,\n      selectedFolderId: '',\n      selectedFile: undefined as FilePickerFile | undefined,\n      selectedFileId: '',\n    };\n  },\n  watch: {\n    'taskDefinition.video': {\n      immediate: true,\n      handler: async function (value: Video) {\n        switch (value.type) {\n          case 'none':\n            break;\n          case 'studipFileReference':\n            if (\n              this.selectedFile === undefined ||\n              this.selectedFile.id !== value.file_id\n            ) {\n              // Get metadata for file\n              await this.loadFileRef({ id: value.file_id });\n              const ref = fileRefsSchema.parse(\n                this.fileRefById({ id: value.file_id })\n              );\n              this.selectedFile = {\n                id: value.file_id,\n                name: ref.attributes.name,\n                mime_type: ref.attributes['mime-type'],\n                download_url: ref.meta['download-url'],\n              };\n            }\n            break;\n          case 'youtube':\n            this.youtubeUrlInput = value.url;\n        }\n      },\n    },\n  },\n  computed: {\n    ...mapGetters({\n      fileRefById: 'file-refs/byId',\n    }),\n  },\n  methods: {\n    fileDetailsUrl,\n    fileIdToUrl,\n    $gettext,\n    ...mapActions({\n      loadFileRef: 'file-refs/loadById',\n    }),\n    onTimeUpdate(time: number) {\n      this.currentTime = time;\n    },\n    onClickUseCurrentTime() {\n      this.taskDefinition.startAt = this.currentTime;\n    },\n    updateCurrentFile(file: FilePickerFile) {\n      this.selectedFile = file;\n      this.selectedFileId = file.id;\n    },\n    onSaveYoutubeVideo() {\n      this.taskDefinition.video = {\n        type: 'youtube',\n        url: this.youtubeUrlInput,\n      };\n    },\n    onSaveUploadedFile() {\n      if (!this.selectedFile) {\n        return;\n      }\n      this.taskDefinition.video = {\n        v: 2,\n        type: 'studipFileReference',\n        file_id: this.selectedFile.id,\n      };\n    },\n    deleteVideo() {\n      this.taskDefinition.video = {\n        type: 'none',\n      };\n    },\n    onUploadStudipVideo(file: FileRef) {\n      this.taskDefinition.video = {\n        v: 2,\n        type: 'studipFileReference',\n        file_id: file.id,\n      };\n      this.selectedFile = {\n        id: file.id,\n        name: file.attributes.name,\n        mime_type: file.attributes['mime-type'],\n        download_url: file.meta['download-url'],\n      };\n    },\n  },\n  components: {\n    VideoTimeInput,\n    FileUpload,\n    VideoPlayer,\n    FilePicker,\n  },\n});\n</script>\n\n<template>\n  <template v-if=\"taskDefinition.video.type === 'none'\">\n    <p>\n      {{\n        $gettext(\n          'Lade ein Video hoch oder fge einen Link zu einem Youtube-Video ein.'\n        )\n      }}\n    </p>\n    <div class=\"picker\">\n      <form class=\"default\">\n        <fieldset>\n          <legend>\n            {{ $gettext('Stud.IP-Video') }}\n          </legend>\n          <label>\n            {{ $gettext('Neues Video hochladen') }} <br />\n            <FileUpload\n              @file-uploaded=\"onUploadStudipVideo\"\n              :accept=\"'video/*'\"\n            />\n          </label>\n          <label>\n            {{ $gettext('Vorhandenes Video auswhlen') }}\n            <FilePicker\n              v-model=\"selectedFileId\"\n              is-video\n              @selectFile=\"updateCurrentFile\"\n            />\n          </label>\n          <div class=\"bottom-actions\">\n            <button\n              type=\"button\"\n              class=\"button accept\"\n              @click=\"onSaveUploadedFile\"\n            >\n              {{ $gettext('bernehmen') }}\n            </button>\n          </div>\n          <!--          <div style=\"white-space: pre-wrap\">-->\n          <!--            {{ { selectedFile, selectedFileId } }}-->\n          <!--          </div>-->\n        </fieldset>\n      </form>\n      <form class=\"default\">\n        <fieldset>\n          <legend>\n            {{ $gettext('Youtube-Video') }}\n          </legend>\n          <label>\n            {{ $gettext('Youtube-URL') }}\n            <input\n              class=\"youtube-url-input\"\n              type=\"text\"\n              v-model=\"youtubeUrlInput\"\n            />\n          </label>\n          <div class=\"bottom-actions\">\n            <button\n              type=\"submit\"\n              class=\"button accept\"\n              @click=\"onSaveYoutubeVideo\"\n            >\n              {{ $gettext('bernehmen') }}\n            </button>\n          </div>\n        </fieldset>\n      </form>\n    </div>\n  </template>\n  <div class=\"video-preview\" v-if=\"taskDefinition.video.type !== 'none'\">\n    <VideoPlayer\n      ref=\"videoPlayer\"\n      :task=\"taskDefinition\"\n      class=\"video-player\"\n      @timeupdate=\"onTimeUpdate\"\n    />\n    <p v-if=\"taskDefinition.video.type === 'youtube'\">\n      {{ $gettext('Youtube-Video: ') }}\n      <a :href=\"taskDefinition.video.url\" target=\"_blank\">\n        {{ taskDefinition.video.url }}</a\n      >\n    </p>\n    <p v-else-if=\"taskDefinition.video.type === 'studipFileReference'\">\n      {{ $gettext('Hochgeladenes Video: ') }}\n      <a :href=\"fileDetailsUrl(taskDefinition.video.file_id)\" target=\"_blank\">\n        <template v-if=\"selectedFile\">\n          {{ selectedFile.name }}\n        </template>\n        <template v-else>\n          {{ taskDefinition.video.file_id }}\n        </template>\n      </a>\n    </p>\n    <div class=\"video-preview-actions\">\n      <button class=\"button trash\" @click=\"deleteVideo\">\n        {{ $gettext('Video lschen') }}\n      </button>\n    </div>\n  </div>\n  <form class=\"form default\">\n    <!-- Prevent implicit submission of the form -->\n    <button\n      type=\"submit\"\n      disabled\n      style=\"display: none\"\n      aria-hidden=\"true\"\n    ></button>\n    <fieldset>\n      <legend>{{ $gettext('Einstellungen') }}</legend>\n      <label>\n        <!-- eslint-disable vue/no-mutating-props -->\n        <input type=\"checkbox\" v-model=\"taskDefinition.autoplay\" />\n        {{ $gettext('Automatisch abspielen') }}\n      </label>\n      <div class=\"start-at-setting\">\n        <div class=\"start-at-setting-flex\">\n          <label>\n            {{ $gettext('Anfangen um') }}\n            <VideoTimeInput\n              :class=\"{ invalid: !!startPositionInputError }\"\n              :aria-invalid=\"!!startPositionInputError\"\n              v-model=\"taskDefinition.startAt\"\n              @update:error=\"(error) => (startPositionInputError = error)\"\n            />\n          </label>\n          <button type=\"button\" class=\"button\" @click=\"onClickUseCurrentTime\">\n            {{ $gettext('Aktuelle Position setzen') }}\n          </button>\n        </div>\n        <div class=\"errors\" v-if=\"startPositionInputError\">\n          {{ startPositionInputError }}\n        </div>\n      </div>\n      <label v-if=\"false\">\n        <!-- hidden until 'disable navigation' feature is ready -->\n        {{ $gettext('Navigation deaktivieren') }}\n        <select v-model=\"taskDefinition.disableNavigation\">\n          <option :value=\"'not disabled'\">\n            {{ $gettext('Nicht deaktiviert') }}\n          </option>\n          <option :value=\"'forward disabled'\">\n            {{ $gettext('Vorspulen deaktiviert') }}\n          </option>\n          <option :value=\"'forward and backward disabled'\">\n            {{ $gettext('Vorspulen und Rckspulen deaktiviert') }}\n          </option>\n        </select>\n      </label>\n    </fieldset>\n  </form>\n</template>\n\n<style scoped lang=\"scss\">\n.picker {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 0.5em;\n  &.hidden {\n    display: none;\n  }\n  > form {\n    > fieldset {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      .bottom-actions {\n        display: flex;\n        justify-content: flex-end;\n        button.button {\n          margin-right: 0.6em;\n          margin-bottom: 0;\n          margin-top: 0;\n        }\n      }\n    }\n  }\n  padding-bottom: 1em;\n}\n.youtube-url-input {\n  width: 100%;\n  max-width: 48em;\n  box-sizing: border-box;\n}\n.video-preview {\n  .video-player {\n    margin-bottom: 1em;\n  }\n  .video-preview-actions {\n    margin-top: 1em;\n    text-align: end;\n  }\n}\n.start-at-setting {\n  > .start-at-setting-flex {\n    display: flex;\n    gap: 1em;\n    align-items: flex-end;\n  }\n}\ninput[type='number'].wide {\n  max-width: 12em;\n}\n</style>\n","import { toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, vShow as _vShow, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelSelect as _vModelSelect } from \"vue\"\n\nconst _hoisted_1 = { class: \"cw-file-chooser\" }\nconst _hoisted_2 = { value: \"\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Keine Auswahl\")\nconst _hoisted_4 = [\"value\"]\nconst _hoisted_5 = { disabled: \"\" }\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"Keine Dateien vorhanden\")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_FolderPicker = _resolveComponent(\"FolderPicker\")!\n  const _component_translate = _resolveComponent(\"translate\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"label\", null, [\n      _createTextVNode(_toDisplayString(_ctx.$gettext('Ordner-Filter')) + \" \", 1),\n      _createVNode(_component_FolderPicker, {\n        allowUserFolders: \"\",\n        unchoose: \"\",\n        modelValue: _ctx.selectedFolderId,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.selectedFolderId) = $event))\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"label\", null, [\n      _createTextVNode(_toDisplayString(_ctx.$gettext('Datei')) + \" \", 1),\n      _withDirectives(_createElementVNode(\"select\", {\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.currentValue) = $event)),\n        onChange: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.selectFile && _ctx.selectFile(...args)))\n      }, [\n        _withDirectives(_createElementVNode(\"option\", _hoisted_2, [\n          _createVNode(_component_translate, null, {\n            default: _withCtx(() => [\n              _hoisted_3\n            ]),\n            _: 1\n          })\n        ], 512), [\n          [_vShow, _ctx.canBeEmpty]\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.files, (file, index) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: index,\n            value: file.id\n          }, _toDisplayString(file.name), 9, _hoisted_4))\n        }), 128)),\n        _withDirectives(_createElementVNode(\"option\", _hoisted_5, [\n          _createVNode(_component_translate, null, {\n            default: _withCtx(() => [\n              _hoisted_6\n            ]),\n            _: 1\n          })\n        ], 512), [\n          [_vShow, _ctx.files.length === 0]\n        ])\n      ], 544), [\n        [_vModelSelect, _ctx.currentValue]\n      ])\n    ])\n  ]))\n}","<!-- This component is a port of the courseware-file-chooser component from\nthe Stud.IP core 5.4, rewritten in Typescript / Vue 3, removing its dependency\n on the core VueX 3.x store, allowing it to be used in our Vue 3 app. -->\n<template>\n  <div class=\"cw-file-chooser\">\n    <label\n      >{{ $gettext('Ordner-Filter') }}\n      <FolderPicker allowUserFolders unchoose v-model=\"selectedFolderId\" />\n    </label>\n    <label\n      >{{ $gettext('Datei') }}\n      <select v-model=\"currentValue\" @change=\"selectFile\">\n        <option v-show=\"canBeEmpty\" value=\"\">\n          <translate>Keine Auswahl</translate>\n        </option>\n        <option v-for=\"(file, index) in files\" :key=\"index\" :value=\"file.id\">\n          {{ file.name }}\n        </option>\n        <option v-show=\"files.length === 0\" disabled>\n          <translate>Keine Dateien vorhanden</translate>\n        </option>\n      </select>\n    </label>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport FolderPicker from '@/components/courseware-components-ported-to-vue3/FolderPicker.vue';\nimport { mapActions, mapGetters } from 'vuex';\nimport { defineComponent } from 'vue';\nimport { $gettext } from '../../language/gettext';\n\n// TODO #21 Refactor to remove this datatype\nexport interface FilePickerFile {\n  id: string;\n  name: string;\n  mime_type: string;\n  download_url: string;\n}\n\nexport default defineComponent({\n  name: 'FilePicker',\n  components: { FolderPicker },\n  props: {\n    value: String,\n    mimeType: { type: String, default: '' },\n    isImage: { type: Boolean, default: false },\n    isVideo: { type: Boolean, default: false },\n    isAudio: { type: Boolean, default: false },\n    isDocument: { type: Boolean, default: false },\n    canBeEmpty: { type: Boolean, default: false },\n  },\n  data() {\n    return {\n      currentValue: '',\n      selectedFolderId: '',\n      files: [] as any[],\n    };\n  },\n  computed: {\n    ...mapGetters({\n      fileRefById: 'file-refs/byId',\n      relatedFileRefs: 'file-refs/related',\n      relatedTermOfUse: 'terms-of-use/related',\n    }),\n    userId(): string {\n      return window.STUDIP.USER_ID;\n    },\n  },\n  methods: {\n    $gettext,\n    ...mapActions({\n      loadFileRef: 'file-refs/loadById',\n      loadRelatedFileRefs: 'file-refs/loadRelated',\n    }),\n    selectFile() {\n      this.$emit(\n        'selectFile',\n        this.files.find((file) => file.id === this.currentValue)\n      );\n    },\n    filterFiles(loadArray: any[]) {\n      const filterFile = (file: any) => {\n        let fileTermsOfUse = this.relatedTermOfUse({\n          parent: file,\n          relationship: 'terms-of-use',\n        });\n\n        if (\n          fileTermsOfUse !== null &&\n          fileTermsOfUse.attributes['download-condition'] !== 0\n        ) {\n          return false;\n        }\n        if (\n          this.mimeType !== '' &&\n          this.mimeType !== file.attributes['mime-type']\n        ) {\n          return false;\n        }\n        if (this.isImage && !file.attributes['mime-type'].includes('image')) {\n          return false;\n        }\n        const videoConditions = ['video/mp4', 'video/ogg', 'video/webm'];\n        if (\n          this.isVideo &&\n          !videoConditions.some((condition) =>\n            file.attributes['mime-type'].includes(condition)\n          )\n        ) {\n          return false;\n        }\n        const audioConditions = [\n          'audio/wav',\n          'audio/ogg',\n          'audio/webm',\n          'audio/flac',\n          'audio/mpeg',\n          'audio/x-m4a',\n          'audio/mp4',\n        ];\n        if (\n          this.isAudio &&\n          !audioConditions.some((condition) =>\n            file.attributes['mime-type'].includes(condition)\n          )\n        ) {\n          return false;\n        }\n        const officeConditions = ['application/pdf']; //TODO enable more mime types\n        if (\n          this.isDocument &&\n          !officeConditions.some((condition) =>\n            file.attributes['mime-type'].includes(condition)\n          )\n        ) {\n          return false;\n        }\n\n        return true;\n      };\n\n      // TODO #21 Refactor.. I'm not sure it is useful to map the file-ref,\n      // which we fetched from the JSON API, to a subset of its keys here.\n      // Clients may need other values, like the folder ID, which we do not\n      // provide here.\n      return loadArray.filter(filterFile).map((file) => ({\n        id: file.id,\n        name: file.attributes.name,\n        mime_type: file.attributes['mime-type'],\n        download_url: window.STUDIP.URLHelper.getURL(\n          'sendfile.php',\n          { type: 0, file_id: file.id, file_name: file.attributes.name },\n          true\n        ),\n      }));\n    },\n    async getFolderFiles() {\n      const parent = { type: 'folders', id: `${this.selectedFolderId}` };\n      const relationship = 'file-refs';\n      const options = { include: 'terms-of-use', 'page[limit]': 10000 };\n      await this.loadRelatedFileRefs({ parent, relationship, options });\n\n      const fileRefs = this.relatedFileRefs({ parent, relationship });\n      this.files = this.filterFiles(fileRefs);\n    },\n  },\n  async mounted() {\n    console.log('mounted');\n    if (this.value) {\n      try {\n        await this.loadFileRef({ id: this.value });\n      } catch (error: unknown) {\n        console.error(\n          'loadfileRef threw an error. File picker will not be ' +\n            'initialized to show the selected file.',\n          error\n        );\n        return;\n      }\n      const fileRef = this.fileRefById({ id: this.value });\n\n      if (fileRef) {\n        this.selectedFolderId = fileRef.relationships.parent.data.id;\n        this.currentValue = this.value ?? '';\n      }\n    }\n  },\n  watch: {\n    selectedFolderId() {\n      if (this.selectedFolderId !== '') {\n        this.getFolderFiles();\n      }\n    },\n    value(newValue, oldValue) {\n      if (newValue === '') {\n        this.selectedFolderId = '';\n        this.currentValue = '';\n      }\n    },\n  },\n});\n</script>\n","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  value: \"\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"kein Ordner ausgewhlt\")\nconst _hoisted_3 = [\"label\"]\nconst _hoisted_4 = [\"value\"]\nconst _hoisted_5 = [\"label\"]\nconst _hoisted_6 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_translate = _resolveComponent(\"translate\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.currentValue) = $event)),\n    onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.changeSelection && _ctx.changeSelection(...args)))\n  }, [\n    (_ctx.unchoose)\n      ? (_openBlock(), _createElementBlock(\"option\", _hoisted_1, [\n          _createVNode(_component_translate, null, {\n            default: _withCtx(() => [\n              _hoisted_2\n            ]),\n            _: 1\n          })\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.context.type === 'courses')\n      ? (_openBlock(), _createElementBlock(\"optgroup\", {\n          key: 1,\n          label: _ctx.textOptGroupCourse\n        }, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.loadedCourseFolders, (folder) => {\n            return (_openBlock(), _createElementBlock(\"option\", {\n              key: folder.id,\n              value: folder.id\n            }, _toDisplayString(folder.attributes.name), 9, _hoisted_4))\n          }), 128))\n        ], 8, _hoisted_3))\n      : _createCommentVNode(\"\", true),\n    (_ctx.allowUserFolders)\n      ? (_openBlock(), _createElementBlock(\"optgroup\", {\n          key: 2,\n          label: _ctx.textOptGroupUser\n        }, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.loadedUserFolders, (folder) => {\n            return (_openBlock(), _createElementBlock(\"option\", {\n              key: folder.id,\n              value: folder.id\n            }, _toDisplayString(folder.attributes.name), 9, _hoisted_6))\n          }), 128))\n        ], 8, _hoisted_5))\n      : _createCommentVNode(\"\", true)\n  ], 544)), [\n    [_vModelSelect, _ctx.currentValue]\n  ])\n}","<!-- This component is a port of the courseware-folder-chooser component from\nthe Stud.IP core 5.4, rewritten in Typescript / Vue 3, removing its dependency\n on the core VueX store. -->\n<template>\n  <select v-model=\"currentValue\" @change=\"changeSelection\">\n    <option v-if=\"unchoose\" value=\"\">\n      <translate>kein Ordner ausgewhlt</translate>\n    </option>\n    <optgroup v-if=\"context.type === 'courses'\" :label=\"textOptGroupCourse\">\n      <option\n        v-for=\"folder in loadedCourseFolders\"\n        :key=\"folder.id\"\n        :value=\"folder.id\"\n      >\n        {{ folder.attributes.name }}\n      </option>\n    </optgroup>\n    <optgroup v-if=\"allowUserFolders\" :label=\"textOptGroupUser\">\n      <option\n        v-for=\"folder in loadedUserFolders\"\n        :key=\"folder.id\"\n        :value=\"folder.id\"\n      >\n        {{ folder.attributes.name }}\n      </option>\n    </optgroup>\n  </select>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { Context } from '@/models/CoursewareBlockIframeMessages';\nimport { coursewareBlockStore } from '@/store';\nimport { mapActions, mapGetters } from 'vuex';\nimport { FolderRef } from '@/routes/jsonApi';\n\nfunction filterCourseFolders(\n  folders: FolderRef[],\n  { allowHomeworkFolders }: { allowHomeworkFolders: boolean }\n) {\n  const validatedParents = new Map();\n\n  return folders.filter((folder: FolderRef) => {\n    if (validateParentFolder(folder)) {\n      switch (folder.attributes['folder-type']) {\n        case 'HiddenFolder':\n          if (folder.attributes['data-content']['download_allowed'] === 1) {\n            return true;\n          }\n          break;\n        case 'HomeworkFolder':\n          if (allowHomeworkFolders) {\n            return true;\n          }\n          break;\n        default:\n          return true;\n      }\n    }\n  });\n\n  function validateParentFolder(folder: FolderRef): boolean {\n    let isValid = true;\n    if (folder?.relationships?.parent) {\n      let parentId = folder.relationships.parent.data.id;\n      if (validatedParents.has(parentId)) {\n        isValid = validatedParents.get(parentId);\n      } else {\n        let parent = folders.find((f) => f.id === parentId);\n        if (parent) {\n          isValid = hiddenParentFolderValidation(parent);\n          validatedParents.set(parentId, isValid);\n        }\n      }\n    }\n    return isValid;\n  }\n\n  function hiddenParentFolderValidation(parentFolder: FolderRef): boolean {\n    if (parentFolder.attributes['folder-type'] === 'HiddenFolder') {\n      return false;\n    } else if (parentFolder?.relationships?.parent) {\n      // Recursively validating the parents.\n      return validateParentFolder(parentFolder);\n    } else {\n      return true;\n    }\n  }\n}\n\nexport default defineComponent({\n  name: 'FolderPicker',\n  props: {\n    value: {\n      type: String,\n      required: false,\n      default: '',\n    },\n    allowUserFolders: { type: Boolean, default: false },\n    allowHomeworkFolders: { type: Boolean, default: false },\n    unchoose: { type: Boolean, default: false },\n  },\n  data() {\n    return {\n      currentValue: '',\n      textOptGroupCourse: this.$gettext('Dateibereich dieser Veranstaltung'),\n      textOptGroupUser: this.$gettext('Persnlicher Dateibereich'),\n    };\n  },\n  computed: {\n    ...mapGetters({\n      relatedFolders: 'folders/related',\n    }),\n    context(): Context {\n      // Replaces the vuex getter 'context'\n      return coursewareBlockStore.studipContext;\n    },\n    userId(): string {\n      // Replaces the vuex getter 'userId'\n      return window.STUDIP.USER_ID;\n    },\n    courseObject() {\n      return { type: 'courses', id: `${this.context.id}` };\n    },\n    userObject() {\n      return { type: 'users', id: `${this.userId}` };\n    },\n    loadedCourseFolders() {\n      return filterCourseFolders(\n        this.relatedFolders({\n          parent: this.courseObject,\n          relationship: 'folders',\n        }) ?? [],\n        {\n          allowHomeworkFolders: this.allowHomeworkFolders,\n        }\n      );\n    },\n    loadedUserFolders() {\n      let loadedUserFolders: FolderRef[] = [];\n      let userFolders: FolderRef[] =\n        this.relatedFolders({\n          parent: this.userObject,\n          relationship: 'folders',\n        }) ?? [];\n      userFolders.forEach((folder: FolderRef) => {\n        if (folder.attributes['folder-type'] === 'PublicFolder') {\n          loadedUserFolders.push(folder);\n        }\n      });\n\n      return loadedUserFolders;\n    },\n  },\n  methods: {\n    ...mapActions({\n      _loadRelatedFolders: 'folders/loadRelated',\n    }),\n    // Typed shim for vuex action 'folders/loadRelated'\n    loadRelatedFolders(params: {\n      parent: {\n        type: string;\n        id: string;\n      };\n      relationship: string;\n      options: {\n        'page[limit]': number;\n      };\n    }): Promise<unknown> {\n      return this._loadRelatedFolders(params);\n    },\n\n    changeSelection() {\n      this.$emit('input', this.currentValue);\n    },\n\n    getCourseFolders() {\n      const parent = this.courseObject;\n      const relationship = 'folders';\n      const options = { 'page[limit]': 10000 };\n\n      return this.loadRelatedFolders({ parent, relationship, options });\n    },\n\n    getUserFolders() {\n      const parent = this.userObject;\n      const relationship = 'folders';\n      const options = { 'page[limit]': 10000 };\n\n      return this.loadRelatedFolders({ parent, relationship, options });\n    },\n\n    confirmSelectedFolder() {\n      const folders: FolderRef[] = this.loadedUserFolders.concat(\n        this.loadedCourseFolders\n      );\n\n      let folder = folders.find((folder) => folder.id === this.currentValue);\n\n      if (this.currentValue !== '' && folder === undefined) {\n        this.currentValue = '';\n        this.changeSelection();\n      }\n    },\n  },\n  async mounted() {\n    this.currentValue = this.value;\n    if (this.context.type !== 'users') {\n      try {\n        await this.getCourseFolders();\n      } catch (error) {\n        console.error('Error loading course folders: ', error);\n      }\n    }\n    try {\n      await this.getUserFolders();\n    } catch (error) {\n      console.error('Error loading user folders: ', error);\n    }\n    this.confirmSelectedFolder();\n  },\n  watch: {\n    value() {\n      this.currentValue = this.value;\n    },\n  },\n});\n</script>\n","import { render } from \"./FolderPicker.vue?vue&type=template&id=f99d282a&ts=true\"\nimport script from \"./FolderPicker.vue?vue&type=script&lang=ts\"\nexport * from \"./FolderPicker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./FilePicker.vue?vue&type=template&id=d9d41816&ts=true\"\nimport script from \"./FilePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./FilePicker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SelectVideo.vue?vue&type=template&id=3980b12c&scoped=true&ts=true\"\nimport script from \"./SelectVideo.vue?vue&type=script&lang=ts\"\nexport * from \"./SelectVideo.vue?vue&type=script&lang=ts\"\n\nimport \"./SelectVideo.vue?vue&type=style&index=0&id=3980b12c&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3980b12c\"]])\n\nexport default __exports__","import { render } from \"./InteractiveVideoEditor.vue?vue&type=template&id=9380eaae&ts=true\"\nimport script from \"./InteractiveVideoEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./InteractiveVideoEditor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_VideoPlayer = _resolveComponent(\"VideoPlayer\")!\n\n  return (_openBlock(), _createBlock(_component_VideoPlayer, { task: _ctx.task }, null, 8, [\"task\"]))\n}","<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { InteractiveVideoTask } from '@/models/InteractiveVideoTask';\nimport VideoPlayer from '@/components/interactiveVideo/VideoPlayer.vue';\n\nexport default defineComponent({\n  name: 'InteractiveVideoViewer',\n  components: { VideoPlayer },\n  props: {\n    task: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      counter: 0,\n    };\n  },\n});\n</script>\n\n<template>\n  <VideoPlayer :task=\"task\" />\n</template>\n\n<style scoped></style>\n","import { render } from \"./InteractiveVideoViewer.vue?vue&type=template&id=80198370&ts=true\"\nimport script from \"./InteractiveVideoViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./InteractiveVideoViewer.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createBlock as _createBlock, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-68a69100\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"videoJsContainer\" }\nconst _hoisted_2 = [\"onClick\", \"title\"]\nconst _hoisted_3 = [\"title\"]\nconst _hoisted_4 = [\"title\"]\nconst _hoisted_5 = [\"title\"]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"arrow\",\n  \"data-popper-arrow\": \"\"\n}, null, -1))\nconst _hoisted_7 = { class: \"active-interaction\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_LmbTaskInteraction = _resolveComponent(\"LmbTaskInteraction\")!\n  const _component_OverlayInteraction = _resolveComponent(\"OverlayInteraction\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"video-player-root\", { 'drag-in-progress': !!_ctx.dragState }]),\n    ref: \"root\"\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, null, 512),\n    (!!_ctx.selectedInteractionId)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          class: \"cancel-selection-overlay\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.editor!.selectInteraction(undefined)))\n        }))\n      : _createCommentVNode(\"\", true),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.task.interactions, (interaction) => {\n      return (_openBlock(), _createElementBlock(\"button\", {\n        class: \"progress-bar-interaction-marker\",\n        key: interaction.id,\n        style: _normalizeStyle(_ctx.progressBarInteractionMarkerStyle(interaction)),\n        onClick: ($event: any) => (_ctx.onClickInteractionMarker(interaction)),\n        title: \n        _ctx.$gettext('Zu %{ interaction } springen', {\n          interaction: _ctx.printInteractionType(interaction),\n        })\n      \n      }, null, 12, _hoisted_2))\n    }), 128)),\n    (_ctx.editor)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 1,\n          ref: \"selectedInteractionTooltip\",\n          class: _normalizeClass([\"selected-interaction-tooltip\", {\n        hidden: !_ctx.interactionForPopper,\n      }])\n        }, [\n          (_ctx.selectedInteraction?.type === 'lmbTask')\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                type: \"button\",\n                class: \"small-button visibility-visible\",\n                onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.activateInteraction(_ctx.selectedInteraction))),\n                title: _ctx.$gettext('Vorschau')\n              }, null, 8, _hoisted_3))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"small-button edit\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.editInteraction(_ctx.selectedInteraction))),\n            title: _ctx.$gettext('Bearbeiten')\n          }, null, 8, _hoisted_4),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"small-button trash\",\n            onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.editor?.deleteInteraction(_ctx.selectedInteractionId))),\n            title: _ctx.$gettext('Lschen')\n          }, null, 8, _hoisted_5),\n          _hoisted_6\n        ], 2))\n      : _createCommentVNode(\"\", true),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.visibleInteractions, (interaction) => {\n      return (_openBlock(), _createElementBlock(_Fragment, {\n        key: interaction.id\n      }, [\n        (interaction.type === 'lmbTask')\n          ? (_openBlock(), _createBlock(_component_LmbTaskInteraction, {\n              key: 0,\n              id: `interaction-${_ctx.uid}-${interaction.id}`,\n              class: \"video-player-interaction\",\n              style: _normalizeStyle({\n          left: `${interaction.x * 100}%`,\n          top: `${interaction.y * 100}%`,\n        }),\n              interaction: interaction,\n              onClick: ($event: any) => (_ctx.editor?.selectInteraction(interaction.id)),\n              onPointerdown: ($event: any) => (_ctx.onPointerDownInteraction($event, interaction)),\n              onPointermove: ($event: any) => (_ctx.onPointerMoveInteraction($event, interaction)),\n              onPointerup: ($event: any) => (_ctx.onPointerUpInteraction($event, interaction)),\n              onActivateInteraction: _ctx.activateInteraction\n            }, null, 8, [\"id\", \"style\", \"interaction\", \"onClick\", \"onPointerdown\", \"onPointermove\", \"onPointerup\", \"onActivateInteraction\"]))\n          : (interaction.type === 'overlay')\n            ? (_openBlock(), _createBlock(_component_OverlayInteraction, {\n                key: 1,\n                id: `interaction-${_ctx.uid}-${interaction.id}`,\n                class: \"video-player-interaction\",\n                style: _normalizeStyle({\n          left: `${interaction.x * 100}%`,\n          top: `${interaction.y * 100}%`,\n          width: `${interaction.width * 100}%`,\n          height: `${interaction.height * 100}%`,\n        }),\n                interaction: interaction,\n                onClick: ($event: any) => (_ctx.editor?.selectInteraction(interaction.id)),\n                onPointerdown: ($event: any) => (_ctx.onPointerDownInteraction($event, interaction)),\n                onPointermove: ($event: any) => (_ctx.onPointerMoveInteraction($event, interaction)),\n                onPointerup: ($event: any) => (_ctx.onPointerUpInteraction($event, interaction)),\n                onPointerDownResizeHandle: _ctx.onPointerDownResizeHandle,\n                onPointerMoveResizeHandle: _ctx.onPointerMoveResizeHandle,\n                onPointerUpResizeHandle: _ctx.onPointerUpResizeHandle\n              }, null, 8, [\"id\", \"style\", \"interaction\", \"onClick\", \"onPointerdown\", \"onPointermove\", \"onPointerup\", \"onPointerDownResizeHandle\", \"onPointerMoveResizeHandle\", \"onPointerUpResizeHandle\"]))\n            : _createCommentVNode(\"\", true)\n      ], 64))\n    }), 128)),\n    _createVNode(_Transition, { name: \"fade\" }, {\n      default: _withCtx(() => [\n        (_ctx.activeInteraction?.type === 'lmbTask')\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 0,\n              class: \"active-interaction-container\",\n              onClick: _cache[5] || (_cache[5] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.closeInteraction && _ctx.closeInteraction(...args)), [\"self\"]))\n            }, [\n              _createElementVNode(\"div\", _hoisted_7, [\n                _createElementVNode(\"h1\", null, _toDisplayString(_ctx.printTaskType(_ctx.activeInteraction.taskDefinition.task_type)), 1),\n                (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.viewerForTaskType(_ctx.activeInteraction.taskDefinition.task_type)), {\n                  task: _ctx.activeInteraction.taskDefinition\n                }, null, 8, [\"task\"])),\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  class: \"button cancel\",\n                  onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.closeInteraction && _ctx.closeInteraction(...args)))\n                }, _toDisplayString(_ctx.$gettext('Schlieen')), 1)\n              ])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ], 2))\n}","<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport videojs from 'video.js';\nimport Player from 'video.js/dist/types/player';\nrequire('!style-loader!css-loader!video.js/dist/video-js.css');\nimport 'videojs-youtube/dist/Youtube.min.js';\nimport {\n  Interaction,\n  InteractiveVideoTask,\n  NoVideo,\n  printInteractionType,\n  ResizeHandle,\n  StudipFileVideo,\n  Video,\n  YoutubeVideo,\n} from '@/models/InteractiveVideoTask';\nimport {\n  InteractiveVideoEditorState,\n  interactiveVideoEditorStateSymbol,\n} from '@/components/interactiveVideo/interactiveVideoEditorState';\nimport LmbTaskInteraction from '@/components/interactiveVideo/interactions/LmbTaskInteraction.vue';\nimport { printTaskType, viewerForTaskType } from '@/models/TaskDefinition';\nimport { $gettext } from '../../language/gettext';\nimport { createPopper, Instance } from '@popperjs/core';\nimport type { StrictModifiers } from '@popperjs/core';\nimport { v4 } from 'uuid';\nimport OverlayInteraction from '@/components/interactiveVideo/interactions/OverlayInteraction.vue';\nimport { OverlayInteraction as OverlayInteractionType } from '@/models/InteractiveVideoTask';\nimport { mapActions, mapGetters } from 'vuex';\nimport { fileRefsSchema } from '@/routes/jsonApi';\n\ntype DragState =\n  | {\n      type: 'dragInteraction';\n      interactionId: string;\n      mouseStartPos: [number, number]; // clientX, clientY\n      interactionStartPos: [number, number]; // fraction x, fraction y\n    }\n  | {\n      type: 'resizeInteraction';\n      interactionId: string;\n      mouseStartPos: [number, number]; // clientX, clientY\n      interactionStartPos: [number, number]; // fraction x, fraction y\n      interactionStartSize: [number, number]; // fraction x, fraction y\n      handle: string;\n    }\n  | undefined;\n\ntype LoadedStudipFileVideo = StudipFileVideo & {\n  download_url: string;\n  mime_type: string;\n};\ntype VideoInfo = LoadedStudipFileVideo | NoVideo | YoutubeVideo;\n\nlet popperInstance: Instance | undefined;\nexport default defineComponent({\n  name: 'VideoPlayer',\n  components: { OverlayInteraction, LmbTaskInteraction },\n  setup() {\n    return {\n      editor: inject<InteractiveVideoEditorState>(\n        interactiveVideoEditorStateSymbol\n      ),\n    };\n  },\n  props: {\n    task: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      player: null as Player | null,\n      // The time the video player is seeked to\n      time: 0,\n      // The time reached by the user watching the video without seeking.\n      // This is used to enforce the setting 'disable navigation'.\n      playedTime: 0,\n      isPlaying: false,\n      dragState: undefined as DragState,\n      activeInteraction: undefined as Interaction | undefined,\n      progressBarParameters: {\n        widthPixels: 1,\n        xOffsetPixels: 0,\n      },\n      progressBarObserver: undefined as ResizeObserver | undefined,\n      videoInfo: Promise.resolve({ type: 'none' }) as Promise<VideoInfo>,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      fileRefById: 'file-refs/byId',\n    }),\n    // A unique ID for this instance of VideoPlayer, so that we can refer\n    // to elements inside of it by ID when there are multiple VideoPlayers\n    // (e.g. viewer on one tab, editor on another tab).\n    uid(): string {\n      return v4();\n    },\n    // Return the Interaction, if any, for which a popper tooltip should be shown\n    interactionForPopper(): Interaction | undefined {\n      // The popper should only be rendered if the selected interaction is visible.\n      if (\n        this.selectedInteraction &&\n        this.visibleInteractions.includes(this.selectedInteraction)\n      ) {\n        return this.selectedInteraction;\n      } else {\n        return undefined;\n      }\n    },\n    selectedInteraction(): Interaction | undefined {\n      return this.task.interactions.find(\n        (i) => i.id === this.selectedInteractionId\n      );\n    },\n    selectedInteractionId(): string | undefined {\n      return this.editor?.selectedInteractionId.value;\n    },\n    /**\n     * @return a list of Interaction objects whose clickable icons (or other elements)\n     * should be shown overlaid over the video at the timestamp given by this.time.\n     */\n    visibleInteractions(): Interaction[] {\n      return this.task.interactions.filter((i) => {\n        return i.startTime <= this.time && i.endTime > this.time;\n      });\n    },\n    // Computed property created so that we can register a watcher which triggers\n    // when either of these things changes.\n    timeAndVisibleInteractions(): [number, Interaction[]] {\n      return [this.time, this.visibleInteractions];\n    },\n  },\n  watch: {\n    'task.video': {\n      handler(video: Video) {\n        console.log('video prop changed', video);\n        this.videoInfo = this.loadVideoInfo(video);\n        this.videoInfo.then((videoInfo) => {\n          this.initializePlayer(videoInfo);\n        });\n      },\n      immediate: true,\n    },\n    // Handle pausing the video when an interaction becomes visible.\n    timeAndVisibleInteractions(\n      [newTime, newVisibleInteractions]: [number, Interaction[]],\n      [oldTime, oldVisibleInteractions]: [number, Interaction[]]\n    ): void {\n      const isPlayingForward = this.isPlaying && newTime > oldTime;\n      const newlyVisibleInteractionWithPause = newVisibleInteractions.find(\n        (i) => !oldVisibleInteractions.includes(i) && i.pauseWhenVisible\n      );\n      if (isPlayingForward && newlyVisibleInteractionWithPause) {\n        console.log(\n          'pausing for interaction: ',\n          newlyVisibleInteractionWithPause\n        );\n        this.player!.pause();\n      }\n    },\n    interactionForPopper: {\n      immediate: true,\n      handler: function (interaction: Interaction | undefined) {\n        popperInstance?.destroy();\n        if (interaction) {\n          // Run on next tick, because we need to wait for the interactionElement\n          // to be rendered by Vue, in case it isn't yet visible at the moment this\n          // watcher is triggered.\n          // For example, if the user clicks on the timeline to jump to a point\n          // in the video where the currently selected interaction is visible,\n          // when it previously was not.\n          this.$nextTick(() => {\n            const interactionElement = document.getElementById(\n              `interaction-${this.uid}-${interaction.id}`\n            ) as HTMLElement;\n            const tooltipElement = this.$refs\n              .selectedInteractionTooltip as HTMLElement;\n            popperInstance = createPopper(interactionElement, tooltipElement, {\n              placement: 'top',\n              modifiers: [\n                {\n                  name: 'offset',\n                  options: {\n                    offset: [0, 8],\n                  },\n                },\n              ],\n            });\n          });\n        }\n      },\n    },\n  },\n  methods: {\n    printInteractionType,\n    $gettext,\n    printTaskType,\n    viewerForTaskType,\n    ...mapActions({\n      loadFileRef: 'file-refs/loadById',\n    }),\n    onPlayerReady() {\n      console.log('player ready');\n    },\n    // TODO This information is needed in other places in the Interactive\n    //  Video Editor, for example, in 'SelectVideo.vue' to display the name and\n    //  file type of the selected file.  This asynchronous method should be\n    //  implemented and called one time in InteractiveVideoEditor.vue.\n    async loadVideoInfo(video: Video): Promise<VideoInfo> {\n      switch (video.type) {\n        case 'youtube':\n        case 'none':\n          return video;\n        case 'studipFileReference': {\n          await this.loadFileRef({ id: video.file_id });\n          const ref = fileRefsSchema.parse(\n            this.fileRefById({ id: video.file_id })\n          );\n          return {\n            ...video,\n            mime_type: ref.attributes['mime-type'],\n            download_url: ref.meta['download-url'],\n          };\n        }\n      }\n    },\n    videoUrl(videoInfo: VideoInfo): string {\n      switch (videoInfo.type) {\n        case 'youtube':\n          return videoInfo.url;\n        case 'studipFileReference':\n          return videoInfo.download_url;\n        default:\n          return '';\n      }\n    },\n    videoType(videoInfo: VideoInfo): string | undefined {\n      switch (videoInfo.type) {\n        case 'youtube':\n          return 'video/youtube';\n        case 'studipFileReference':\n          return videoInfo.mime_type;\n        default:\n          return '';\n      }\n    },\n    initializePlayer(videoInfo: VideoInfo) {\n      if (!this.$refs.videoJsContainer) {\n        console.warn(\n          'initializePlayer called but $refs.videoJsContainer is undefined. ' +\n            'Returning early without doing anything.'\n        );\n        return;\n      }\n      // If player has already been created, it must be destroyed before we\n      // create a new one.\n      this.progressBarObserver?.disconnect();\n      this.player?.dispose();\n\n      // The dispose() method removes the player element from the dom, so we must\n      // create and append the player element by hand to the DOM each time.\n      const playerElement = document.createElement('video-js');\n      playerElement.classList.add('video-js', 'vjs-fluid');\n      (this.$refs.videoJsContainer as HTMLDivElement).appendChild(\n        playerElement\n      );\n\n      // Create the player and set up event listeners\n      this.player = videojs(\n        playerElement,\n        {\n          techOrder: ['html5', 'youtube'],\n          sources: [\n            {\n              src: this.videoUrl(videoInfo),\n              type: this.videoType(videoInfo),\n            },\n          ],\n          controls: true,\n          controlBar: {\n            children: [\n              'playToggle',\n              'progressControl',\n              'currentTimeDisplay',\n              'timeDivider',\n              'durationDisplay',\n              'volumePanel',\n              'fullscreenToggle',\n            ],\n            volumePanel: {\n              inline: false,\n            },\n          },\n          autoplay: this.task.autoplay && !this.editor,\n          // Major browsers block autoplay unless the video is muted.\n          muted: this.task.autoplay && !this.editor,\n        },\n        this.onPlayerReady\n      );\n      this.player.on('timeupdate', () => {\n        const time = this.player!.currentTime();\n        if (time) {\n          this.$emit('timeupdate', time);\n          this.time = time;\n          if (this.isPlaying && !this.player!.paused()!) {\n            // Track how far the user has \"watched\" the video without seeking\n            this.playedTime = Math.max(this.playedTime, time);\n          }\n        }\n      });\n      this.player.on('loadedmetadata', () => {\n        this.playedTime = this.task.startAt;\n        this.player!.currentTime(this.task.startAt);\n        if (this.task.autoplay && !this.editor) {\n          this.player!.play();\n        }\n        this.$emit('metadataChange', {\n          length: this.player!.duration(),\n        });\n      });\n      this.player.on('playing', () => {\n        this.isPlaying = true;\n      });\n      this.player.on(['waiting', 'pause'], () => {\n        this.isPlaying = false;\n      });\n\n      const enforceDisabledNavigation = () => {\n        if (this.task.disableNavigation === 'forward disabled') {\n          // Prevent forward navigation\n          if (this.player!.currentTime()! - this.playedTime > 0.5) {\n            this.player!.currentTime(this.playedTime);\n          }\n        } else if (\n          this.task.disableNavigation === 'forward and backward disabled'\n        ) {\n          // Prevent all navigation\n          if (Math.abs(this.player!.currentTime()! - this.playedTime) > 0.5) {\n            this.player!.currentTime(this.playedTime);\n          }\n        }\n      };\n      this.player.on('seeking', () => {\n        if (!this.editor) {\n          enforceDisabledNavigation();\n        }\n      });\n      this.player.on('seeked', () => {\n        if (!this.editor) {\n          enforceDisabledNavigation();\n        }\n      });\n\n      // Observe the progress bar -- we need to know its size and location\n      // in order to position our interaction markers correctly on top of it.\n      const progressBarEls = playerElement.getElementsByClassName(\n        'vjs-progress-holder'\n      );\n      const progressHolder = progressBarEls.item(0) as HTMLElement | undefined;\n      if (!progressHolder) {\n        console.error('no progress holder found');\n      } else {\n        this.progressBarObserver = new ResizeObserver((entries) => {\n          const root = this.$refs.root as HTMLElement;\n          const rootLeft = root.getBoundingClientRect().x;\n          const progressHolderLeft = progressHolder.getBoundingClientRect().x;\n          const offset = progressHolderLeft - rootLeft;\n          this.progressBarParameters.xOffsetPixels = offset;\n          this.progressBarParameters.widthPixels = progressHolder.clientWidth;\n        });\n        this.progressBarObserver.observe(progressHolder);\n      }\n    },\n    activateInteraction(interaction: Interaction) {\n      this.activeInteraction = interaction;\n      this.player!.pause();\n    },\n    closeInteraction() {\n      this.activeInteraction = undefined;\n    },\n    editInteraction(interaction: Interaction) {\n      this.editor!.editInteraction(interaction.id);\n    },\n    onPointerDownResizeHandle(payload: {\n      event: PointerEvent;\n      handle: ResizeHandle;\n      interaction: OverlayInteractionType;\n    }) {\n      console.log('onPointerDownResizeHandle');\n      if (!this.editor) {\n        return;\n      }\n      const { event, handle, interaction } = payload;\n      this.editor.selectInteraction(interaction.id);\n      this.dragState = {\n        type: 'resizeInteraction',\n        interactionId: interaction.id,\n        mouseStartPos: [event.clientX, event.clientY],\n        interactionStartPos: [interaction.x, interaction.y],\n        interactionStartSize: [interaction.width, interaction.height],\n        handle,\n      };\n      (event.target as HTMLElement).setPointerCapture(event.pointerId);\n    },\n    onPointerUpResizeHandle(payload: {\n      event: PointerEvent;\n      handle: ResizeHandle;\n      interaction: Interaction;\n    }) {\n      console.log('onPointerUpResizeHandle');\n      this.dragState = undefined;\n      (payload.event.target as HTMLElement).releasePointerCapture(\n        payload.event.pointerId\n      );\n    },\n    onPointerMoveResizeHandle(payload: {\n      event: PointerEvent;\n      handle: ResizeHandle;\n      interaction: OverlayInteractionType;\n    }) {\n      const { event, handle, interaction } = payload;\n      if (\n        this.dragState?.type === 'resizeInteraction' &&\n        this.dragState.interactionId === interaction.id\n      ) {\n        const rootRect = (\n          this.$refs.root as HTMLElement\n        ).getBoundingClientRect();\n\n        const {\n          interactionStartPos: [xInitial, yInitial],\n          interactionStartSize: [widthInitial, heightInitial],\n        } = this.dragState;\n        let newX = xInitial;\n        let newWidth = widthInitial;\n        let newY = yInitial;\n        let newHeight = heightInitial;\n\n        // Convert mouse movement in pixels to fractions of root rect width/height\n        const xPointer = event.clientX / rootRect.width;\n        const dxPointerPixels = event.clientX - this.dragState.mouseStartPos[0];\n        const dxPointer = dxPointerPixels / rootRect.width;\n\n        const yPointer = event.clientY / rootRect.height;\n        const dyPointerPixels = event.clientY - this.dragState.mouseStartPos[1];\n        const dyPointer = dyPointerPixels / rootRect.height;\n\n        // Horizontal resizing\n        if (\n          handle === 'left' ||\n          handle === 'top-left' ||\n          handle === 'bottom-left'\n        ) {\n          if (xPointer > xInitial + widthInitial) {\n            newX = xInitial + widthInitial;\n            newWidth = xPointer - newX;\n          } else {\n            newX = xInitial + dxPointer;\n            newWidth = widthInitial - dxPointer;\n          }\n        } else if (\n          handle === 'right' ||\n          handle === 'top-right' ||\n          handle === 'bottom-right'\n        ) {\n          if (xPointer < xInitial) {\n            newX = xPointer;\n            newWidth = xInitial - xPointer;\n          } else {\n            newX = xInitial;\n            newWidth = widthInitial + dxPointer;\n          }\n        }\n\n        // Vertical resizing\n        if (\n          handle === 'top-left' ||\n          handle === 'top' ||\n          handle === 'top-right'\n        ) {\n          // I wish I could explain to you why this formula has to be different\n          // than the one used for horizontal resizing, but I figured out by\n          // trial and error that I needed to use dyPointer in my calculations\n          // and that yPointer was not reliable.\n          // I suspect that something about the surrounding HTML causes the event\n          // absolute coordinates on the Y axis to not be exactly correct. -Ann\n          if (dyPointer > heightInitial) {\n            newY = yInitial + heightInitial;\n            newHeight = dyPointer - heightInitial;\n          } else {\n            newY = yInitial + dyPointer;\n            newHeight = heightInitial - dyPointer;\n          }\n        } else if (\n          handle === 'bottom-left' ||\n          handle === 'bottom' ||\n          handle === 'bottom-right'\n        ) {\n          // Ditto for this formula here. -Ann\n          if (-dyPointer > heightInitial) {\n            newY = yInitial + heightInitial + dyPointer;\n            newHeight = -dyPointer - heightInitial;\n          } else {\n            newY = yInitial;\n            newHeight = heightInitial + dyPointer;\n          }\n        }\n\n        // Prevent shrinking the interaction below a minimum size\n        let filteredHeight = interaction.height,\n          filteredWidth = interaction.width,\n          filteredX = interaction.x,\n          filteredY = interaction.y;\n        if (newHeight > 0.05) {\n          filteredHeight = newHeight;\n          filteredY = newY;\n        }\n        if (newWidth > 0.05) {\n          filteredWidth = newWidth;\n          filteredX = newX;\n        }\n\n        // Prevent moving the interaction completely off screen\n        const isOffscreenX =\n          filteredX > 0.95 || filteredX + filteredWidth < 0.05;\n        const isOffscreenY =\n          filteredY > 0.9 || filteredY + filteredHeight < 0.05;\n        if (isOffscreenX) {\n          filteredX = interaction.x;\n          filteredWidth = interaction.width;\n        }\n        if (isOffscreenY) {\n          filteredY = interaction.y;\n          filteredHeight = interaction.height;\n        }\n\n        this.editor!.resizeOverlay(\n          interaction.id,\n          filteredX,\n          filteredY,\n          filteredWidth,\n          filteredHeight\n        );\n        popperInstance?.update();\n      }\n    },\n    onPointerDownInteraction(event: PointerEvent, interaction: Interaction) {\n      console.log('onPointerDownInteraction');\n      if (!this.editor) {\n        return;\n      }\n      this.editor.selectInteraction(interaction.id);\n      this.dragState = {\n        type: 'dragInteraction',\n        interactionId: interaction.id,\n        mouseStartPos: [event.clientX, event.clientY],\n        interactionStartPos: [interaction.x, interaction.y],\n      };\n      (event.target as HTMLElement).setPointerCapture(event.pointerId);\n    },\n    onPointerUpInteraction(event: PointerEvent, interaction: Interaction) {\n      console.log('onPointerUpInteraction');\n      this.dragState = undefined;\n      (event.target as HTMLElement).releasePointerCapture(event.pointerId);\n    },\n    onPointerMoveInteraction(event: PointerEvent, interaction: Interaction) {\n      if (\n        this.dragState?.type === 'dragInteraction' &&\n        this.dragState.interactionId === interaction.id\n      ) {\n        const rootRect = (\n          this.$refs.root as HTMLElement\n        ).getBoundingClientRect();\n        const interactionEl = event.currentTarget as HTMLElement;\n\n        const clientDx = event.clientX - this.dragState.mouseStartPos[0];\n        const dxFraction = clientDx / rootRect.width;\n        const xFraction = this.dragState.interactionStartPos[0] + dxFraction;\n        const interactionWidth = interactionEl.clientWidth / rootRect.width;\n        const minX = 0.05 - interactionWidth;\n        const maxX = 0.95;\n        const clampedXFraction = Math.min(maxX, Math.max(minX, xFraction));\n\n        const clientDy = event.clientY - this.dragState.mouseStartPos[1];\n        const dyFraction = clientDy / rootRect.height;\n        const yFraction = this.dragState.interactionStartPos[1] + dyFraction;\n        const interactionHeight = interactionEl.clientHeight / rootRect.height;\n        const minY = 0.05 - interactionHeight;\n        const maxY = 0.9;\n        const clampedYFraction = Math.min(maxY, Math.max(minY, yFraction));\n\n        const id = this.dragState.interactionId;\n        this.editor?.dragInteraction(id, clampedXFraction, clampedYFraction);\n        popperInstance?.update();\n      }\n    },\n    progressBarInteractionMarkerStyle(\n      interaction: Interaction\n    ): Partial<CSSStyleDeclaration> {\n      const progressPercentage =\n        interaction.startTime / (this.player?.duration() ?? 1);\n      const timeOffsetPx =\n        this.progressBarParameters.widthPixels * progressPercentage;\n      return {\n        left: `calc(${this.progressBarParameters.xOffsetPixels}px +\n        ${timeOffsetPx}px - 0.25em)`,\n      };\n    },\n    onClickInteractionMarker(interaction: Interaction): void {\n      this.editor?.selectInteraction(interaction.id);\n      // Give keyboard focus to the interaction whose interaction marker was clicked.\n      const focusInteraction = () => {\n        const interactionElement = document.getElementById(\n          `interaction-${this.uid}-${interaction.id}`\n        ) as HTMLElement;\n        interactionElement.focus({\n          focusVisible: true,\n        } as any);\n      };\n      if (!this.visibleInteractions.includes(interaction)) {\n        // Wait for player to seek so the interaction becomes visible\n        this.player!.one('seeked', () => {\n          // Need to wait one Vue 'tick' so that the interaction element appears.\n          this.$nextTick(focusInteraction);\n        });\n      } else {\n        // The interaction is already visible. Focus it immediately.\n        focusInteraction();\n      }\n      // Skip to a time just slightly ahead of the point where the interaction\n      // appears.  This is necessary to avoid off-by-one-frame errors\n      const delta = 0.2;\n      const difference = this.player!.currentTime()! - interaction.startTime;\n      if (difference < 0 || difference > delta) {\n        this.player!.currentTime(interaction.startTime + delta / 2);\n      }\n    },\n  },\n  beforeUnmount() {\n    this.progressBarObserver?.disconnect();\n  },\n});\n</script>\n\n<template>\n  <div\n    class=\"video-player-root\"\n    ref=\"root\"\n    :class=\"{ 'drag-in-progress': !!dragState }\"\n  >\n    <div ref=\"videoJsContainer\"></div>\n    <div\n      class=\"cancel-selection-overlay\"\n      v-if=\"!!selectedInteractionId\"\n      @click=\"editor!.selectInteraction(undefined)\"\n    ></div>\n    <button\n      class=\"progress-bar-interaction-marker\"\n      v-for=\"interaction in task.interactions\"\n      :key=\"interaction.id\"\n      :style=\"progressBarInteractionMarkerStyle(interaction)\"\n      @click=\"onClickInteractionMarker(interaction)\"\n      :title=\"\n        $gettext('Zu %{ interaction } springen', {\n          interaction: printInteractionType(interaction),\n        })\n      \"\n    />\n    <div\n      ref=\"selectedInteractionTooltip\"\n      v-if=\"editor\"\n      class=\"selected-interaction-tooltip\"\n      :class=\"{\n        hidden: !interactionForPopper,\n      }\"\n    >\n      <button\n        type=\"button\"\n        class=\"small-button visibility-visible\"\n        @click=\"activateInteraction(selectedInteraction)\"\n        :title=\"$gettext('Vorschau')\"\n        v-if=\"selectedInteraction?.type === 'lmbTask'\"\n      ></button>\n      <button\n        type=\"button\"\n        class=\"small-button edit\"\n        @click=\"editInteraction(selectedInteraction)\"\n        :title=\"$gettext('Bearbeiten')\"\n      ></button>\n      <button\n        type=\"button\"\n        class=\"small-button trash\"\n        @click=\"editor?.deleteInteraction(selectedInteractionId)\"\n        :title=\"$gettext('Lschen')\"\n      ></button>\n      <div class=\"arrow\" data-popper-arrow></div>\n    </div>\n    <template v-for=\"interaction in visibleInteractions\" :key=\"interaction.id\">\n      <LmbTaskInteraction\n        v-if=\"interaction.type === 'lmbTask'\"\n        :id=\"`interaction-${uid}-${interaction.id}`\"\n        class=\"video-player-interaction\"\n        :style=\"{\n          left: `${interaction.x * 100}%`,\n          top: `${interaction.y * 100}%`,\n        }\"\n        :interaction=\"interaction\"\n        @click=\"editor?.selectInteraction(interaction.id)\"\n        @pointerdown=\"onPointerDownInteraction($event, interaction)\"\n        @pointermove=\"onPointerMoveInteraction($event, interaction)\"\n        @pointerup=\"onPointerUpInteraction($event, interaction)\"\n        @activateInteraction=\"activateInteraction\"\n      />\n      <OverlayInteraction\n        v-else-if=\"interaction.type === 'overlay'\"\n        :id=\"`interaction-${uid}-${interaction.id}`\"\n        class=\"video-player-interaction\"\n        :style=\"{\n          left: `${interaction.x * 100}%`,\n          top: `${interaction.y * 100}%`,\n          width: `${interaction.width * 100}%`,\n          height: `${interaction.height * 100}%`,\n        }\"\n        :interaction=\"interaction\"\n        @click=\"editor?.selectInteraction(interaction.id)\"\n        @pointerdown=\"onPointerDownInteraction($event, interaction)\"\n        @pointermove=\"onPointerMoveInteraction($event, interaction)\"\n        @pointerup=\"onPointerUpInteraction($event, interaction)\"\n        @pointerDownResizeHandle=\"onPointerDownResizeHandle\"\n        @pointerMoveResizeHandle=\"onPointerMoveResizeHandle\"\n        @pointerUpResizeHandle=\"onPointerUpResizeHandle\"\n      />\n    </template>\n    <Transition name=\"fade\">\n      <div\n        v-if=\"activeInteraction?.type === 'lmbTask'\"\n        class=\"active-interaction-container\"\n        @click.self=\"closeInteraction\"\n      >\n        <div class=\"active-interaction\">\n          <h1>\n            {{ printTaskType(activeInteraction.taskDefinition.task_type) }}\n          </h1>\n          <component\n            :is=\"viewerForTaskType(activeInteraction.taskDefinition.task_type)\"\n            :task=\"activeInteraction.taskDefinition\"\n          />\n          <button type=\"button\" class=\"button cancel\" @click=\"closeInteraction\">\n            {{ $gettext('Schlieen') }}\n          </button>\n        </div>\n      </div>\n    </Transition>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.drag-in-progress > :not(.video-player-interaction) {\n  pointer-events: none;\n}\n\n.video-player-root {\n  position: relative;\n  overflow: hidden;\n}\n.selected-interaction-tooltip {\n  &.hidden {\n    display: none;\n  }\n  z-index: 2;\n  position: absolute;\n  display: flex;\n  gap: 0.5em;\n  background: white;\n  color: black;\n  border-radius: 12px;\n  border: 2px solid black;\n  padding: 8px;\n  > .arrow,\n  > .arrow::before {\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    background: inherit;\n  }\n\n  > .arrow {\n    visibility: hidden;\n  }\n\n  > .arrow::before {\n    visibility: visible;\n    content: '';\n    transform: rotate(45deg);\n  }\n\n  &[data-popper-placement^='top'] > .arrow {\n    bottom: -4px;\n  }\n\n  &[data-popper-placement^='bottom'] > .arrow {\n    top: -4px;\n  }\n\n  &[data-popper-placement^='left'] > .arrow {\n    right: -4px;\n  }\n\n  &[data-popper-placement^='right'] > .arrow {\n    left: -4px;\n  }\n}\n\n$progress-control-height: 3.5em;\n.progress-bar-interaction-marker {\n  /* CSS Reset for button styles */\n  padding: 0;\n  border: none;\n  font: inherit;\n  color: inherit;\n  background-color: transparent;\n  cursor: pointer;\n  box-sizing: border-box;\n\n  z-index: 3;\n  $radius: 0.5em;\n  position: absolute;\n  bottom: calc($progress-control-height - 1.7em);\n  shape-outside: circle();\n  clip-path: circle();\n  width: $radius;\n  height: $radius;\n  background-color: white;\n  cursor: pointer;\n  &::before {\n    display: block;\n    content: ' ';\n    shape-outside: circle();\n    clip-path: circle();\n    width: calc($radius - 2px);\n    height: calc($radius - 2px);\n    transform: translate(1px, 0px);\n    background-color: rgba(43, 51, 63, 1);\n  }\n\n  &:hover,\n  &:focus {\n    &::before {\n      background-color: white;\n    }\n  }\n  // Ensure that an outline is drawn when element is focused with the keyboard\n  &:focus-visible {\n    clip-path: unset;\n    &::before {\n      border: 2px solid white;\n    }\n  }\n}\n// Ensure that progress bar interaction markers fade out just as the progress bar does\n// when the user is watching the video and not touching the controls\n.video-player-root:has(.vjs-has-started.vjs-user-inactive.vjs-playing) {\n  .progress-bar-interaction-marker {\n    opacity: 0;\n    transition: opacity 1s;\n  }\n}\n.video-player-root:not(:has(.vjs-has-started)) {\n  .progress-bar-interaction-marker {\n    display: none;\n  }\n}\n\n.cancel-selection-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 2.5em;\n}\n.video-player-interaction {\n  position: absolute;\n  &:focus {\n    z-index: 2;\n  }\n}\n.active-interaction-container {\n  z-index: 3;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n\n  .active-interaction {\n    position: absolute;\n    top: 1em;\n    bottom: 1em;\n    left: 1em;\n    right: 1em;\n    background: white;\n    padding: 1em;\n    overflow: auto;\n  }\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n\n<style lang=\"scss\">\n$progress-control-height: 3.5em;\n.video-player-root .video-js {\n  .vjs-control-bar {\n    height: $progress-control-height;\n    padding-top: 0.5em;\n    // Make sure the video controls are not hidden by any Interactions the\n    // teacher/content creator has placed\n    z-index: 3;\n\n    // Un-hide these elements -- they have display: none in videojs default css.\n    .vjs-current-time {\n      display: flex;\n      padding: 0;\n    }\n    .vjs-time-divider {\n      display: inline;\n      min-width: fit-content;\n      padding-left: 0.5em;\n      padding-right: 0.5em;\n    }\n    .vjs-duration {\n      display: flex;\n      padding: 0;\n    }\n  }\n}\n</style>\n","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5b84731c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"data-hover-tooltip\"]\nconst _hoisted_2 = { class: \"interaction-label\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"icon-circle-border\" }, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"button\", {\n    type: \"button\",\n    class: _normalizeClass([\"lmb-task-interaction\", {\n      selected: _ctx.editor?.selectedInteractionId.value === _ctx.interaction.id,\n      editor: !!_ctx.editor,\n    }]),\n    \"data-hover-tooltip\": _ctx.printTaskType(_ctx.interaction.taskDefinition.task_type),\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (!this.editor && _ctx.$emit('activateInteraction', _ctx.interaction)))\n  }, [\n    _createElementVNode(\"div\", _hoisted_2, _toDisplayString(_ctx.printTaskType(_ctx.interaction.taskDefinition.task_type)), 1),\n    _hoisted_3,\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"icon-circle button no-hover-effect\", _ctx.iconForTaskType(_ctx.interaction.taskDefinition.task_type)])\n    }, null, 2)\n  ], 10, _hoisted_1))\n}","<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport {\n  InteractiveVideoEditorState,\n  interactiveVideoEditorStateSymbol,\n} from '@/components/interactiveVideo/interactiveVideoEditorState';\nimport { Interaction, LmbTaskInteraction } from '@/models/InteractiveVideoTask';\nimport { iconForTaskType, printTaskType } from '../../../models/TaskDefinition';\n\nexport default defineComponent({\n  name: 'LmbTaskInteraction',\n  methods: { iconForTaskType, printTaskType },\n  setup() {\n    return {\n      editor: inject<InteractiveVideoEditorState>(\n        interactiveVideoEditorStateSymbol\n      ),\n    };\n  },\n  props: {\n    interaction: {\n      type: Object as PropType<LmbTaskInteraction>,\n      required: true,\n    },\n  },\n});\n</script>\n\n<template>\n  <button\n    type=\"button\"\n    class=\"lmb-task-interaction\"\n    :class=\"{\n      selected: editor?.selectedInteractionId.value === interaction.id,\n      editor: !!editor,\n    }\"\n    :data-hover-tooltip=\"printTaskType(interaction.taskDefinition.task_type)\"\n    @click=\"!this.editor && $emit('activateInteraction', interaction)\"\n  >\n    <div class=\"interaction-label\">\n      {{ printTaskType(interaction.taskDefinition.task_type) }}\n    </div>\n    <div class=\"icon-circle-border\"></div>\n    <div\n      class=\"icon-circle button no-hover-effect\"\n      :class=\"iconForTaskType(interaction.taskDefinition.task_type)\"\n    ></div>\n  </button>\n</template>\n\n<style scoped lang=\"scss\">\nbutton.lmb-task-interaction {\n  /* CSS Reset for button styles */\n  padding: 0;\n  border: none;\n  font: inherit;\n  color: inherit;\n  background-color: transparent;\n  cursor: pointer;\n  box-sizing: border-box;\n\n  $border-width: 0.2em;\n  $circle-radius: 3em;\n\n  > .icon-circle {\n    position: absolute;\n    top: $border-width;\n    left: $border-width;\n    background: #c3abd1;\n    shape-outside: circle();\n    clip-path: circle();\n    width: $circle-radius;\n    height: $circle-radius;\n    /* Position the icon centered inside the circle */\n    &::before {\n      transform: translate(\n          calc($circle-radius / 2),\n          calc($circle-radius / 2 - 0.6em)\n        )\n        scale(1.3);\n      filter: grayscale(1) contrast(1.5);\n    }\n  }\n  &:hover > .icon-circle {\n    background: var(--dark-violet-20);\n  }\n\n  > .interaction-label {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    left: calc($circle-radius / 2);\n    padding-left: calc($circle-radius / 2 + 0.5em + $border-width);\n    padding-right: 0.5em;\n    top: calc(0.1em + $border-width);\n    white-space: nowrap;\n    height: calc($circle-radius - 0.2em);\n    background: var(--dark-gray-color-15);\n    border-radius: 12px;\n  }\n\n  &.selected {\n    z-index: 1;\n    > .interaction-label {\n      border: $border-width solid var(--base-gray);\n      margin-top: calc(-1 * $border-width);\n      margin-left: calc(-1 * $border-width);\n    }\n    .icon-circle-border {\n      shape-outside: circle();\n      clip-path: circle();\n      width: calc($circle-radius + 2 * $border-width);\n      height: calc($circle-radius + 2 * $border-width);\n      background: var(--base-gray);\n    }\n  }\n\n  /* This provides a bigger, visible focus marker when the user tabs between\n   interactions using the keyboard or assistive device */\n  &:focus:not(.selected) {\n    > .icon-circle-border {\n      shape-outside: circle();\n      clip-path: circle();\n      width: calc($circle-radius + 2 * $border-width);\n      height: calc($circle-radius + 2 * $border-width);\n      background: transparent;\n    }\n  }\n\n  // Display a tooltip when hovered or focused.\n  &.editor:not(.selected) {\n    &:hover::before,\n    &:focus::before {\n      content: attr(data-hover-tooltip);\n      display: flex;\n      align-items: center;\n      white-space: nowrap;\n      position: absolute;\n      top: -2em;\n      /* Center the tooltip over the circle with the icon */\n      transform: translateX(calc(-50% + $circle-radius / 2));\n      height: 1em;\n      padding: 0.35em;\n      border-radius: 12px;\n      background: white;\n      color: black;\n      opacity: 0.9;\n      z-index: 2;\n    }\n  }\n}\n</style>\n","import { render } from \"./LmbTaskInteraction.vue?vue&type=template&id=5b84731c&scoped=true&ts=true\"\nimport script from \"./LmbTaskInteraction.vue?vue&type=script&lang=ts\"\nexport * from \"./LmbTaskInteraction.vue?vue&type=script&lang=ts\"\n\nimport \"./LmbTaskInteraction.vue?vue&type=style&index=0&id=5b84731c&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b84731c\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3c6c9c06\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"data-hover-tooltip\"]\nconst _hoisted_2 = [\"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_3 = [\"innerHTML\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"overlay\", {\n      selected: _ctx.editor?.selectedInteractionId.value === _ctx.interaction.id,\n      editor: !!_ctx.editor,\n    }]),\n    \"data-hover-tooltip\": _ctx.$gettext('Einblendung')\n  }, [\n    (_ctx.editor)\n      ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(_ctx.resizeHandles, (handle) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: handle,\n            class: _normalizeClass([\"resize-handle\", handle]),\n            onPointerdown: _withModifiers(($event: any) => (_ctx.onPointerDownResizeHandle($event, handle)), [\"stop\"]),\n            onPointermove: _withModifiers(($event: any) => (_ctx.onPointerMoveResizeHandle($event, handle)), [\"stop\"]),\n            onPointerup: _withModifiers(($event: any) => (_ctx.onPointerUpResizeHandle($event, handle)), [\"stop\"])\n          }, null, 42, _hoisted_2))\n        }), 128))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", {\n      class: \"overlay-content\",\n      innerHTML: _ctx.interaction.content_wysiwyg\n    }, null, 8, _hoisted_3)\n  ], 10, _hoisted_1))\n}","<script lang=\"ts\">\nimport { defineComponent, inject, PropType } from 'vue';\nimport {\n  InteractiveVideoEditorState,\n  interactiveVideoEditorStateSymbol,\n} from '@/components/interactiveVideo/interactiveVideoEditorState';\nimport { OverlayInteraction } from '@/models/InteractiveVideoTask';\nimport { $gettext } from '@/language/gettext';\n\nexport default defineComponent({\n  name: 'OverlayInteraction',\n  methods: {\n    $gettext,\n    onPointerDownResizeHandle(event: PointerEvent, handle: string) {\n      this.$emit('pointerDownResizeHandle', {\n        event,\n        handle,\n        interaction: this.interaction,\n      });\n    },\n    onPointerMoveResizeHandle(event: PointerEvent, handle: string) {\n      this.$emit('pointerMoveResizeHandle', {\n        event,\n        handle,\n        interaction: this.interaction,\n      });\n    },\n    onPointerUpResizeHandle(event: PointerEvent, handle: string) {\n      this.$emit('pointerUpResizeHandle', {\n        event,\n        handle,\n        interaction: this.interaction,\n      });\n    },\n  },\n  setup() {\n    return {\n      editor: inject<InteractiveVideoEditorState>(\n        interactiveVideoEditorStateSymbol\n      ),\n    };\n  },\n  data() {\n    return {\n      resizeHandles: [\n        'left',\n        'top-left',\n        'top',\n        'top-right',\n        'right',\n        'bottom-right',\n        'bottom',\n        'bottom-left',\n      ],\n    };\n  },\n  props: {\n    interaction: {\n      type: Object as PropType<OverlayInteraction>,\n      required: true,\n    },\n  },\n});\n</script>\n\n<template>\n  <div\n    class=\"overlay\"\n    :class=\"{\n      selected: editor?.selectedInteractionId.value === interaction.id,\n      editor: !!editor,\n    }\"\n    :data-hover-tooltip=\"$gettext('Einblendung')\"\n  >\n    <template v-if=\"editor\">\n      <div\n        v-for=\"handle in resizeHandles\"\n        :key=\"handle\"\n        class=\"resize-handle\"\n        :class=\"handle\"\n        @pointerdown.stop=\"onPointerDownResizeHandle($event, handle)\"\n        @pointermove.stop=\"onPointerMoveResizeHandle($event, handle)\"\n        @pointerup.stop=\"onPointerUpResizeHandle($event, handle)\"\n      />\n    </template>\n    <div class=\"overlay-content\" v-html=\"interaction.content_wysiwyg\" />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.overlay {\n  background: var(--dark-gray-color-15);\n  box-sizing: border-box;\n  border-radius: 10px;\n  padding: 0.5em;\n  position: relative;\n\n  .overlay-content {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n  }\n\n  &.editor {\n    cursor: pointer;\n  }\n\n  &.editor .overlay-content {\n    // Prevent accidentally selecting text, activating links or \"dragging\"\n    // embedded images when dragging/dropping the overlay in the editor\n    pointer-events: none;\n    user-select: none;\n  }\n\n  &.selected {\n    z-index: 1;\n    border: 0.2em solid black;\n  }\n\n  // Display a tooltip when hovered or focused.\n  &.editor:not(.selected) {\n    &:hover::before,\n    &:focus::before {\n      content: attr(data-hover-tooltip);\n      display: flex;\n      align-items: center;\n      white-space: nowrap;\n      position: absolute;\n      top: -2em;\n      left: 50%;\n      transform: translateX(-50%);\n      height: 1em;\n      padding: 0.35em;\n      border-radius: 12px;\n      background: white;\n      color: black;\n      opacity: 0.9;\n      z-index: 2;\n    }\n  }\n\n  .resize-handle {\n    $size: 8px;\n    position: absolute;\n    //background: cornflowerblue;\n    &.top {\n      cursor: ns-resize;\n      top: 0;\n      left: $size;\n      right: $size;\n      height: $size;\n    }\n    &.top-right {\n      cursor: nesw-resize;\n      top: 0;\n      right: 0;\n      height: $size;\n      width: $size;\n    }\n    &.right {\n      cursor: ew-resize;\n      top: $size;\n      bottom: $size;\n      right: 0;\n      width: $size;\n    }\n    &.bottom-right {\n      cursor: nwse-resize;\n      bottom: 0;\n      right: 0;\n      width: $size;\n      height: $size;\n    }\n    &.bottom {\n      cursor: ns-resize;\n      bottom: 0;\n      left: $size;\n      right: $size;\n      height: $size;\n    }\n    &.bottom-left {\n      cursor: nesw-resize;\n      bottom: 0;\n      left: 0;\n      width: $size;\n      height: $size;\n    }\n    &.left {\n      cursor: ew-resize;\n      top: $size;\n      bottom: $size;\n      left: 0;\n      width: $size;\n    }\n    &.top-left {\n      cursor: nwse-resize;\n      top: 0;\n      left: 0;\n      height: $size;\n      width: $size;\n    }\n  }\n}\n</style>\n","import { render } from \"./OverlayInteraction.vue?vue&type=template&id=3c6c9c06&scoped=true&ts=true\"\nimport script from \"./OverlayInteraction.vue?vue&type=script&lang=ts\"\nexport * from \"./OverlayInteraction.vue?vue&type=script&lang=ts\"\n\nimport \"./OverlayInteraction.vue?vue&type=style&index=0&id=3c6c9c06&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c6c9c06\"]])\n\nexport default __exports__","import { render } from \"./VideoPlayer.vue?vue&type=template&id=68a69100&scoped=true&ts=true\"\nimport script from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoPlayer.vue?vue&type=style&index=0&id=68a69100&scoped=true&lang=scss\"\nimport \"./VideoPlayer.vue?vue&type=style&index=1&id=68a69100&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-68a69100\"]])\n\nexport default __exports__"],"names":["findTheHotspotsEditorStateSymbol","Symbol","findTheHotspotsViewerStateSymbol","interactiveVideoEditorStateSymbol","taskEditorStateSymbol","disableDrag","mounted","el","setAttribute","setDraggableFalse","element","childNodes","forEach","child","HTMLElement","modelUndoable","binding","vnode","prevVnode","validEl","validateElement","setElValueFromStore","splitPath","parsePath","storeValue","getValueAtPath","taskEditorStore","validatedStoreValue","validateBoundValue","value","toString","join","addEventListener","ev","firstPathEl","restOfPath","newState","JSON","parse","stringify","taskDefinition","setValueAtPath","performEdit","newTaskDefinition","undoBatch","console","log","store","watch","Error","bindingMustBeStringError","split","bindingMustUseTaskDefinitionError","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","invalidElementTypeError","val","boundValueMustBePrimitiveError","o","path","reduce","accumulator","pathComponent","Object","prototype","hasOwnProperty","call","invalidPathError","lastPathComponent","pop","undefined","targetObject","formatInvalidTaskDefinitionErrorMessage","e","task_json","$gettext","selectedLanguage","values","window","STUDIP","INSTALLED_LANGUAGES","find","lang","selected","gettextPlugin","createGettext","availableLanguages","en","de","defaultLanguage","translations","memoize","args","$pgettext","$npgettext","rectangleHotspotSchema","z","object","uuid","string","type","literal","x","number","y","width","height","correct","boolean","default","feedback","ellipseHotspotSchema","hotspotSchema","union","findTheHotspotsTaskSchema","task_type","image","imageSchema","hotspots","array","allowedClicks","hotspotsToFind","strings","retryButton","resultMessage","feedbackWhenClickingBackground","feedbackWhenClickingHotspotAgain","feedbackSchema","overlaySchema_v1","id","startTime","endTime","text","pauseWhenVisible","optional","overlaySchema_v2","omit","extend","v","content_wysiwyg","overlaySchema","transform","hasOwn","val_v1","val_v1_rest","val_v2","lmbTaskInteractionSchema","lazy","taskDefinitionSchemaMinusInteractiveVideo","interactiveVideoInteractionSchema","refine","data","message","noVideoSchema","youtubeVideoSchema","url","studipFileVideoSchema_v1","file","wysiwygUploadedFileSchema","studipFileVideoSchema_v2","file_id","studipFileVideoSchema","urlParams","URLSearchParams","get","videoSchema","interactiveVideoTaskSchema","video","autoplay","startAt","disableNavigation","interactions","printInteractionType","interaction","printTaskType","iconForInteraction","iconForTaskType","noImageSchema","imageFileSchema","altText","percentage","httpClient","axios","create","baseURL","URLHelper","getURL","headers","async","createFile","fileData","folder","termId","relationships","formData","FormData","append","attributes","name","request","post","response","location","fileRefsSchema","getFolders","userId","createFolder","parentFolderId","folderType","payload","parent","mkdate","chdate","description","downloads","filesize","links","self","meta","unknown","saveTask","moduleName","infoText","module_id","block_id","LernmoduleVueJS","saveRoute","token","CSRF_TOKEN","parsedTaskDefinition","taskDefinitionSchema","fetch","method","body","then","ok","statusText","json","updateAttempt","points","success","updateAttemptRoute","entries","score","sleep","ms","Promise","r","setTimeout","setAutoFreeze","TaskEditorModule","VuexModule","constructor","_defineProperty","status","newTask","this","undoRedoStack","undoRedoIndex","hasUnsavedChanges","isEqual","serverTaskDefinition","serverModuleName","serverInfotext","infotext","canUndo","canRedo","length","undo","currentState","inputElements","document","querySelectorAll","inputEl","item","collapsedParents","filter","contains","classList","remove","focus","redo","nextState","initializeCourseware","info","initializeNonCourseware","module","customdata","isArray","errorMessage","error","cause","startedSaving","saveStatus","saveSuccess","saveFailure","nonFatalErrors","push","context","commit","saveResult","currentUndoRedoState","shouldMergeEdits","slice","concat","setModuleName","setInfoText","__decorate","Mutation","Action","Module","CoursewareBlockModule","setShowEditorUI","state","showEditorUI","saveBlock","postMessage","cancelEditing","setContext","studipContext","RequestQueueModule","addToQueue","queue","incrementActive","active","decrementActive","processQueue","maxConcurrent","debug","shift","delay","resolve","enqueue","reststateVuex","require","mapResourceModules","createStore","modules","taskEditor","coursewareBlock","requestQueue","names","getModule","coursewareBlockStore","requestQueueStore","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","style","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","render","_ctx","_cache","$props","$setup","$data","$options","_component_studip_wysiwyg","_resolveComponent","_component_feedback_editor","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","onClick","addBlank","instructions","_createVNode","modelValue","modelTaskDefinition","template","onEditTemplate","ref","_createTextVNode","distratorInstructions","_withDirectives","$event","distractors","onInput","updateTaskDefinition","_vModelText","instantFeedback","onChange","_vModelCheckbox","alphabeticOrder","retryAllowed","showSolutionsAllowed","updateShowSolutionsAllowed","_normalizeClass","allBlanksMustBeFilledForSolutions","disabled","checkButton","solutionsButton","fillInAllBlanksMessage","updateFeedback","updateResultMessage","defineComponent","setup","inject","components","StudipWysiwyg","FeedbackEditor","props","required","cloneDeep","immediate","handler","computed","methods","wysiwygEl","$refs","wysiwyg","$el","editor","getEditor","selection","model","start","getFirstPosition","end","getLastPosition","change","writer","insertText","produce","task","updatedFeedback","taskDraft","updatedResultMessage","urlForIcon","iconName","ASSETS_URL","__exports__","key","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_component_FeedbackElement","_Fragment","_renderList","parsedTemplate","innerHTML","userInputs","classForFilledBlank","title","getAnswerById","draggable","editable","onDragstart","startDragUsedAnswer","onDrop","onDropBlank","onDragover","_withModifiers","onClickFilledBlank","onDragenter","onDragEnter","onDragleave","onDragLeave","onClickBlank","hint","_createCommentVNode","showSolutions","submittedAnswerIsCorrect","solution","showFillInAllTheBlanksMessage","textContent","fillInAllTheBlanksMessage","showResults","_createBlock","correctAnswers","maxPoints","showCheckButton","onClickCheckButton","showSolutionsButton","onClickSolutionsButton","showRetryButton","onClickRetryButton","onDropUnusedAnswers","unusedAnswers","answer","clickedAnswerId","startDragUnusedAnswer","onClickUnusedAnswer","FeedbackElement","submittedAnswers","userWantsToSeeSolutions","draggedAnswerId","draggedSourceId","blank","submittedAnswerId","submittedAnswer","isAnswerCorrect","userAnswer","blanks","index","$emit","getElement","elementId","dragEvent","answerId","dataTransfer","dropEffect","effectAllowed","property","draggedAnswer","previousBlank","preventDefault","event","target","backgroundColor","answers","removePTags","replace","splitTemplate","cleanTemplate","map","uuidv4","splitString","parsedDistractors","match","distractor","trim","word","distractorAnswers","randomizedAnswers","sort","Math","random","a","b","sortedAnswers","localeCompare","blanksFilled","keys","allBlanksAreFilled","allAnswersAreCorrect","every","includes","inputHasChanged","for","localResultMessage","emitUpdatedResultMessage","feedbackList","i","min","max","emitUpdatedFeedback","titleForDeleteButtonForFeedback","removeFeedback","src","alt","addFeedback","Array","String","emits","feedbacks","newFeedback","feedbackToRemove","_directive_disable_drag","_resolveDirective","starVisible","_imports_0","feedbackMessage","achievedPoints","Number","adjustBarWidth","achievedMaxPoints","nextTick","meterBar","offsetHeight","percentageCorrect","feedbackSortedByScore","round","uploadRequestPromise","accept","onInputChange","errors","selectedFolderId","uploadFolderName","folders","lernmoduleUploads","f","rootFolder","newFolder","mapGetters","relatedFolders","USER_ID","userObject","loadedUserFolders","userFolders","relationship","mapActions","_loadRelatedFolders","loadRelatedFolders","params","getUserFolders","options","warn","input","fileInput","files","fileRef","catch","caseSensitive","acceptTypos","autoCorrect","draft","readonly","autocorrect","classForInput","onBlur","onKeyup","_withKeys","onEnter","ref_for","solutions","onClickCheck","showExtraButtons","showSolutionButton","onClickShowSolution","onClickTryAgain","dljs","some","isAnswerCorrectWithTypo","toLowerCase","distance","autoGrowTextField","computedStyles","getComputedStyle","computedFontSize","getPropertyValue","computedFontFamily","computedPadding","fontSize","parseInt","minEm","minPx","rightPadEm","rightPadPx","static_min_pad","tmp","createElement","tmpStyles","position","padding","parentElement","clientWidth","parentWidth","wrapperElement","taskEditableAfterCheck","resetTask","resetBlankWidths","handleFilledBlank","focusNextBlank","currentIndex","indexOf","nextInput","isLoaded","_mergeProps","onLoad","onError","$attrs","enqueueImageLoad","img","Image","reject","onload","onerror","useLazyLoading","LERNMODULE_LAZYLOADING","halfViewportHeight","innerHeight","observer","IntersectionObserver","entry","isIntersecting","unobserve","disconnect","rootMargin","threshold","observe","addSolution","_component_feedback_element","tabindex","role","isMarked","onClickWord","onKeydown","onWordKeydown","onWordKeyup","classForWord","maxScore","onClickShowSolutions","onClickRetry","markedWords","Set","clear","delete","add","code","has","sanitizeText","splitBySolutions","finalSplit","flatMap","part","test","Boolean","templateElement","content","_component_MemoryEditorCard","_component_LazyImage","_component_FileUpload","cards","card","selectedCardIndex","selectCard","listEntryText","deleteCard","addCard","updateCard","squareLayout","flipside","fileIdToUrl","deleteFlipsideImage","onFileUploaded","onFlipsideImageUploaded","_component_MultimediaElement","second","first","onClickDeleteImage","onInputAltText","onUploadImage","addSecondImage","MultimediaElement","FileUpload","v4","LazyImage","MemoryEditorCard","beforeMount","splice","updatedCard","_component_MemoryViewerCard","_normalizeStyle","gridTemplateColumns","gridTemplateRows","onClickCard","isPlayable","time","timer","amountOfFlips","amountOfPairsSolved","totalAmountOfPairs","_component_lazy_image","flipped","solved","MemoryViewerCard","firstFlippedCardId","firstFlippedCardMatchingCardId","timerStarted","timerInterval","startTimer","matchingCardId","firstCard","getCardById","resetAllUnsolvedCardsExcept","setInterval","stopTimer","clearInterval","exceptionId","resetCards","shuffleCards","card1","card2","cardId","createCard","amountOfCardsSolved","gameIsOver","columns","ceil","sqrt","rows","secondCard","original","duplicate","newValue","_component_PairingEditorPair","_component_PairingEditorCard","_component_FeedbackEditor","pairs","pair","selectedPairIndex","onClickPair","onClickAddPair","addPairButtonBackgroundImage","selectedPair","draggableElement","onElementChanged","onChangeDraggableElement","targetElement","onChangeTargetElement","onClickDeletePair","multimediaElement","onClickRemoveImage","onInputContent","elementChanged","createNewLernmoduleMultimediaElement","onChangeType","selectedType","updatedElement","newAltText","field","newContent","PairingEditorPair","PairingEditorCard","LERNMODULE_DEBUG","backgroundImage","_component_PairingViewerTargetElement","onDropOnInteractiveElements","draggableElements","draggableElementId","isDraggableElementUsed","startDragElement","onDragend","endDragElement","onClickDraggableElement","draggedElementId","immovable","elementIdInteractedWith","getElementById","outlined","elementsDraggedOntoTargets","getElementDraggedOntoTarget","isCorrect","showResult","onDropOnTargetElement","startDragTargetElement","endDragTargetElement","onClickTargetElement","draggableImage","incorrect","targetImage","PairingViewerTargetElement","originalScore","targetId","userInput","targetElementId","setData","userDraggedElementId","otherTargetId","getData","elementsById","usedElementId","pair1","pair2","question","onEditQuestion","removeAnswer","checked","onInputAnswerCorrect","feedbackSelected","feedbackNotSelected","addAnswer","canAnswerMultiple","randomOrder","answerIndex","answerToRemoveIndex","classForAnswer","selectedAnswers","isSubmitted","selectedAnswer","_vModelRadio","onClickShowSolutionsButton","answer1","answer2","reachedMaxPoints","_component_SequencingEditorCard","resumeAllowed","resumeButton","cardIndex","SequencingEditorCard","tabIndex","getAriaLabel","dragged","cardInteractedWith","isShowingResults","isCardInCorrectPosition","startDragCard","onDrag","endDragCard","onDragOver","isShowingSolutions","showResumeButton","onClickResumeButton","screenReaderAnnouncement","fromIndex","toIndex","moveInArray","currentlySelectedIndex","previouslySelectedIndex","moveFocus","$nextTick","buttonRef","findIndex","cardToCheck","updateValue","forceSoftBreaks","removeWrappingPTag","disableAutoformat","insertHtmlComment","fallbackActive","ckeInit","initCKE","textAreaElement","studip_wysiwyg","ckeditor","currentData","getAdjustedCkeditorData","set","on","editing","view","evt","execute","stop","priority","autoformat","plugins","isEnabled","regex","script","_withScopeId","n","_pushScopeId","_popScopeId","viewBox","xmlns","fill","stroke","rx","cx","cy","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","flexBasis","flexGrow","flexShrink","_defineComponent","__props","selectedHotspotId","limitHotspotsToFind","limitClicks","imageWithHotspotsRef","provide","selectHotspot","deleteSelectedHotspot","changeHotspotCorrectness","setHotspotFeedback","dragHotspot","resizeHotspot","numberOfCorrectHotspots","hotspot","numberOfHotspotsToFind","numberOfClicksAllowed","updateAllowedClicksInTaskDefinition","updateHotspotsToFindInTaskDefinition","onImageUploaded","addRectangularHotspot","imgEl","querySelector","imageWidthPixels","imageHeightPixels","clientHeight","hotspotWidthPercent","hotspotHeightPercent","size","smallestDim","hotspotHeightPixels","hotspotWidthPixels","newHotspot","addEllipseHotspot","removeAllHotspots","deleteImage","deleteHotspot","dragId","hotspotId","xFraction","yFraction","h","oldTaskDefinition","deep","_unref","ImageWithHotspots","ref_key","clickHotspot","clickBackground","resetViewerState","clickHistory","clicks","clickedHotspots","result","at","click","pulse","left","top","uid","getHotspotStyle","onClickHotspot","onPointerdown","onPointerdownHotspot","onPointermove","onPointermoveHotspot","onPointerup","onPointerupHotspot","resizeHandles","handle","onPointerdownResizeHandle","onPointermoveResizeHandle","onPointerupResizeHandle","onClickBackground","selectedHotspot","dragState","viewer","hidden","popperInstance","destroy","hotspotElement","tooltipElement","selectedHotspotTooltip","createPopper","placement","modifiers","offset","wrapperRect","wrapper","getBoundingClientRect","clickX","clientX","clickY","clientY","pointerStartPos","hotspotStartPos","setPointerCapture","pointerId","releasePointerCapture","rootRect","root","hotspotEl","currentTarget","clientDx","dxFraction","hotspotWidth","minX","maxX","clampedXFraction","clientDy","dyFraction","hotspotHeight","minY","maxY","clampedYFraction","update","hotspotStartSize","xInitial","yInitial","widthInitial","heightInitial","newX","newWidth","newY","newHeight","dxPointerPixels","dxPointer","dyPointerPixels","dyPointer","filteredHeight","filteredWidth","filteredX","filteredY","newHeightPixels","newWidthPixels","minPixelDimension","isOffscreenX","isOffscreenY","borderRadius","wordsInputMessage","words","lastValidInput","numbersInputMessage","toUpperCase","clearMessages","onInputWords","wordArray","longestWord","tooLongWord","tooManyWords","onInputSize","num","characters","onInputAlphabet","alphabet","resetAlphabet","resetAlphabetToUsedLetters","from","onSubmit","showWordList","directions","w","s","ne","se","nw","sw","wordListTitle","WordSearch","grid","selectedCells","correctCells","solutionCoordinates","foundWords","taskSubmitted","onMounted","initializeGrid","drawGrid","onPointerdownOutsideCanvas","onPointerupOutsideCanvas","onBeforeUnmount","removeEventListener","gridSize","cellSize","canvasSize","disabledDirections","char","taskCompleted","randomLetter","randomIndex","floor","resetSelectedCells","resetCorrectCells","cols","dictionary","maxWords","backwardsProbability","upperCase","diacritics","ws","count","coord","canvas","ctx","getContext","clearRect","font","textAlign","textBaseline","fillCell","strokeStyle","strokeRect","fillStyle","fillText","onPointerdownCanvas","endSelection","cellX","cellY","getCellUnderCursor","startCell","currentCell","direction","rect","onPointermoveCanvas","getDirection","xCoordinate","yCoordinate","coordinatesAreValid","onPointerupCanvas","selectedWord","getSelectedWord","reversedSelectedWord","reverse","isWordFound","markSelectedWordCorrect","isNewWord","endCell","xCell","yCell","fillRect","startX","startY","dx","dy","padStart","_component_SelectVideo","_component_TabComponent","_component_AddInteractions","_component_TabsComponent","_withCtx","icon","_","tabs","tab","activeTabHash","hash","_renderSlot","$slots","addTab","isActive","buttonSelector","created","onDragoverCapture","onDragOverTimeline","onPointerDownAxis","axisScale","point","formatVideoTimestamp","major","visibleInteractions","interactionMarkerStyle","onClickInteraction","onWheel","onContextmenu","selectedInteractionId","timelineInteractionStyle","onPointerDownInteraction","onPointerMoveInteraction","onPointerUpInteraction","viewportEnd","onPointerDownInteractionStart","onPointerMoveInteractionStart","onPointerUpInteractionStart","onPointerDownInteractionEnd","onPointerMoveInteractionEnd","onPointerUpInteractionEnd","onDragStartTimeMarker","positionForTimeMarker","zoomTransform","viewportWidthEm","viewportWidthSeconds","viewportStart","getEmValueFromElement","pixelValue","parentNode","parentFontSize","parseFloat","elementFontSize","pixelValueOfOneEm","currentTime","videoMetadata","t","k","recomputeViewportWidth","timelineAxis","dragTimeline","dSeconds","pixelsToSeconds","translate","constrainZoomTranslate","dragBehavior","drag","button","select","timeline","isWithinViewport","isBeingDragged","secondsPerEm","secondsToTimelinePercentage","scale","seconds","deltaT","zoom","delta","viewportStart0","viewportWidth0","exp","newK","viewportWidth1","viewportStart1","xCoordinateToTime","deltaY","pixelsToEm","pixels","NaN","axis","widthInEm","timestampSeconds","hours","minutes","centiseconds","twoDigits","toLocaleString","minimumIntegerDigits","maximumFractionDigits","fraction","clampedTime","startDeltaT","startPercent","endDeltaT","endPercent","interactionLength","mouseStartPos","interactionStartTime","interactionDuration","selectInteraction","mouseDx","secondsPerPixel","maxTime","secondsClamped","dragInteractionTimeline","movementX","timeClamped","emitTimelineSeekThrottled","throttle","_component_VideoTimeInput","_component_StudipWysiwyg","selectedInteraction","inputStartTime","inputStartTimeFormatError","invalid","inputStartTimeErrors","inputEndTime","inputEndTimeFormatError","inputEndTimeErrors","_KeepAlive","_resolveDynamicComponent","editorForTaskType","showViewerAboveEditor","viewerForTaskType","onBlurUserInput","formatSeconds","parsedUserInput","timeRegexCentiseconds","centisecondsMatch","exec","timeRegexHhMmSs","hhMmSsMatch","VideoTimeInput","videoPlayer","videoTimeline","selectedInteractionProperties","taskTypes","editInteraction","dragInteraction","resizeOverlay","deleteInteraction","performEditForEditedLmbInteraction","newDefinition","videoTask","interactionIndex","interactionId","selectionId","scrollIntoView","behavior","block","onVideoMetadataChange","onTimeUpdate","onTimelineSeek","player","onClickZoomIn","onClickZoomOut","onClickPlay","play","onClickPause","pause","insertOverlay","insertLmbTaskInteraction","prompt","confirmed","confirm","duration","VideoPlayer","onTimeupdate","onMetadataChange","interactionType","taskType","VideoTimeline","onDeleteInteraction","SelectedInteractionProperties","_component_FilePicker","_component_VideoPlayer","onUploadStudipVideo","selectedFileId","onSelectFile","updateCurrentFile","onSaveUploadedFile","youtubeUrlInput","onSaveYoutubeVideo","href","fileDetailsUrl","selectedFile","deleteVideo","startPositionInputError","onClickUseCurrentTime","_component_FolderPicker","_component_translate","allowUserFolders","unchoose","currentValue","selectFile","_vShow","canBeEmpty","_vModelSelect","changeSelection","label","textOptGroupCourse","loadedCourseFolders","textOptGroupUser","filterCourseFolders","allowHomeworkFolders","validatedParents","Map","validateParentFolder","isValid","parentId","hiddenParentFolderValidation","parentFolder","courseObject","getCourseFolders","confirmSelectedFolder","FolderPicker","mimeType","isImage","isVideo","isAudio","isDocument","fileRefById","relatedFileRefs","relatedTermOfUse","loadFileRef","loadRelatedFileRefs","filterFiles","loadArray","filterFile","fileTermsOfUse","videoConditions","condition","audioConditions","officeConditions","mime_type","download_url","file_name","getFolderFiles","include","fileRefs","oldValue","FilePicker","SelectVideo","AddInteractions","TabComponent","TabsComponent","counter","_component_LmbTaskInteraction","_component_OverlayInteraction","progressBarInteractionMarkerStyle","onClickInteractionMarker","interactionForPopper","activateInteraction","onActivateInteraction","onPointerDownResizeHandle","onPointerMoveResizeHandle","onPointerUpResizeHandle","_Transition","activeInteraction","closeInteraction","OverlayInteraction","LmbTaskInteraction","playedTime","isPlaying","progressBarParameters","widthPixels","xOffsetPixels","progressBarObserver","videoInfo","timeAndVisibleInteractions","loadVideoInfo","initializePlayer","newTime","newVisibleInteractions","oldTime","oldVisibleInteractions","isPlayingForward","newlyVisibleInteractionWithPause","interactionElement","selectedInteractionTooltip","onPlayerReady","videoUrl","videoType","videoJsContainer","dispose","playerElement","appendChild","videojs","techOrder","sources","controls","controlBar","children","volumePanel","inline","muted","paused","enforceDisabledNavigation","abs","progressBarEls","getElementsByClassName","progressHolder","ResizeObserver","rootLeft","progressHolderLeft","interactionStartPos","interactionStartSize","xPointer","interactionEl","interactionWidth","interactionHeight","progressPercentage","timeOffsetPx","focusInteraction","focusVisible","one","difference","beforeUnmount"],"sourceRoot":""}