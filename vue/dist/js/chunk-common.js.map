{"version":3,"file":"js/chunk-common.js","mappings":"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","sources":["webpack://vue101/./src/directives/vModelUndoable.ts","webpack://vue101/./src/language/gettext.ts","webpack://vue101/./src/components/FillInTheBlanksViewer.vue?5b0f","webpack://vue101/./src/components/FillInTheBlanksViewer.vue?a6bf","webpack://vue101/./src/components/FillInTheBlanksViewer.vue","webpack://vue101/./src/components/FillInTheBlanksEditor.vue?99f9","webpack://vue101/./src/components/FillInTheBlanksEditor.vue?bd37","webpack://vue101/./src/components/FillInTheBlanksEditor.vue","webpack://vue101/./src/components/QuestionEditor.vue?aaa9","webpack://vue101/./src/components/QuestionEditor.vue?68ef","webpack://vue101/./src/components/QuestionEditor.vue","webpack://vue101/./src/components/QuestionViewer.vue?7859","webpack://vue101/./src/components/QuestionViewer.vue?5a19","webpack://vue101/./src/components/QuestionViewer.vue","webpack://vue101/./src/components/DragTheWordsViewer.vue?370e","webpack://vue101/./src/components/DragTheWordsViewer.vue?8d04","webpack://vue101/./src/components/DragTheWordsViewer.vue","webpack://vue101/./src/components/DragTheWordsEditor.vue?e76e","webpack://vue101/./src/components/DragTheWordsEditor.vue?4b1e","webpack://vue101/./src/components/DragTheWordsEditor.vue","webpack://vue101/./src/components/MarkTheWordsViewer.vue?fbc7","webpack://vue101/./src/components/FeedbackElement.vue?aa84","webpack://vue101/./src/components/FeedbackElement.vue?667e","webpack://vue101/./src/components/FeedbackElement.vue","webpack://vue101/./src/components/MarkTheWordsViewer.vue?34dc","webpack://vue101/./src/components/MarkTheWordsViewer.vue","webpack://vue101/./src/components/MarkTheWordsEditor.vue?91a3","webpack://vue101/./src/components/MarkTheWordsEditor.vue?b50e","webpack://vue101/./src/components/MarkTheWordsEditor.vue","webpack://vue101/./src/components/MemoryEditor.vue?0ae5","webpack://vue101/./src/components/EditedMemoryCard.vue?4d66","webpack://vue101/./src/components/EditedMemoryCardImage.vue?0912","webpack://vue101/./src/components/EditedMemoryCardImage.vue?9bfd","webpack://vue101/./src/components/EditedMemoryCardImage.vue","webpack://vue101/./src/components/FileUpload.vue?2987","webpack://vue101/./src/components/FileUpload.vue?a2bf","webpack://vue101/./src/components/FileUpload.vue","webpack://vue101/./src/components/EditedMemoryCard.vue?eb7b","webpack://vue101/./src/components/EditedMemoryCard.vue","webpack://vue101/./src/components/MemoryEditor.vue?518c","webpack://vue101/./src/components/MemoryEditor.vue","webpack://vue101/./src/components/MemoryViewer.vue?3015","webpack://vue101/./src/components/MemoryCard.vue?2640","webpack://vue101/./src/components/MemoryCard.vue?89da","webpack://vue101/./src/components/MemoryCard.vue","webpack://vue101/./src/components/MemoryViewer.vue?6ce2","webpack://vue101/./src/components/MemoryViewer.vue","webpack://vue101/./src/components/ImagePairingViewer.vue?a812","webpack://vue101/./src/components/TargetImage.vue?26d1","webpack://vue101/./src/components/TargetImage.vue?2ffe","webpack://vue101/./src/components/TargetImage.vue","webpack://vue101/./src/components/ImagePairingViewer.vue?6dc3","webpack://vue101/./src/components/ImagePairingViewer.vue","webpack://vue101/./src/components/ImagePairingEditor.vue?a8b8","webpack://vue101/./src/components/EditedImagePair.vue?eeb8","webpack://vue101/./src/components/EditedImagePairImage.vue?ed11","webpack://vue101/./src/components/EditedImagePairImage.vue?4c87","webpack://vue101/./src/components/EditedImagePairImage.vue","webpack://vue101/./src/components/EditedImagePair.vue?1602","webpack://vue101/./src/components/EditedImagePair.vue","webpack://vue101/./src/components/ImagePairingEditor.vue?ed8a","webpack://vue101/./src/components/ImagePairingEditor.vue","webpack://vue101/./src/components/ImageSequencingViewer.vue?d4b9","webpack://vue101/./src/components/ImageSequencingViewer.vue?7a37","webpack://vue101/./src/components/ImageSequencingViewer.vue","webpack://vue101/./src/components/ImageSequencingEditor.vue?9169","webpack://vue101/./src/components/ImageSequencingEditorImage.vue?49ec","webpack://vue101/./src/components/ImageSequencingEditorImage.vue?6317","webpack://vue101/./src/components/ImageSequencingEditorImage.vue","webpack://vue101/./src/components/ImageSequencingEditor.vue?36bd","webpack://vue101/./src/components/ImageSequencingEditor.vue","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoViewer.vue?292b","webpack://vue101/./src/components/interactiveVideo/VideoPlayer.vue?5346","webpack://vue101/./src/components/interactiveVideo/editorState.ts","webpack://vue101/./src/components/interactiveVideo/interactions/LmbTaskInteraction.vue?bafd","webpack://vue101/./src/components/interactiveVideo/interactions/LmbTaskInteraction.vue?76e4","webpack://vue101/./src/components/interactiveVideo/interactions/LmbTaskInteraction.vue","webpack://vue101/./src/components/interactiveVideo/VideoPlayer.vue?f73b","webpack://vue101/./src/components/interactiveVideo/VideoPlayer.vue","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoViewer.vue?f621","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoViewer.vue","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoEditor.vue?21a7","webpack://vue101/./src/components/interactiveVideo/TabsComponent.vue","webpack://vue101/./src/components/interactiveVideo/TabsComponent.vue?63d8","webpack://vue101/./src/components/interactiveVideo/TabComponent.vue","webpack://vue101/./src/components/interactiveVideo/TabComponent.vue?33d1","webpack://vue101/./src/components/interactiveVideo/VideoTimeline.vue?035f","webpack://vue101/./src/models/InteractiveVideoTask.ts","webpack://vue101/./src/components/interactiveVideo/getEmValueFromElement.ts","webpack://vue101/./src/components/interactiveVideo/VideoTimeline.vue?a938","webpack://vue101/./src/components/interactiveVideo/VideoTimeline.vue","webpack://vue101/./src/components/interactiveVideo/SelectedInteractionProperties.vue?f4ef","webpack://vue101/./src/components/interactiveVideo/SelectedInteractionProperties.vue?09b4","webpack://vue101/./src/components/interactiveVideo/SelectedInteractionProperties.vue","webpack://vue101/./src/components/interactiveVideo/AddInteractions.vue?2832","webpack://vue101/./src/components/interactiveVideo/AddInteractions.vue","webpack://vue101/./src/components/interactiveVideo/SelectVideo.vue?1a16","webpack://vue101/./src/components/interactiveVideo/SelectVideo.vue?3b43","webpack://vue101/./src/components/interactiveVideo/SelectVideo.vue","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoEditor.vue?5045","webpack://vue101/./src/components/interactiveVideo/InteractiveVideoEditor.vue","webpack://vue101/./src/models/TaskDefinition.ts","webpack://vue101/./src/routes.ts","webpack://vue101/./src/store/modules/coursewareBlock.ts","webpack://vue101/./src/store/modules/taskEditor.ts","webpack://vue101/./src/components/StudipWysiwyg.vue?5a0f","webpack://vue101/./src/components/StudipWysiwyg.vue?850b","webpack://vue101/./src/components/StudipWysiwyg.vue"],"sourcesContent":["import { store, taskEditorStore } from '@/store';\nimport { Directive, DirectiveBinding } from 'vue';\n\n/**\n * This is a custom directive that you can use like v-model in the Lernmodul-Editor.\n * Like v-model, it is a two-way binding, but rather than directly modifying\n * 'taskDefinition', it saves changes into the undo-redo stack by calling\n * 'taskEditorStore.performEdit'.\n * It also sets an attribute 'data-undo-focus-id' on the element.\n * This attribute is used during the 'undo' and 'redo' operations.\n * The input elements whose contents are modified by 'undo' or 'redo' will\n * automatically be focus()ed and brought into view.\n * TODO: Can I get better stack traces when errors are thrown inside of\n *   directive hooks?  Right now, they do not show what line of the .vue file\n *   caused the errors to be thrown.\n */\nexport const modelUndoable: Directive = {\n  mounted(\n    el: HTMLElement,\n    binding: DirectiveBinding<unknown>,\n    vnode,\n    prevVnode\n  ) {\n    const validEl = validateElement(el);\n    validEl.setAttribute('data-undo-focus-id', parsePath(binding).join('.'));\n\n    el.addEventListener('input', (ev: Event) => {\n      const splitPath = parsePath(binding);\n      const [firstPathEl, ...restOfPath] = splitPath;\n      const value = vnode.el.value;\n      const newState = JSON.parse(\n        JSON.stringify(taskEditorStore.taskDefinition)\n      );\n      setValueAtPath(newState, restOfPath, value);\n      taskEditorStore.performEdit({\n        newTaskDefinition: newState,\n        undoBatch: splitPath.join('.'),\n      });\n      console.log(el, binding, vnode, prevVnode, ev, splitPath, value);\n    });\n\n    function setElValueFromStore() {\n      const splitPath = parsePath(binding);\n      const storeValue = getValueAtPath(taskEditorStore, splitPath);\n      const validatedStoreValue = validateBoundValue(storeValue);\n      validEl.value = validatedStoreValue.toString();\n    }\n    store.watch(\n      () => {\n        const splitPath = parsePath(binding);\n        return getValueAtPath(taskEditorStore, splitPath);\n      },\n      () => setElValueFromStore()\n    );\n    setElValueFromStore();\n  },\n} as const;\n\n/**\n * Make sure that the binding supplied by the user is a valid one.\n * It should be a path to a field of 'taskEditorStore.taskDefinition',\n * e.g. 'taskDefinition.task_type'.\n * @param binding - See https://vuejs.org/guide/reusability/custom-directives.html#directive-hooks\n */\nfunction parsePath(binding: DirectiveBinding<unknown>): Array<string> {\n  if (typeof binding.value !== 'string') {\n    throw new Error(bindingMustBeStringError + binding.value);\n  }\n  const splitPath = binding.value.split('.');\n  const firstPathEl = splitPath[0];\n  if (firstPathEl !== 'taskDefinition') {\n    throw new Error(bindingMustUseTaskDefinitionError + binding.value);\n  }\n  return splitPath;\n}\n\nfunction validateElement(\n  el: HTMLElement\n): HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement {\n  if (\n    el instanceof HTMLInputElement ||\n    el instanceof HTMLTextAreaElement ||\n    el instanceof HTMLSelectElement\n  ) {\n    return el;\n  }\n  throw new Error(invalidElementTypeError);\n}\n\nfunction validateBoundValue(val: unknown): string | number | boolean {\n  if (\n    typeof val !== 'string' &&\n    typeof val !== 'number' &&\n    typeof val !== 'boolean'\n  ) {\n    throw new Error(boundValueMustBePrimitiveError + typeof val);\n  }\n  return val;\n}\n\nfunction getValueAtPath(o: object, path: Array<string>): unknown {\n  return path.reduce((accumulator: any, pathComponent: string) => {\n    if (!Object.prototype.hasOwnProperty.call(accumulator, pathComponent)) {\n      throw new Error(invalidPathError + path.join('.'));\n    }\n    return accumulator[pathComponent];\n  }, o);\n}\n\nfunction setValueAtPath(o: object, splitPath: Array<string>, value: any) {\n  const [lastPathComponent, ...restOfPath] = [splitPath.pop(), ...splitPath];\n  if (lastPathComponent === undefined) {\n    throw new Error('Path has no last element');\n  }\n  const targetObject = restOfPath.reduce(\n    (accumulator: Record<string, any>, pathComponent: string) =>\n      accumulator[pathComponent],\n    o\n  );\n  targetObject[lastPathComponent] = value;\n}\n\n// TODO translate these strings in Weblate.\nconst bindingMustBeStringError =\n  'The value supplied to v-model-undoable must be a string. ' +\n  'Example: <select v-model-undoable=\"\\'taskDefinition.task_type\\'\">\\n' +\n  'You supplied the following value: ';\n\nconst bindingMustUseTaskDefinitionError =\n  'The string supplied to v-model-undoable must be a path which begins with ' +\n  '\"taskDefinition\", and the path must be wrapped in two sets of quotes. \\n' +\n  'Example usage: <select v-model-undoable=\"\\'taskDefinition.task_type\\'\">\\n' +\n  'You supplied the following string: ';\n\nconst boundValueMustBePrimitiveError =\n  'The value bound with v-model-undoable must be a string, number or boolean.  ' +\n  'Other datatypes are not currently supported.  The value found is of type ';\n\nconst invalidPathError =\n  'No field was found in the store under the given path.  Did you make a ' +\n  'typo?  Path: ';\n\nconst invalidElementTypeError =\n  'v-model-undoable can only be used on <input>, <textarea> and <select> elements';\n","import { createGettext } from 'vue3-gettext';\nimport translations from '@/language/translations.json';\n\nconst selectedLanguage = Object.values(window.STUDIP.INSTALLED_LANGUAGES).find(\n  (lang) => lang.selected\n);\nconst gettextPlugin = createGettext({\n  availableLanguages: {\n    en: 'English',\n    de: 'Deutsch',\n  },\n  defaultLanguage: selectedLanguage?.path ?? 'de',\n  translations: translations,\n});\n\nconst $gettext = gettextPlugin.$gettext;\n\nexport { gettextPlugin, $gettext };\n","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0b222efa\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"h5pModule\",\n  ref: \"wrapperElement\"\n}\nconst _hoisted_2 = [\"innerHTML\"]\nconst _hoisted_3 = [\"onUpdate:modelValue\", \"readonly\", \"disabled\"]\nconst _hoisted_4 = { key: 0 }\nconst _hoisted_5 = [\"data-tooltip\"]\nconst _hoisted_6 = {\n  key: 1,\n  class: \"h5pSolution\"\n}\nconst _hoisted_7 = { class: \"h5pFeedbackContainer\" }\nconst _hoisted_8 = { class: \"h5pFeedbackContainerTop\" }\nconst _hoisted_9 = {\n  key: 0,\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_10 = {\n  key: 1,\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_11 = { class: \"h5pFeedbackContainerCenter\" }\nconst _hoisted_12 = { key: 0 }\nconst _hoisted_13 = [\"max\", \"value\"]\nconst _hoisted_14 = {\n  for: \"score\",\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_15 = { class: \"h5pFeedbackContainerBottom\" }\nconst _hoisted_16 = { key: 0 }\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\" userInputs: \")\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\" submittedAnswers: \")\nconst _hoisted_19 = /*#__PURE__*/_createTextVNode(\" Split template: \")\nconst _hoisted_20 = /*#__PURE__*/_createTextVNode(\" Parsed template: \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.parsedTemplate, (element) => {\n      return (_openBlock(), _createElementBlock(_Fragment, {\n        key: element.uuid\n      }, [\n        (element.type === 'staticText')\n          ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              innerHTML: element.text\n            }, null, 8, _hoisted_2))\n          : (element.type === 'blank')\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"text\",\n                  \"onUpdate:modelValue\": ($event: any) => ((_ctx.userInputs[element.uuid]) = $event),\n                  readonly: _ctx.submittedAnswerIsCorrect(element) || _ctx.showSolutions,\n                  disabled: _ctx.submittedAnswerIsCorrect(element) || _ctx.showSolutions,\n                  class: _normalizeClass(_ctx.classForInput(element)),\n                  onBlur: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onInputBlurOrEnter && _ctx.onInputBlurOrEnter(...args))),\n                  onKeyup: _cache[1] || (_cache[1] = _withKeys(\n//@ts-ignore\n(...args) => (_ctx.onInputBlurOrEnter && _ctx.onInputBlurOrEnter(...args)), [\"enter\"])),\n                  onInput: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onInput && _ctx.onInput(...args)))\n                }, null, 42, _hoisted_3), [\n                  [_vModelText, _ctx.userInputs[element.uuid]]\n                ]),\n                (element.hint)\n                  ? (_openBlock(), _createElementBlock(\"label\", _hoisted_4, [\n                      _createElementVNode(\"span\", {\n                        class: \"tooltip tooltip-icon\",\n                        \"data-tooltip\": element.hint\n                      }, null, 8, _hoisted_5)\n                    ]))\n                  : _createCommentVNode(\"\", true),\n                (_ctx.showSolutions && !_ctx.submittedAnswerIsCorrect(element))\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(element.solutions[0]), 1))\n                  : _createCommentVNode(\"\", true)\n              ], 64))\n            : _createCommentVNode(\"\", true)\n      ], 64))\n    }), 128)),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        (_ctx.showFillInAllTheBlanksMessage)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(_ctx.task.strings.fillInAllBlanksMessage\n              ? _ctx.task.strings.fillInAllBlanksMessage\n              : _ctx.$gettext(\n                  'Alle Lcken mssen ausgefllt sein, um Lsungen anzuzeigen'\n                )), 1))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showResults && _ctx.feedbackMessage)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _toDisplayString(_ctx.feedbackMessage), 1))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_11, [\n        (_ctx.showResults)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n              _createElementVNode(\"meter\", {\n                id: \"score\",\n                min: \"0\",\n                max: _ctx.maxPoints,\n                value: _ctx.correctAnswers\n              }, null, 8, _hoisted_13),\n              _createElementVNode(\"label\", _hoisted_14, _toDisplayString(_ctx.resultMessage), 1)\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_15, [\n        (_ctx.showCheckButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheck && _ctx.onClickCheck(...args))),\n              class: \"h5pButton\"\n            }, _toDisplayString(_ctx.task.strings.checkButton), 1))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showExtraButtons)\n          ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n              (_ctx.showSolutionButton)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 0,\n                    onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onClickShowSolution && _ctx.onClickShowSolution(...args))),\n                    class: \"h5pButton\"\n                  }, _toDisplayString(_ctx.task.strings.solutionsButton), 1))\n                : _createCommentVNode(\"\", true),\n              (_ctx.showRetryButton)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 1,\n                    onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onClickTryAgain && _ctx.onClickTryAgain(...args))),\n                    class: \"h5pButton\"\n                  }, _toDisplayString(_ctx.task.strings.retryButton), 1))\n                : _createCommentVNode(\"\", true)\n            ], 64))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    (_ctx.debug)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n          _hoisted_17,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.userInputs), 1),\n          _hoisted_18,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.submittedAnswers), 1),\n          _hoisted_19,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.splitTemplate), 1),\n          _hoisted_20,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.parsedTemplate), 1)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 512))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { Feedback, FillInTheBlanksTask } from '@/models/TaskDefinition';\nimport { v4 as uuidv4 } from 'uuid';\nimport { isEqual, round } from 'lodash';\nimport { $gettext } from '@/language/gettext';\n\ntype FillInTheBlanksElement = Blank | StaticText;\ntype Blank = {\n  type: 'blank';\n  uuid: Uuid;\n  solutions: string[];\n  hint: string;\n};\ntype StaticText = {\n  type: 'staticText';\n  uuid: Uuid;\n  text: string;\n};\ntype Uuid = string;\n\nconst dljs = require('damerau-levenshtein-js');\n\nexport default defineComponent({\n  name: 'FillInTheBlanksViewer',\n  props: {\n    task: {\n      type: Object as PropType<FillInTheBlanksTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      userInputs: {} as Record<Uuid, string>,\n      submittedAnswers: null as Record<Uuid, string> | null,\n      debug: false,\n      userWantsToSeeSolutions: false,\n    };\n  },\n  methods: {\n    $gettext,\n    submittedAnswerIsCorrect(element: FillInTheBlanksElement): boolean {\n      const blank = element as Blank;\n\n      const submittedAnswer = this.submittedAnswers?.[blank.uuid];\n      if (!submittedAnswer) {\n        return false;\n      } else {\n        return blank.solutions.some((solution) =>\n          this.isAnswerCorrect(submittedAnswer, solution)\n        );\n      }\n    },\n    isAnswerCorrect(userAnswer: string, solution: string): boolean {\n      if (this.task.caseSensitive) {\n        if (this.task.acceptTypos) {\n          return this.isAnswerCorrectWithTypo(userAnswer, solution);\n        } else {\n          return userAnswer === solution;\n        }\n      } else {\n        // TODO: Was ist, wenn das in einem Sprachkurs mit einer nichtlateinischen Schrift verwendet wird? :D\n        if (this.task.acceptTypos) {\n          return this.isAnswerCorrectWithTypo(\n            userAnswer.toLowerCase(),\n            solution.toLowerCase()\n          );\n        } else {\n          return userAnswer.toLowerCase() === solution.toLowerCase();\n        }\n      }\n    },\n    isAnswerCorrectWithTypo(userAnswer: string, solution: string): boolean {\n      if (userAnswer === solution) return true;\n\n      // Calculate the Damerau-Levenshtein distance between the answer and the solution\n      const distance = dljs.distance(userAnswer, solution);\n\n      // If the word is between 4 and 9 characters, a distance of 1 will be accepted\n      // If the word is more than 9 characters long, a distance of 2 will be accepted\n      return (\n        (userAnswer.length > 3 && distance <= 1) ||\n        (userAnswer.length > 9 && distance <= 2)\n      );\n    },\n    updateAttempt() {\n      // Tell the server which blanks were filled out correctly.\n      const points = {} as Record<string, number>;\n      this.blanks.forEach((blank, index) => {\n        // TODO Consider what the key should be. This is a bit ugly.\n        // The key is shown directly in the 'assessment' UI.\n        // Maybe we should change how that works?\n        points[`${index} - ${blank.solutions[0]}`] =\n          this.submittedAnswerIsCorrect(blank) ? 1 : 0;\n      });\n      this.$emit('updateAttempt', {\n        points,\n        // The attempt is marked as successful if all answers were correct.\n        success: this.correctAnswers === this.blanks.length,\n      });\n    },\n    /**\n     * Adapted from the H5P source code, MIT License\n     * https://github.com/h5p/h5p-blanks/blob/e9bf6862211c082a5724d9873496e66c489d23f7/js/blanks.js#L401\n     * TODO: Put the license in the appropriate place\n     */\n    autoGrowTextField(input: HTMLInputElement) {\n      // Do not set text field size when separate lines is enabled\n      // if (this.params.behaviour.separateLines) {\n      //   return;\n      // }\n      const computedStyles = window.getComputedStyle(input, null);\n      const computedFontSize = computedStyles.getPropertyValue('font-size');\n      const computedFontFamily = computedStyles.getPropertyValue('font-family');\n      const computedPadding = computedStyles.getPropertyValue('padding');\n      const fontSize = parseInt(computedFontSize, 10);\n      const minEm = 6;\n      const minPx = fontSize * minEm;\n      const rightPadEm = 3.25;\n      const rightPadPx = fontSize * rightPadEm;\n      const static_min_pad = 0.5 * fontSize;\n\n      setTimeout(() => {\n        const tmp = document.createElement('div');\n        tmp.textContent = input.value;\n        const tmpStyles = {\n          position: 'absolute',\n          'white-space': 'nowrap',\n          'font-size': computedFontSize,\n          'font-family': computedFontFamily,\n          padding: computedPadding,\n          width: 'initial',\n        };\n        for (const [key, value] of Object.entries(tmpStyles)) {\n          tmp.style[key as any] = value;\n        }\n        input.parentElement!.append(tmp);\n        const width = tmp.clientWidth;\n        const parentWidth = (this.$refs.wrapperElement as HTMLDivElement)\n          .clientWidth;\n        tmp.remove();\n        if (width <= minPx) {\n          // Apply min width\n          input.style.width = (minPx + static_min_pad).toString() + 'px';\n        } else if (width + rightPadPx >= parentWidth) {\n          // Apply max width of parent\n          input.style.width = (parentWidth - rightPadPx).toString() + 'px';\n        } else {\n          // Apply width that wraps input\n          input.style.width = (width + static_min_pad).toString() + 'px';\n        }\n      }, 1);\n    },\n    onClickCheck() {\n      // Save a copy of the user's inputs.\n      this.submittedAnswers = { ...this.userInputs };\n      this.updateAttempt();\n    },\n    onClickShowSolution() {\n      this.userWantsToSeeSolutions = true;\n    },\n    onClickTryAgain() {\n      this.userWantsToSeeSolutions = false;\n      this.userInputs = {};\n      this.submittedAnswers = null;\n    },\n    onInputBlurOrEnter() {\n      this.userWantsToSeeSolutions = false;\n      if (this.task.autoCorrect) {\n        this.onClickCheck();\n      }\n    },\n    onInput(event: Event) {\n      this.autoGrowTextField(event.target as HTMLInputElement);\n    },\n    classForInput(blank: FillInTheBlanksElement) {\n      if (!this.submittedAnswers) {\n        return 'h5pBlank';\n      }\n\n      if (this.submittedAnswers?.[blank.uuid] != undefined) {\n        if (this.submittedAnswerIsCorrect(blank)) {\n          return 'h5pBlank h5pBlankCorrect';\n        } else {\n          return 'h5pBlank h5pBlankIncorrect';\n        }\n      } else {\n        return 'h5pBlank h5pBlankIncorrect';\n      }\n    },\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n  },\n  computed: {\n    splitTemplate(): string[] {\n      // Returns an array where the even indexes are the static text portions,\n      // and the odd indexes are the blanks.\n      return this.task.template.split(/\\*([^*]*)\\*/);\n    },\n    parsedTemplate(): FillInTheBlanksElement[] {\n      return this.splitTemplate.map((value, index) => {\n        if (index % 2 === 0) {\n          return { type: 'staticText', text: value, uuid: uuidv4() };\n        } else {\n          let splitString = value.split(':');\n          let solutions = splitString[0].split('/');\n          let hint = splitString[1];\n          return {\n            type: 'blank',\n            solutions: solutions,\n            hint: hint,\n            uuid: uuidv4(),\n          };\n        }\n      });\n    },\n    blanks(): Blank[] {\n      return this.parsedTemplate.filter(\n        (word) => word.type === 'blank'\n      ) as Blank[];\n    },\n    blanksFilled(): number {\n      if (!this.submittedAnswers) {\n        return 0;\n      } else {\n        return Object.keys(this.submittedAnswers).length;\n      }\n    },\n    allBlanksAreFilled(): boolean {\n      return this.blanksFilled == this.blanks.length;\n    },\n    correctAnswers(): number {\n      return this.blanks.filter((blank) => this.submittedAnswerIsCorrect(blank))\n        .length;\n    },\n    allAnswersAreCorrect(): boolean {\n      return this.blanks.every((blank) => this.submittedAnswerIsCorrect(blank));\n    },\n    maxPoints(): number {\n      return this.blanks.length;\n    },\n    inputHasChanged(): boolean {\n      return !isEqual(this.submittedAnswers, this.userInputs);\n    },\n    showExtraButtons(): boolean {\n      if (this.task.autoCorrect) {\n        if (this.allBlanksAreFilled) {\n          return (\n            this.submittedAnswers !== null &&\n            !this.inputHasChanged &&\n            !this.allAnswersAreCorrect\n          );\n        } else {\n          return false;\n        }\n      } else {\n        return (\n          this.submittedAnswers !== null &&\n          !this.inputHasChanged &&\n          !this.allAnswersAreCorrect\n        );\n      }\n    },\n    showCheckButton(): boolean {\n      return (\n        (this.submittedAnswers === null || this.inputHasChanged) &&\n        !this.task.autoCorrect\n      );\n    },\n    showSolutionButton(): boolean {\n      return !this.showSolutions && this.task.showSolutionsAllowed;\n    },\n    showRetryButton(): boolean {\n      return this.task.retryAllowed && this.submittedAnswers !== null;\n    },\n    showSolutions(): boolean {\n      return (\n        this.userWantsToSeeSolutions &&\n        (this.allBlanksAreFilled ||\n          !this.task.allBlanksMustBeFilledForSolutions)\n      );\n    },\n    showFillInAllTheBlanksMessage(): boolean {\n      return (\n        this.task.allBlanksMustBeFilledForSolutions &&\n        this.userWantsToSeeSolutions &&\n        !this.allBlanksAreFilled &&\n        !this.inputHasChanged\n      );\n    },\n    showResults(): boolean {\n      return (\n        !(this.submittedAnswers === null) &&\n        !this.showFillInAllTheBlanksMessage &&\n        (!this.task.autoCorrect || this.allBlanksAreFilled) &&\n        !this.inputHasChanged\n      );\n    },\n    resultMessage(): string {\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.correctAnswers.toString()\n      );\n\n      resultMessage = resultMessage.replace(\n        ':total',\n        this.blanks.length.toString()\n      );\n\n      return resultMessage;\n    },\n    feedbackMessage(): string | undefined {\n      const percentageCorrect = round(\n        (this.correctAnswers / this.blanks.length) * 100\n      );\n\n      for (const feedback of this.feedbackSortedByScore) {\n        if (percentageCorrect >= feedback.percentage) {\n          return feedback.message;\n        }\n      }\n\n      return undefined;\n    },\n    feedbackSortedByScore(): Feedback[] {\n      return this.task.feedback\n        .map((value) => value)\n        .sort((a, b) => b.percentage - a.percentage);\n    },\n  },\n});\n","import { render } from \"./FillInTheBlanksViewer.vue?vue&type=template&id=0b222efa&scoped=true&ts=true\"\nimport script from \"./FillInTheBlanksViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./FillInTheBlanksViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./FillInTheBlanksViewer.vue?vue&type=style&index=0&id=0b222efa&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b222efa\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelSelect as _vModelSelect, vModelText as _vModelText, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5e59aad6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"default\" }\nconst _hoisted_2 = { class: \"h5pEditorTopPanel\" }\nconst _hoisted_3 = [\"data-tooltip\"]\nconst _hoisted_4 = { class: \"collapsable collapsed\" }\nconst _hoisted_5 = { value: false }\nconst _hoisted_6 = { value: true }\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = [\"disabled\"]\nconst _hoisted_11 = [\"disabled\"]\nconst _hoisted_12 = { class: \"collapsable collapsed\" }\nconst _hoisted_13 = { class: \"feedbackContainer\" }\nconst _hoisted_14 = { class: \"feedbackPercentagesChild\" }\nconst _hoisted_15 = [\"onUpdate:modelValue\"]\nconst _hoisted_16 = { class: \"feedbackMessagesChild\" }\nconst _hoisted_17 = [\"onUpdate:modelValue\"]\nconst _hoisted_18 = [\"title\", \"onClick\"]\nconst _hoisted_19 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_studip_wysiwyg = _resolveComponent(\"studip-wysiwyg\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", _hoisted_1, [\n    _createElementVNode(\"fieldset\", null, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Fill in the Blanks')), 1),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addBlank && _ctx.addBlank(...args))),\n          class: \"button\",\n          type: \"button\",\n          style: {\"margin-right\":\"0.1em\"}\n        }, _toDisplayString(_ctx.$gettext('Lcke hinzufgen')), 1),\n        _createElementVNode(\"div\", {\n          class: \"tooltip tooltip-icon\",\n          \"data-tooltip\": _ctx.instructions\n        }, null, 8, _hoisted_3)\n      ]),\n      _createVNode(_component_studip_wysiwyg, {\n        modelValue: _ctx.taskDefinition.template,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.taskDefinition.template) = $event)),\n        ref: \"wysiwyg\"\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"fieldset\", _hoisted_4, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.taskDefinition.caseSensitive) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.caseSensitive]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Gro- und Kleinschreibung beachten')), 1)\n      ]),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.taskDefinition.acceptTypos) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.acceptTypos]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Rechtschreib- oder Tippfehler ignorieren')), 1)\n      ]),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Korrigiert wird')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"select\", {\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.taskDefinition.autoCorrect) = $event))\n        }, [\n          _createElementVNode(\"option\", _hoisted_5, _toDisplayString(_ctx.$gettext('manuell per Button')), 1),\n          _createElementVNode(\"option\", _hoisted_6, _toDisplayString(_ctx.$gettext('automatisch nach Eingabe')), 1)\n        ], 512), [\n          [_vModelSelect, _ctx.taskDefinition.autoCorrect]\n        ])\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.autoCorrect ? 'setting-disabled' : '')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: _ctx.taskDefinition.autoCorrect,\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.taskDefinition.strings.checkButton) = $event))\n        }, null, 8, _hoisted_7), [\n          [_vModelText, _ctx.taskDefinition.strings.checkButton]\n        ])\n      ], 2),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.taskDefinition.retryAllowed) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.retryAllowed]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.retryAllowed ? '' : 'setting-disabled')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: !_ctx.taskDefinition.retryAllowed,\n          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.taskDefinition.strings.retryButton) = $event))\n        }, null, 8, _hoisted_8), [\n          [_vModelText, _ctx.taskDefinition.strings.retryButton]\n        ])\n      ], 2),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.taskDefinition.showSolutionsAllowed) = $event)),\n          onChange: _cache[9] || (_cache[9] = ($event: any) => (\n            !_ctx.taskDefinition.showSolutionsAllowed\n              ? (_ctx.taskDefinition.allBlanksMustBeFilledForSolutions =\n                  _ctx.taskDefinition.showSolutionsAllowed)\n              : ''\n          ))\n        }, null, 544), [\n          [_vModelCheckbox, _ctx.taskDefinition.showSolutionsAllowed]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen knnen angezeigt werden')), 1)\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.showSolutionsAllowed ? '' : 'setting-disabled')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: !_ctx.taskDefinition.showSolutionsAllowed,\n          \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((_ctx.taskDefinition.strings.solutionsButton) = $event))\n        }, null, 8, _hoisted_9), [\n          [_vModelText, _ctx.taskDefinition.strings.solutionsButton]\n        ])\n      ], 2),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.showSolutionsAllowed ? '' : 'setting-disabled')\n      }, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          disabled: !_ctx.taskDefinition.showSolutionsAllowed,\n          \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((_ctx.taskDefinition.allBlanksMustBeFilledForSolutions) = $event))\n        }, null, 8, _hoisted_10), [\n          [_vModelCheckbox, _ctx.taskDefinition.allBlanksMustBeFilledForSolutions]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext(\n            'Alle Lcken mssen ausgefllt sein, um Lsungen anzuzeigen.'\n          )), 1)\n      ], 2),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(\n          _ctx.taskDefinition.allBlanksMustBeFilledForSolutions\n            ? ''\n            : 'setting-disabled'\n        )\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Mitteilung, wenn nicht alle Lcken ausgefllt sind:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: !_ctx.taskDefinition.allBlanksMustBeFilledForSolutions,\n          \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((_ctx.taskDefinition.strings.fillInAllBlanksMessage) = $event)),\n          style: {\"width\":\"100%\"}\n        }, null, 8, _hoisted_11), [\n          [_vModelText, _ctx.taskDefinition.strings.fillInAllBlanksMessage]\n        ])\n      ], 2)\n    ]),\n    _createElementVNode(\"fieldset\", _hoisted_12, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Feedback')), 1),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext(\n            'Ergebnismitteilung (mgliche Variablen :correct und :total):'\n          )) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((_ctx.taskDefinition.strings.resultMessage) = $event)),\n          style: {\"width\":\"100%\"}\n        }, null, 512), [\n          [_vModelText, _ctx.taskDefinition.strings.resultMessage]\n        ])\n      ]),\n      _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext('Benutzerdefiniertes Feedback fr beliebige Punktebereiche:')), 1),\n      _createElementVNode(\"div\", _hoisted_13, [\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext('Prozent')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.taskDefinition.feedback, (feedback, i) => {\n            return _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n              key: i,\n              type: \"number\",\n              min: \"0\",\n              max: \"100\",\n              \"onUpdate:modelValue\": ($event: any) => ((_ctx.taskDefinition.feedback[i].percentage) = $event)\n            }, null, 8, _hoisted_15)), [\n              [_vModelText, _ctx.taskDefinition.feedback[i].percentage]\n            ])\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _createElementVNode(\"label\", null, _toDisplayString(_ctx.$gettext('Mitteilung')), 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.taskDefinition.feedback, (feedback, i) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: \"feedbackMessagesChildSubdivision\",\n              key: i\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"text\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.taskDefinition.feedback[i].message) = $event)\n              }, null, 8, _hoisted_17), [\n                [_vModelText, _ctx.taskDefinition.feedback[i].message]\n              ]),\n              _createElementVNode(\"button\", {\n                type: \"button\",\n                title: _ctx.titleForDeleteButtonForFeedback(feedback),\n                onClick: ($event: any) => (_ctx.removeFeedback(feedback))\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.urlForIcon('trash'),\n                  width: \"16\",\n                  height: \"16\"\n                }, null, 8, _hoisted_19)\n              ], 8, _hoisted_18)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        class: \"button\",\n        onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.addFeedback && _ctx.addFeedback(...args)))\n      }, _toDisplayString(_ctx.$gettext('Neuer Bereich')), 1)\n    ])\n  ]))\n}","\n// Allow us to mutate the prop 'taskDefinition' as much as we want\n// TODO refrain from mutating taskDefinition directly -- it breaks undo/redo\n/* eslint-disable vue/no-mutating-props */\nimport { defineComponent, PropType } from 'vue';\nimport { Feedback, FillInTheBlanksTask } from '@/models/TaskDefinition';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\nimport { $gettext } from '@/language/gettext';\n\nexport default defineComponent({\n  name: 'FillInTheBlanksEditor',\n  components: { StudipWysiwyg },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<FillInTheBlanksTask>,\n      required: true,\n    },\n  },\n  computed: {\n    feedbackSortedByScore(): Feedback[] {\n      return this.taskDefinition.feedback\n        .map((value) => value)\n        .sort((a, b) => b.percentage - a.percentage);\n    },\n    instructions(): string {\n      return $gettext(\n        'Fgen Sie Lcken hinzu, indem Sie ein Sternchen (*) vor und hinter dem korrekten Wort bzw. den Wrtern setzen oder markieren Sie ein Wort und klicken Sie den \"Lcke hinzufgen\"Button.' +\n          ' Sie knnen alternative Antworten mit einem Schrgstrich (/) hinzufgen.' +\n          ' Auerdem knnen Sie einen Tooltip mit einem Doppelpunkt (:) hinzufgen.'\n      );\n    },\n  },\n  methods: {\n    $gettext,\n    titleForDeleteButtonForFeedback(feedback: Feedback): string {\n      return this.$gettext(\n        'Entferne den Feedback-Bereich, der ab %{ percentage }% anfngt.',\n        { percentage: feedback.percentage.toString() }\n      );\n    },\n    /**\n     * Surround the selected text with two asterisks\n     */\n    addBlank() {\n      const wysiwygEl = (this.$refs.wysiwyg as any)?.$el;\n      const editor = window.STUDIP.wysiwyg.getEditor(wysiwygEl);\n      if (!editor) {\n        console.error('getEditor(wysiwygEl) returned: ', editor);\n        throw new Error('Could not get reference to wysiwyg editor');\n      }\n      const selection = editor.model.document.selection;\n      const start = selection.getFirstPosition();\n      const end = selection.getLastPosition();\n      if (!start || !end) {\n        console.error('selection start: ', start, ' selection end: ', end);\n        throw new Error('Could not get selection in editor');\n      }\n      editor.model.change((writer) => {\n        writer.insertText('*', end);\n        writer.insertText('*', start);\n      });\n    },\n    addFeedback(): void {\n      this.taskDefinition.feedback.push({\n        percentage: this.feedbackSortedByScore[0]?.percentage,\n        message: 'Feedback',\n      });\n    },\n    removeFeedback(feedbackToRemove: Feedback): void {\n      this.taskDefinition.feedback = this.taskDefinition.feedback.filter(\n        (feedback) => feedback !== feedbackToRemove\n      );\n    },\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n  },\n});\n","import { render } from \"./FillInTheBlanksEditor.vue?vue&type=template&id=5e59aad6&scoped=true&ts=true\"\nimport script from \"./FillInTheBlanksEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./FillInTheBlanksEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./FillInTheBlanksEditor.vue?vue&type=style&index=0&id=5e59aad6&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5e59aad6\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, vModelText as _vModelText, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-55ecb04c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"default\" }\nconst _hoisted_2 = { class: \"flex-parent-element\" }\nconst _hoisted_3 = [\"onUpdate:modelValue\"]\nconst _hoisted_4 = [\"onUpdate:modelValue\"]\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = [\"src\", \"title\"]\nconst _hoisted_7 = { class: \"collapsable collapsed\" }\nconst _hoisted_8 = [\"onUpdate:modelValue\"]\nconst _hoisted_9 = [\"onUpdate:modelValue\"]\nconst _hoisted_10 = [\"onUpdate:modelValue\"]\nconst _hoisted_11 = { class: \"collapsable collapsed\" }\nconst _hoisted_12 = [\"disabled\"]\nconst _hoisted_13 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_studip_wysiwyg = _resolveComponent(\"studip-wysiwyg\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", _hoisted_1, [\n    _createElementVNode(\"fieldset\", null, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Question')), 1),\n      _createElementVNode(\"label\", null, [\n        _createVNode(_component_studip_wysiwyg, {\n          modelValue: _ctx.taskDefinition.question,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.taskDefinition.question) = $event))\n        }, null, 8, [\"modelValue\"])\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.taskDefinition.answers, (answer, i) => {\n        return (_openBlock(), _createElementBlock(\"fieldset\", {\n          class: \"collapsable collapsed\",\n          key: i\n        }, [\n          _createElementVNode(\"legend\", null, _toDisplayString(answer.text), 1),\n          _createElementVNode(\"div\", _hoisted_2, [\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"flex-child-element checkbox\",\n              type: \"checkbox\",\n              \"onUpdate:modelValue\": ($event: any) => ((_ctx.taskDefinition.answers[i].correct) = $event)\n            }, null, 8, _hoisted_3), [\n              [_vModelCheckbox, _ctx.taskDefinition.answers[i].correct]\n            ]),\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"flex-child-element textbox\",\n              type: \"text\",\n              \"onUpdate:modelValue\": ($event: any) => ((_ctx.taskDefinition.answers[i].text) = $event)\n            }, null, 8, _hoisted_4), [\n              [_vModelText, _ctx.taskDefinition.answers[i].text]\n            ]),\n            _createElementVNode(\"button\", {\n              type: \"button\",\n              class: \"flex-child-element removeAnswerButton\",\n              onClick: ($event: any) => (_ctx.removeAnswer(answer))\n            }, [\n              _createElementVNode(\"img\", {\n                src: _ctx.urlForIcon('trash'),\n                title: _ctx.$gettext('Lschen')\n              }, null, 8, _hoisted_6)\n            ], 8, _hoisted_5)\n          ]),\n          _createElementVNode(\"fieldset\", _hoisted_7, [\n            _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Hinweis und Feedback')), 1),\n            _createElementVNode(\"label\", null, [\n              _createElementVNode(\"span\", null, _toDisplayString(_ctx.$gettext('Hinweis')), 1),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"textbox\",\n                type: \"text\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.taskDefinition.answers[i].strings.hint) = $event)\n              }, null, 8, _hoisted_8), [\n                [_vModelText, _ctx.taskDefinition.answers[i].strings.hint]\n              ])\n            ]),\n            _createElementVNode(\"label\", null, [\n              _createElementVNode(\"span\", null, _toDisplayString(_ctx.$gettext('Feedback wenn ausgewhlt')), 1),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"textbox\",\n                type: \"text\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.taskDefinition.answers[i].strings.feedbackSelected) = $event)\n              }, null, 8, _hoisted_9), [\n                [_vModelText, _ctx.taskDefinition.answers[i].strings.feedbackSelected]\n              ])\n            ]),\n            _createElementVNode(\"label\", null, [\n              _createElementVNode(\"span\", null, _toDisplayString(_ctx.$gettext('Feedback wenn nicht ausgewhlt')), 1),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"textbox\",\n                type: \"text\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.taskDefinition.answers[i].strings.feedbackNotSelected) = $event)\n              }, null, 8, _hoisted_10), [\n                [_vModelText, _ctx.taskDefinition.answers[i].strings.feedbackNotSelected]\n              ])\n            ])\n          ])\n        ]))\n      }), 128)),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        class: \"button\",\n        onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.addAnswer && _ctx.addAnswer(...args)))\n      }, _toDisplayString(_ctx.$gettext('Neue Antwort')), 1)\n    ]),\n    _createElementVNode(\"fieldset\", _hoisted_11, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.taskDefinition.strings.checkButton) = $event))\n        }, null, 512), [\n          [_vModelText, _ctx.taskDefinition.strings.checkButton]\n        ])\n      ]),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.taskDefinition.canAnswerMultiple) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.canAnswerMultiple]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Antworten knnen ausgewhlt werden')), 1)\n      ]),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.taskDefinition.randomOrder) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.randomOrder]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Zeige Antworten in zuflliger Reihenfolge')), 1)\n      ]),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.taskDefinition.retryAllowed) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.retryAllowed]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.retryAllowed ? '' : 'setting-disabled')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: !_ctx.taskDefinition.retryAllowed,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.taskDefinition.strings.retryButton) = $event))\n        }, null, 8, _hoisted_12), [\n          [_vModelText, _ctx.taskDefinition.strings.retryButton]\n        ])\n      ], 2),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.taskDefinition.showSolutionsAllowed) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.showSolutionsAllowed]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen knnen angezeigt werden')), 1)\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.showSolutionsAllowed ? '' : 'setting-disabled')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: !_ctx.taskDefinition.showSolutionsAllowed,\n          \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.taskDefinition.strings.solutionsButton) = $event))\n        }, null, 8, _hoisted_13), [\n          [_vModelText, _ctx.taskDefinition.strings.solutionsButton]\n        ])\n      ], 2)\n    ])\n  ]))\n}","\n// Allow us to mutate the prop 'taskDefinition' as much as we want\n// TODO refrain from mutating taskDefinition directly -- it breaks undo/redo\n/* eslint-disable vue/no-mutating-props */\nimport { defineComponent, PropType } from 'vue';\nimport { QuestionAnswer, QuestionTask } from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\nimport { $gettext } from '@/language/gettext';\n\nexport default defineComponent({\n  name: 'QuestionEditor',\n  components: { StudipWysiwyg },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<QuestionTask>,\n      required: true,\n    },\n  },\n  methods: {\n    $gettext,\n    addAnswer(): void {\n      this.taskDefinition.answers.push({\n        text: this.$gettext('Neue Antwort'),\n        correct: true,\n        strings: {\n          hint: '',\n          feedbackSelected: '',\n          feedbackNotSelected: '',\n        },\n      });\n    },\n    removeAnswer(answerToRemove: QuestionAnswer): void {\n      this.taskDefinition.answers = this.taskDefinition.answers.filter(\n        (answer) => answer !== answerToRemove\n      );\n    },\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n  },\n  computed: {\n    currentUndoRedoState: () =>\n      taskEditorStore.undoRedoStack[taskEditorStore.undoRedoIndex],\n  },\n});\n","import { render } from \"./QuestionEditor.vue?vue&type=template&id=55ecb04c&scoped=true&ts=true\"\nimport script from \"./QuestionEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./QuestionEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./QuestionEditor.vue?vue&type=style&index=0&id=55ecb04c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-55ecb04c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelRadio as _vModelRadio, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-58b3c78b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"h5pModule\" }\nconst _hoisted_2 = [\"innerHTML\"]\nconst _hoisted_3 = [\"value\", \"onUpdate:modelValue\", \"disabled\"]\nconst _hoisted_4 = [\"data-tooltip\"]\nconst _hoisted_5 = {\n  key: 0,\n  class: \"answerFeedback\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"answerFeedback\"\n}\nconst _hoisted_7 = [\"value\", \"disabled\"]\nconst _hoisted_8 = [\"data-tooltip\"]\nconst _hoisted_9 = {\n  key: 0,\n  class: \"answerFeedback\"\n}\nconst _hoisted_10 = {\n  key: 1,\n  class: \"answerFeedback\"\n}\nconst _hoisted_11 = { key: 3 }\nconst _hoisted_12 = {\n  for: \"score\",\n  style: {\"display\":\"block\"}\n}\nconst _hoisted_13 = [\"max\", \"value\"]\nconst _hoisted_14 = [\"src\"]\nconst _hoisted_15 = { class: \"retry-and-show-solutions-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"h5pQuestion\",\n      innerHTML: this.task.question\n    }, null, 8, _hoisted_2),\n    (_ctx.task.canAnswerMultiple)\n      ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(_ctx.answers, (answer, i) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: i }, [\n            _createElementVNode(\"label\", {\n              class: _normalizeClass(_ctx.classForAnswer(answer))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"checkbox\",\n                value: answer.text,\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.selectedAnswers[answer.text]) = $event),\n                disabled: _ctx.isSubmitted\n              }, null, 8, _hoisted_3), [\n                [_vModelCheckbox, _ctx.selectedAnswers[answer.text]]\n              ]),\n              _createTextVNode(\" \" + _toDisplayString(answer.text) + \" \", 1),\n              (answer.strings.hint && !_ctx.isSubmitted)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"tooltip tooltip-icon h5pTooltip\",\n                    \"data-tooltip\": answer.strings.hint\n                  }, null, 8, _hoisted_4))\n                : _createCommentVNode(\"\", true)\n            ], 2),\n            (_ctx.isSubmitted)\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                  (\n              answer.strings.feedbackSelected && _ctx.selectedAnswers[answer.text]\n            )\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString(answer.strings.feedbackSelected), 1))\n                    : (\n              answer.strings.feedbackNotSelected &&\n              !_ctx.selectedAnswers[answer.text]\n            )\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(answer.strings.feedbackNotSelected), 1))\n                      : _createCommentVNode(\"\", true)\n                ], 64))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 128))\n      : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(_ctx.answers, (answer, i) => {\n          return (_openBlock(), _createElementBlock(_Fragment, { key: i }, [\n            _createElementVNode(\"label\", {\n              class: _normalizeClass(_ctx.classForAnswer(answer))\n            }, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"radio\",\n                class: \"answerRadioButton\",\n                value: answer,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.selectedAnswer) = $event)),\n                disabled: _ctx.isSubmitted\n              }, null, 8, _hoisted_7), [\n                [_vModelRadio, _ctx.selectedAnswer]\n              ]),\n              _createTextVNode(\" \" + _toDisplayString(answer.text) + \" \", 1),\n              (answer.strings.hint && !_ctx.isSubmitted)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"tooltip tooltip-icon h5pTooltip\",\n                    \"data-tooltip\": answer.strings.hint\n                  }, null, 8, _hoisted_8))\n                : _createCommentVNode(\"\", true)\n            ], 2),\n            (_ctx.isSubmitted)\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                  (answer.strings.feedbackSelected && _ctx.selectedAnswer == answer)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(answer.strings.feedbackSelected), 1))\n                    : (\n              answer.strings.feedbackNotSelected && _ctx.selectedAnswer !== answer\n            )\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _toDisplayString(answer.strings.feedbackNotSelected), 1))\n                      : _createCommentVNode(\"\", true)\n                ], 64))\n              : _createCommentVNode(\"\", true)\n          ], 64))\n        }), 128)),\n    (!_ctx.isSubmitted)\n      ? (_openBlock(), _createElementBlock(\"button\", {\n          key: 2,\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheck && _ctx.onClickCheck(...args))),\n          class: \"h5pButton\"\n        }, _toDisplayString(this.task.strings.checkButton), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.isSubmitted)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n          _createElementVNode(\"label\", _hoisted_12, _toDisplayString(_ctx.points) + \" \" + _toDisplayString(_ctx.$gettext('von')) + \" \" + _toDisplayString(_ctx.maxPoints) + \" \" + _toDisplayString(_ctx.$gettext('Punkte')) + \".\", 1),\n          _createElementVNode(\"meter\", {\n            id: \"score\",\n            min: \"0\",\n            max: _ctx.maxPoints,\n            value: _ctx.points\n          }, null, 8, _hoisted_13),\n          (_ctx.reachedMaxPoints)\n            ? (_openBlock(), _createElementBlock(\"img\", {\n                key: 0,\n                src: _ctx.urlForIcon('star'),\n                width: \"36\",\n                height: \"36\"\n              }, null, 8, _hoisted_14))\n            : _createCommentVNode(\"\", true)\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_15, [\n      (this.task.retryAllowed && _ctx.isSubmitted)\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 0,\n            onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onClickTryAgain && _ctx.onClickTryAgain(...args))),\n            class: \"h5pButton\"\n          }, _toDisplayString(this.task.strings.retryButton), 1))\n        : _createCommentVNode(\"\", true),\n      (_ctx.showSolutionsButton)\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 1,\n            onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onClickShowSolution && _ctx.onClickShowSolution(...args))),\n            class: \"h5pButton\"\n          }, _toDisplayString(this.task.strings.solutionsButton), 1))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { QuestionAnswer, QuestionTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\n\nexport default defineComponent({\n  name: 'QuestionViewer',\n  props: {\n    task: {\n      type: Object as PropType<QuestionTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      selectedAnswers: {} as Record<string, boolean>,\n      selectedAnswer: this.task.answers[0],\n      isSubmitted: false,\n      showSolutions: false,\n      showFeedback: false,\n      shaking: false,\n    };\n  },\n  methods: {\n    $gettext,\n    onClickCheck(): void {\n      this.isSubmitted = true;\n    },\n    onClickTryAgain(): void {\n      this.isSubmitted = false;\n      this.showSolutions = false;\n      this.selectedAnswers = {};\n    },\n    onClickShowSolution(): void {\n      this.showSolutions = true;\n    },\n    selectAnswer(answer: QuestionAnswer): void {\n      if (this.isSubmitted) return;\n\n      if (this.selectedAnswers[answer.text]) {\n        this.selectedAnswers[answer.text] = false;\n      } else {\n        this.selectedAnswers[answer.text] = true;\n      }\n    },\n    classForAnswer(answer: QuestionAnswer): string {\n      if (this.showSolutions) {\n        if (answer.correct) return 'correctAnswer';\n      }\n\n      if (this.isSubmitted) {\n        if (this.task.canAnswerMultiple) {\n          if (this.selectedAnswers[answer.text]) {\n            if (answer.correct) {\n              return 'correctAnswer';\n            } else {\n              return 'incorrectAnswer';\n            }\n          } else {\n            return 'submittedAnswer';\n          }\n        } else {\n          if (this.selectedAnswer === answer) {\n            if (answer.correct) {\n              return 'correctAnswer';\n            } else {\n              return 'incorrectAnswer';\n            }\n          } else {\n            return 'submittedAnswer';\n          }\n        }\n      } else {\n        return 'answer';\n      }\n    },\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n    shakeit() {\n      this.shaking = true;\n      setTimeout(() => {\n        this.shaking = false;\n      }, 1500);\n    },\n  },\n  computed: {\n    maxPoints(): number {\n      if (this.task.canAnswerMultiple) {\n        let maxPoints = 0;\n        this.task.answers.forEach((answer) => {\n          if (answer.correct) {\n            maxPoints++;\n          }\n        });\n        return maxPoints;\n      } else {\n        return 1;\n      }\n    },\n    points(): number {\n      if (this.task.canAnswerMultiple) {\n        let points = 0;\n\n        this.task.answers.forEach((answer) => {\n          if (this.selectedAnswers[answer.text]) {\n            if (answer.correct) {\n              points++;\n            } else {\n              points--;\n            }\n          }\n        });\n\n        // Cannot get less than 0 points\n        if (points < 0) points = 0;\n\n        return points;\n      } else {\n        return this.selectedAnswer.correct ? 1 : 0;\n      }\n    },\n    answers(): QuestionAnswer[] {\n      if (this.task.randomOrder) {\n        // https://stackoverflow.com/a/46545530\n        let randomizedAnswers = this.task.answers\n          .map((value) => ({ value, sort: Math.random() }))\n          .sort((a, b) => a.sort - b.sort)\n          .map(({ value }) => value);\n        return randomizedAnswers;\n      } else {\n        return this.task.answers;\n      }\n    },\n    showSolutionsButton(): boolean {\n      return this.task.showSolutionsAllowed && this.isSubmitted;\n    },\n    reachedMaxPoints(): boolean {\n      if (this.points === this.maxPoints) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n});\n","import { render } from \"./QuestionViewer.vue?vue&type=template&id=58b3c78b&scoped=true&ts=true\"\nimport script from \"./QuestionViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./QuestionViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./QuestionViewer.vue?vue&type=style&index=0&id=58b3c78b&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58b3c78b\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-39b94baa\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"h5pModule\",\n  ref: \"wrapperElement\"\n}\nconst _hoisted_2 = [\"innerHTML\"]\nconst _hoisted_3 = [\"onDragstart\", \"onDrop\"]\nconst _hoisted_4 = [\"onDrop\", \"onClick\"]\nconst _hoisted_5 = { key: 2 }\nconst _hoisted_6 = [\"data-tooltip\"]\nconst _hoisted_7 = [\"onDragstart\", \"onClick\"]\nconst _hoisted_8 = { class: \"h5pFeedbackContainer\" }\nconst _hoisted_9 = { class: \"h5pFeedbackContainerTop\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_11 = {\n  key: 1,\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_12 = { class: \"h5pFeedbackContainerCenter\" }\nconst _hoisted_13 = { key: 0 }\nconst _hoisted_14 = [\"max\", \"value\"]\nconst _hoisted_15 = {\n  for: \"score\",\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_16 = { class: \"h5pFeedbackContainerBottom\" }\nconst _hoisted_17 = {\n  key: 1,\n  class: \"h5pFeedbackResultAndButtons\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.parsedTemplate, (element) => {\n      return (_openBlock(), _createElementBlock(_Fragment, {\n        key: element.uuid\n      }, [\n        (element.type === 'staticText')\n          ? (_openBlock(), _createElementBlock(\"span\", {\n              key: 0,\n              innerHTML: element.text\n            }, null, 8, _hoisted_2))\n          : (element.type === 'blank')\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                (_ctx.userInputs[element.uuid])\n                  ? (_openBlock(), _createElementBlock(\"span\", {\n                      key: 0,\n                      class: _normalizeClass(_ctx.classForFilledBlank(element)),\n                      draggable: \"true\",\n                      onDragstart: ($event: any) => (\n            _ctx.startDragUsedAnswer($event, element, _ctx.userInputs[element.uuid])\n          ),\n                      onDrop: ($event: any) => (_ctx.onDropBlank($event, element)),\n                      onDragover: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n                      onDragenter: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"prevent\"]))\n                    }, _toDisplayString(_ctx.getAnswerById(_ctx.userInputs[element.uuid])?.text), 43, _hoisted_3))\n                  : (_openBlock(), _createElementBlock(\"span\", {\n                      key: 1,\n                      class: \"h5pBlank\",\n                      onDrop: ($event: any) => (_ctx.onDropBlank($event, element)),\n                      onDragover: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"prevent\"])),\n                      onDragenter: _cache[3] || (_cache[3] = _withModifiers(() => {}, [\"prevent\"])),\n                      onClick: ($event: any) => (_ctx.onClickBlank(element))\n                    }, \" \", 40, _hoisted_4)),\n                (element.hint)\n                  ? (_openBlock(), _createElementBlock(\"label\", _hoisted_5, [\n                      _createElementVNode(\"span\", {\n                        class: \"tooltip tooltip-icon\",\n                        \"data-tooltip\": element.hint\n                      }, null, 8, _hoisted_6)\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ], 64))\n            : _createCommentVNode(\"\", true)\n      ], 64))\n    }), 128)),\n    _createElementVNode(\"div\", {\n      class: \"unused-answers-list\",\n      onDrop: _cache[4] || (_cache[4] = ($event: any) => (_ctx.onDropUnusedAnswers($event))),\n      onDragover: _cache[5] || (_cache[5] = _withModifiers(() => {}, [\"prevent\"])),\n      onDragenter: _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"prevent\"]))\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.unusedAnswers, (answer) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: answer.uuid\n        }, [\n          _createElementVNode(\"span\", {\n            class: \"h5pBlankSolution\",\n            draggable: \"true\",\n            onDragstart: ($event: any) => (_ctx.startDragUnusedAnswer($event, answer)),\n            onClick: ($event: any) => (_ctx.onClickUnusedAnswer(answer))\n          }, _toDisplayString(answer.text), 41, _hoisted_7)\n        ]))\n      }), 128))\n    ], 32),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _createElementVNode(\"div\", _hoisted_9, [\n        (_ctx.showFillInAllTheBlanksMessage)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _toDisplayString(this.task.strings.fillInAllBlanksMessage\n              ? this.task.strings.fillInAllBlanksMessage\n              : _ctx.$gettext(\n                  'Alle Lcken mssen ausgefllt sein, um Lsungen anzuzeigen'\n                )), 1))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showResults && _ctx.feedbackMessage)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(this.feedbackMessage), 1))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        (_ctx.showResults)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n              _createElementVNode(\"meter\", {\n                id: \"score\",\n                min: \"0\",\n                max: _ctx.maxPoints,\n                value: _ctx.correctAnswers\n              }, null, 8, _hoisted_14),\n              _createElementVNode(\"label\", _hoisted_15, _toDisplayString(this.resultMessage), 1)\n            ]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_16, [\n        (_ctx.showCheckButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheck && _ctx.onClickCheck(...args))),\n              class: \"h5pButton\"\n            }, _toDisplayString(this.task.strings.checkButton), 1))\n          : _createCommentVNode(\"\", true),\n        (_ctx.showExtraButtons)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n              (!_ctx.showSolutions && this.task.showSolutionsAllowed)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 0,\n                    onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onClickShowSolution && _ctx.onClickShowSolution(...args))),\n                    class: \"h5pButton\"\n                  }, _toDisplayString(this.task.strings.solutionsButton), 1))\n                : _createCommentVNode(\"\", true),\n              (this.task.retryAllowed)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 1,\n                    onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onClickTryAgain && _ctx.onClickTryAgain(...args))),\n                    class: \"h5pButton\"\n                  }, _toDisplayString(this.task.strings.retryButton), 1))\n                : _createCommentVNode(\"\", true)\n            ]))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ], 512))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { DragTheWordsTask, Feedback } from '@/models/TaskDefinition';\nimport { v4 as uuidv4 } from 'uuid';\nimport { isEqual, round } from 'lodash';\nimport { $gettext } from '@/language/gettext';\n\ntype DragTheWordsElement = Blank | StaticText;\n\ninterface Blank {\n  type: 'blank';\n  uuid: Uuid;\n  solution: string;\n  hint: string;\n}\n\ninterface Answer {\n  uuid: Uuid;\n  text: string;\n}\n\ntype StaticText = {\n  type: 'staticText';\n  uuid: Uuid;\n  text: string;\n};\n\ntype Uuid = string;\n\nexport default defineComponent({\n  name: 'DragTheWordsViewer',\n  components: {},\n  props: {\n    task: {\n      type: Object as PropType<DragTheWordsTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      // Map from Blank IDs to Answer IDs\n      userInputs: {} as Record<Uuid, Uuid>,\n      submittedAnswers: null as Record<Uuid, Uuid> | null,\n      debug: false,\n      userWantsToSeeSolutions: false,\n      draggedAnswerId: undefined as Uuid | undefined,\n      draggedSourceId: undefined as Uuid | undefined,\n      clickedAnswerId: undefined as Uuid | undefined,\n    };\n  },\n  methods: {\n    $gettext,\n\n    submittedAnswerIsCorrect(blank: Blank): boolean {\n      const submittedAnswerId = this.submittedAnswers?.[blank.uuid];\n      if (!submittedAnswerId) return false;\n\n      const submittedAnswer = this.getAnswerById(submittedAnswerId)?.text;\n      if (!submittedAnswer) return false;\n\n      return this.isAnswerCorrect(submittedAnswer, blank.solution);\n    },\n\n    isAnswerCorrect(userAnswer: string, solution: string): boolean {\n      return userAnswer === solution;\n    },\n\n    updateAttempt() {\n      // Tell the server which blanks were filled out correctly.\n      const points = {} as Record<string, number>;\n      this.blanks.forEach((blank, index) => {\n        // TODO Consider what the key should be. This is a bit ugly.\n        // The key is shown directly in the 'assessment' UI.\n        // Maybe we should change how that works?\n        points[`${index} - ${blank.solution}`] = this.submittedAnswerIsCorrect(\n          blank\n        )\n          ? 1\n          : 0;\n      });\n      this.$emit('updateAttempt', {\n        points,\n        // The attempt is marked as successful if all answers were correct.\n        success: this.correctAnswers === this.blanks.length,\n      });\n    },\n\n    getElement(elementId: Uuid): DragTheWordsElement {\n      const el = this.parsedTemplate.find((el) => el.uuid === elementId);\n      if (!el) {\n        throw new Error(\n          'The given element does not exist in parsedTemplate: ' + elementId\n        );\n      }\n      return el;\n    },\n\n    startDragUsedAnswer(\n      dragEvent: DragEvent,\n      blank: Blank,\n      answerId: Uuid\n    ): void {\n      if (dragEvent.dataTransfer) {\n        dragEvent.dataTransfer.dropEffect = 'move';\n        dragEvent.dataTransfer.effectAllowed = 'move';\n      }\n      const answer = this.getAnswerById(answerId);\n      console.log('Dragging answer: ', answer, 'From blank: ', blank);\n\n      for (const property in this.userInputs) {\n        console.log(property);\n      }\n\n      this.draggedAnswerId = answerId;\n    },\n\n    startDragUnusedAnswer(dragEvent: DragEvent, answer: Answer): void {\n      if (dragEvent.dataTransfer) {\n        dragEvent.dataTransfer.dropEffect = 'move';\n        dragEvent.dataTransfer.effectAllowed = 'move';\n\n        console.log('Dragging answer: ', answer);\n        this.draggedAnswerId = answer.uuid;\n      }\n    },\n\n    onDropBlank(dragEvent: DragEvent, blank: Blank): void {\n      if (!this.draggedAnswerId) {\n        throw new Error('Dragged answer id is undefined');\n      }\n\n      console.log('Dropped answer :', this.draggedAnswer, 'on blank: ', blank);\n\n      // Remove the dropped answer from the blank, if any, where it has been dragged from\n      const previousBlank = this.blanks.find(\n        (blank) => this.userInputs[blank.uuid] === this.draggedAnswerId\n      );\n\n      if (previousBlank) {\n        delete this.userInputs[previousBlank.uuid];\n      }\n\n      // Set the answer for the blank where the answer was dropped\n      this.userInputs[blank.uuid] = this.draggedAnswerId;\n\n      this.draggedAnswerId = undefined;\n    },\n\n    onDropUnusedAnswers(ev: DragEvent): void {\n      console.error('Not implemented');\n      ev.preventDefault(); // Indicate that dropping is al\n      if (!this.draggedAnswer) {\n        throw new Error('draggedAnswer is undefined');\n      }\n      // Remove the dropped answer from the blank, if any, where it has been dragged from\n      const blank = this.blanks.find(\n        (blank) => this.userInputs[blank.uuid] === this.draggedAnswerId\n      );\n      if (blank) {\n        delete this.userInputs[blank.uuid];\n      }\n    },\n\n    onClickCheck() {\n      // Save a copy of the user's inputs.\n      this.submittedAnswers = { ...this.userInputs };\n    },\n\n    onClickShowSolution() {\n      this.userWantsToSeeSolutions = true;\n    },\n\n    onClickTryAgain() {\n      this.userWantsToSeeSolutions = false;\n      this.userInputs = {};\n      this.submittedAnswers = null;\n    },\n\n    classForFilledBlank(blank: Blank) {\n      if (!this.submittedAnswers) {\n        return 'h5pFilledBlank';\n      }\n\n      if (this.userInputs?.[blank.uuid]) {\n        if (this.submittedAnswerIsCorrect(blank)) {\n          return 'h5pFilledBlank h5pBlankCorrect';\n        } else {\n          const userInputHasChangedAfterSubmitting =\n            this.submittedAnswers?.[blank.uuid] !==\n            this.userInputs?.[blank.uuid];\n          if (!userInputHasChangedAfterSubmitting) {\n            return 'h5pFilledBlank h5pBlankIncorrect';\n          } else {\n            return 'h5pFilledBlank';\n          }\n        }\n      } else {\n        return 'h5pBlank';\n      }\n    },\n\n    getAnswerById(id: Uuid): Answer | undefined {\n      return this.answers.find((answer) => answer.uuid === id);\n    },\n\n    onClickUnusedAnswer(answer: Answer): void {\n      console.log('Clicked answer:', answer);\n      this.clickedAnswerId = answer.uuid;\n    },\n\n    onClickBlank(blank: Blank): void {\n      console.log('Clicked blank:', blank);\n      if (!this.clickedAnswerId) return;\n      this.userInputs[blank.uuid] = this.clickedAnswerId;\n      this.clickedAnswerId = undefined;\n    },\n  },\n  computed: {\n    splitTemplate(): string[] {\n      // Returns an array where the even indexes are the static text portions,\n      // and the odd indexes are the blanks.\n      return this.task.template.split(/\\*([^*]*)\\*/);\n    },\n\n    parsedTemplate(): DragTheWordsElement[] {\n      return this.splitTemplate.map((value, index) => {\n        if (index % 2 === 0) {\n          return { type: 'staticText', text: value, uuid: uuidv4() };\n        } else {\n          let splitString = value.split(':');\n          let solution = splitString[0];\n          let hint = splitString[1];\n          return {\n            type: 'blank',\n            solution: solution,\n            hint: hint,\n            uuid: uuidv4(),\n          };\n        }\n      });\n    },\n\n    blanks(): Blank[] {\n      return this.parsedTemplate.filter(\n        (word) => word.type === 'blank'\n      ) as Blank[];\n    },\n\n    answers(): Answer[] {\n      return this.blanks.map((blank) => ({\n        uuid: uuidv4(),\n        text: blank.solution,\n      }));\n    },\n\n    draggedAnswer(): Answer | undefined {\n      if (!this.draggedAnswerId) {\n        return undefined;\n      } else {\n        return this.getAnswerById(this.draggedAnswerId);\n      }\n    },\n\n    randomizedAnswers(): Answer[] {\n      // https://stackoverflow.com/a/46545530\n      return this.answers\n        .map((value) => ({ value, sort: Math.random() }))\n        .sort((a, b) => a.sort - b.sort)\n        .map(({ value }) => value);\n    },\n\n    sortedAnswers(): Answer[] {\n      // https://stackoverflow.com/a/45544166\n      return this.answers\n        .map((value) => value)\n        .sort((a, b) => a.text.localeCompare(b.text));\n    },\n\n    blanksFilled(): number {\n      if (!this.submittedAnswers) {\n        return 0;\n      } else {\n        return Object.keys(this.submittedAnswers).length;\n      }\n    },\n\n    allBlanksAreFilled(): boolean {\n      return this.blanksFilled == this.blanks.length;\n    },\n\n    correctAnswers(): number {\n      return this.blanks.filter((blank) => this.submittedAnswerIsCorrect(blank))\n        .length;\n    },\n\n    allAnswersAreCorrect(): boolean {\n      return this.blanks.every((blank) => this.submittedAnswerIsCorrect(blank));\n    },\n\n    maxPoints(): number {\n      return this.blanks.length;\n    },\n\n    unusedAnswers(): Answer[] {\n      if (this.task.alphabeticOrder) {\n        return this.sortedAnswers.filter(\n          (answer) => !Object.values(this.userInputs).includes(answer.uuid)\n        );\n      } else {\n        return this.randomizedAnswers.filter(\n          (answer) => !Object.values(this.userInputs).includes(answer.uuid)\n        );\n      }\n    },\n\n    inputHasChanged(): boolean {\n      return !isEqual(this.submittedAnswers, this.userInputs);\n    },\n\n    showExtraButtons(): boolean {\n      if (this.task.instantFeedback) {\n        if (this.allBlanksAreFilled) {\n          return (\n            this.submittedAnswers !== null &&\n            !this.inputHasChanged &&\n            !this.allAnswersAreCorrect\n          );\n        } else {\n          return false;\n        }\n      } else {\n        return (\n          this.submittedAnswers !== null &&\n          !this.inputHasChanged &&\n          !this.allAnswersAreCorrect\n        );\n      }\n    },\n\n    showCheckButton(): boolean {\n      return (\n        (this.submittedAnswers === null || this.inputHasChanged) &&\n        !this.task.instantFeedback\n      );\n    },\n\n    showSolutionButton(): boolean {\n      return !this.showSolutions && this.task.showSolutionsAllowed;\n    },\n\n    showRetryButton(): boolean {\n      return this.task.retryAllowed && this.submittedAnswers !== null;\n    },\n\n    showSolutions(): boolean {\n      return (\n        this.userWantsToSeeSolutions &&\n        (this.allBlanksAreFilled ||\n          !this.task.allBlanksMustBeFilledForSolutions)\n      );\n    },\n\n    showFillInAllTheBlanksMessage(): boolean {\n      return (\n        this.task.allBlanksMustBeFilledForSolutions &&\n        this.userWantsToSeeSolutions &&\n        !this.allBlanksAreFilled &&\n        !this.inputHasChanged\n      );\n    },\n\n    showResults(): boolean {\n      return (\n        !(this.submittedAnswers === null) &&\n        !this.showFillInAllTheBlanksMessage &&\n        (!this.task.instantFeedback || this.allBlanksAreFilled) &&\n        !this.inputHasChanged\n      );\n    },\n\n    resultMessage(): string {\n      let resultMessage = this.task.strings.resultMessage.replace(\n        ':correct',\n        this.correctAnswers.toString()\n      );\n\n      resultMessage = resultMessage.replace(\n        ':total',\n        this.blanks.length.toString()\n      );\n\n      return resultMessage;\n    },\n\n    feedbackMessage(): string | undefined {\n      const percentageCorrect = round(\n        (this.correctAnswers / this.blanks.length) * 100\n      );\n\n      for (const feedback of this.feedbackSortedByScore) {\n        if (percentageCorrect >= feedback.percentage) {\n          return feedback.message;\n        }\n      }\n\n      return undefined;\n    },\n\n    feedbackSortedByScore(): Feedback[] {\n      return this.task.feedback\n        .map((value) => value)\n        .sort((a, b) => b.percentage - a.percentage);\n    },\n  },\n});\n","import { render } from \"./DragTheWordsViewer.vue?vue&type=template&id=39b94baa&scoped=true&ts=true\"\nimport script from \"./DragTheWordsViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./DragTheWordsViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./DragTheWordsViewer.vue?vue&type=style&index=0&id=39b94baa&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39b94baa\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createTextVNode as _createTextVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, vModelCheckbox as _vModelCheckbox, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5eb7acb3\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"default\" }\nconst _hoisted_2 = { class: \"h5pEditorTopPanel\" }\nconst _hoisted_3 = [\"data-tooltip\"]\nconst _hoisted_4 = { class: \"collapsable collapsed\" }\nconst _hoisted_5 = { value: false }\nconst _hoisted_6 = { value: true }\nconst _hoisted_7 = [\"disabled\"]\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = [\"disabled\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_studip_wysiwyg = _resolveComponent(\"studip-wysiwyg\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", _hoisted_1, [\n    _createElementVNode(\"fieldset\", null, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Drag the Words')), 1),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addBlank && _ctx.addBlank(...args))),\n          class: \"button\",\n          type: \"button\",\n          style: {\"margin-right\":\"0.1em\"}\n        }, _toDisplayString(_ctx.$gettext('Lcke hinzufgen')), 1),\n        _createElementVNode(\"div\", {\n          class: \"tooltip tooltip-icon\",\n          \"data-tooltip\": _ctx.instructions\n        }, null, 8, _hoisted_3)\n      ]),\n      _createVNode(_component_studip_wysiwyg, {\n        modelValue: _ctx.taskDefinition.template,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.taskDefinition.template) = $event)),\n        ref: \"wysiwyg\"\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"fieldset\", _hoisted_4, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Korrigiert wird')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"select\", {\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.taskDefinition.instantFeedback) = $event))\n        }, [\n          _createElementVNode(\"option\", _hoisted_5, _toDisplayString(_ctx.$gettext('manuell per Button')), 1),\n          _createElementVNode(\"option\", _hoisted_6, _toDisplayString(_ctx.$gettext('automatisch nach Eingabe')), 1)\n        ], 512), [\n          [_vModelSelect, _ctx.taskDefinition.instantFeedback]\n        ])\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.instantFeedback ? 'setting-disabled' : '')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: _ctx.taskDefinition.instantFeedback,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.taskDefinition.strings.checkButton) = $event))\n        }, null, 8, _hoisted_7), [\n          [_vModelText, _ctx.taskDefinition.strings.checkButton]\n        ])\n      ], 2),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.taskDefinition.alphabeticOrder) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.alphabeticOrder]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Antworten alphabetisch sortieren')), 1)\n      ]),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.taskDefinition.retryAllowed) = $event))\n        }, null, 512), [\n          [_vModelCheckbox, _ctx.taskDefinition.retryAllowed]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Mehrere Versuche erlauben')), 1)\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.retryAllowed ? '' : 'setting-disabled')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: !_ctx.taskDefinition.retryAllowed,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.taskDefinition.strings.retryButton) = $event))\n        }, null, 8, _hoisted_8), [\n          [_vModelText, _ctx.taskDefinition.strings.retryButton]\n        ])\n      ], 2),\n      _createElementVNode(\"label\", null, [\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"checkbox\",\n          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.taskDefinition.showSolutionsAllowed) = $event)),\n          onChange: _cache[8] || (_cache[8] = ($event: any) => (\n            !_ctx.taskDefinition.showSolutionsAllowed\n              ? (_ctx.taskDefinition.allBlanksMustBeFilledForSolutions =\n                  _ctx.taskDefinition.showSolutionsAllowed)\n              : ''\n          ))\n        }, null, 544), [\n          [_vModelCheckbox, _ctx.taskDefinition.showSolutionsAllowed]\n        ]),\n        _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Lsungen knnen angezeigt werden')), 1)\n      ]),\n      _createElementVNode(\"label\", {\n        class: _normalizeClass(_ctx.taskDefinition.showSolutionsAllowed ? '' : 'setting-disabled')\n      }, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Text im Button:')) + \" \", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"text\",\n          disabled: !_ctx.taskDefinition.showSolutionsAllowed,\n          \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.taskDefinition.strings.solutionsButton) = $event))\n        }, null, 8, _hoisted_9), [\n          [_vModelText, _ctx.taskDefinition.strings.solutionsButton]\n        ])\n      ], 2)\n    ])\n  ]))\n}","\n// Allow us to mutate the prop 'taskDefinition' as much as we want.\n// TODO refrain from mutating taskDefinition directly -- it breaks undo/redo\n/* eslint-disable vue/no-mutating-props */\nimport { defineComponent, PropType } from 'vue';\nimport { DragTheWordsTask } from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport { $gettext } from '@/language/gettext';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\n\nexport default defineComponent({\n  name: 'DragTheWordsEditor',\n  components: { StudipWysiwyg },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<DragTheWordsTask>,\n      required: true,\n    },\n  },\n  computed: {\n    currentUndoRedoState: () =>\n      taskEditorStore.undoRedoStack[taskEditorStore.undoRedoIndex],\n    instructions(): string {\n      return $gettext(\n        'Fgen Sie Lcken hinzu, indem Sie ein Sternchen (*) vor und hinter dem korrekten Wort bzw. den Wrtern setzen oder markieren Sie ein Wort und klicken Sie den \"Lcke hinzufgen\"Button.' +\n          ' Auerdem knnen Sie einen Tooltip mit einem Doppelpunkt (:) hinzufgen.'\n      );\n    },\n  },\n  methods: {\n    $gettext,\n    /**\n     * Surround the selected text with two asterisks\n     */\n    addBlank() {\n      const wysiwygEl = (this.$refs.wysiwyg as any)?.$el;\n      const editor = window.STUDIP.wysiwyg.getEditor(wysiwygEl);\n      if (!editor) {\n        console.error('getEditor(wysiwygEl) returned: ', editor);\n        throw new Error('Could not get reference to wysiwyg editor');\n      }\n      const selection = editor.model.document.selection;\n      const start = selection.getFirstPosition();\n      const end = selection.getLastPosition();\n      if (!start || !end) {\n        console.error('selection start: ', start, ' selection end: ', end);\n        throw new Error('Could not get selection in editor');\n      }\n      editor.model.change((writer) => {\n        writer.insertText('*', end);\n        writer.insertText('*', start);\n      });\n    },\n  },\n});\n","import { render } from \"./DragTheWordsEditor.vue?vue&type=template&id=5eb7acb3&scoped=true&ts=true\"\nimport script from \"./DragTheWordsEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./DragTheWordsEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./DragTheWordsEditor.vue?vue&type=style&index=0&id=5eb7acb3&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5eb7acb3\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-53a76878\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"h5pModule\" }\nconst _hoisted_2 = { ref: \"wrapperElement\" }\nconst _hoisted_3 = [\"aria-pressed\", \"onClick\", \"onKeydown\", \"onKeyup\", \"innerHTML\"]\nconst _hoisted_4 = {\n  key: 0,\n  class: \"space\"\n}\nconst _hoisted_5 = { key: 1 }\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" Marked words: \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" template: \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" Split template: \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" Parsed template: \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_feedback_element = _resolveComponent(\"feedback-element\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.parsedTemplate, (element, index) => {\n        return (_openBlock(), _createElementBlock(\"span\", {\n          key: element.uuid\n        }, [\n          _createElementVNode(\"span\", {\n            tabindex: \"0\",\n            role: \"button\",\n            \"aria-pressed\": _ctx.isMarked(element),\n            onClick: ($event: any) => (_ctx.onClickWord(element)),\n            onKeydown: (event) => _ctx.onWordKeydown(event, element),\n            onKeyup: (event) => _ctx.onWordKeyup(event, element),\n            class: _normalizeClass(_ctx.classForWord(element)),\n            innerHTML: element.text\n          }, null, 42, _hoisted_3),\n          (index < _ctx.parsedTemplate.length - 1)\n            ? (_openBlock(), _createElementBlock(\"pre\", _hoisted_4, \" \"))\n            : _createCommentVNode(\"\", true)\n        ]))\n      }), 128))\n    ], 512),\n    _createElementVNode(\"div\", null, [\n      (_ctx.showCheckButton)\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 0,\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClickCheck && _ctx.onClickCheck(...args))),\n            class: \"h5pButton\"\n          }, _toDisplayString(this.task.strings.checkButton), 1))\n        : _createCommentVNode(\"\", true),\n      (_ctx.showRetryButton)\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 1,\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onClickRetry && _ctx.onClickRetry(...args))),\n            class: \"h5pButton\"\n          }, _toDisplayString(this.task.strings.retryButton), 1))\n        : _createCommentVNode(\"\", true)\n    ]),\n    (_ctx.showResults)\n      ? (_openBlock(), _createBlock(_component_feedback_element, {\n          key: 0,\n          message: _ctx.feedbackMessage,\n          \"achieved-points\": _ctx.score,\n          \"max-points\": _ctx.maxScore\n        }, null, 8, [\"message\", \"achieved-points\", \"max-points\"]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.debug)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n          _hoisted_6,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.markedWords), 1),\n          _hoisted_7,\n          _createElementVNode(\"pre\", null, _toDisplayString(this.task.template), 1),\n          _hoisted_8,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.splitTemplate), 1),\n          _hoisted_9,\n          _createElementVNode(\"pre\", null, _toDisplayString(_ctx.parsedTemplate), 1)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"h5pFeedbackContainer\" }\nconst _hoisted_2 = { class: \"h5pFeedbackContainerTop\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_4 = [\"max\", \"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_ctx.message)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"meter\", {\n        id: \"score\",\n        min: \"0\",\n        max: _ctx.maxPoints,\n        value: _ctx.achievedPoints\n      }, null, 8, _hoisted_4)\n    ])\n  ]))\n}","\n// need v-model to provide and get content -> <studip-wysiwyg v-model=\"content\" />\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'feedback-element',\n  props: {\n    message: String,\n    maxPoints: Number,\n    achievedPoints: Number,\n  },\n  data() {\n    return {};\n  },\n  mounted() {},\n  methods: {},\n});\n","import { render } from \"./FeedbackElement.vue?vue&type=template&id=6b57fbda&ts=true\"\nimport script from \"./FeedbackElement.vue?vue&type=script&lang=ts\"\nexport * from \"./FeedbackElement.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { MarkTheWordsTask } from '@/models/TaskDefinition';\nimport { v4 as uuidv4 } from 'uuid';\nimport FeedbackElement from '@/components/FeedbackElement.vue';\n\ntype MarkTheWordsElement = {\n  uuid: Uuid;\n  text: string;\n  correct: boolean;\n};\n\ntype Uuid = string;\n\nexport default defineComponent({\n  name: 'MarkTheWordsViewer',\n  props: {\n    task: {\n      type: Object as PropType<MarkTheWordsTask>,\n      required: true,\n    },\n  },\n  components: {\n    FeedbackElement,\n  },\n  data() {\n    return {\n      markedWords: new Set<MarkTheWordsElement>(),\n      showResults: false,\n      debug: false,\n    };\n  },\n\n  methods: {\n    onClickCheck() {\n      this.showResults = true;\n    },\n\n    onClickRetry() {\n      this.showResults = false;\n      this.markedWords.clear();\n    },\n\n    onClickWord(word: MarkTheWordsElement) {\n      if (this.showResults) return;\n\n      if (this.isMarked(word)) {\n        this.markedWords.delete(word);\n      } else {\n        this.markedWords.add(word);\n      }\n    },\n\n    /**\n     * Marks/unmarks a word using the enter key.\n     */\n    onWordKeydown(event: KeyboardEvent, word: MarkTheWordsElement) {\n      // The action button is activated by space on the keyup event, but the\n      // default action for space is already triggered on keydown. It needs to be\n      // prevented to stop scrolling the page before activating the button.\n      if (event.code === 'Space') {\n        event.preventDefault();\n      }\n      // If enter is pressed, activate the button\n      else if (event.code === 'Enter' || event.code === 'Return') {\n        event.preventDefault();\n        this.onClickWord(word);\n      }\n    },\n\n    /**\n     * Marks/unmarks a word with the space key.\n     */\n    onWordKeyup(event: KeyboardEvent, word: MarkTheWordsElement) {\n      if (event.code === 'Space') {\n        event.preventDefault();\n        this.onClickWord(word);\n      }\n    },\n\n    classForWord(word: MarkTheWordsElement) {\n      if (this.showResults) {\n        // User is done marking words and wants to see the results\n        if (this.isMarked(word)) {\n          if (word.correct) {\n            return 'h5pCorrectAnswer';\n          } else {\n            return 'h5pIncorrectAnswer';\n          }\n        } else {\n          return 'h5pStaticText';\n        }\n      } else {\n        // User is working on the task\n        if (this.isMarked(word)) {\n          return 'h5pMarkedWord';\n        } else {\n          return 'h5pStaticText';\n        }\n      }\n    },\n\n    isMarked(word: MarkTheWordsElement): boolean {\n      return this.markedWords.has(word);\n    },\n  },\n  computed: {\n    /**\n     * Returns an array where the even indexes are the static text portions,\n     * and the odd indexes are the correct words to be marked.\n     */\n    splitTemplate(): string[] {\n      // Split the text into chunks based on pairs of asterisks\n      return this.task.template.split(/\\*([^*]*)\\*/);\n    },\n\n    parsedTemplate(): MarkTheWordsElement[] {\n      let parsedTemplate: MarkTheWordsElement[] = [];\n      this.splitTemplate.forEach((templateElement, i) => {\n        if (i % 2 === 0) {\n          // Even indexes are the static text portions which we split further by spaces here\n          templateElement\n            .trim()\n            .split(' ')\n            .filter((el) => el !== '')\n            .forEach((staticWord) => {\n              parsedTemplate.push({\n                uuid: uuidv4(),\n                text: staticWord,\n                correct: false,\n              });\n            });\n        } else {\n          parsedTemplate.push({\n            uuid: uuidv4(),\n            text: templateElement,\n            correct: true,\n          });\n        }\n      });\n      return parsedTemplate;\n    },\n    showCheckButton(): boolean {\n      return !this.showResults;\n    },\n    showRetryButton(): boolean {\n      return this.task.retryAllowed && this.showResults;\n    },\n    score(): number {\n      let score = 0;\n\n      for (const element of this.markedWords) {\n        if (element.correct) {\n          score++;\n        } else {\n          score--;\n        }\n      }\n\n      if (score < 0) score = 0;\n\n      return score;\n    },\n    maxScore(): number {\n      let maxScore = 0;\n      for (const element of this.parsedTemplate) {\n        if (element.correct) maxScore++;\n      }\n      return maxScore;\n    },\n    feedbackMessage(): string {\n      return this.score + ' / ' + this.maxScore;\n    },\n  },\n});\n","import { render } from \"./MarkTheWordsViewer.vue?vue&type=template&id=53a76878&scoped=true&ts=true\"\nimport script from \"./MarkTheWordsViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./MarkTheWordsViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./MarkTheWordsViewer.vue?vue&type=style&index=0&id=53a76878&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53a76878\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"default\" }\nconst _hoisted_2 = { class: \"h5pEditorTopPanel\" }\nconst _hoisted_3 = [\"data-tooltip\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StudipWysiwyg = _resolveComponent(\"StudipWysiwyg\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", _hoisted_1, [\n    _createElementVNode(\"fieldset\", null, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Mark the Words')), 1),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addSolution && _ctx.addSolution(...args))),\n          class: \"button\",\n          type: \"button\",\n          style: {\"margin-right\":\"0.1em\"}\n        }, _toDisplayString(_ctx.$gettext('Richtiges Wort markieren')), 1),\n        _createElementVNode(\"div\", {\n          class: \"tooltip tooltip-icon\",\n          \"data-tooltip\": _ctx.instructions\n        }, null, 8, _hoisted_3)\n      ]),\n      _createVNode(_component_StudipWysiwyg, {\n        modelValue: _ctx.taskDefinition.template,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.taskDefinition.template) = $event)),\n        ref: \"wysiwyg\"\n      }, null, 8, [\"modelValue\"])\n    ])\n  ]))\n}","\n// Allow us to mutate the prop 'taskDefinition' as much as we want\n// TODO refrain from mutating taskDefinition directly -- it breaks undo/redo\n/* eslint-disable vue/no-mutating-props */\nimport { defineComponent, PropType } from 'vue';\nimport { MarkTheWordsTask } from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport { $gettext } from '@/language/gettext';\nimport StudipWysiwyg from '@/components/StudipWysiwyg.vue';\n\nexport default defineComponent({\n  name: 'MarkTheWordsEditor',\n  components: { StudipWysiwyg },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<MarkTheWordsTask>,\n      required: true,\n    },\n  },\n  methods: {\n    $gettext,\n    /**\n     * Surround the selected text with two asterisks\n     */\n    addSolution() {\n      const wysiwygEl = (this.$refs.wysiwyg as any)?.$el;\n      const editor = window.STUDIP.wysiwyg.getEditor(wysiwygEl);\n      if (!editor) {\n        console.error('getEditor(wysiwygEl) returned: ', editor);\n        throw new Error('Could not get reference to wysiwyg editor');\n      }\n      const selection = editor.model.document.selection;\n      const start = selection.getFirstPosition();\n      const end = selection.getLastPosition();\n      if (!start || !end) {\n        console.error('selection start: ', start, ' selection end: ', end);\n        throw new Error('Could not get selection in editor');\n      }\n      editor.model.change((writer) => {\n        writer.insertText('*', end);\n        writer.insertText('*', start);\n      });\n    },\n  },\n\n  computed: {\n    instructions(): string {\n      return $gettext(\n        'Markieren Sie ein Wort als Lsung, indem Sie ein Sternchen (*) vor und hinter dem Wort setzen oder markieren Sie ein Wort und klicken Sie den \"Richtiges Wort markieren\"Button.'\n      );\n    },\n  },\n});\n","import { render } from \"./MarkTheWordsEditor.vue?vue&type=template&id=158e0744&ts=true\"\nimport script from \"./MarkTheWordsEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./MarkTheWordsEditor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b500394e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main-flex\" }\nconst _hoisted_2 = { class: \"cards-list\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = [\"src\", \"alt\"]\nconst _hoisted_6 = {\n  key: 1,\n  class: \"edited-memory-card no-card-selected-placeholder\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EditedMemoryCard = _resolveComponent(\"EditedMemoryCard\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.taskDefinition.cards, (card, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: card.uuid,\n          class: _normalizeClass({\n          'cards-list-item': true,\n          'selected-card': index === this.selectedCardIndex,\n        }),\n          onClick: ($event: any) => (_ctx.selectCard(index))\n        }, [\n          _createTextVNode(_toDisplayString(index) + \". \" + _toDisplayString(card.question === '' ? _ctx.$gettext('Karte') : card.question), 1),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"flex-child-element removeAnswerButton\",\n            onClick: _withModifiers(($event: any) => (_ctx.deleteCard(index)), [\"stop\"])\n          }, [\n            _createElementVNode(\"img\", {\n              src: _ctx.urlForIcon('trash'),\n              alt: _ctx.$gettext('Karte lschen')\n            }, null, 8, _hoisted_5)\n          ], 8, _hoisted_4)\n        ], 10, _hoisted_3))\n      }), 128)),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addCard && _ctx.addCard(...args)))\n      }, _toDisplayString(_ctx.$gettext('Karte hinzufgen')), 1)\n    ]),\n    (this.taskDefinition.cards[this.selectedCardIndex])\n      ? (_openBlock(), _createBlock(_component_EditedMemoryCard, {\n          key: 0,\n          class: \"edited-memory-card\",\n          card: this.taskDefinition.cards[this.selectedCardIndex],\n          \"card-index\": this.selectedCardIndex\n        }, null, 8, [\"card\", \"card-index\"]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(_ctx.$gettext('Keine Karte ist zum Bearbeiten ausgewhlt.')), 1))\n  ]))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"default\" }\nconst _hoisted_2 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EditedMemoryCardImage = _resolveComponent(\"EditedMemoryCardImage\")!\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", _hoisted_1, [\n    _createElementVNode(\"fieldset\", null, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Karte')), 1),\n      _createElementVNode(\"div\", null, [\n        _createElementVNode(\"h4\", null, _toDisplayString(_ctx.$gettext('Bild')), 1),\n        (_ctx.card.imageUrl)\n          ? (_openBlock(), _createBlock(_component_EditedMemoryCardImage, {\n              key: 0,\n              card: _ctx.card\n            }, null, 8, [\"card\"]))\n          : (_openBlock(), _createBlock(_component_FileUpload, {\n              key: 1,\n              onFileUploaded: _ctx.onImageUploaded\n            }, null, 8, [\"onFileUploaded\"]))\n      ]),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Alternativer Text')) + \" \", 1),\n        _createElementVNode(\"input\", {\n          type: \"text\",\n          value: _ctx.taskDefinition.cards[_ctx.cardIndex].altText,\n          onInput: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onInputAltText && _ctx.onInputAltText(...args)))\n        }, null, 40, _hoisted_2)\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"img\", {\n      src: _ctx.card.imageUrl,\n      alt: _ctx.card.altText\n    }, null, 8, _hoisted_1),\n    _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.deleteImage && _ctx.deleteImage(...args)))\n    }, _toDisplayString(_ctx.$gettext('Bild Lschen')), 1)\n  ], 64))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { MemoryCard, MemoryTask } from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport produce from 'immer';\nimport { $gettext } from '@/language/gettext';\n\nexport default defineComponent({\n  name: 'EditedMemoryCardImage',\n  props: {\n    card: {\n      type: Object as PropType<MemoryCard>,\n      required: true,\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as MemoryTask,\n  },\n  methods: {\n    $gettext,\n    deleteImage(): void {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        const cardIndex = draft.cards.findIndex(\n          (card) => card.uuid === this.card.uuid\n        );\n        draft.cards[cardIndex].imageUrl = '';\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n  },\n});\n","import { render } from \"./EditedMemoryCardImage.vue?vue&type=template&id=5feecc35&ts=true\"\nimport script from \"./EditedMemoryCardImage.vue?vue&type=script&lang=ts\"\nexport * from \"./EditedMemoryCardImage.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = [\"accept\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.uploadRequestPromise)\n    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_1, _toDisplayString(_ctx.$gettext('Datei wird hochgeladen')), 1))\n    : (_openBlock(), _createElementBlock(\"input\", {\n        key: 1,\n        ref: \"fileInput\",\n        type: \"file\",\n        accept: _ctx.accept,\n        onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onInputChange && _ctx.onInputChange(...args)))\n      }, null, 40, _hoisted_2))\n}","\nimport { defineComponent } from 'vue';\nimport { uploadFile } from '@/routes';\nimport { $gettext } from '@/language/gettext';\n\nexport default defineComponent({\n  name: 'FileUpload',\n  emits: ['fileUploaded'],\n  props: {\n    // The 'accept' property passed to the <input type=\"file\"> element.  Default: 'image/*'\n    accept: {\n      type: String,\n      required: false,\n      default: 'image/*',\n    },\n  },\n  data() {\n    return {\n      // Wenn dieser Promise vorhanden ist, heit das, dass eine HTTP-Anfrage\n      // unterwegs ist.\n      uploadRequestPromise: undefined as Promise<unknown> | undefined,\n    };\n  },\n  methods: {\n    $gettext,\n    onInputChange(event: Event): void {\n      if (this.uploadRequestPromise) {\n        console.warn(\n          'FileUpload: onInputChange fired while uploadRequestPromise is already defined.'\n        );\n        return;\n      }\n      const input = this.$refs.fileInput as HTMLInputElement;\n      const file = input.files?.item(0);\n      if (!file) {\n        console.warn(\n          'FileUpload: onInputChange fired, but input.files[] is empty.'\n        );\n        return;\n      }\n      this.uploadRequestPromise = uploadFile(file)\n        .then((res) => {\n          this.$emit('fileUploaded', res.files[0]);\n          this.uploadRequestPromise = undefined;\n        })\n        .catch((error) => {\n          console.error(error);\n          // TODO Display the error somewhere!\n          this.uploadRequestPromise = undefined;\n        });\n    },\n  },\n});\n","import { render } from \"./FileUpload.vue?vue&type=template&id=3e1b5cf7&ts=true\"\nimport script from \"./FileUpload.vue?vue&type=script&lang=ts\"\nexport * from \"./FileUpload.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { MemoryCard, MemoryTask } from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport ImageUpload from '@/components/ImageUpload.vue';\nimport produce from 'immer';\nimport { $gettext } from '@/language/gettext';\nimport EditedMemoryCardImage from '@/components/EditedMemoryCardImage.vue';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { UploadedFile } from '@/routes';\n\nexport default defineComponent({\n  name: 'EditedMemoryCard',\n  components: { FileUpload, EditedMemoryCardImage },\n  props: {\n    card: {\n      type: Object as PropType<MemoryCard>,\n      required: true,\n    },\n    cardIndex: {\n      type: Number as PropType<number>,\n      required: true,\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as MemoryTask,\n  },\n  methods: {\n    $gettext,\n    onImageUploaded(file: UploadedFile): void {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        // TODO #20  - Store file ID instead of URL\n        draft.cards[this.cardIndex].imageUrl = file.url;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    // This is how you write the @input event handler if you want undo-redo and reactivity to work\n    onInputAltText(ev: InputEvent): void {\n      const value = (ev.target as HTMLInputElement).value;\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.cards[this.cardIndex].altText = value;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition,\n        undoBatch: { type: 'EditedAltText' },\n      });\n    },\n    // This is what results if you write v-model=\"taskDefinition.cards[this.cardIndex].altText\"\n    onInputAltTextBAD(ev: InputEvent): void {\n      const value = (ev.target as HTMLInputElement).value;\n      this.taskDefinition.cards[this.cardIndex].altText = value;\n    },\n  },\n});\n","import { render } from \"./EditedMemoryCard.vue?vue&type=template&id=5cce87d1&ts=true\"\nimport script from \"./EditedMemoryCard.vue?vue&type=script&lang=ts\"\nexport * from \"./EditedMemoryCard.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { taskEditorStore } from '@/store';\nimport { MemoryTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport produce from 'immer';\nimport { v4 } from 'uuid';\nimport EditedMemoryCard from '@/components/EditedMemoryCard.vue';\n\nexport default defineComponent({\n  name: 'MemoryEditor',\n  components: { EditedMemoryCard },\n  props: {},\n  data() {\n    return {\n      selectedCardIndex: -1,\n    };\n  },\n  beforeMount(): void {\n    if (this.taskDefinition.cards.length > 0) {\n      this.selectedCardIndex = 0;\n    }\n  },\n  methods: {\n    $gettext,\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n    selectCard(index: number) {\n      this.selectedCardIndex = index;\n    },\n    addCard() {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.cards.push({\n          uuid: v4(),\n          imageUrl: '',\n          altText: '',\n        });\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n      // Select the newly inserted card\n      this.selectedCardIndex = this.taskDefinition.cards.length - 1;\n    },\n    deleteCard(index: number) {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.cards.splice(index, 1);\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n      // Adjust the selection index so the selected card doesn't unexpectedly change\n      if (index <= this.selectedCardIndex) {\n        this.selectedCardIndex = this.selectedCardIndex - 1;\n      }\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as MemoryTask,\n  },\n});\n","import { render } from \"./MemoryEditor.vue?vue&type=template&id=b500394e&scoped=true&ts=true\"\nimport script from \"./MemoryEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./MemoryEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./MemoryEditor.vue?vue&type=style&index=0&id=b500394e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b500394e\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-657d40e6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"h5pModule\" }\nconst _hoisted_2 = { class: \"h5pMemoryGame\" }\nconst _hoisted_3 = { class: \"h5pFeedbackContainer\" }\nconst _hoisted_4 = { class: \"h5pFeedbackContainerTop\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_6 = { class: \"h5pFeedbackContainerCenter\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"h5pFeedbackText\"\n}\nconst _hoisted_8 = { class: \"h5pFeedbackContainerBottom\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_MemoryCardComponent = _resolveComponent(\"MemoryCardComponent\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, _toDisplayString(_ctx.$gettext('Umgedrehte Karten: ') + this.amountOfFlips), 1),\n    _createElementVNode(\"div\", null, _toDisplayString(_ctx.$gettext('Aufgedeckte Paare:') +\n        ' ' +\n        this.amountOfPairsSolved +\n        ' ' +\n        _ctx.$gettext('von') +\n        ' ' +\n        this.totalAmountOfPairs), 1),\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.cards, (card) => {\n        return (_openBlock(), _createBlock(_component_MemoryCardComponent, {\n          key: card.uuid,\n          card: card,\n          onClick: ($event: any) => (_ctx.onClickCard(card))\n        }, null, 8, [\"card\", \"onClick\"]))\n      }), 128))\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_ctx.showResults && _ctx.feedbackMessage)\n          ? (_openBlock(), _createElementBlock(\"label\", _hoisted_5, _toDisplayString(this.feedbackMessage), 1))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_ctx.showResults)\n          ? (_openBlock(), _createElementBlock(\"label\", _hoisted_7, _toDisplayString(this.resultMessage), 1))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_8, [\n        (_ctx.showRetryButton)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClickTryAgain && _ctx.onClickTryAgain(...args))),\n              class: \"h5pButton\"\n            }, _toDisplayString(this.task.strings.retryButton), 1))\n          : _createCommentVNode(\"\", true)\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '../assets/memoryCardBack.png'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1915ee96\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"memoryCardFront\"\n}\nconst _hoisted_2 = [\"src\", \"alt\"]\nconst _hoisted_3 = {\n  key: 1,\n  class: \"memoryCardBack\"\n}\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  class: \"memoryImage\"\n}, null, -1))\nconst _hoisted_5 = [\n  _hoisted_4\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"memoryCard\", { memoryCardFlipped: _ctx.card.flipped }])\n  }, [\n    (_ctx.card.flipped)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _createElementVNode(\"img\", {\n            src: _ctx.card.imageUrl,\n            alt: _ctx.card.altText,\n            class: \"memoryImage\"\n          }, null, 8, _hoisted_2)\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _hoisted_5))\n  ], 2))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { ViewerMemoryCard } from '@/components/MemoryViewer.vue';\n\nexport default defineComponent({\n  name: 'MemoryCard',\n  props: {\n    card: {\n      type: Object as PropType<ViewerMemoryCard>,\n      required: true,\n    },\n  },\n  computed: {},\n  methods: {},\n});\n","import { render } from \"./MemoryCard.vue?vue&type=template&id=1915ee96&scoped=true&ts=true\"\nimport script from \"./MemoryCard.vue?vue&type=script&lang=ts\"\nexport * from \"./MemoryCard.vue?vue&type=script&lang=ts\"\n\nimport \"./MemoryCard.vue?vue&type=style&index=0&id=1915ee96&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1915ee96\"]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { MemoryTask, MemoryCard } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport MemoryCardComponent from '@/components/MemoryCard.vue';\nimport { v4 } from 'uuid';\n\nexport interface ViewerMemoryCard extends MemoryCard {\n  flipped: boolean;\n  solved: boolean;\n  matchingCardId: string | undefined;\n}\n\nexport default defineComponent({\n  name: 'MemoryViewer',\n  components: { MemoryCardComponent },\n  emits: ['updateAttempt'],\n  props: {\n    task: {\n      type: Object as PropType<MemoryTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      cards: [] as ViewerMemoryCard[],\n      firstFlippedCardId: undefined as string | undefined,\n      amountOfFlips: 0 as number,\n      showResults: false as boolean,\n      feedbackMessage: undefined as string | undefined,\n      resultMessage: undefined as string | undefined,\n    };\n  },\n  methods: {\n    $gettext,\n\n    onClickCard(card: ViewerMemoryCard): void {\n      // do nothing if card is already open\n      if (card.flipped) return;\n\n      card.flipped = true;\n      console.log('Flipped', card.altText);\n\n      this.amountOfFlips++;\n\n      if (!this.firstFlippedCardId) {\n        // This is the first of two cards to be flipped around\n        // Reset all previous unsuccessful cardflips except the card we just flipped\n        this.resetAllUnsolvedCardsExcept(card.uuid);\n\n        this.firstFlippedCardId = card.uuid;\n      } else {\n        // We flipped the second card around, check if we got a pair\n        if (card.matchingCardId === this.firstFlippedCardId) {\n          // We found a pair!\n          // Set both cards' solved attribute to true\n          card.solved = true;\n          const firstCard = this.getCardById(this.firstFlippedCardId);\n          firstCard.solved = true;\n          console.log('Found a pair of', card.altText);\n        }\n\n        this.firstFlippedCardId = undefined;\n      }\n    },\n\n    resetAllUnsolvedCardsExcept(exceptionId: string): void {\n      for (const card of this.cards) {\n        if (!card.solved && card.uuid !== exceptionId) {\n          card.flipped = false;\n        }\n      }\n    },\n\n    onClickTryAgain(): void {\n      this.amountOfFlips = 0;\n      this.firstFlippedCardId = undefined;\n      this.resetCards();\n      this.shuffleCards();\n    },\n\n    resetCards(): void {\n      // Set all cards' flipped and solved attribute to false\n      for (const card of this.cards) {\n        card.flipped = false;\n        card.solved = false;\n      }\n    },\n\n    shuffleCards(): void {\n      // Shuffle the cards\n      // https://stackoverflow.com/a/46545530\n      this.cards = this.cards\n        .map((card) => ({ card, sort: Math.random() }))\n        .sort((card1, card2) => card1.sort - card2.sort)\n        .map(({ card }) => card);\n    },\n\n    getCardById(cardId: string): ViewerMemoryCard {\n      const card = this.cards.find((card) => card.uuid === cardId);\n      if (!card) {\n        throw new Error('No card found with the given ID: ' + cardId);\n      }\n      return card;\n    },\n  },\n\n  computed: {\n    totalAmountOfPairs(): number {\n      return this.task.cards.length;\n    },\n\n    amountOfPairsSolved(): number {\n      let amountOfCardsSolved = 0;\n      for (const card of this.cards) {\n        if (card.solved) amountOfCardsSolved++;\n      }\n      return amountOfCardsSolved / 2;\n    },\n\n    showRetryButton(): boolean {\n      return this.amountOfPairsSolved === this.totalAmountOfPairs;\n    },\n  },\n  watch: {\n    task: {\n      handler() {\n        console.log('watcher for this.task');\n        this.firstFlippedCardId = undefined;\n        this.amountOfFlips = 0;\n        // Make two copies of each card in the task. Add the flipped, solved and matchingCardId attributes\n        this.cards = this.task.cards.flatMap((card) => {\n          // The two copies of each card are linked to each other through the matchingCardId attribute\n          const duplicateCardId = v4();\n          return [\n            // The original card with the set matchingCardId attribute\n            {\n              ...card,\n              flipped: false,\n              solved: false,\n              uuid: card.uuid,\n              matchingCardId: duplicateCardId,\n            },\n            // The duplicate card\n            {\n              ...card,\n              flipped: false,\n              solved: false,\n              uuid: duplicateCardId,\n              matchingCardId: card.uuid,\n            },\n          ];\n        });\n\n        // Shuffle the cards\n        this.shuffleCards();\n      },\n      immediate: true, // Ensure that the watcher is also called immediately when the component is first mounted\n    },\n  },\n});\n","import { render } from \"./MemoryViewer.vue?vue&type=template&id=657d40e6&scoped=true&ts=true\"\nimport script from \"./MemoryViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./MemoryViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./MemoryViewer.vue?vue&type=style&index=0&id=657d40e6&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-657d40e6\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, withModifiers as _withModifiers, resolveComponent as _resolveComponent, createBlock as _createBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-51e448bd\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"imagePairingRow\" }\nconst _hoisted_2 = [\"draggable\", \"onDragstart\", \"onDragend\", \"onClick\"]\nconst _hoisted_3 = [\"src\", \"alt\"]\nconst _hoisted_4 = { class: \"targetImagesColumn\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TargetImage = _resolveComponent(\"TargetImage\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", {\n        class: \"draggableImagesColumn\",\n        onDragover: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n        onDragenter: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"prevent\"])),\n        onDrop: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onDropOnInteractiveImages($event)))\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.draggableImages, (draggableImageId) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: draggableImageId,\n            draggable: \n          !this.isDraggableImageUsed(draggableImageId) && !this.showResults\n        ,\n            onDragstart: ($event: any) => (_ctx.startDragImage($event, draggableImageId)),\n            onDragend: ($event: any) => (_ctx.endDragImage($event, draggableImageId)),\n            onClick: ($event: any) => (_ctx.onClickDraggableImage(draggableImageId)),\n            class: _normalizeClass([\"draggableImageContainer\", {\n          disabled:\n            this.isDraggableImageUsed(draggableImageId) ||\n            this.showResults ||\n            this.draggedImageId === draggableImageId,\n          selected: this.imageIdInteractedWith === draggableImageId,\n        }])\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"draggableImage\",\n              src: _ctx.getImageById(draggableImageId).imageUrl,\n              alt: _ctx.getImageById(draggableImageId).altText,\n              ref_for: true,\n              ref: \"draggableImages\"\n            }, null, 8, _hoisted_3)\n          ], 42, _hoisted_2))\n        }), 128))\n      ], 32),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.task.imagePairs, (imagePair) => {\n          return (_openBlock(), _createBlock(_component_TargetImage, {\n            class: \"targetImage\",\n            \"draggable-image\": _ctx.getImageDraggedOntoTarget(imagePair.targetImage.uuid),\n            \"target-image\": _ctx.getImageById(imagePair.targetImage.uuid),\n            isCorrect: this.isAnswerCorrect(imagePair.targetImage.uuid),\n            showResult: this.showResults,\n            key: imagePair.uuid,\n            onDrop: ($event: any) => (_ctx.onDropOnTargetImage($event, imagePair.targetImage.uuid)),\n            draggable: \n          _ctx.getImageDraggedOntoTarget(imagePair.targetImage.uuid) &&\n          !this.showResults\n        ,\n            onDragstart: ($event: any) => (_ctx.startDragTargetImage($event, imagePair.targetImage.uuid)),\n            onDragover: _cache[3] || (_cache[3] = _withModifiers(() => {}, [\"prevent\"])),\n            onDragenter: _cache[4] || (_cache[4] = _withModifiers(() => {}, [\"prevent\"])),\n            onClick: ($event: any) => (_ctx.onClickTargetImage(imagePair.targetImage.uuid))\n          }, null, 8, [\"draggable-image\", \"target-image\", \"isCorrect\", \"showResult\", \"onDrop\", \"draggable\", \"onDragstart\", \"onClick\"]))\n        }), 128))\n      ])\n    ]),\n    _hoisted_5,\n    (!this.showResults)\n      ? (_openBlock(), _createElementBlock(\"button\", {\n          key: 0,\n          type: \"button\",\n          class: \"h5pButton\",\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.checkResults()))\n        }, _toDisplayString(this.task.strings.checkButton), 1))\n      : _createCommentVNode(\"\", true),\n    (this.showResults)\n      ? (_openBlock(), _createElementBlock(\"button\", {\n          key: 1,\n          type: \"button\",\n          class: \"h5pButton\",\n          onClick: _cache[6] || (_cache[6] = ($event: any) => (_ctx.reset()))\n        }, _toDisplayString(this.task.strings.retryButton), 1))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-191f3972\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"grid-square two-images\"\n}\nconst _hoisted_2 = { class: \"image-container back\" }\nconst _hoisted_3 = [\"src\", \"alt\"]\nconst _hoisted_4 = { class: \"image-container front\" }\nconst _hoisted_5 = [\"src\", \"alt\"]\nconst _hoisted_6 = {\n  key: 1,\n  class: \"grid-square one-image\"\n}\nconst _hoisted_7 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.draggableImage)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"img\", {\n            src: _ctx.targetImage.imageUrl,\n            alt: _ctx.targetImage.altText,\n            class: _normalizeClass([\"image\", {\n          correct: this.isCorrect,\n          incorrect: !this.isCorrect,\n          showResult: this.showResult,\n        }]),\n            draggable: \"false\"\n          }, null, 10, _hoisted_3)\n        ]),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"img\", {\n            src: _ctx.draggableImage.imageUrl,\n            alt: _ctx.draggableImage.altText,\n            class: _normalizeClass([\"image\", {\n          correct: this.isCorrect,\n          incorrect: !this.isCorrect,\n          showResult: this.showResult,\n        }]),\n            draggable: \"false\"\n          }, null, 10, _hoisted_5)\n        ])\n      ]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n        _createElementVNode(\"img\", {\n          draggable: \"false\",\n          src: _ctx.targetImage.imageUrl,\n          alt: _ctx.targetImage.altText,\n          class: \"image\"\n        }, null, 8, _hoisted_7)\n      ]))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { Image } from '@/models/TaskDefinition';\n\nexport default defineComponent({\n  name: 'TargetImage',\n  components: {},\n  props: {\n    draggableImage: {\n      type: Object as PropType<Image>,\n      required: false,\n    },\n    targetImage: {\n      type: Object as PropType<Image>,\n      required: true,\n    },\n    isCorrect: {\n      type: Boolean,\n      required: false,\n    },\n    showResult: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  computed: {},\n  methods: {},\n});\n","import { render } from \"./TargetImage.vue?vue&type=template&id=191f3972&scoped=true&ts=true\"\nimport script from \"./TargetImage.vue?vue&type=script&lang=ts\"\nexport * from \"./TargetImage.vue?vue&type=script&lang=ts\"\n\nimport \"./TargetImage.vue?vue&type=style&index=0&id=191f3972&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-191f3972\"]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { Image, ImagePairingTask } from '@/models/TaskDefinition';\nimport TargetImage from '@/components/TargetImage.vue';\n\ntype Uuid = string;\n\nexport default defineComponent({\n  name: 'ImagePairingViewer',\n  components: {\n    TargetImage,\n  },\n  props: {\n    task: {\n      type: Object as PropType<ImagePairingTask>,\n      required: true,\n    },\n  },\n  emits: ['updateAttempt'],\n  data() {\n    return {\n      imageIdInteractedWith: undefined as Uuid | undefined,\n      draggedImageId: undefined as Uuid | undefined,\n      // We used Record instead of Set because I wasn't sure if sets are\n      // reactive in Vue 3.\n      // Record from target ID -> draggable image ID.\n      imagesDraggedOntoTargets: {} as Record<Uuid, Uuid>,\n      showResults: false as boolean,\n    };\n  },\n  methods: {\n    isAnswerCorrect(targetId: Uuid): boolean {\n      const userInput = this.imagesDraggedOntoTargets[targetId];\n      if (!userInput) {\n        return false;\n      }\n      // A little bit awkward -- we have to find the pair to which the target\n      // belongs so that we can check whether the user's solution is right\n      // This method itself is therefore O(n), giving an O(n^2) if you check\n      // every user answer in a loop every time the user makes an input.\n      // But it should be fine, because even if there are 50 images in a set\n      // (very unlikely), this comes out to 2500 comparisons, which should\n      // complete in under a millisecond.\n      const pair = this.task.imagePairs.find(\n        (pair) => pair.targetImage.uuid === targetId\n      );\n      if (!pair) {\n        throw new Error(\n          'could not find the pair to which the target id ' +\n            targetId +\n            ' belongs'\n        );\n      }\n      return pair.draggableImage.uuid === userInput;\n    },\n\n    getImageDraggedOntoTarget(targetId: Uuid): Image | undefined {\n      const draggedImageId = this.imagesDraggedOntoTargets[targetId];\n      if (draggedImageId) {\n        return this.getImageById(draggedImageId);\n      } else {\n        return undefined;\n      }\n    },\n\n    startDragImage(dragEvent: DragEvent, imageId: Uuid): void {\n      if (!this.isDraggableImageUsed(imageId)) {\n        console.log('Dragging image:', imageId);\n        this.imageIdInteractedWith = imageId;\n        this.draggedImageId = imageId;\n\n        dragEvent.dataTransfer!.dropEffect = 'move';\n        dragEvent.dataTransfer!.effectAllowed = 'move';\n\n        // Change the drag image to the parent element to include the border\n        const refToImage = (\n          this.$refs.draggableImages as HTMLImageElement[]\n        ).find((value) => value.src == this.getImageById(imageId).imageUrl);\n\n        const parentElementOfImage = refToImage?.parentElement!;\n\n        if (refToImage && parentElementOfImage) {\n          const cloneOfParent = parentElementOfImage.cloneNode(\n            true\n          ) as HTMLElement;\n\n          cloneOfParent.style.top = '0';\n          cloneOfParent.style.left = '0';\n          cloneOfParent.style.position = 'absolute';\n          cloneOfParent.style.zIndex = '-999';\n\n          parentElementOfImage.parentElement!.append(cloneOfParent);\n\n          dragEvent.dataTransfer!.setDragImage(\n            cloneOfParent,\n            parentElementOfImage.clientWidth / 2,\n            parentElementOfImage.clientHeight / 2\n          );\n\n          setTimeout(() => cloneOfParent.remove());\n        }\n      }\n    },\n\n    endDragImage(dragEvent: DragEvent, imageId: string): void {\n      this.imageIdInteractedWith = undefined;\n      this.draggedImageId = undefined;\n    },\n\n    startDragTargetImage(dragEvent: DragEvent, targetImageId: Uuid): void {\n      dragEvent.dataTransfer!.dropEffect = 'move';\n      dragEvent.dataTransfer!.effectAllowed = 'move';\n      // Remember that the image has been dragged away from a target\n      // where it had been placed by the user\n      dragEvent.dataTransfer!.setData('targetId', targetImageId);\n\n      // Check if an image has been dragged onto the target already\n      const userDraggedImageId = this.imagesDraggedOntoTargets[targetImageId];\n      if (userDraggedImageId) {\n        this.imageIdInteractedWith = userDraggedImageId;\n\n        // Add the interactive image to the cursor even if the user\n        // clicked on the target image\n        const refToImage = (\n          this.$refs.draggableImages as HTMLImageElement[]\n        ).find(\n          (value) => value.src == this.getImageById(userDraggedImageId).imageUrl\n        );\n\n        const parentElementOfImage = refToImage?.parentElement!;\n\n        if (parentElementOfImage) {\n          dragEvent.dataTransfer!.setDragImage(\n            parentElementOfImage,\n            parentElementOfImage.clientWidth / 2,\n            parentElementOfImage.clientHeight / 2\n          );\n        }\n\n        console.log(\n          'Dragging image:',\n          this.imageIdInteractedWith,\n          'from target image',\n          targetImageId\n        );\n      }\n    },\n\n    onDropOnTargetImage(event: DragEvent, targetImageId: Uuid): void {\n      if (!this.imageIdInteractedWith) {\n        return;\n      }\n\n      // If the image has been dragged away from another target, then it should\n      // be removed from that target when it is dropped onto this target.\n      const otherTargetId = event.dataTransfer?.getData('targetId');\n      if (otherTargetId) {\n        delete this.imagesDraggedOntoTargets[otherTargetId];\n      }\n      // Save the dragged image onto the target where it has been dropped\n      this.imagesDraggedOntoTargets[targetImageId] = this.imageIdInteractedWith;\n\n      console.log(\n        'Dropped image:',\n        this.imageIdInteractedWith,\n        'on target:',\n        targetImageId\n      );\n      // Mark that the drag interaction is over.\n      this.imageIdInteractedWith = undefined;\n    },\n\n    getImageById(imageId: string): Image {\n      const image = this.imagesById[imageId];\n      if (!image) {\n        throw new Error('No image found with the given ID: ' + imageId);\n      }\n      return image;\n    },\n\n    onClickTargetImage(targetImageId: Uuid): void {\n      console.log('Clicked on target image', targetImageId);\n\n      // Do nothing if we are displaying the results already\n      if (this.showResults) return;\n\n      // Remove the image, if any, that has been dragged by the user onto\n      // the target they have clicked.\n      const usedImageId = this.imagesDraggedOntoTargets[targetImageId];\n      if (usedImageId) {\n        delete this.imagesDraggedOntoTargets[targetImageId];\n      }\n      // Check if the user clicked a draggable image and wants to put it here\n      if (this.imageIdInteractedWith) {\n        this.imagesDraggedOntoTargets[targetImageId] =\n          this.imageIdInteractedWith;\n        this.imageIdInteractedWith = undefined;\n      }\n    },\n\n    // This has a complexity of O(n).  When it is called in our v-for to set\n    // the class of every draggable image element, it makes it O(n^2).\n    // But that should be OK, because no one will put more than (say) 100\n    // images in a single task, right?\n    isDraggableImageUsed(draggableImageId: Uuid): boolean {\n      return Object.values(this.imagesDraggedOntoTargets).includes(\n        draggableImageId\n      );\n    },\n\n    onClickDraggableImage(imageId: Uuid): void {\n      if (!this.isDraggableImageUsed(imageId)) {\n        console.log('Clicked on image:', imageId);\n        this.imageIdInteractedWith = imageId;\n      }\n    },\n\n    onDropOnInteractiveImages(event: DragEvent): void {\n      if (!this.imageIdInteractedWith) {\n        return;\n      }\n\n      // If the image has been dragged away from a target, then it should\n      // be removed from that target when it is dropped here.\n      const otherTargetId = event.dataTransfer?.getData('targetId');\n      if (otherTargetId) {\n        delete this.imagesDraggedOntoTargets[otherTargetId];\n      }\n\n      console.log('Returned image:', this.imageIdInteractedWith);\n\n      // Mark that the interaction is over.\n      this.imageIdInteractedWith = undefined;\n    },\n\n    checkResults(): void {\n      this.showResults = true;\n    },\n\n    reset(): void {\n      this.showResults = false;\n      this.imagesDraggedOntoTargets = {};\n    },\n  },\n  computed: {\n    draggableImages(): Uuid[] {\n      // Shuffle the images\n      // https://stackoverflow.com/a/46545530\n      return this.task.imagePairs\n        .map((imagePair) => ({ imagePair: imagePair, sort: Math.random() }))\n        .sort((imagePair1, imagePair2) => imagePair1.sort - imagePair2.sort)\n        .map(({ imagePair }) => imagePair.draggableImage.uuid);\n    },\n\n    imagesById(): Record<Uuid, Image> {\n      const imagesById: Record<Uuid, Image> = {};\n      for (const imagePair of this.task.imagePairs) {\n        imagesById[imagePair.draggableImage.uuid] = imagePair.draggableImage;\n        imagesById[imagePair.targetImage.uuid] = imagePair.targetImage;\n      }\n      return imagesById;\n    },\n  },\n});\n","import { render } from \"./ImagePairingViewer.vue?vue&type=template&id=51e448bd&scoped=true&ts=true\"\nimport script from \"./ImagePairingViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./ImagePairingViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./ImagePairingViewer.vue?vue&type=style&index=0&id=51e448bd&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-51e448bd\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-797ef1a9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main-flex\" }\nconst _hoisted_2 = { class: \"cards-list\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = [\"src\", \"onClick\"]\nconst _hoisted_5 = {\n  key: 1,\n  class: \"edited-memory-card no-card-selected-placeholder\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EditedImagePair = _resolveComponent(\"EditedImagePair\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.taskDefinition.imagePairs, (pair, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: pair.uuid,\n          class: _normalizeClass({\n          'cards-list-item': true,\n          'selected-card': index === this.selectedPairIndex,\n        }),\n          onClick: ($event: any) => (_ctx.selectPair(index))\n        }, [\n          _createTextVNode(_toDisplayString(index) + \". \", 1),\n          _createElementVNode(\"img\", {\n            class: \"flex-child-element removeAnswerButton\",\n            src: _ctx.urlForIcon('trash'),\n            onClick: _withModifiers(($event: any) => (_ctx.deletePair(index)), [\"stop\"]),\n            alt: \"an icon showing a trash bin\"\n          }, null, 8, _hoisted_4)\n        ], 10, _hoisted_3))\n      }), 128)),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addPair && _ctx.addPair(...args)))\n      }, _toDisplayString(_ctx.$gettext('Karte hinzufgen')), 1)\n    ]),\n    (this.taskDefinition.imagePairs[this.selectedPairIndex])\n      ? (_openBlock(), _createBlock(_component_EditedImagePair, {\n          key: 0,\n          class: \"edited-memory-card\",\n          pair: this.taskDefinition.imagePairs[this.selectedPairIndex],\n          \"pair-index\": this.selectedPairIndex\n        }, null, 8, [\"pair\", \"pair-index\"]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString(_ctx.$gettext('Keine Karte ist zum Bearbeiten ausgewhlt.')), 1))\n  ]))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"default\" }\nconst _hoisted_2 = [\"value\"]\nconst _hoisted_3 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EditedImagePairImage = _resolveComponent(\"EditedImagePairImage\")!\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", _hoisted_1, [\n    _createElementVNode(\"fieldset\", null, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Image Pair')), 1),\n      _createElementVNode(\"div\", null, [\n        _createElementVNode(\"h4\", null, _toDisplayString(_ctx.$gettext('Das zu ziehende Bild')), 1),\n        (_ctx.pair.draggableImage.imageUrl)\n          ? (_openBlock(), _createBlock(_component_EditedImagePairImage, {\n              key: 0,\n              image: _ctx.pair.draggableImage\n            }, null, 8, [\"image\"]))\n          : (_openBlock(), _createBlock(_component_FileUpload, {\n              key: 1,\n              onFileUploaded: _ctx.onUploadDraggableImage\n            }, null, 8, [\"onFileUploaded\"]))\n      ]),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Alternativer Text')) + \" \", 1),\n        _createElementVNode(\"input\", {\n          type: \"text\",\n          value: _ctx.taskDefinition.imagePairs[_ctx.pairIndex].draggableImage.altText,\n          onInput: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onInputDraggableImageAltText && _ctx.onInputDraggableImageAltText(...args)))\n        }, null, 40, _hoisted_2)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _createElementVNode(\"h4\", null, _toDisplayString(_ctx.$gettext('Das Zielbild')), 1),\n        (_ctx.pair.targetImage.imageUrl)\n          ? (_openBlock(), _createBlock(_component_EditedImagePairImage, {\n              key: 0,\n              image: _ctx.pair.targetImage\n            }, null, 8, [\"image\"]))\n          : (_openBlock(), _createBlock(_component_FileUpload, {\n              key: 1,\n              onFileUploaded: _ctx.onUploadTargetImage\n            }, null, 8, [\"onFileUploaded\"]))\n      ]),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Alternativer Text')) + \" \", 1),\n        _createElementVNode(\"input\", {\n          type: \"text\",\n          value: _ctx.taskDefinition.imagePairs[_ctx.pairIndex].targetImage.altText,\n          onInput: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onInputTargetImageAltText && _ctx.onInputTargetImageAltText(...args)))\n        }, null, 40, _hoisted_3)\n      ])\n    ])\n  ]))\n}","import { openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d7c0d98e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"img\", {\n    src: _ctx.image.imageUrl,\n    alt: _ctx.image.altText,\n    class: \"edited-image-pair-image\"\n  }, null, 8, _hoisted_1))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { Image } from '@/models/TaskDefinition';\n\nexport default defineComponent({\n  name: 'EditedImagePairImage',\n  props: {\n    image: {\n      type: Object as PropType<Image>,\n      required: true,\n    },\n  },\n  data() {\n    return {};\n  },\n  methods: {},\n  computed: {},\n});\n","import { render } from \"./EditedImagePairImage.vue?vue&type=template&id=d7c0d98e&scoped=true&ts=true\"\nimport script from \"./EditedImagePairImage.vue?vue&type=script&lang=ts\"\nexport * from \"./EditedImagePairImage.vue?vue&type=script&lang=ts\"\n\nimport \"./EditedImagePairImage.vue?vue&type=style&index=0&id=d7c0d98e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d7c0d98e\"]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { $gettext } from '@/language/gettext';\nimport { ImagePair, ImagePairingTask } from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport produce from 'immer';\nimport EditedImagePairImage from '@/components/EditedImagePairImage.vue';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { UploadedFile } from '@/routes';\n\nexport default defineComponent({\n  name: 'EditedImagePair',\n  components: { FileUpload, EditedImagePairImage },\n  props: {\n    pair: {\n      type: Object as PropType<ImagePair>,\n      required: true,\n    },\n    pairIndex: {\n      type: Number as PropType<number>,\n      required: true,\n    },\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    $gettext,\n    onUploadDraggableImage(file: UploadedFile): void {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        // TODO #20  - Store file ID instead of URL\n        draft.imagePairs[this.pairIndex].draggableImage.imageUrl = file.url;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    onUploadTargetImage(file: UploadedFile): void {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        // TODO #20  - Store file ID instead of URL\n        draft.imagePairs[this.pairIndex].targetImage.imageUrl = file.url;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    onInputDraggableImageAltText(ev: InputEvent): void {\n      const value = (ev.target as HTMLInputElement).value;\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.imagePairs[this.pairIndex].draggableImage.altText = value;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition,\n        undoBatch: { type: 'EditedDraggableImageAltText' },\n      });\n    },\n    onInputTargetImageAltText(ev: InputEvent): void {\n      const value = (ev.target as HTMLInputElement).value;\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.imagePairs[this.pairIndex].targetImage.altText = value;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition,\n        undoBatch: { type: 'EditedTargetImageAltText' },\n      });\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as ImagePairingTask,\n  },\n});\n","import { render } from \"./EditedImagePair.vue?vue&type=template&id=4deb1247&ts=true\"\nimport script from \"./EditedImagePair.vue?vue&type=script&lang=ts\"\nexport * from \"./EditedImagePair.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport EditedImagePair from '@/components/EditedImagePair.vue';\nimport { ImagePairingTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport produce from 'immer';\nimport { taskEditorStore } from '@/store';\nimport { v4 } from 'uuid';\n\nexport default defineComponent({\n  name: 'ImagePairingEditor',\n  components: { EditedImagePair },\n  props: {\n    task: {\n      type: Object as PropType<ImagePairingTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      selectedPairIndex: -1,\n    };\n  },\n  beforeMount(): void {\n    if (this.taskDefinition.imagePairs.length > 0) {\n      this.selectedPairIndex = 0;\n    }\n  },\n  methods: {\n    $gettext,\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n    selectPair(index: number) {\n      this.selectedPairIndex = index;\n    },\n    addPair() {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.imagePairs.push({\n          uuid: v4(),\n          draggableImage: {\n            uuid: v4(),\n            imageUrl: '',\n            altText: '',\n          },\n          targetImage: {\n            uuid: v4(),\n            imageUrl: '',\n            altText: '',\n          },\n        });\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n      // Select the newly inserted card\n      this.selectedPairIndex = this.taskDefinition.imagePairs.length - 1;\n    },\n    deletePair(index: number) {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.imagePairs.splice(index, 1);\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n      // Adjust the selection index so the selected card doesn't unexpectedly change\n      if (index <= this.selectedPairIndex) {\n        this.selectedPairIndex = this.selectedPairIndex - 1;\n      }\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as ImagePairingTask,\n  },\n});\n","import { render } from \"./ImagePairingEditor.vue?vue&type=template&id=797ef1a9&scoped=true&ts=true\"\nimport script from \"./ImagePairingEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./ImagePairingEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./ImagePairingEditor.vue?vue&type=style&index=0&id=797ef1a9&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-797ef1a9\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5b37d147\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"imageRow\" }\nconst _hoisted_2 = [\"onDragstart\", \"onDragover\", \"onDrop\"]\nconst _hoisted_3 = [\"src\", \"alt\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.images, (image) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: image.uuid,\n          class: \"imageContainer\",\n          draggable: \"true\",\n          onDragstart: ($event: any) => (_ctx.startDragImage($event, image)),\n          onDragover: ($event: any) => (_ctx.onDragOver($event, image)),\n          onDrop: ($event: any) => (_ctx.onDropImage($event, image))\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"image\",\n            draggable: \"false\",\n            onDragover: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n            onDragenter: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"prevent\"])),\n            src: image.imageUrl,\n            alt: image.altText\n          }, null, 40, _hoisted_3),\n          _createElementVNode(\"span\", {\n            class: \"imageDescription\",\n            onDragover: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"prevent\"])),\n            onDragenter: _cache[3] || (_cache[3] = _withModifiers(() => {}, [\"prevent\"]))\n          }, _toDisplayString(image.altText), 33)\n        ], 40, _hoisted_2))\n      }), 128))\n    ]),\n    (!this.showResults)\n      ? (_openBlock(), _createElementBlock(\"button\", {\n          key: 0,\n          type: \"button\",\n          class: \"h5pButton\",\n          onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.checkResults()))\n        }, _toDisplayString(this.task.strings.checkButton), 1))\n      : _createCommentVNode(\"\", true),\n    (this.showResults)\n      ? (_openBlock(), _createElementBlock(\"button\", {\n          key: 1,\n          type: \"button\",\n          class: \"h5pButton\",\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.reset()))\n        }, _toDisplayString(this.task.strings.retryButton), 1))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { Image, ImageSequencingTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport { taskEditorStore } from '@/store';\n\nexport default defineComponent({\n  name: 'ImageSequencingViewer',\n  components: {},\n  props: {\n    task: {\n      type: Object as PropType<ImageSequencingTask>,\n      required: true,\n    },\n  },\n  emits: ['updateAttempt'],\n  data() {\n    return {\n      images: [] as Image[],\n      imageInteractedWith: undefined as Image | undefined,\n      showResults: false as boolean,\n    };\n  },\n  beforeMount(): void {\n    console.log('Before Mount');\n  },\n  methods: {\n    $gettext,\n\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n\n    startDragImage(dragEvent: DragEvent, image: Image) {\n      this.imageInteractedWith = image;\n      console.log('Dragging image', image.altText);\n    },\n\n    onDropImage(event: DragEvent, image: Image): void {\n      if (this.imageInteractedWith) {\n        const fromIndex = this.images.indexOf(this.imageInteractedWith);\n        const toIndex = this.images.indexOf(image);\n\n        console.log(\n          'Dropped image',\n          this.imageInteractedWith?.altText,\n          '(',\n          fromIndex,\n          ') on target',\n          image.altText,\n          '(',\n          toIndex,\n          ')'\n        );\n\n        this.moveInArray(this.images, fromIndex, toIndex);\n\n        this.imageInteractedWith = undefined;\n      }\n    },\n\n    onDragOver(event: DragEvent, image: Image): void {\n      if (this.imageInteractedWith) {\n        const fromIndex = this.images.indexOf(this.imageInteractedWith);\n        const toIndex = this.images.indexOf(image);\n\n        console.log(\n          'Dragging image',\n          this.imageInteractedWith?.altText,\n          '(',\n          fromIndex,\n          ') over target',\n          image.altText,\n          '(',\n          toIndex,\n          ')'\n        );\n\n        this.moveInArray(this.images, fromIndex, toIndex);\n      }\n    },\n\n    moveInArray(array: Image[], fromIndex: number, toIndex: number) {\n      let element = array[fromIndex];\n      array.splice(fromIndex, 1);\n      array.splice(toIndex, 0, element);\n    },\n\n    checkResults(): void {\n      this.showResults = true;\n    },\n\n    reset(): void {\n      this.showResults = false;\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as ImageSequencingTask,\n  },\n  watch: {\n    task: {\n      handler() {\n        console.log('watcher for this.task');\n        this.images = this.task.images;\n      },\n      immediate: true, // Ensure that the watcher is also called immediately when the component is first mounted\n    },\n  },\n});\n","import { render } from \"./ImageSequencingViewer.vue?vue&type=template&id=5b37d147&scoped=true&ts=true\"\nimport script from \"./ImageSequencingViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageSequencingViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./ImageSequencingViewer.vue?vue&type=style&index=0&id=5b37d147&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b37d147\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4fffd5a2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main-flex\" }\nconst _hoisted_2 = { class: \"cards-list\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = [\"src\", \"onClick\"]\nconst _hoisted_5 = {\n  key: 1,\n  class: \"edited-memory-card no-card-selected-placeholder\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ImageSequencingEditorImage = _resolveComponent(\"ImageSequencingEditorImage\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.taskDefinition.images, (image, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: image.uuid,\n          class: _normalizeClass({\n          'cards-list-item': true,\n          'selected-card': index === this.selectedImageIndex,\n        }),\n          onClick: ($event: any) => (_ctx.selectImage(index))\n        }, [\n          _createTextVNode(_toDisplayString(index) + \". \", 1),\n          _createElementVNode(\"img\", {\n            class: \"flex-child-element removeAnswerButton\",\n            src: _ctx.urlForIcon('trash'),\n            onClick: _withModifiers(($event: any) => (_ctx.deleteImage(index)), [\"stop\"]),\n            alt: \"an icon showing a trash bin\"\n          }, null, 8, _hoisted_4)\n        ], 10, _hoisted_3))\n      }), 128)),\n      _createElementVNode(\"button\", {\n        type: \"button\",\n        onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.addImage && _ctx.addImage(...args)))\n      }, _toDisplayString(_ctx.$gettext('Bild hinzufgen')), 1)\n    ]),\n    (this.taskDefinition.images[this.selectedImageIndex])\n      ? (_openBlock(), _createBlock(_component_ImageSequencingEditorImage, {\n          key: 0,\n          class: \"edited-memory-card\",\n          image: this.taskDefinition.images[this.selectedImageIndex],\n          \"image-index\": this.selectedImageIndex\n        }, null, 8, [\"image\", \"image-index\"]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString(_ctx.$gettext('Keine Karte ist zum Bearbeiten ausgewhlt.')), 1))\n  ]))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-20582d70\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"default\" }\nconst _hoisted_2 = [\"src\", \"alt\"]\nconst _hoisted_3 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n\n  return (_openBlock(), _createElementBlock(\"form\", _hoisted_1, [\n    _createElementVNode(\"fieldset\", null, [\n      _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Bild')), 1),\n      _createElementVNode(\"div\", null, [\n        _createElementVNode(\"h4\", null, _toDisplayString(_ctx.$gettext('Das Bild')), 1),\n        (_ctx.image.imageUrl)\n          ? (_openBlock(), _createElementBlock(\"img\", {\n              key: 0,\n              src: _ctx.image.imageUrl,\n              alt: _ctx.image.altText,\n              class: \"image-sequencing-editor-image\"\n            }, null, 8, _hoisted_2))\n          : (_openBlock(), _createBlock(_component_FileUpload, {\n              key: 1,\n              onFileUploaded: _ctx.onUploadImage\n            }, null, 8, [\"onFileUploaded\"]))\n      ]),\n      _createElementVNode(\"label\", null, [\n        _createTextVNode(_toDisplayString(_ctx.$gettext('Alternativer Text')) + \" \", 1),\n        _createElementVNode(\"input\", {\n          type: \"text\",\n          value: _ctx.taskDefinition.images[_ctx.imageIndex].altText,\n          onInput: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onInputImageAltText && _ctx.onInputImageAltText(...args)))\n        }, null, 40, _hoisted_3)\n      ])\n    ])\n  ]))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport { $gettext } from '@/language/gettext';\nimport { Image, ImageSequencingTask } from '@/models/TaskDefinition';\nimport { taskEditorStore } from '@/store';\nimport produce from 'immer';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { UploadedFile } from '@/routes';\n\nexport default defineComponent({\n  name: 'ImageSequencingEditorImage',\n  components: { FileUpload },\n  props: {\n    image: {\n      type: Object as PropType<Image>,\n      required: true,\n    },\n    imageIndex: {\n      type: Number as PropType<number>,\n      required: true,\n    },\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    $gettext,\n    onUploadImage(file: UploadedFile): void {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        // TODO #20  - Store file ID instead of URL\n        draft.images[this.imageIndex].imageUrl = file.url;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition,\n        undoBatch: {},\n      });\n    },\n    onInputImageAltText(ev: InputEvent): void {\n      const value = (ev.target as HTMLInputElement).value;\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.images[this.imageIndex].altText = value;\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition,\n        undoBatch: { type: 'EditedImageAltText' },\n      });\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as ImageSequencingTask,\n  },\n});\n","import { render } from \"./ImageSequencingEditorImage.vue?vue&type=template&id=20582d70&scoped=true&ts=true\"\nimport script from \"./ImageSequencingEditorImage.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageSequencingEditorImage.vue?vue&type=script&lang=ts\"\n\nimport \"./ImageSequencingEditorImage.vue?vue&type=style&index=0&id=20582d70&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20582d70\"]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { ImageSequencingTask } from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport { taskEditorStore } from '@/store';\nimport produce from 'immer';\nimport { v4 } from 'uuid';\nimport ImageSequencingEditorImage from '@/components/ImageSequencingEditorImage.vue';\n\nexport default defineComponent({\n  name: 'ImageSequencingEditor',\n  components: { ImageSequencingEditorImage },\n  props: {\n    task: {\n      type: Object as PropType<ImageSequencingTask>,\n      required: true,\n    },\n  },\n  data() {\n    return { selectedImageIndex: -1 };\n  },\n  beforeMount(): void {\n    if (this.taskDefinition.images.length > 0) {\n      this.selectedImageIndex = 0;\n    }\n  },\n  methods: {\n    $gettext,\n    urlForIcon(iconName: string) {\n      return (\n        window.STUDIP.ASSETS_URL + 'images/icons/blue/' + iconName + '.svg'\n      );\n    },\n    selectImage(index: number) {\n      this.selectedImageIndex = index;\n    },\n    addImage() {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.images.push({\n          uuid: v4(),\n          imageUrl: '',\n          altText: '',\n        });\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n      // Select the newly inserted image\n      this.selectedImageIndex = this.taskDefinition.images.length - 1;\n    },\n    deleteImage(index: number) {\n      const newTaskDefinition = produce(this.taskDefinition, (draft) => {\n        draft.images.splice(index, 1);\n      });\n      taskEditorStore.performEdit({\n        newTaskDefinition: newTaskDefinition,\n        undoBatch: {},\n      });\n      // Adjust the selection index so the selected card doesn't unexpectedly change\n      if (index <= this.selectedImageIndex) {\n        this.selectedImageIndex = this.selectedImageIndex - 1;\n      }\n    },\n  },\n  computed: {\n    taskDefinition: () => taskEditorStore.taskDefinition as ImageSequencingTask,\n  },\n});\n","import { render } from \"./ImageSequencingEditor.vue?vue&type=template&id=4fffd5a2&scoped=true&ts=true\"\nimport script from \"./ImageSequencingEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageSequencingEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./ImageSequencingEditor.vue?vue&type=style&index=0&id=4fffd5a2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4fffd5a2\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_VideoPlayer = _resolveComponent(\"VideoPlayer\")!\n\n  return (_openBlock(), _createBlock(_component_VideoPlayer, { task: _ctx.task }, null, 8, [\"task\"]))\n}","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, normalizeStyle as _normalizeStyle, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-306bb96b\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"container\" }\nconst _hoisted_2 = { class: \"active-interaction\" }\nconst _hoisted_3 = { key: 1 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_LmbTaskInteraction = _resolveComponent(\"LmbTaskInteraction\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"video-player-root\", { 'drag-in-progress': !!_ctx.dragState }]),\n    ref: \"root\",\n    onDragoverCapture: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onDragoverRoot && _ctx.onDragoverRoot(...args)))\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, null, 512),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.visibleInteractions, (interaction) => {\n      return (_openBlock(), _createElementBlock(_Fragment, {\n        key: interaction.id\n      }, [\n        (interaction.type === 'lmbTask')\n          ? (_openBlock(), _createBlock(_component_LmbTaskInteraction, {\n              key: 0,\n              class: \"video-player-interaction\",\n              style: _normalizeStyle({\n          left: `${interaction.x * 100}%`,\n          top: `${interaction.y * 100}%`,\n        }),\n              interaction: interaction,\n              draggable: !!_ctx.editor,\n              onPointerdownCapture: ($event: any) => (_ctx.editor?.selectInteraction(interaction.id)),\n              onDragstart: ($event: any) => (_ctx.onDragStartInteraction($event, interaction)),\n              onDragend: ($event: any) => (_ctx.onDragEndInteraction($event, interaction)),\n              onActivateInteraction: _ctx.activateInteraction\n            }, null, 8, [\"style\", \"interaction\", \"draggable\", \"onPointerdownCapture\", \"onDragstart\", \"onDragend\", \"onActivateInteraction\"]))\n          : _createCommentVNode(\"\", true)\n      ], 64))\n    }), 128)),\n    _createVNode(_Transition, { name: \"fade\" }, {\n      default: _withCtx(() => [\n        (_ctx.activeInteraction?.type === 'lmbTask')\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 0,\n              class: \"active-interaction-container\",\n              onClick: _cache[1] || (_cache[1] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.closeInteraction && _ctx.closeInteraction(...args)), [\"self\"]))\n            }, [\n              _createElementVNode(\"div\", _hoisted_2, [\n                _createElementVNode(\"h1\", null, _toDisplayString(_ctx.printTaskType(_ctx.activeInteraction.taskDefinition.task_type)), 1),\n                (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.viewerForTaskType(_ctx.activeInteraction.taskDefinition.task_type)), {\n                  task: _ctx.activeInteraction.taskDefinition\n                }, null, 8, [\"task\"])),\n                _createElementVNode(\"button\", {\n                  type: \"button\",\n                  class: \"button cancel\",\n                  onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.closeInteraction && _ctx.closeInteraction(...args)))\n                }, _toDisplayString(_ctx.$gettext('Schlieen')), 1)\n              ])\n            ]))\n          : (_ctx.activeInteraction?.type === 'overlay')\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"Overlay\"))\n            : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ], 34))\n}","import { InjectionKey, Ref } from 'vue';\n\n/**\n * In the Interactive Video Editor, we use provide/inject to pass data to many\n * different components at once without prop drilling.\n * There is a little bit of ceremony required to have the passed data be statically typed.\n * https://vuejs.org/guide/typescript/composition-api.html#typing-provide-inject\n */\nexport const editorStateSymbol = Symbol(\n  'Interactive Video Editor state'\n) as InjectionKey<EditorState>;\n\nexport interface EditorState {\n  selectedInteractionId: Ref<string | undefined>;\n  selectInteraction(id: string): void;\n  dragInteraction(\n    interactionId: string,\n    clampedXFraction: number,\n    clampedYFraction: number\n  ): void;\n\n  dragInteractionTimeline(id: string, startTime: number): void;\n}\n","import { toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.editor)\n    ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: _normalizeClass({\n      selected: _ctx.editor?.selectedInteractionId.value === _ctx.interaction.id,\n    })\n      }, _toDisplayString(_ctx.printTaskType(_ctx.interaction.taskDefinition.task_type)), 3))\n    : (_openBlock(), _createElementBlock(\"button\", {\n        key: 1,\n        type: \"button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('activateInteraction', _ctx.interaction)))\n      }, _toDisplayString(_ctx.printTaskType(_ctx.interaction.taskDefinition.task_type)), 1))\n}","\nimport { defineComponent, inject, PropType } from 'vue';\nimport {\n  EditorState,\n  editorStateSymbol,\n} from '@/components/interactiveVideo/editorState';\nimport { Interaction, LmbTaskInteraction } from '@/models/InteractiveVideoTask';\nimport { printTaskType } from '../../../models/TaskDefinition';\n\nexport default defineComponent({\n  name: 'LmbTaskInteraction',\n  methods: { printTaskType },\n  setup() {\n    return {\n      editor: inject<EditorState>(editorStateSymbol),\n    };\n  },\n  props: {\n    interaction: {\n      type: Object as PropType<LmbTaskInteraction>,\n      required: true,\n    },\n  },\n});\n","import { render } from \"./LmbTaskInteraction.vue?vue&type=template&id=4773f3cf&scoped=true&ts=true\"\nimport script from \"./LmbTaskInteraction.vue?vue&type=script&lang=ts\"\nexport * from \"./LmbTaskInteraction.vue?vue&type=script&lang=ts\"\n\nimport \"./LmbTaskInteraction.vue?vue&type=style&index=0&id=4773f3cf&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4773f3cf\"]])\n\nexport default __exports__","\nimport { defineComponent, inject, PropType } from 'vue';\nimport videojs from 'video.js';\nimport Player from 'video.js/dist/types/player';\nrequire('!style-loader!css-loader!video.js/dist/video-js.css');\nimport 'videojs-youtube/dist/Youtube.min.js';\nimport {\n  Interaction,\n  InteractiveVideoTask,\n} from '@/models/InteractiveVideoTask';\nimport {\n  EditorState,\n  editorStateSymbol,\n} from '@/components/interactiveVideo/editorState';\nimport LmbTaskInteraction from '@/components/interactiveVideo/interactions/LmbTaskInteraction.vue';\nimport { printTaskType, viewerForTaskType } from '@/models/TaskDefinition';\nimport { $gettext } from '../../language/gettext';\n\ntype DragState =\n  | {\n      type: 'dragInteraction';\n      interactionId: string;\n      mouseStartPos: [number, number]; // clientX, clientY\n      interactionStartPos: [number, number]; // fraction x, fraction y\n    }\n  | undefined;\nexport default defineComponent({\n  name: 'VideoPlayer',\n  components: { LmbTaskInteraction },\n  setup() {\n    return {\n      editor: inject<EditorState>(editorStateSymbol),\n    };\n  },\n  props: {\n    task: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      player: null as Player | null,\n      time: 0,\n      dragState: undefined as DragState,\n      activeInteraction: undefined as Interaction | undefined,\n    };\n  },\n  watch: {\n    'task.video': function (value) {\n      console.log('video prop changed', value);\n      this.initializePlayer();\n    },\n  },\n  computed: {\n    videoUrl(): string {\n      switch (this.task.video.type) {\n        case 'youtube':\n          return this.task.video.url;\n        case 'studipFileReference':\n          return this.task.video.file.url;\n        default:\n          return '';\n      }\n    },\n    videoType(): string | undefined {\n      switch (this.task.video.type) {\n        case 'youtube':\n          return 'video/youtube';\n        case 'studipFileReference':\n          return this.task.video.file.type;\n        default:\n          return '';\n      }\n    },\n    /**\n     * @return a list of Interaction objects whose clickable icons (or other elements)\n     * should be shown overlaid over the video at the timestamp given by this.time.\n     */\n    visibleInteractions(): Interaction[] {\n      return this.task.interactions.filter((i) => {\n        return i.startTime <= this.time && i.endTime > this.time;\n      });\n    },\n  },\n  methods: {\n    $gettext,\n    printTaskType,\n    viewerForTaskType,\n    onPlayerReady() {\n      console.log('player ready');\n    },\n    initializePlayer() {\n      // If player has already been created, it must be destroyed before we\n      // create a new one.\n      this.player?.dispose();\n\n      // The dispose() method removes the player element from the dom, so we must\n      // create and append the player element by hand to the DOM each time.\n      const playerElement = document.createElement('video-js');\n      playerElement.classList.add('video-js', 'vjs-fluid');\n      (this.$refs.container as HTMLDivElement).appendChild(playerElement);\n\n      // Create the player and set up event listeners\n      this.player = videojs(\n        playerElement,\n        {\n          techOrder: ['html5', 'youtube'],\n          sources: [\n            {\n              src: this.videoUrl,\n              type: this.videoType,\n            },\n          ],\n          controls: true,\n          autoplay: this.task.autoplay && !this.editor,\n        },\n        this.onPlayerReady\n      );\n      this.player.on('timeupdate', () => {\n        const time = this.player!.currentTime();\n        if (time) {\n          this.$emit('timeupdate', time);\n          this.time = time;\n        }\n      });\n      this.player.on('loadedmetadata', () => {\n        this.player!.currentTime(this.task.startAt);\n        if (this.task.autoplay && !this.editor) {\n          this.player!.play();\n        }\n        this.$emit('metadataChange', {\n          length: this.player!.duration(),\n        });\n      });\n    },\n    activateInteraction(interaction: Interaction) {\n      this.activeInteraction = interaction;\n      this.player!.pause();\n    },\n    closeInteraction() {\n      this.activeInteraction = undefined;\n    },\n    onDragStartInteraction(event: DragEvent, interaction: Interaction) {\n      console.log('dragStart');\n      event.dataTransfer!.setDragImage(event.target as Element, -99999, -99999);\n      this.dragState = {\n        type: 'dragInteraction',\n        interactionId: interaction.id,\n        mouseStartPos: [event.clientX, event.clientY],\n        interactionStartPos: [interaction.x, interaction.y],\n      };\n    },\n    onDragEndInteraction(event: DragEvent, interaction: Interaction) {\n      console.log('dragEnd');\n      this.dragState = undefined;\n    },\n    onDragoverRoot(event: DragEvent) {\n      console.log('onDragoverRoot');\n      if (this.dragState?.type === 'dragInteraction') {\n        const rect = (this.$refs.root as HTMLElement).getBoundingClientRect();\n        const clientDx = event.clientX - this.dragState.mouseStartPos[0];\n        const dxFraction = clientDx / rect.width;\n        const xFraction = this.dragState.interactionStartPos[0] + dxFraction;\n        const clampedXFraction = Math.min(1, Math.max(0, xFraction));\n        const clientDy = event.clientY - this.dragState.mouseStartPos[1];\n        const dyFraction = clientDy / rect.height;\n        const yFraction = this.dragState.interactionStartPos[1] + dyFraction;\n        const clampedYFraction = Math.min(1, Math.max(0, yFraction));\n        const id = this.dragState.interactionId;\n        this.editor?.dragInteraction(id, clampedXFraction, clampedYFraction);\n      }\n    },\n  },\n  mounted() {\n    this.initializePlayer();\n  },\n});\n","import { render } from \"./VideoPlayer.vue?vue&type=template&id=306bb96b&scoped=true&ts=true\"\nimport script from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoPlayer.vue?vue&type=style&index=0&id=306bb96b&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-306bb96b\"]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { InteractiveVideoTask } from '@/models/InteractiveVideoTask';\nimport VideoPlayer from '@/components/interactiveVideo/VideoPlayer.vue';\n\nexport default defineComponent({\n  name: 'InteractiveVideoViewer',\n  components: { VideoPlayer },\n  props: {\n    task: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      counter: 0,\n    };\n  },\n});\n","import { render } from \"./InteractiveVideoViewer.vue?vue&type=template&id=80198370&ts=true\"\nimport script from \"./InteractiveVideoViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./InteractiveVideoViewer.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { style: {\"display\":\"none\"} }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" Task definition: \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_SelectVideo = _resolveComponent(\"SelectVideo\")!\n  const _component_TabComponent = _resolveComponent(\"TabComponent\")!\n  const _component_AddInteractions = _resolveComponent(\"AddInteractions\")!\n  const _component_TabsComponent = _resolveComponent(\"TabsComponent\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_TabsComponent, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_TabComponent, {\n          title: _ctx.$gettext('1. Video auswhlen'),\n          icon: \"video2\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_SelectVideo, { \"task-definition\": _ctx.taskDefinition }, null, 8, [\"task-definition\"])\n          ]),\n          _: 1\n        }, 8, [\"title\"]),\n        _createVNode(_component_TabComponent, {\n          title: _ctx.$gettext('2. Interaktionen hinzufgen'),\n          icon: \"content\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_AddInteractions, { \"task-definition\": _ctx.taskDefinition }, null, 8, [\"task-definition\"])\n          ]),\n          _: 1\n        }, 8, [\"title\"])\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"pre\", null, _toDisplayString(_ctx.taskDefinition), 1)\n    ])\n  ], 64))\n}","<!-- Adapted from https://zerotomastery.io/blog/tab-component-design-with-vue/ -->\n<template>\n  <div class=\"cw-tabs\">\n    <div role=\"tablist\" class=\"cw-tabs-nav\">\n      <button\n        v-for=\"tab in tabs\"\n        :key=\"tab.title\"\n        @click=\"activeTabHash = tab.hash\"\n        :class=\"{\n          'is-active': tab.hash === activeTabHash,\n          [`cw-tabs-nav-icon-text-${tab.icon}`]:\n            tab.icon !== '' && tab.name !== '',\n          [`cw-tabs-nav-icon-solo-${tab.icon}`]:\n            tab.icon !== '' && tab.name === '',\n        }\"\n        :aria-selected=\"tab.hash === activeTabHash\"\n        :aria-controls=\"tab.hash\"\n        :id=\"'#' + tab.hash\"\n        :tabindex=\"0\"\n      >\n        {{ tab.title }}\n      </button>\n    </div>\n    <slot />\n  </div>\n</template>\n\n<script>\nimport { computed, defineComponent } from 'vue';\n\nexport default defineComponent({\n  data() {\n    return {\n      activeTabHash: '',\n      tabs: [],\n    };\n  },\n  provide() {\n    return {\n      addTab: (tab) => {\n        const count = this.tabs.push(tab);\n\n        if (count === 1) {\n          this.activeTabHash = tab.hash;\n        }\n      },\n      activeTabHash: computed(() => this.activeTabHash),\n    };\n  },\n});\n</script>\n","import { render } from \"./TabsComponent.vue?vue&type=template&id=0afa9c3b\"\nimport script from \"./TabsComponent.vue?vue&type=script&lang=js\"\nexport * from \"./TabsComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- Adapted from https://zerotomastery.io/blog/tab-component-design-with-vue/ -->\n<template>\n  <div\n    role=\"tabpanel\"\n    class=\"cw-tab cw-tabs-content\"\n    :class=\"{ 'cw-tab-active': isActive }\"\n    v-show=\"isActive\"\n    :aria-labelledby=\"buttonSelector\"\n  >\n    <slot />\n  </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nexport default defineComponent({\n  inject: ['activeTabHash', 'addTab'],\n  props: {\n    title: {\n      type: String,\n      required: true,\n    },\n    icon: {\n      type: String,\n      required: false,\n      default: '',\n    },\n  },\n  data() {\n    return { hash: '', isActive: false };\n  },\n  created() {\n    this.hash = '#' + this.title.toLowerCase().replace(/ /g, '-');\n\n    this.addTab({\n      title: this.title,\n      hash: this.hash,\n      icon: this.icon,\n    });\n  },\n  watch: {\n    activeTabHash() {\n      this.isActive = this.activeTabHash === this.hash;\n    },\n  },\n  computed: {\n    buttonSelector() {\n      return '#' + this.hash;\n    },\n  },\n});\n</script>\n","import { render } from \"./TabComponent.vue?vue&type=template&id=b428e518\"\nimport script from \"./TabComponent.vue?vue&type=script&lang=js\"\nexport * from \"./TabComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ac092fe2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"tick-label\" }\nconst _hoisted_2 = { class: \"timeline-interactions\" }\nconst _hoisted_3 = [\"draggable\", \"onClick\", \"onDragstart\", \"onDragend\"]\nconst _hoisted_4 = [\"onClick\", \"title\"]\nconst _hoisted_5 = [\"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_6 = [\"onPointerdown\", \"onPointermove\", \"onPointerup\"]\nconst _hoisted_7 = { style: {\"white-space\":\"pre-wrap\"} }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref: \"root\",\n    class: \"timeline-root\",\n    onDragoverCapture: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onDragOverTimeline && _ctx.onDragOverTimeline(...args)))\n  }, [\n    _createElementVNode(\"div\", {\n      class: \"timeline-axis\",\n      ref: \"timelineAxis\",\n      onPointerdownCapture: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onPointerDownAxis && _ctx.onPointerDownAxis(...args)))\n    }, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.axisScale, (point, index) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"tick\",\n          key: index\n        }, [\n          _createElementVNode(\"div\", _hoisted_1, _toDisplayString(index % 5 === 0 ? _ctx.formatVideoTimestamp(point) : ' '), 1),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"tick-line\", {\n            major: index % 5 === 0,\n          }])\n          }, null, 2)\n        ]))\n      }), 128))\n    ], 544),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"timeline\", { 'pan-timeline': this.dragState?.type === 'panTimeline' }]),\n      ref: \"timeline\",\n      onPointerdown: _cache[2] || (_cache[2] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.onPointerDownAxis && _ctx.onPointerDownAxis(...args)), [\"self\"])),\n      onWheel: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onWheel && _ctx.onWheel(...args))),\n      onContextmenu: _cache[4] || (_cache[4] = _withModifiers(() => {}, [\"prevent\"]))\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.task.interactions, (interaction) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: interaction.id,\n            class: \"timeline-interaction\",\n            style: _normalizeStyle(_ctx.timelineInteractionStyle(interaction)),\n            draggable: !_ctx.dragState,\n            onClick: _withModifiers(($event: any) => (_ctx.onClickInteraction(interaction)), [\"stop\"]),\n            onDragstart: ($event: any) => (_ctx.onDragStartInteraction($event, interaction)),\n            onDragend: ($event: any) => (_ctx.onDragEndInteraction($event, interaction))\n          }, [\n            _createTextVNode(_toDisplayString(_ctx.printInteractionType(interaction)) + \" \", 1),\n            _createElementVNode(\"button\", {\n              type: \"button\",\n              class: \"small-button trash delete-interaction\",\n              onClick: ($event: any) => (_ctx.$emit('deleteInteraction', interaction.id)),\n              title: _ctx.$gettext('Lschen')\n            }, null, 8, _hoisted_4),\n            _createElementVNode(\"div\", {\n              class: \"interaction-drag-handle start\",\n              onPointerdown: ($event: any) => (_ctx.onPointerDownInteractionStart($event, interaction)),\n              onPointermove: ($event: any) => (_ctx.onPointerMoveInteractionStart($event, interaction)),\n              onPointerup: ($event: any) => (_ctx.onPointerUpInteractionStart($event, interaction))\n            }, null, 40, _hoisted_5),\n            _createElementVNode(\"div\", {\n              class: \"interaction-drag-handle end\",\n              onPointerdown: ($event: any) => (_ctx.onPointerDownInteractionEnd($event, interaction)),\n              onPointermove: ($event: any) => (_ctx.onPointerMoveInteractionEnd($event, interaction)),\n              onPointerup: ($event: any) => (_ctx.onPointerUpInteractionEnd($event, interaction))\n            }, null, 40, _hoisted_6)\n          ], 44, _hoisted_3))\n        }), 128))\n      ]),\n      _createElementVNode(\"div\", {\n        class: \"time-marker\",\n        draggable: \"true\",\n        onDragstart: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onDragStartTimeMarker && _ctx.onDragStartTimeMarker(...args))),\n        style: _normalizeStyle({\n          left: _ctx.positionForTimeMarker,\n        })\n      }, null, 36)\n    ], 34),\n    _createElementVNode(\"div\", _hoisted_7, _toDisplayString({\n          zoomTransform: _ctx.zoomTransform,\n          viewportWidthEm: _ctx.viewportWidthEm,\n          viewportWidthSeconds: _ctx.viewportWidthSeconds,\n          viewportStart: _ctx.viewportStart,\n          viewportEnd: _ctx.viewportEnd,\n          dragState: _ctx.dragState,\n        }), 1)\n  ], 544))\n}","// Types for the Interactive Video task type.\nimport { z } from 'zod';\nimport {\n  printTaskType,\n  taskDefinitionSchemaMinusInteractiveVideo,\n} from '@/models/TaskDefinition';\nimport { $gettext } from '@/language/gettext';\nimport { uploadedFileSchema } from '@/routes';\n\n// There are different types of 'interaction' which can be added to the video.\n// TODO Maybe put the 'base' attributes shared by all types of interaction all in one place.\n// TODO I think it may be wiser to use 'startTime' and 'duration' rather than 'startTime' and 'endTime'.\n// I chose to use 'start' and 'end' because it made the ui in one place easier to implement\n// (v-model for 'end time' input field), but I have noticed that I must calculate a duration\n// by hand in many other places anyway.\n\n// Overlay: An overlay is shown on top of the video over a span of time\nconst overlaySchema = z.object({\n  type: z.literal('overlay'),\n  id: z.string(),\n  startTime: z.number(), // Seconds\n  endTime: z.number(), // Seconds\n  x: z.number(), // Position, as a fraction of video width, between 0 and 1\n  y: z.number(), // Position, as a fraction of video height, between 0 and 1\n  text: z.string(), // Sanitized HTML from Wysiwyg editor\n});\n\n// LMB Task interaction: A Lernmodule Block Task (LMB Task) is shown at a given\n// point in the video for the student to solve.\nconst lmbTaskInteractionSchema = z.object({\n  type: z.literal('lmbTask'),\n  id: z.string(),\n  startTime: z.number(), // Seconds\n  endTime: z.number(), // Seconds\n  x: z.number(), // Position, as a fraction of video width, between 0 and 1\n  y: z.number(), // Position, as a fraction of video height, between 0 and 1\n  taskDefinition: z.lazy(() => taskDefinitionSchemaMinusInteractiveVideo),\n});\nexport type LmbTaskInteraction = z.infer<typeof lmbTaskInteractionSchema>;\n\nconst interactiveVideoInteractionSchema = z\n  .union([overlaySchema, lmbTaskInteractionSchema])\n  .refine((data) => data.endTime > data.startTime, {\n    message: 'endTime cannot be earlier than startTime',\n    path: ['endTime'],\n  });\nexport type Interaction = z.infer<typeof interactiveVideoInteractionSchema>;\n\nexport const interactiveVideoTaskSchema = z.object({\n  task_type: z.literal('InteractiveVideo'),\n  video: z.union([\n    z.object({\n      type: z.literal('none'),\n    }),\n    z.object({\n      type: z.literal('youtube'),\n      url: z.string(),\n    }),\n    z.object({\n      type: z.literal('studipFileReference'),\n      // TODO #20 -- Consider storing file ID instead of { url, name, type }\n      file: uploadedFileSchema,\n    }),\n  ]),\n  autoplay: z.boolean().optional().default(false),\n  startAt: z.number().optional().default(0),\n  interactions: z.array(interactiveVideoInteractionSchema),\n});\nexport type InteractiveVideoTask = z.infer<typeof interactiveVideoTaskSchema>;\n\nexport function printInteractionType(interaction: Interaction): string {\n  switch (interaction.type) {\n    case 'lmbTask':\n      return printTaskType(interaction.taskDefinition.task_type);\n    case 'overlay':\n      return $gettext('Einblendung');\n  }\n}\n","/**\n * Get the equivalent EM value on a given element with a given pixel value.\n *\n * Normally the number of pixel specified should come from the element itself (e.g. element.style.height) since EM is\n * relative.\n *\n * @param {Object} element - The HTML element.\n * @param {Number} pixelValue - The number of pixel to convert in EM on this specific element.\n * @author Nicolas Bouvrette\n * @license CC BY-SA 3.0 https://stackoverflow.com/a/34540037/7359454\n * Adapted by Ann Yanich\n *\n * @returns {Boolean|undefined} The EM value, or undefined if unable to convert.\n */\nexport default function getEmValueFromElement(\n  element: Element,\n  pixelValue: number\n): number | undefined {\n  if (element.parentNode) {\n    const parentFontSize = parseFloat(\n      window.getComputedStyle(element.parentNode as Element).fontSize\n    );\n    const elementFontSize = parseFloat(\n      window.getComputedStyle(element).fontSize\n    );\n    const pixelValueOfOneEm =\n      (elementFontSize / parentFontSize) * elementFontSize;\n    return pixelValue / pixelValueOfOneEm;\n  }\n  return undefined;\n}\n","\nimport {\n  ComponentPublicInstance,\n  defineComponent,\n  inject,\n  PropType,\n  StyleValue,\n} from 'vue';\nimport { VideoMetadata } from '@/components/interactiveVideo/events';\nimport { throttle } from 'lodash';\nimport {\n  Interaction,\n  InteractiveVideoTask,\n  printInteractionType,\n} from '@/models/InteractiveVideoTask';\nimport { $gettext } from '../../language/gettext';\nimport {\n  EditorState,\n  editorStateSymbol,\n} from '@/components/interactiveVideo/editorState';\nimport getEmValueFromElement from '@/components/interactiveVideo/getEmValueFromElement';\nimport { select } from 'd3-selection';\nimport { D3DragEvent, drag } from 'd3-drag';\n\ntype DragState =\n  | { type: 'timeMarker' }\n  | { type: 'panTimeline' }\n  | {\n      type: 'interaction';\n      id: string;\n      mouseStartPos: [number, number]; // clientX, clientY\n      interactionStartTime: number; // Seconds\n      interactionDuration: number; // Seconds\n    }\n  | {\n      type: 'interactionStart';\n      id: string;\n      time: number; // Seconds\n    }\n  | {\n      type: 'interactionEnd';\n      id: string;\n      time: number; // Seconds\n    }\n  | undefined;\nexport default defineComponent({\n  name: 'VideoTimeline',\n  setup() {\n    return {\n      editor: inject<EditorState>(editorStateSymbol),\n    };\n  },\n  props: {\n    currentTime: {\n      type: Number,\n      required: true,\n    },\n    videoMetadata: {\n      type: Object as PropType<VideoMetadata>,\n      required: true,\n    },\n    task: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n    selectedInteractionId: {\n      type: String,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      dragState: undefined as DragState,\n      zoomTransform: { t: 0, k: 1 },\n      viewportWidthEm: 1,\n    };\n  },\n  mounted() {\n    // When timeline axis becomes visible, its width should be recalculated.\n    // TODO recalculate also when it changes size (e.g. window is resized)\n    const observer = new IntersectionObserver(() =>\n      this.recomputeViewportWidth()\n    );\n    observer.observe(this.$refs.timelineAxis as HTMLElement);\n\n    // Set up d3-drag\n    const dragTimeline = (ev: D3DragEvent<HTMLElement, unknown, unknown>) => {\n      const dSeconds = this.pixelsToSeconds(ev.dx);\n      const translate = this.zoomTransform.t - dSeconds;\n      this.zoomTransform.t = this.constrainZoomTranslate(translate);\n    };\n    const dragBehavior = drag<HTMLElement, unknown>()\n      .filter((event: D3DragEvent<HTMLElement, unknown, unknown>) => {\n        return (event as any).button !== 0; // All buttons except 'left click'\n      })\n      .on('start', () => {\n        this.dragState = { type: 'panTimeline' };\n      })\n      .on('drag', dragTimeline)\n      .on('end', () => {\n        this.dragState = undefined;\n      });\n    select(this.$refs.timeline as HTMLElement).call(dragBehavior);\n  },\n  watch: {\n    // Automatically scroll timeline to keep the current playback position in view\n    currentTime(currentTime: number) {\n      if (currentTime < this.viewportStart || currentTime > this.viewportEnd) {\n        this.zoomTransform.t = this.constrainZoomTranslate(currentTime - 0.5);\n      }\n    },\n  },\n  computed: {\n    viewportWidthSeconds(): number {\n      const secondsPerEm = 0.5 / this.zoomTransform.k;\n      return this.viewportWidthEm * secondsPerEm;\n    },\n    viewportStart(): number {\n      return this.zoomTransform.t;\n    },\n    viewportEnd(): number {\n      return this.viewportStart + this.viewportWidthSeconds;\n    },\n    positionForTimeMarker(): string {\n      const deltaT = this.currentTime - this.viewportStart;\n      return `${(deltaT / this.viewportWidthSeconds) * 100}%`;\n    },\n    axisScale(): number[] {\n      const points = 25;\n      const start = this.viewportStart;\n      const end = this.viewportEnd;\n      const scale: number[] = [];\n      for (let i = 0; i < points; i++) {\n        scale.push(start + ((end - start) / points) * i);\n      }\n      scale.push(end);\n      return scale;\n    },\n  },\n  methods: {\n    printInteractionType,\n    $gettext,\n    onWheel(event: WheelEvent) {\n      event.preventDefault(); // Prevent scrolling page up/down\n\n      // Save information needed to recalculate 't' (translate) parameter after zoom\n      const viewportStart0 = this.zoomTransform.t;\n      const viewportWidth0 = this.viewportWidthSeconds;\n      const t = this.xCoordinateToTime(event.clientX);\n\n      // Calculate new zoom level\n      const dy = -event.deltaY / 1000;\n      const exp = Math.exp(dy);\n      const newK = this.zoomTransform.k * exp;\n      // Prevent zooming too far in/out\n      this.zoomTransform.k = Math.max(0.02, Math.min(5, newK));\n\n      // Calculate new translation in order to keep the point under the mouse\n      // cursor stationary.\n      // viewportWidthSeconds is recalculated (because it's a computed property)\n      // after zoomTransform.k is modified.\n      const viewportWidth1 = this.viewportWidthSeconds;\n      const viewportStart1 =\n        t - ((t - viewportStart0) / viewportWidth0) * viewportWidth1;\n      // Prevent panning before video start or after video end\n      this.zoomTransform.t = this.constrainZoomTranslate(viewportStart1);\n    },\n    constrainZoomTranslate(t: number): number {\n      return Math.max(0, Math.min(this.videoMetadata.length, t));\n    },\n    pixelsToEm(pixels: number): number {\n      const timeline = this.$refs.timelineAxis;\n      if (!timeline) {\n        return 1;\n      }\n      return (\n        getEmValueFromElement(this.$refs.timelineAxis as HTMLElement, pixels) ??\n        NaN\n      );\n    },\n    recomputeViewportWidth() {\n      const axis = this.$refs.timelineAxis as HTMLElement | null;\n      if (!axis) {\n        console.warn('recomputeViewportWidth: timelineAxis is null');\n        return;\n      }\n      const rect = axis.getBoundingClientRect();\n      const widthInEm = this.pixelsToEm(rect.width);\n      this.viewportWidthEm = widthInEm;\n    },\n    // Format video timestamp for timeline axis. e.g. 1m30s becomes 00;01;30;00\n    formatVideoTimestamp(timestampSeconds: number): string {\n      let hours = 0,\n        minutes = 0,\n        seconds = 0,\n        centiseconds = 0;\n      while (timestampSeconds >= 3600) {\n        hours++;\n        timestampSeconds -= 3600;\n      }\n      while (timestampSeconds >= 60) {\n        minutes++;\n        timestampSeconds -= 60;\n      }\n      while (timestampSeconds >= 1) {\n        seconds++;\n        timestampSeconds -= 1;\n      }\n      centiseconds = Math.floor(timestampSeconds * 100);\n      function twoDigits(n: number): string {\n        return n.toLocaleString('de-DE', {\n          minimumIntegerDigits: 2,\n          maximumFractionDigits: 0,\n        });\n      }\n      return `${twoDigits(hours)};${twoDigits(minutes)};${twoDigits(\n        seconds\n      )};${twoDigits(centiseconds)}`;\n    },\n    pixelsToSeconds(pixels: number): number {\n      const rect = (\n        this.$refs.timelineAxis as HTMLElement\n      ).getBoundingClientRect();\n      const fraction = pixels / rect.width;\n      return fraction * this.viewportWidthSeconds;\n    },\n    /**\n     * Convert the x coordinate in pixels on the timeline to a time in seconds\n     * in the video, clamped between 0 and the video's length.\n     */\n    xCoordinateToTime(clientX: number): number {\n      const rect = (\n        this.$refs.timelineAxis as HTMLElement\n      ).getBoundingClientRect();\n      const x = clientX - rect.left; //x position within the element.\n      const xFraction = x / rect.width;\n      const time = this.viewportStart + xFraction * this.viewportWidthSeconds;\n      const clampedTime = Math.min(\n        this.videoMetadata.length,\n        Math.max(0, time)\n      );\n      return clampedTime;\n    },\n    timelineInteractionStyle(interaction: Interaction): StyleValue {\n      const startDeltaT = interaction.startTime - this.viewportStart;\n      const startPercent = (startDeltaT / this.viewportWidthSeconds) * 100;\n      const endDeltaT = interaction.endTime - this.viewportStart;\n      const endPercent = (endDeltaT / this.viewportWidthSeconds) * 100;\n      const isSelected = interaction.id === this.selectedInteractionId;\n      return {\n        left: `${startPercent}%`,\n        width: `${endPercent - startPercent}%`,\n        border: isSelected ? '3px solid black' : undefined,\n      };\n    },\n    onClickInteraction(interaction: Interaction) {\n      this.$emit('clickInteraction', interaction);\n    },\n    onDragStartInteraction(event: DragEvent, interaction: Interaction) {\n      event.dataTransfer!.setDragImage(event.target as Element, -99999, -99999);\n      const interactionLength = interaction.endTime - interaction.startTime;\n      this.dragState = {\n        type: 'interaction',\n        id: interaction.id,\n        mouseStartPos: [event.clientX, event.clientY],\n        interactionStartTime: interaction.startTime,\n        interactionDuration: interactionLength,\n      };\n      this.editor!.selectInteraction(interaction.id);\n    },\n    onDragEndInteraction(event: DragEvent, interaction: Interaction) {\n      this.dragState = undefined;\n    },\n    onPointerDownInteractionStart(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = {\n        type: 'interactionStart',\n        id: interaction.id,\n        time: interaction.startTime,\n      };\n      (ev.target as HTMLElement).setPointerCapture(ev.pointerId);\n    },\n    onPointerDownInteractionEnd(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = {\n        type: 'interactionEnd',\n        id: interaction.id,\n        time: interaction.endTime,\n      };\n      (ev.target as HTMLElement).setPointerCapture(ev.pointerId);\n    },\n    onPointerMoveInteractionStart(ev: PointerEvent, interaction: Interaction) {\n      if (\n        this.dragState?.type === 'interactionStart' &&\n        this.dragState.id === interaction.id\n      ) {\n        const dSeconds = this.pixelsToSeconds(ev.movementX);\n        this.dragState.time += dSeconds;\n        const timeClamped = Math.max(\n          0,\n          Math.min(interaction.endTime - 0.1, this.dragState.time)\n        );\n        // TODO make undoable\n        interaction.startTime = timeClamped;\n      }\n    },\n    onPointerMoveInteractionEnd(ev: PointerEvent, interaction: Interaction) {\n      if (\n        this.dragState?.type === 'interactionEnd' &&\n        this.dragState.id === interaction.id\n      ) {\n        const dSeconds = this.pixelsToSeconds(ev.movementX);\n        this.dragState.time += dSeconds;\n        const secondsClamped = Math.max(\n          interaction.startTime + 0.1,\n          Math.min(this.videoMetadata.length, this.dragState.time)\n        );\n        // TODO make undoable\n        interaction.endTime = secondsClamped;\n      }\n    },\n    onPointerUpInteractionStart(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = undefined;\n      (ev.target as HTMLElement).releasePointerCapture(ev.pointerId);\n    },\n    onPointerUpInteractionEnd(ev: PointerEvent, interaction: Interaction) {\n      this.dragState = undefined;\n      (ev.target as HTMLElement).releasePointerCapture(ev.pointerId);\n    },\n    onPointerDownAxis(e: PointerEvent) {\n      const time = this.xCoordinateToTime(e.clientX);\n      this.$emit('timelineSeek', time);\n    },\n    onDragStartTimeMarker(e: DragEvent) {\n      console.log('dragstart time marker');\n      this.dragState = { type: 'timeMarker' };\n    },\n    onDragOverTimeline(e: DragEvent) {\n      if (this.dragState?.type === 'timeMarker') {\n        e.preventDefault(); // Stop ghost image from flying back after drop\n        const time = this.xCoordinateToTime(e.clientX);\n        this.emitTimelineSeekThrottled(time);\n      } else if (this.dragState?.type === 'interaction') {\n        const mouseDx = e.clientX - this.dragState.mouseStartPos[0];\n        const rect = (\n          this.$refs.timelineAxis as HTMLElement\n        ).getBoundingClientRect();\n        const secondsPerPixel = this.viewportWidthSeconds / rect.width;\n        const dSeconds = mouseDx * secondsPerPixel;\n        const seconds = this.dragState.interactionStartTime + dSeconds;\n        // Prevent from dragging so far that the endTime > video length\n        const maxTime =\n          this.videoMetadata.length - this.dragState.interactionDuration;\n        const secondsClamped = Math.max(0, Math.min(maxTime, seconds));\n        const id = this.dragState.id;\n        this.editor?.dragInteractionTimeline(id, secondsClamped);\n      }\n    },\n    emitTimelineSeekThrottled: throttle(function emitTimelineSeek(\n      this: ComponentPublicInstance,\n      time: number\n    ) {\n      this.$emit('timelineSeek', time);\n    },\n    100),\n  },\n});\n","import { render } from \"./VideoTimeline.vue?vue&type=template&id=ac092fe2&scoped=true&ts=true\"\nimport script from \"./VideoTimeline.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoTimeline.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoTimeline.vue?vue&type=style&index=0&id=ac092fe2&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ac092fe2\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, KeepAlive as _KeepAlive, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5aa6a3d7\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"selected-interaction-properties\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"default\"\n}\nconst _hoisted_3 = { ref: \"timeInputsFieldset\" }\nconst _hoisted_4 = [\"aria-invalid\"]\nconst _hoisted_5 = [\"aria-invalid\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"h3\", null, _toDisplayString(_ctx.$gettext('Interaktion')) + \" \\\"\" + _toDisplayString(_ctx.printInteractionType(_ctx.selectedInteraction)) + \"\\\" \", 1),\n    (_ctx.selectedInteraction)\n      ? (_openBlock(), _createElementBlock(\"form\", _hoisted_2, [\n          _createElementVNode(\"fieldset\", _hoisted_3, [\n            _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Zeitpunkt')), 1),\n            _createElementVNode(\"label\", null, [\n              _createTextVNode(_toDisplayString(_ctx.$gettext('Start')) + \" \", 1),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.inputStartTime) = $event)),\n                class: _normalizeClass([\"time-input\", {\n              invalid: _ctx.inputStartTimeErrors.length > 0,\n            }]),\n                \"aria-invalid\": _ctx.inputStartTimeErrors.length > 0,\n                onBlur: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onBlurTimeInputs && _ctx.onBlurTimeInputs(...args)))\n              }, null, 42, _hoisted_4), [\n                [\n                  _vModelText,\n                  _ctx.inputStartTime,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputStartTimeErrors, (error) => {\n              return (_openBlock(), _createElementBlock(\"p\", {\n                class: \"validation-error\",\n                key: error\n              }, _toDisplayString(error), 1))\n            }), 128)),\n            _createElementVNode(\"label\", null, [\n              _createTextVNode(_toDisplayString(_ctx.$gettext('Ende')) + \" \", 1),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"number\",\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.inputEndTime) = $event)),\n                class: _normalizeClass([\"time-input\", {\n              invalid: _ctx.inputEndTimeErrors.length > 0,\n            }]),\n                \"aria-invalid\": _ctx.inputEndTimeErrors.length > 0,\n                onBlur: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onBlurTimeInputs && _ctx.onBlurTimeInputs(...args)))\n              }, null, 42, _hoisted_5), [\n                [\n                  _vModelText,\n                  _ctx.inputEndTime,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.inputEndTimeErrors, (error) => {\n              return (_openBlock(), _createElementBlock(\"p\", {\n                class: \"validation-error\",\n                key: error\n              }, _toDisplayString(error), 1))\n            }), 128))\n          ], 512)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_openBlock(), _createBlock(_KeepAlive, null, [\n      (_ctx.selectedInteraction.type === 'lmbTask')\n        ? (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.editorForTaskType(_ctx.selectedInteraction.taskDefinition.task_type)), {\n            key: `${_ctx.selectedInteraction.id}-editor`,\n            taskDefinition: _ctx.selectedInteraction.taskDefinition\n          }, null, 8, [\"taskDefinition\"]))\n        : _createCommentVNode(\"\", true)\n    ], 1024)),\n    _createElementVNode(\"h3\", null, _toDisplayString(_ctx.$gettext('Vorschau')), 1),\n    (_openBlock(), _createBlock(_KeepAlive, null, [\n      (_ctx.selectedInteraction.type === 'lmbTask')\n        ? (_openBlock(), _createBlock(_resolveDynamicComponent(_ctx.viewerForTaskType(_ctx.selectedInteraction.taskDefinition.task_type)), {\n            class: \"lmb-task-preview\",\n            key: `${_ctx.selectedInteraction.id}-viewer`,\n            task: _ctx.selectedInteraction.taskDefinition\n          }, null, 8, [\"task\"]))\n        : _createCommentVNode(\"\", true)\n    ], 1024))\n  ]))\n}","\nimport { defineComponent, inject, PropType } from 'vue';\nimport {\n  Interaction,\n  printInteractionType,\n} from '@/models/InteractiveVideoTask';\nimport { editorForTaskType, viewerForTaskType } from '@/models/TaskDefinition';\nimport { $gettext } from '../../language/gettext';\nimport {\n  EditorState,\n  editorStateSymbol,\n} from '@/components/interactiveVideo/editorState';\n\nexport default defineComponent({\n  name: 'SelectedInteractionProperties',\n  setup() {\n    return {\n      editor: inject<EditorState>(editorStateSymbol),\n    };\n  },\n  props: {\n    selectedInteraction: {\n      type: Object as PropType<Interaction>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      inputStartTime: NaN,\n      inputEndTime: NaN,\n    };\n  },\n  methods: {\n    viewerForTaskType,\n    $gettext,\n    printInteractionType,\n    editorForTaskType,\n    onBlurTimeInputs(event: FocusEvent) {\n      const isFocusWithinTimeInputs = (\n        this.$refs.timeInputsFieldset as Node\n      ).contains(event.relatedTarget as Node);\n      if (isFocusWithinTimeInputs) {\n        // Don't reset the fields' input values if the user is still editing the\n        // start/end times\n        return;\n      }\n      this.inputStartTime = this.selectedInteraction.startTime;\n      this.inputEndTime = this.selectedInteraction.endTime;\n      console.log(\n        'onblur',\n        this.selectedInteraction.startTime,\n        this.inputStartTime,\n        this.selectedInteraction.endTime,\n        this.inputEndTime\n      );\n    },\n  },\n  watch: {\n    inputStartTime(value: number) {\n      if (this.inputStartTimeErrors.length === 0) {\n        // eslint-disable-next-line vue/no-mutating-props\n        this.selectedInteraction.startTime = value;\n      }\n    },\n    'selectedInteraction.startTime': {\n      handler: function (value: number) {\n        this.inputStartTime = value;\n      },\n      immediate: true,\n    },\n    inputEndTime(value: number) {\n      if (this.inputEndTimeErrors.length === 0) {\n        // eslint-disable-next-line vue/no-mutating-props\n        this.selectedInteraction.endTime = value;\n        /*\n         Scenario: startTime = 0, endTime = 4.\n         User begins to edit startTime and sets startTime = 5.\n         This is invalid (startTime > endTime) and is not applied.\n         Then, user edits endTime and sets endTime = 6.\n         Now, both inputs are valid. start < end. So, both should be applied.\n        */\n        if (this.inputStartTimeErrors.length === 0) {\n          // eslint-disable-next-line vue/no-mutating-props\n          this.selectedInteraction.startTime = this.inputStartTime;\n        }\n      }\n    },\n    'selectedInteraction.endTime': {\n      handler: function (value: number) {\n        this.inputEndTime = value;\n      },\n      immediate: true,\n    },\n  },\n  computed: {\n    inputStartTimeErrors(): string[] {\n      const errors: string[] = [];\n      if (!(typeof this.inputStartTime === 'number')) {\n        errors.push($gettext('Das eingegebene Wert muss eine Nummer sein.'));\n      }\n      if (this.inputStartTime < 0) {\n        errors.push($gettext('Das eingegebene Wert muss grer als 0 sein.'));\n      }\n      if (this.inputStartTime >= this.selectedInteraction.endTime) {\n        errors.push($gettext('Der Startpunkt muss vor dem Endpunkt sein.'));\n      }\n      // TODO check video length as well.\n      return errors;\n    },\n    inputEndTimeErrors(): string[] {\n      const errors: string[] = [];\n      if (!(typeof this.inputEndTime === 'number')) {\n        errors.push($gettext('Das eingegebene Wert muss eine Nummer sein.'));\n      }\n      if (this.inputEndTime < 0) {\n        errors.push($gettext('Das eingegebene Wert muss grer als 0 sein.'));\n      }\n      if (this.inputEndTime <= this.selectedInteraction.startTime) {\n        errors.push($gettext('Der Startpunkt muss vor dem Endpunkt sein.'));\n      }\n      // TODO check video length as well.\n      return errors;\n    },\n  },\n});\n","import { render } from \"./SelectedInteractionProperties.vue?vue&type=template&id=5aa6a3d7&scoped=true&ts=true\"\nimport script from \"./SelectedInteractionProperties.vue?vue&type=script&lang=ts\"\nexport * from \"./SelectedInteractionProperties.vue?vue&type=script&lang=ts\"\n\nimport \"./SelectedInteractionProperties.vue?vue&type=style&index=0&id=5aa6a3d7&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5aa6a3d7\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c7c58aa0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"insert-interactions-buttons\" }\nconst _hoisted_2 = [\"onClick\"]\n\nimport { computed, PropType, provide, ref } from 'vue';\nimport type {\n  Interaction,\n  InteractiveVideoTask,\n} from '@/models/InteractiveVideoTask';\nimport VideoPlayer from '@/components/interactiveVideo/VideoPlayer.vue';\nimport VideoTimeline from '@/components/interactiveVideo/VideoTimeline.vue';\nimport SelectedInteractionProperties from '@/components/interactiveVideo/SelectedInteractionProperties.vue';\nimport { VideoMetadata } from '@/components/interactiveVideo/events';\nimport {\n  newTask,\n  printTaskType,\n  TaskDefinition,\n} from '@/models/TaskDefinition';\nimport { v4 } from 'uuid';\nimport { editorStateSymbol } from '@/components/interactiveVideo/editorState';\n\n\nexport default /*#__PURE__*/_defineComponent({\n  props: {\n  taskDefinition: {\n    type: Object as PropType<InteractiveVideoTask>,\n    required: true,\n  },\n},\n  setup(__props) {\n\nconst props = __props\n\n\nconst currentTime = ref(0);\n// TODO should probably default to 1 or a very small or large value.  24 chosen so I can work while offline  -Ann\nconst videoMetadata = ref<VideoMetadata>({ length: 24 });\nconst selectedInteractionId = ref<string | undefined>(undefined);\nconst videoPlayer = ref<InstanceType<typeof VideoPlayer> | undefined>(\n  undefined\n);\n\nconst taskTypesAndIcons: Array<[TaskDefinition['task_type'], string]> = [\n  ['FillInTheBlanks', 'file-office'],\n  ['DragTheWords', 'tan3'],\n  ['MarkTheWords', 'tan3'],\n  ['Question', 'question'],\n];\n\nprovide(editorStateSymbol, {\n  selectInteraction,\n  selectedInteractionId,\n  dragInteraction,\n  dragInteractionTimeline,\n});\n\nconst selectedInteraction = computed(() =>\n  props.taskDefinition.interactions.find(\n    (interaction) => interaction.id === selectedInteractionId.value\n  )\n);\n\nfunction selectInteraction(selectionId: string) {\n  selectedInteractionId.value = selectionId;\n}\nfunction onVideoMetadataChange(data: VideoMetadata) {\n  videoMetadata.value = data;\n}\nfunction onTimeUpdate(time: number) {\n  currentTime.value = time;\n}\nfunction onTimelineSeek(time: number) {\n  console.log('onTImelineSeek', time);\n  videoPlayer.value!.player!.currentTime(time);\n}\nfunction insertInteraction(type: TaskDefinition['task_type']) {\n  console.log('insertInteraction', type);\n  const task = newTask(type);\n  const interaction: Interaction = {\n    type: 'lmbTask',\n    id: v4(),\n    taskDefinition: task,\n    startTime: currentTime.value,\n    endTime: Math.min(videoMetadata.value.length, currentTime.value + 10),\n    x: 0.5,\n    y: 0.5,\n  };\n  // TODO make undoable ?\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.push(interaction);\n  selectedInteractionId.value = interaction.id;\n}\nfunction deleteInteraction(id: string) {\n  console.log('deleteInteraction', id);\n  const index = props.taskDefinition.interactions.findIndex((i) => i.id === id);\n  // TODO make undoable... Don't want to delete a whole task permanently with no undo\n  // eslint-disable-next-line vue/no-mutating-props\n  props.taskDefinition.interactions.splice(index, 1);\n}\nfunction dragInteraction(id: string, xFraction: number, yFraction: number) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  interaction.x = xFraction;\n  interaction.y = yFraction;\n}\nfunction dragInteractionTimeline(id: string, startTime: number) {\n  const interaction = props.taskDefinition?.interactions.find(\n    (i) => i.id === id\n  );\n  if (!interaction) {\n    throw new Error(`Interaction with id ${id} not found`);\n  }\n  // TODO make undoable ?\n  const duration = interaction.endTime - interaction.startTime;\n  interaction.endTime = startTime + duration;\n  interaction.startTime = startTime;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(VideoPlayer, {\n      ref_key: \"videoPlayer\",\n      ref: videoPlayer,\n      task: __props.taskDefinition,\n      onTimeupdate: onTimeUpdate,\n      onMetadataChange: onVideoMetadataChange,\n      onClickInteraction: _cache[0] || (_cache[0] = (i) => selectInteraction(i.id))\n    }, null, 8, [\"task\"]),\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(taskTypesAndIcons, ([taskType, icon]) => {\n        return _createElementVNode(\"button\", {\n          key: taskType,\n          type: \"button\",\n          class: _normalizeClass([\"button\", icon]),\n          onClick: ($event: any) => (insertInteraction(taskType))\n        }, _toDisplayString(_unref(printTaskType)(taskType)), 11, _hoisted_2)\n      }), 64))\n    ]),\n    _createVNode(VideoTimeline, {\n      class: \"video-timeline\",\n      task: __props.taskDefinition,\n      currentTime: currentTime.value,\n      videoMetadata: videoMetadata.value,\n      selectedInteractionId: selectedInteractionId.value,\n      onTimelineSeek: onTimelineSeek,\n      onClickInteraction: _cache[1] || (_cache[1] = (i) => selectInteraction(i.id)),\n      onDeleteInteraction: deleteInteraction\n    }, null, 8, [\"task\", \"currentTime\", \"videoMetadata\", \"selectedInteractionId\"]),\n    (_unref(selectedInteraction))\n      ? (_openBlock(), _createBlock(SelectedInteractionProperties, {\n          key: 0,\n          selectedInteraction: _unref(selectedInteraction)\n        }, null, 8, [\"selectedInteraction\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","import script from \"./AddInteractions.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AddInteractions.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AddInteractions.vue?vue&type=style&index=0&id=c7c58aa0&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c7c58aa0\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2c6259ba\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"picker\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"separator\",\n  \"aria-hidden\": \"true\",\n  role: \"presentation\"\n}, null, -1))\nconst _hoisted_3 = { class: \"youtube-url-actions\" }\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = {\n  key: 0,\n  class: \"video-preview\"\n}\nconst _hoisted_6 = { key: 0 }\nconst _hoisted_7 = [\"href\"]\nconst _hoisted_8 = { key: 1 }\nconst _hoisted_9 = [\"href\"]\nconst _hoisted_10 = { class: \"video-preview-actions\" }\nconst _hoisted_11 = { class: \"form default\" }\nconst _hoisted_12 = { class: \"start-at-setting\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_FileUpload = _resolveComponent(\"FileUpload\")!\n  const _component_VideoPlayer = _resolveComponent(\"VideoPlayer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass({\n      hidden: _ctx.taskDefinition.video.type !== 'none',\n    })\n    }, [\n      _createElementVNode(\"p\", null, _toDisplayString(_ctx.$gettext(\n          'Lade ein Video hoch oder fge einen Link zu einem Youtube-Video ein.'\n        )), 1),\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", null, [\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_ctx.$gettext('Video hochladen')) + \" \", 1),\n            _createVNode(_component_FileUpload, {\n              onFileUploaded: _ctx.onUploadStudipVideo,\n              accept: 'video/*'\n            }, null, 8, [\"onFileUploaded\"])\n          ])\n        ]),\n        _hoisted_2,\n        _createElementVNode(\"div\", null, [\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_ctx.$gettext('Youtube-URL')) + \" \", 1),\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"youtube-url-input\",\n              type: \"text\",\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.youtubeUrlInput) = $event))\n            }, null, 512), [\n              [_vModelText, _ctx.youtubeUrlInput]\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"button\", {\n              class: \"button accept\",\n              onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onSaveYoutubeVideo && _ctx.onSaveYoutubeVideo(...args))),\n              disabled: \n              _ctx.taskDefinition.video.type === 'youtube' &&\n              _ctx.taskDefinition.video.url === _ctx.youtubeUrlInput\n            \n            }, _toDisplayString(_ctx.$gettext('bernehmen')), 9, _hoisted_4)\n          ])\n        ])\n      ])\n    ], 2),\n    (_ctx.taskDefinition.video.type !== 'none')\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n          _createVNode(_component_VideoPlayer, {\n            ref: \"videoPlayer\",\n            task: _ctx.taskDefinition,\n            class: \"video-player\",\n            onTimeupdate: _ctx.onTimeUpdate\n          }, null, 8, [\"task\", \"onTimeupdate\"]),\n          (_ctx.taskDefinition.video.type === 'youtube')\n            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, [\n                _createTextVNode(_toDisplayString(_ctx.$gettext('Youtube-Video: ')) + \" \", 1),\n                _createElementVNode(\"a\", {\n                  href: _ctx.taskDefinition.video.url,\n                  target: \"_blank\"\n                }, _toDisplayString(_ctx.taskDefinition.video.url), 9, _hoisted_7)\n              ]))\n            : (_ctx.taskDefinition.video.type === 'studipFileReference')\n              ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, [\n                  _createTextVNode(_toDisplayString(_ctx.$gettext('Hochgeladenes Video: ')) + \" \", 1),\n                  _createElementVNode(\"a\", {\n                    href: _ctx.taskDefinition.video.file.url,\n                    target: \"_blank\"\n                  }, _toDisplayString(_ctx.taskDefinition.video.file.name), 9, _hoisted_9)\n                ]))\n              : _createCommentVNode(\"\", true),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _createElementVNode(\"button\", {\n              class: \"button trash\",\n              onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.deleteVideo && _ctx.deleteVideo(...args)))\n            }, _toDisplayString(_ctx.$gettext('Video lschen')), 1)\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"form\", _hoisted_11, [\n      _createElementVNode(\"fieldset\", null, [\n        _createElementVNode(\"legend\", null, _toDisplayString(_ctx.$gettext('Einstellungen')), 1),\n        _createElementVNode(\"label\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"checkbox\",\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.taskDefinition.autoplay) = $event))\n          }, null, 512), [\n            [_vModelCheckbox, _ctx.taskDefinition.autoplay]\n          ]),\n          _createTextVNode(\" \" + _toDisplayString(_ctx.$gettext('Automatisch abspielen')), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _createElementVNode(\"label\", null, [\n            _createTextVNode(_toDisplayString(_ctx.$gettext('Anfangen um')) + \" \", 1),\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"number\",\n              class: \"wide\",\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.taskDefinition.startAt) = $event))\n            }, null, 512), [\n              [\n                _vModelText,\n                _ctx.taskDefinition.startAt,\n                void 0,\n                { number: true }\n              ]\n            ])\n          ]),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            class: \"button\",\n            onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onClickUseCurrentTime && _ctx.onClickUseCurrentTime(...args)))\n          }, _toDisplayString(_ctx.$gettext('Aktuelle Position setzen')), 1)\n        ])\n      ])\n    ])\n  ], 64))\n}","\nimport { defineComponent, PropType } from 'vue';\nimport VideoPlayer from '@/components/interactiveVideo/VideoPlayer.vue';\nimport { $gettext } from '@/language/gettext';\nimport { InteractiveVideoTask } from '@/models/InteractiveVideoTask';\nimport FileUpload from '@/components/FileUpload.vue';\nimport { UploadedFile } from '@/routes';\n\nexport default defineComponent({\n  name: 'SelectVideo',\n  props: {\n    taskDefinition: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      youtubeUrlInput: '',\n      currentTime: 0,\n    };\n  },\n  watch: {\n    'taskDefinition.video': {\n      immediate: true,\n      handler: function (value) {\n        if (value.type === 'youtube') {\n          this.youtubeUrlInput = value.url;\n        } else {\n          this.youtubeUrlInput = '';\n        }\n      },\n    },\n    'taskDefinition.startAt': function (startAt: number) {\n      (\n        this.$refs.videoPlayer as InstanceType<typeof VideoPlayer>\n      )?.player!.currentTime(startAt);\n    },\n  },\n  methods: {\n    $gettext,\n    onTimeUpdate(time: number) {\n      this.currentTime = time;\n    },\n    onClickUseCurrentTime() {\n      this.taskDefinition.startAt = this.currentTime;\n    },\n    onSaveYoutubeVideo() {\n      this.taskDefinition.video = {\n        type: 'youtube',\n        url: this.youtubeUrlInput,\n      };\n    },\n    deleteVideo() {\n      this.taskDefinition.video = {\n        type: 'none',\n      };\n    },\n    onUploadStudipVideo(file: UploadedFile) {\n      this.taskDefinition.video = {\n        type: 'studipFileReference',\n        file,\n      };\n    },\n  },\n  components: { FileUpload, VideoPlayer },\n});\n","import { render } from \"./SelectVideo.vue?vue&type=template&id=2c6259ba&scoped=true&ts=true\"\nimport script from \"./SelectVideo.vue?vue&type=script&lang=ts\"\nexport * from \"./SelectVideo.vue?vue&type=script&lang=ts\"\n\nimport \"./SelectVideo.vue?vue&type=style&index=0&id=2c6259ba&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2c6259ba\"]])\n\nexport default __exports__","\nimport { defineComponent, PropType } from 'vue';\nimport { InteractiveVideoTask } from '@/models/InteractiveVideoTask';\nimport { $gettext } from '@/language/gettext';\nimport TabsComponent from '@/components/interactiveVideo/TabsComponent.vue';\nimport TabComponent from '@/components/interactiveVideo/TabComponent.vue';\nimport AddInteractions from '@/components/interactiveVideo/AddInteractions.vue';\nimport SelectVideo from '@/components/interactiveVideo/SelectVideo.vue';\n\nexport default defineComponent({\n  name: 'InteractiveVideoEditor',\n  data() {\n    return {};\n  },\n  methods: {\n    $gettext,\n  },\n  props: {\n    taskDefinition: {\n      type: Object as PropType<InteractiveVideoTask>,\n      required: true,\n    },\n  },\n  computed: {},\n  components: {\n    SelectVideo,\n    AddInteractions,\n    TabComponent,\n    TabsComponent,\n  },\n});\n","import { render } from \"./InteractiveVideoEditor.vue?vue&type=template&id=7fc88833&ts=true\"\nimport script from \"./InteractiveVideoEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./InteractiveVideoEditor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import FillInTheBlanksViewer from '@/components/FillInTheBlanksViewer.vue';\nimport FillInTheBlanksEditor from '@/components/FillInTheBlanksEditor.vue';\nimport QuestionEditor from '@/components/QuestionEditor.vue';\nimport QuestionViewer from '@/components/QuestionViewer.vue';\nimport DragTheWordsViewer from '@/components/DragTheWordsViewer.vue';\nimport DragTheWordsEditor from '@/components/DragTheWordsEditor.vue';\nimport MarkTheWordsViewer from '@/components/MarkTheWordsViewer.vue';\nimport MarkTheWordsEditor from '@/components/MarkTheWordsEditor.vue';\nimport MemoryEditor from '@/components/MemoryEditor.vue';\nimport MemoryViewer from '@/components/MemoryViewer.vue';\nimport ImagePairingViewer from '@/components/ImagePairingViewer.vue';\nimport ImagePairingEditor from '@/components/ImagePairingEditor.vue';\nimport ImageSequencingViewer from '@/components/ImageSequencingViewer.vue';\nimport ImageSequencingEditor from '@/components/ImageSequencingEditor.vue';\nimport { v4 } from 'uuid';\nimport { z } from 'zod';\nimport InteractiveVideoViewer from '@/components/interactiveVideo/InteractiveVideoViewer.vue';\nimport InteractiveVideoEditor from '@/components/interactiveVideo/InteractiveVideoEditor.vue';\nimport { interactiveVideoTaskSchema } from '@/models/InteractiveVideoTask';\nimport { $gettext } from '@/language/gettext';\n\nexport const feedbackSchema = z.object({\n  percentage: z.number(),\n  message: z.string(),\n});\nexport type Feedback = z.infer<typeof feedbackSchema>;\n\nexport const dragTheWordsTaskSchema = z.object({\n  task_type: z.literal('DragTheWords'),\n  template: z.string(),\n  retryAllowed: z.boolean(),\n  showSolutionsAllowed: z.boolean(),\n  instantFeedback: z.boolean(),\n  allBlanksMustBeFilledForSolutions: z.boolean(),\n  alphabeticOrder: z.boolean(),\n  strings: z.object({\n    checkButton: z.string(),\n    retryButton: z.string(),\n    solutionsButton: z.string(),\n    fillInAllBlanksMessage: z.string(),\n    resultMessage: z.string(),\n  }),\n  feedback: z.array(feedbackSchema),\n});\nexport type DragTheWordsTask = z.infer<typeof dragTheWordsTaskSchema>;\n\nexport const markTheWordsTaskSchema = z.object({\n  task_type: z.literal('MarkTheWords'),\n  template: z.string(),\n  retryAllowed: z.boolean(),\n  showSolutionsAllowed: z.boolean(),\n  strings: z.object({\n    checkButton: z.string(),\n    retryButton: z.string(),\n    solutionsButton: z.string(),\n    resultMessage: z.string(),\n  }),\n});\nexport type MarkTheWordsTask = z.infer<typeof markTheWordsTaskSchema>;\n\nexport const memoryCardSchema = z.object({\n  uuid: z.string(),\n  imageUrl: z.string(),\n  altText: z.string(),\n});\nexport type MemoryCard = z.infer<typeof memoryCardSchema>;\n\nexport const memoryTaskSchema = z.object({\n  task_type: z.literal('Memory'),\n  cards: z.array(memoryCardSchema),\n  strings: z.object({\n    checkButton: z.string(),\n    retryButton: z.string(),\n    solutionsButton: z.string(),\n    resultMessage: z.string(),\n  }),\n});\nexport type MemoryTask = z.infer<typeof memoryTaskSchema>;\n\nexport const fillInTheBlanksTaskSchema = z.object({\n  task_type: z.literal('FillInTheBlanks'),\n  template: z.string(),\n  retryAllowed: z.boolean(),\n  showSolutionsAllowed: z.boolean(),\n  caseSensitive: z.boolean(),\n  autoCorrect: z.boolean(),\n  allBlanksMustBeFilledForSolutions: z.boolean(),\n  acceptTypos: z.boolean(),\n  strings: z.object({\n    checkButton: z.string(),\n    retryButton: z.string(),\n    solutionsButton: z.string(),\n    fillInAllBlanksMessage: z.string(),\n    resultMessage: z.string(),\n  }),\n  feedback: z.array(feedbackSchema),\n});\nexport type FillInTheBlanksTask = z.infer<typeof fillInTheBlanksTaskSchema>;\n\nexport const questionAnswerSchema = z.object({\n  text: z.string(),\n  correct: z.boolean(),\n  strings: z.object({\n    hint: z.string(),\n    feedbackSelected: z.string(),\n    feedbackNotSelected: z.string(),\n  }),\n});\nexport type QuestionAnswer = z.infer<typeof questionAnswerSchema>;\n\nexport const questionTaskSchema = z.object({\n  task_type: z.literal('Question'),\n  question: z.string(),\n  answers: z.array(questionAnswerSchema),\n  canAnswerMultiple: z.boolean(),\n  retryAllowed: z.boolean(),\n  randomOrder: z.boolean(),\n  showSolutionsAllowed: z.boolean(),\n  strings: z.object({\n    checkButton: z.string(),\n    retryButton: z.string(),\n    solutionsButton: z.string(),\n  }),\n});\nexport type QuestionTask = z.infer<typeof questionTaskSchema>;\n\nexport const imageSchema = z.object({\n  uuid: z.string(),\n  imageUrl: z.string(),\n  altText: z.string(),\n});\nexport type Image = z.infer<typeof imageSchema>;\n\nexport const imagePairSchema = z.object({\n  uuid: z.string(),\n  draggableImage: imageSchema,\n  targetImage: imageSchema,\n});\nexport type ImagePair = z.infer<typeof imagePairSchema>;\n\nexport const imagePairingTaskSchema = z.object({\n  task_type: z.literal('ImagePairing'),\n  imagePairs: z.array(imagePairSchema),\n  strings: z.object({\n    checkButton: z.string(),\n    retryButton: z.string(),\n    solutionsButton: z.string(),\n    resultMessage: z.string(),\n  }),\n});\nexport type ImagePairingTask = z.infer<typeof imagePairingTaskSchema>;\n\nexport const imageSequencingTaskSchema = z.object({\n  task_type: z.literal('ImageSequencing'),\n  images: z.array(imageSchema),\n  strings: z.object({\n    checkButton: z.string(),\n    retryButton: z.string(),\n    solutionsButton: z.string(),\n    resultMessage: z.string(),\n  }),\n});\nexport type ImageSequencingTask = z.infer<typeof imageSequencingTaskSchema>;\n\nexport const taskDefinitionSchema = z.union([\n  fillInTheBlanksTaskSchema,\n  questionTaskSchema,\n  dragTheWordsTaskSchema,\n  markTheWordsTaskSchema,\n  memoryTaskSchema,\n  imagePairingTaskSchema,\n  imageSequencingTaskSchema,\n  interactiveVideoTaskSchema,\n]);\nexport type TaskDefinition = z.infer<typeof taskDefinitionSchema>;\n\n// Allowed lmb task types to be inserted in the Interactive Video Editor.\n// Excludes the type 'interactive video' to avoid a recursive reference, which\n// is cumbersome to solve in Typescript/Zod.\n// I at first used the workaround described at https://github.com/colinhacks/zod#recursive-types\n// but I later ran into hard-to-resolve typechecking errors when I started to\n// use .optional() inside of schemas. I decided this is the better option for now. -Ann\nexport const taskDefinitionSchemaMinusInteractiveVideo = z.union([\n  fillInTheBlanksTaskSchema,\n  questionTaskSchema,\n  dragTheWordsTaskSchema,\n  markTheWordsTaskSchema,\n  memoryTaskSchema,\n  imagePairingTaskSchema,\n  imageSequencingTaskSchema,\n]);\n\n// Here, a bit of boilerplate is required to create a schema for the union of\n// all possible 'task_type' values\nexport const taskTypeSchema = z.union([\n  fillInTheBlanksTaskSchema.shape.task_type,\n  questionTaskSchema.shape.task_type,\n  dragTheWordsTaskSchema.shape.task_type,\n  markTheWordsTaskSchema.shape.task_type,\n  memoryTaskSchema.shape.task_type,\n  imagePairingTaskSchema.shape.task_type,\n  imageSequencingTaskSchema.shape.task_type,\n  interactiveVideoTaskSchema.shape.task_type,\n]);\n\nexport function newTask(type: TaskDefinition['task_type']): TaskDefinition {\n  switch (type) {\n    case 'FillInTheBlanks':\n      return {\n        task_type: 'FillInTheBlanks',\n        template: 'Hier entsteht der *Lcken*text.',\n        retryAllowed: true,\n        showSolutionsAllowed: true,\n        caseSensitive: false,\n        autoCorrect: false,\n        allBlanksMustBeFilledForSolutions: false,\n        acceptTypos: true,\n        strings: {\n          checkButton: 'Antworten berprfen',\n          retryButton: 'Erneut versuchen',\n          solutionsButton: 'Lsungen anzeigen',\n          fillInAllBlanksMessage:\n            'Alle Lcken mssen ausgefllt sein, um Lsungen anzuzeigen.',\n          resultMessage: ':correct von :total Lcken richtig ausgefllt.',\n        },\n        feedback: [\n          { percentage: 0, message: 'Versuchen Sie es noch einmal.' },\n          { percentage: 50, message: 'Gut.' },\n          { percentage: 75, message: 'Sehr gut.' },\n          { percentage: 100, message: 'Perfekt!' },\n        ],\n      };\n    case 'Question':\n      return {\n        task_type: 'Question',\n        question:\n          'Welche dieser Himmelskrper sind Planeten in unserem Sonnensystem?',\n        answers: [\n          {\n            text: 'Mond',\n            correct: false,\n            strings: {\n              hint: '',\n              feedbackSelected: 'Dies ist ein Mond, kein Planet.',\n              feedbackNotSelected: 'Genau, der Mond ist ein Mond.',\n            },\n          },\n          {\n            text: 'Merkur',\n            correct: true,\n            strings: {\n              hint: '',\n              feedbackSelected: '',\n              feedbackNotSelected: '',\n            },\n          },\n          {\n            text: 'Venus',\n            correct: true,\n            strings: {\n              hint: '',\n              feedbackSelected: '',\n              feedbackNotSelected: '',\n            },\n          },\n          {\n            text: 'Mars',\n            correct: true,\n            strings: {\n              hint: '',\n              feedbackSelected: '',\n              feedbackNotSelected: '',\n            },\n          },\n          {\n            text: 'Pluto',\n            correct: false,\n            strings: {\n              hint: 'Hat sich hier was gendert?',\n              feedbackSelected: '',\n              feedbackNotSelected: '',\n            },\n          },\n          {\n            text: 'Titan',\n            correct: false,\n            strings: {\n              hint: '',\n              feedbackSelected:\n                'Das ist leider nicht richtig. Der Titan ist ein Mond vom Saturn.',\n              feedbackNotSelected: 'Genau, der Titan ist ein Mond vom Saturn.',\n            },\n          },\n          {\n            text: 'Sonne',\n            correct: false,\n            strings: {\n              hint: '',\n              feedbackSelected:\n                'Das ist leider nicht richtig. Die Sonne ist ein Stern.',\n              feedbackNotSelected: 'Genau, die Sonne ist ein Stern.',\n            },\n          },\n        ],\n        canAnswerMultiple: true,\n        retryAllowed: true,\n        randomOrder: true,\n        showSolutionsAllowed: true,\n        strings: {\n          checkButton: 'Antworten berprfen',\n          retryButton: 'Erneut versuchen',\n          solutionsButton: 'Lsungen anzeigen',\n        },\n      };\n    case 'DragTheWords':\n      return {\n        task_type: 'DragTheWords',\n        template: 'Drag the *words* to the matching *gaps*.',\n        retryAllowed: true,\n        showSolutionsAllowed: true,\n        instantFeedback: false,\n        allBlanksMustBeFilledForSolutions: false,\n        alphabeticOrder: false,\n        strings: {\n          checkButton: 'Antworten berprfen',\n          retryButton: 'Erneut versuchen',\n          solutionsButton: 'Lsungen anzeigen',\n          fillInAllBlanksMessage:\n            'Alle Lcken mssen ausgefllt sein, um Lsungen anzuzeigen.',\n          resultMessage: ':correct von :total Lcken richtig ausgefllt.',\n        },\n        feedback: [\n          { percentage: 0, message: 'Versuchen Sie es noch einmal.' },\n          { percentage: 50, message: 'Gut.' },\n          { percentage: 75, message: 'Sehr gut.' },\n          { percentage: 100, message: 'Perfekt!' },\n        ],\n      };\n    case 'MarkTheWords':\n      return {\n        task_type: 'MarkTheWords',\n        template:\n          '*The* moon is our natural satellite, *i.e.* it revolves around the *Earth*!',\n        retryAllowed: true,\n        showSolutionsAllowed: true,\n        strings: {\n          checkButton: 'Antworten berprfen',\n          retryButton: 'Erneut versuchen',\n          solutionsButton: 'Lsungen anzeigen',\n          resultMessage: ':correct von :total Wrter richtig ausgewhlt.',\n        },\n      };\n    case 'Memory':\n      return {\n        task_type: 'Memory',\n        cards: [\n          {\n            uuid: v4(),\n            imageUrl: '',\n            altText: '',\n          },\n        ],\n        strings: {\n          checkButton: 'Antworten berprfen',\n          retryButton: 'Erneut versuchen',\n          solutionsButton: 'Lsungen anzeigen',\n          resultMessage: ':correct von :total Wrter richtig ausgewhlt.',\n        },\n      };\n    case 'ImagePairing':\n      return {\n        task_type: 'ImagePairing',\n        imagePairs: [\n          {\n            uuid: v4(),\n            draggableImage: {\n              uuid: v4(),\n              imageUrl: '',\n              altText: '',\n            },\n            targetImage: {\n              uuid: v4(),\n              imageUrl: '',\n              altText: '',\n            },\n          },\n        ],\n        strings: {\n          checkButton: 'Antworten berprfen',\n          retryButton: 'Erneut versuchen',\n          solutionsButton: 'Lsungen anzeigen',\n          resultMessage: ':correct von :total Wrter richtig ausgewhlt.',\n        },\n      };\n    case 'ImageSequencing':\n      return {\n        task_type: 'ImageSequencing',\n        images: [\n          {\n            uuid: v4(),\n            imageUrl: '',\n            altText: '',\n          },\n        ],\n        strings: {\n          checkButton: 'Antworten berprfen',\n          retryButton: 'Erneut versuchen',\n          solutionsButton: 'Lsungen anzeigen',\n          resultMessage: ':correct von :total Wrter richtig ausgewhlt.',\n        },\n      };\n    case 'InteractiveVideo':\n      return {\n        task_type: 'InteractiveVideo',\n        interactions: [],\n        video: {\n          type: 'none',\n        },\n        autoplay: false,\n        startAt: 0,\n      };\n    default:\n      throw new Error('Unimplemented type: ' + type);\n  }\n}\n\nexport function viewerForTaskType(type: TaskDefinition['task_type']) {\n  switch (type) {\n    case 'FillInTheBlanks':\n      return FillInTheBlanksViewer;\n    case 'Question':\n      return QuestionViewer;\n    case 'DragTheWords':\n      return DragTheWordsViewer;\n    case 'MarkTheWords':\n      return MarkTheWordsViewer;\n    case 'Memory':\n      return MemoryViewer;\n    case 'ImagePairing':\n      return ImagePairingViewer;\n    case 'ImageSequencing':\n      return ImageSequencingViewer;\n    case 'InteractiveVideo':\n      return InteractiveVideoViewer;\n    default:\n      throw new Error('Unimplemented task type: ' + type);\n  }\n}\n\nexport function editorForTaskType(type: TaskDefinition['task_type']) {\n  switch (type) {\n    case 'FillInTheBlanks':\n      return FillInTheBlanksEditor;\n    case 'Question':\n      return QuestionEditor;\n    case 'DragTheWords':\n      return DragTheWordsEditor;\n    case 'MarkTheWords':\n      return MarkTheWordsEditor;\n    case 'Memory':\n      return MemoryEditor;\n    case 'ImagePairing':\n      return ImagePairingEditor;\n    case 'ImageSequencing':\n      return ImageSequencingEditor;\n    case 'InteractiveVideo':\n      return InteractiveVideoEditor;\n    default:\n      throw new Error('Unimplemented task type: ' + type);\n  }\n}\n\nexport function printTaskType(type: TaskDefinition['task_type']): string {\n  switch (type) {\n    case 'ImageSequencing':\n      return $gettext('Image Sequencing');\n    case 'Memory':\n      return $gettext('Memory');\n    case 'FillInTheBlanks':\n      return $gettext('Fill In The Blanks');\n    case 'Question':\n      return $gettext('Question');\n    case 'DragTheWords':\n      return $gettext('Drag The Words');\n    case 'MarkTheWords':\n      return $gettext('Mark The Words');\n    case 'ImagePairing':\n      return $gettext('Image Pairing');\n    case 'InteractiveVideo':\n      return $gettext('Interactive Video');\n  }\n}\n\n/**\n * @return true if the viewer for the given task type should be visible\n * while the editor for that task type is open.\n */\nexport function showViewerAboveEditor(\n  type: TaskDefinition['task_type']\n): boolean {\n  return type !== 'InteractiveVideo';\n}\n","import { TaskDefinition } from '@/models/TaskDefinition';\nimport { z } from 'zod';\n\n/**\n * Save a Vue.js Lernmodul that is being edited in the \"Lernmodule\" tab of a\n * course.\n * @param taskDefinition The definition of the task\n * @param moduleName The name of the Lernmodul\n * @param infoText The HTML description of the Lernmodul\n * @param module_id The id from lernmodule_module\n * @param block_id The id from lernmodule_blocks where the module is to be\n *                 inserted.  (This only applies for newly created modules.)\n */\nexport async function saveTask(\n  taskDefinition: TaskDefinition,\n  moduleName: string,\n  infoText: string,\n  module_id: string,\n  block_id?: string\n): Promise<SaveTaskResponse> {\n  const url = window.STUDIP.LernmoduleVueJS.saveRoute;\n  const token = window.STUDIP.CSRF_TOKEN;\n  const formData = new FormData();\n  // TODO Maybe we should parse taskDefinition here to ensure it has no extra\n  //   fields we didn't intend to save.\n  formData.append('task_definition', JSON.stringify(taskDefinition));\n  formData.append('module_id', module_id);\n  formData.append('name', moduleName);\n  formData.append('infotext', infoText);\n  if (block_id) {\n    formData.append('block_id', block_id);\n  }\n  formData.append(token.name, token.value);\n  return fetch(url, {\n    method: 'POST',\n    body: formData,\n  }).then((response) => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    // TODO Maybe we should parse the server's response to ensure it really is\n    //  an instance of SaveTaskResponse.\n    return response.json() as Promise<SaveTaskResponse>;\n  });\n}\n\nexport interface SaveTaskResponse {\n  status: 'success';\n  taskDefinition: TaskDefinition;\n  moduleName: string;\n  infotext: string;\n}\n\n/**\n * Send a request to Stud.IP to update the number of points earned by the student\n * for the Lernmodul that is currently viewed.\n * @param points -- a map describing how many points the student should be reported\n * as having for each part of the Lernmodul.\n * Key: The ID or name of the part.  Value: The number of points.\n * @param success - If true, the attempt will be marked as 'successful'.\n */\nexport async function updateAttempt(\n  points: Record<string, number>,\n  success: boolean\n): Promise<void> {\n  // The ID of the Lernmodul is encoded in this URL provided to us by the server.\n  const url = window.STUDIP.LernmoduleVueJS.updateAttemptRoute;\n  const formData = new FormData();\n  const token = window.STUDIP.CSRF_TOKEN;\n  formData.append(token.name, token.value);\n  // Convert object into a nested array which PHP will understand\n  Object.entries(points).forEach(([name, score]) => {\n    formData.append(`message[points][${name}]`, score.toString());\n  });\n  if (success) {\n    formData.append('message[success]', 'true');\n  }\n  return fetch(url, {\n    method: 'POST',\n    body: formData,\n  }).then((response) => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n  });\n}\n\nexport const uploadedFileSchema = z.object({\n  name: z.string(),\n  type: z.string(),\n  url: z.string(),\n});\nexport type UploadedFile = z.infer<typeof uploadedFileSchema>;\n\nconst uploadFileResponseSchema = z.object({\n  files: z.array(uploadedFileSchema),\n});\nexport type UploadFileResponse = z.infer<typeof uploadFileResponseSchema>;\n\n/**\n * Upload the given file to the user's Wysiwyg Uploads folder in Stud.IP.\n * @param image A File object\n */\nexport async function uploadFile(image: File): Promise<UploadFileResponse> {\n  const uploadUrl = window.STUDIP.URLHelper.getURL(\n    'dispatch.php/wysiwyg/upload'\n  );\n  const formData = new FormData();\n  const token = window.STUDIP.CSRF_TOKEN;\n  formData.append(token.name, token.value);\n  formData.append('files[]', image);\n  return fetch(uploadUrl, {\n    method: 'POST',\n    body: formData,\n  }).then(async (response) => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    const json = await response.json();\n    try {\n      return uploadFileResponseSchema.parse(json);\n    } catch (error) {\n      throw new Error('Could not parse server response', { cause: error });\n    }\n  });\n}\n","import { Action, Module, Mutation, VuexModule } from 'vuex-module-decorators';\nimport { taskEditorStore } from '@/store';\n\n@Module({ name: 'coursewareBlock' })\nexport class CoursewareBlockModule extends VuexModule {\n  showEditorUI: boolean = false;\n\n  // Toggle whether to show the editing UI in the courseware block.\n  // This should be triggered via messages posted to the iframe.\n  // See courseware-main.ts and LernmoduleCoursewareBlockBase.vue.\n  @Mutation\n  setShowEditorUI(state: boolean) {\n    this.showEditorUI = state;\n  }\n\n  @Mutation\n  saveBlock() {\n    console.log('coursewareBlockStore: saveBlock() mutation called');\n    // Tell the Vue 2 component we are wrapped in to save the block.\n    // See the method 'onWindowMessage' of LernmoduleCoursewareBlockBase.vue\n    // The taskDefinition must be serialized in order for it to be passed\n    // between windows.\n    const taskDefinition = JSON.parse(\n      JSON.stringify(taskEditorStore.taskDefinition)\n    );\n    window.parent.postMessage({\n      type: 'SaveCoursewareBlock',\n      taskDefinition,\n    });\n  }\n\n  @Mutation\n  cancelEditing() {\n    console.log('coursewareBlockStore: cancelEditing() mutation called');\n    // Tell the Vue 2 component we are wrapped in to stop editing the block\n    // without saving the user's changes.\n    // See the method 'onWindowMessage' of LernmoduleCoursewareBlockBase.vue\n    window.parent.postMessage({\n      type: 'CancelEditingCoursewareBlock',\n    });\n  }\n}\n","import { Action, Module, Mutation, VuexModule } from 'vuex-module-decorators';\nimport {\n  newTask,\n  TaskDefinition,\n  taskDefinitionSchema,\n} from '@/models/TaskDefinition';\nimport { isArray, isEqual } from 'lodash';\nimport { saveTask, SaveTaskResponse } from '@/routes';\nimport { setAutoFreeze } from 'immer';\n\n// Prevent immer from freezing objects.  This behavior causes trouble when we\n// attempt to use v-model with an object produced by immer, because v-model\n// works by mutating objects.\nsetAutoFreeze(false);\n\ntype Saved = {\n  status: 'saved';\n};\ntype Saving = {\n  status: 'saving';\n};\ntype SaveError = {\n  status: 'error';\n  error: unknown;\n};\ntype SaveStatus = Saved | Saving | SaveError;\n\ninterface UndoRedoState {\n  taskDefinition: TaskDefinition;\n  undoBatch: unknown;\n}\n\nfunction sleep(ms: number) {\n  return new Promise((r) => setTimeout(r, ms));\n}\n\n@Module({ name: 'taskEditor' })\nexport class TaskEditorModule extends VuexModule {\n  saveStatus: SaveStatus = { status: 'saved' };\n  fatalErrors: string[] = [];\n  nonFatalErrors: string[] = [];\n  serverTaskDefinition: TaskDefinition | [] = [];\n  serverModuleName: string = '';\n  serverInfotext: string = '';\n  moduleName: string = '';\n  infotext: string = '';\n  undoRedoStack: UndoRedoState[] = [\n    {\n      taskDefinition: newTask('FillInTheBlanks'),\n      undoBatch: {},\n    },\n  ];\n  undoRedoIndex = 0;\n\n  get taskDefinition(): TaskDefinition {\n    return this.undoRedoStack[this.undoRedoIndex].taskDefinition;\n  }\n\n  get hasUnsavedChanges(): boolean {\n    return (\n      !isEqual(this.taskDefinition, this.serverTaskDefinition) ||\n      this.serverModuleName !== this.moduleName ||\n      this.serverInfotext !== this.infotext\n    );\n  }\n\n  get canUndo() {\n    return this.undoRedoIndex > 0;\n  }\n\n  get canRedo() {\n    return this.undoRedoIndex < this.undoRedoStack.length - 1;\n  }\n\n  @Mutation\n  undo() {\n    if (this.undoRedoIndex > 0) {\n      const currentState = this.undoRedoStack[this.undoRedoIndex];\n      this.undoRedoIndex--;\n\n      // Focus the input field whose contents will change as a result of this undo.\n      // That's how undo/redo behaves in native apps like Microsoft Word.\n      // When you press undo, it scrolls to the point in the document where\n      // the undo took place.  This lets you observe the result of your action.\n      const inputElements = document.querySelectorAll(\n        `[data-undo-focus-id=\"${currentState.undoBatch}\"]`\n      );\n      if (inputElements.length > 0) {\n        const inputEl = inputElements.item(0) as HTMLElement;\n        // If the input is inside of a collapsed <fieldset>, then the <fieldset>\n        // should be un-collapsed so that the user can see the input field.\n        const collapsedParents = [\n          ...document.querySelectorAll('fieldset.collapsable.collapsed'),\n        ].filter((element) => element.contains(inputEl));\n        collapsedParents.forEach((parent) =>\n          parent.classList.remove('collapsed')\n        );\n        inputEl.focus();\n      }\n    }\n  }\n\n  @Mutation\n  redo() {\n    if (this.undoRedoIndex < this.undoRedoStack.length - 1) {\n      this.undoRedoIndex++;\n      const nextState = this.undoRedoStack[this.undoRedoIndex];\n\n      // Manage focus -- see comments in undo()\n      const inputElements = document.querySelectorAll(\n        `[data-undo-focus-id=\"${nextState.undoBatch}\"]`\n      );\n      if (inputElements.length > 0) {\n        const inputEl = inputElements.item(0) as HTMLElement;\n        const collapsedParents = [\n          ...document.querySelectorAll('fieldset.collapsable.collapsed'),\n        ].filter((element) => element.contains(inputEl));\n        collapsedParents.forEach((parent) =>\n          parent.classList.remove('collapsed')\n        );\n        inputEl.focus();\n      }\n    }\n  }\n\n  // Initialize the editor store to a state usable for courseware\n  @Mutation\n  initializeCourseware(task_json: TaskDefinition) {\n    console.info('initializeCourseware()', task_json);\n    this.serverTaskDefinition = task_json;\n    this.undoRedoStack = [\n      { taskDefinition: this.serverTaskDefinition, undoBatch: {} },\n    ];\n  }\n\n  // Initialize the editor store to a state usable for the non-courseware version\n  // of Lernmodule (AKA the 'Lernmodule' tab in a course).\n  @Mutation\n  initializeNonCourseware() {\n    // In Linux on Anns PC this is an empty array but on Windows on Thomas PC it's just NULL.\n    // We don't know why this is, but for now, we will just accept it and handle both cases.\n    if (\n      window.STUDIP.LernmoduleVueJS.module.customdata &&\n      !isArray(window.STUDIP.LernmoduleVueJS.module.customdata)\n    ) {\n      this.serverTaskDefinition = taskDefinitionSchema.parse(\n        window.STUDIP.LernmoduleVueJS.module.customdata\n      );\n      this.undoRedoStack = [\n        { taskDefinition: this.serverTaskDefinition, undoBatch: {} },\n      ];\n    }\n    this.serverModuleName = window.STUDIP.LernmoduleVueJS.module.name;\n    this.serverInfotext = window.STUDIP.LernmoduleVueJS.infotext;\n    this.moduleName = window.STUDIP.LernmoduleVueJS.module.name;\n    this.infotext = window.STUDIP.LernmoduleVueJS.infotext;\n  }\n\n  @Mutation\n  startedSaving() {\n    this.saveStatus = { status: 'saving' };\n  }\n\n  @Mutation\n  saveSuccess(payload: SaveTaskResponse) {\n    this.saveStatus = { status: 'saved' };\n    this.serverTaskDefinition = payload.taskDefinition;\n    this.serverModuleName = payload.moduleName;\n    this.serverInfotext = payload.infotext;\n  }\n\n  @Mutation\n  saveFailure(error: unknown) {\n    this.saveStatus = { status: 'error', error };\n    this.nonFatalErrors.push(\n      'The task could not be saved.  Check the console for more details. '\n    );\n    console.log(error);\n  }\n\n  @Action\n  async saveTask() {\n    if (this.saveStatus.status === 'saving') {\n      return;\n    }\n    this.context.commit('startedSaving');\n    try {\n      const saveResult = await saveTask(\n        this.taskDefinition,\n        this.moduleName,\n        this.infotext,\n        window.STUDIP.LernmoduleVueJS.module.module_id,\n        window.STUDIP.LernmoduleVueJS.block_id\n      );\n      await sleep(500);\n      this.context.commit('saveSuccess', saveResult);\n    } catch (error) {\n      this.context.commit('saveFailure', { error });\n    }\n  }\n\n  /**\n   * Modify the currently edited task definition, creating a new undo/redo state\n   * if appropriate.  Edits are batched together based on the parameter 'undoBatch'.\n   * @param payload.taskDefinition The new state of the task being edited\n   * @param payload.undoBatch Any value.\n   * If undoBatch is an empty object, a new undo/redo state will always be created.\n   * Otherwise, a new undo/redo state will be created if undoBatch is different\n   * from the undoBatch of the previously performed action.\n   */\n  @Mutation\n  performEdit(payload: {\n    newTaskDefinition: TaskDefinition;\n    undoBatch: unknown;\n  }) {\n    const currentUndoRedoState = this.undoRedoStack[this.undoRedoIndex];\n    if (\n      isEqual(currentUndoRedoState.taskDefinition, payload.newTaskDefinition)\n    ) {\n      return; // Do not pollute the undo-redo history with no-op changes\n    }\n    const shouldMergeEdits =\n      !isEqual(payload.undoBatch, {}) &&\n      isEqual(payload.undoBatch, currentUndoRedoState.undoBatch);\n    if (shouldMergeEdits) {\n      // Amend the last undo state instead of creating a new one.\n      currentUndoRedoState.taskDefinition = payload.newTaskDefinition;\n      this.undoRedoStack = this.undoRedoStack.slice(0, this.undoRedoIndex + 1);\n    } else {\n      // Create a new undo state and append it to the stack.\n      this.undoRedoStack = this.undoRedoStack\n        .slice(0, this.undoRedoIndex + 1)\n        .concat([\n          {\n            taskDefinition: payload.newTaskDefinition,\n            undoBatch: payload.undoBatch,\n          },\n        ]);\n      this.undoRedoIndex += 1;\n    }\n  }\n\n  @Mutation\n  setModuleName(name: string) {\n    this.moduleName = name;\n  }\n\n  @Mutation\n  setInfoText(value: string) {\n    this.infotext = value;\n  }\n}\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"textarea\", {\n    value: _ctx.modelValue,\n    ref: \"studip_wysiwyg\",\n    class: \"studip-wysiwyg\",\n    onInput: _cache[0] || (_cache[0] = ($event: any) => (_ctx.updateValue($event.target.value)))\n  }, null, 40, _hoisted_1))\n}","\n// need v-model to provide and get content -> <studip-wysiwyg v-model=\"content\" />\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'studip-wysiwyg',\n  props: {\n    modelValue: String,\n  },\n  data() {\n    return {\n      fallbackActive: false,\n    };\n  },\n  mounted() {\n    let ckeInit = this.initCKE();\n    if (!ckeInit) {\n      this.fallbackActive = true;\n    }\n  },\n  methods: {\n    initCKE() {\n      if (!window.STUDIP.wysiwyg_enabled) {\n        return false;\n      }\n      const textAreaElement = this.$refs.studip_wysiwyg as HTMLTextAreaElement;\n      // Process the jQuery event 'wysiwyg.load' which is triggered asynchronously\n      // after the wysiwyg editor is mounted using the 'replace()' method.\n      textAreaElement.onload = (event: any) => {\n        console.info('load');\n        let ckeditor = window.STUDIP.wysiwyg.getEditor(textAreaElement)!;\n        ckeditor.model.document.on('change:data', () => {\n          const data = ckeditor.getData();\n          // Remove the <p> tag wrapping the editor's contents.\n          // These tags are inserted automatically by CKEditor5.\n          // It appears to be a WONTFIX on their end.\n          // See https://github.com/ckeditor/ckeditor5/issues/1537\n          const removedPTagsText = data\n            .replace(/<p>(.*?)/, '$1')\n            .replace(/(.*?)<\\/p>/, '$1');\n          this.$emit('update:modelValue', removedPTagsText);\n        });\n        // Override 'enter' to insert <br /> instead of <p></p> in the editor.\n        // This produces HTML which is more easily parsed in our various learning tasks.\n        // Source: https://github.com/ckeditor/ckeditor5/issues/1141#issuecomment-403403526\n        ckeditor.editing.view.document.on(\n          'enter',\n          (evt, data) => {\n            ckeditor.execute('shiftEnter');\n            data.preventDefault();\n            evt.stop();\n          },\n          { priority: 'high' }\n        );\n        // Disable the autoformat plugin so that *asterisks* surrounding text\n        // are not automatically converted into italic formatting.\n        // We use this syntax in the editor for various tasks, such as Fill In The Blanks.\n        // (It might be nicer to disable this using 'removePlugins' option in\n        // the config for CKEditor5, but the interface of STUDIP.wysiwyg.replace()\n        // does not allow us to alter the CKEditor5 config.)\n        const autoformat = ckeditor.plugins.get('Autoformat');\n        (autoformat as unknown as { isEnabled: boolean }).isEnabled = false;\n      };\n      // This asynchronous method does not return a promise.  Instead, it fires\n      // a 'load' event, which is processed in the above event handler. >:|\n      window.STUDIP.wysiwyg.replace(textAreaElement);\n      return true;\n    },\n    updateValue(value: unknown) {\n      if (this.fallbackActive) {\n        this.$emit('update:modelValue', value);\n      }\n    },\n  },\n});\n","import { render } from \"./StudipWysiwyg.vue?vue&type=template&id=5e18ff5e&ts=true\"\nimport script from \"./StudipWysiwyg.vue?vue&type=script&lang=ts\"\nexport * from \"./StudipWysiwyg.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["modelUndoable","mounted","el","binding","vnode","prevVnode","validEl","validateElement","setElValueFromStore","splitPath","parsePath","storeValue","getValueAtPath","taskEditorStore","validatedStoreValue","validateBoundValue","value","toString","setAttribute","join","addEventListener","ev","firstPathEl","restOfPath","newState","JSON","parse","stringify","setValueAtPath","newTaskDefinition","undoBatch","console","log","store","Error","bindingMustBeStringError","split","bindingMustUseTaskDefinitionError","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","invalidElementTypeError","val","boundValueMustBePrimitiveError","o","path","reduce","accumulator","pathComponent","Object","prototype","hasOwnProperty","call","invalidPathError","lastPathComponent","pop","undefined","targetObject","selectedLanguage","values","window","STUDIP","INSTALLED_LANGUAGES","find","lang","selected","gettextPlugin","createGettext","availableLanguages","en","de","defaultLanguage","translations","$gettext","_hoisted_1","class","ref","_hoisted_2","_hoisted_3","_hoisted_4","key","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","for","_hoisted_15","_hoisted_16","_hoisted_17","_createTextVNode","_hoisted_18","_hoisted_19","_hoisted_20","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_Fragment","_renderList","parsedTemplate","element","uuid","type","innerHTML","text","_withDirectives","_createElementVNode","$event","userInputs","readonly","submittedAnswerIsCorrect","showSolutions","disabled","_normalizeClass","classForInput","onBlur","args","onInputBlurOrEnter","onKeyup","_withKeys","onInput","_vModelText","hint","_createCommentVNode","_toDisplayString","solutions","showFillInAllTheBlanksMessage","task","strings","fillInAllBlanksMessage","showResults","feedbackMessage","id","min","max","maxPoints","correctAnswers","resultMessage","showCheckButton","onClick","onClickCheck","checkButton","showExtraButtons","showSolutionButton","onClickShowSolution","solutionsButton","showRetryButton","onClickTryAgain","retryButton","debug","submittedAnswers","splitTemplate","dljs","require","defineComponent","name","props","required","data","userWantsToSeeSolutions","methods","blank","submittedAnswer","this","some","solution","isAnswerCorrect","userAnswer","caseSensitive","acceptTypos","isAnswerCorrectWithTypo","toLowerCase","distance","length","updateAttempt","points","blanks","forEach","index","$emit","success","autoGrowTextField","input","computedStyles","getComputedStyle","computedFontSize","getPropertyValue","computedFontFamily","computedPadding","fontSize","parseInt","minEm","minPx","rightPadEm","rightPadPx","static_min_pad","setTimeout","tmp","document","createElement","textContent","tmpStyles","position","padding","width","entries","style","parentElement","append","clientWidth","parentWidth","$refs","wrapperElement","remove","autoCorrect","event","target","urlForIcon","iconName","ASSETS_URL","computed","template","map","uuidv4","splitString","filter","word","blanksFilled","keys","allBlanksAreFilled","allAnswersAreCorrect","every","inputHasChanged","isEqual","showSolutionsAllowed","retryAllowed","allBlanksMustBeFilledForSolutions","replace","percentageCorrect","round","feedback","feedbackSortedByScore","percentage","message","sort","a","b","__exports__","_component_studip_wysiwyg","_resolveComponent","addBlank","instructions","_createVNode","modelValue","taskDefinition","_vModelCheckbox","_vModelSelect","onChange","i","title","titleForDeleteButtonForFeedback","removeFeedback","src","height","addFeedback","components","StudipWysiwyg","wysiwygEl","wysiwyg","$el","editor","getEditor","error","selection","model","start","getFirstPosition","end","getLastPosition","change","writer","insertText","push","feedbackToRemove","question","answers","answer","correct","removeAnswer","feedbackSelected","feedbackNotSelected","addAnswer","canAnswerMultiple","randomOrder","answerToRemove","currentUndoRedoState","classForAnswer","selectedAnswers","isSubmitted","selectedAnswer","_vModelRadio","reachedMaxPoints","showSolutionsButton","showFeedback","shaking","selectAnswer","shakeit","randomizedAnswers","Math","random","classForFilledBlank","draggable","onDragstart","startDragUsedAnswer","onDrop","onDropBlank","onDragover","_withModifiers","onDragenter","getAnswerById","onClickBlank","onDropUnusedAnswers","unusedAnswers","startDragUnusedAnswer","onClickUnusedAnswer","draggedAnswerId","draggedSourceId","clickedAnswerId","submittedAnswerId","getElement","elementId","dragEvent","answerId","dataTransfer","dropEffect","effectAllowed","property","draggedAnswer","previousBlank","preventDefault","userInputHasChangedAfterSubmitting","sortedAnswers","localeCompare","alphabeticOrder","includes","instantFeedback","_component_feedback_element","tabindex","role","isMarked","onClickWord","onKeydown","onWordKeydown","onWordKeyup","classForWord","onClickRetry","_createBlock","score","maxScore","markedWords","achievedPoints","String","Number","FeedbackElement","Set","clear","delete","add","code","has","templateElement","trim","staticWord","_component_StudipWysiwyg","addSolution","_component_EditedMemoryCard","cards","card","selectedCardIndex","selectCard","deleteCard","alt","addCard","_component_EditedMemoryCardImage","_component_FileUpload","imageUrl","onFileUploaded","onImageUploaded","cardIndex","altText","onInputAltText","deleteImage","produce","draft","findIndex","uploadRequestPromise","accept","onInputChange","emits","default","warn","fileInput","file","files","item","uploadFile","then","res","catch","FileUpload","EditedMemoryCardImage","url","onInputAltTextBAD","EditedMemoryCard","beforeMount","v4","splice","_component_MemoryCardComponent","amountOfFlips","amountOfPairsSolved","totalAmountOfPairs","onClickCard","_withScopeId","n","_pushScopeId","_popScopeId","_imports_0","memoryCardFlipped","flipped","MemoryCardComponent","firstFlippedCardId","matchingCardId","solved","firstCard","getCardById","resetAllUnsolvedCardsExcept","exceptionId","resetCards","shuffleCards","card1","card2","cardId","amountOfCardsSolved","watch","handler","flatMap","duplicateCardId","immediate","_component_TargetImage","onDropOnInteractiveImages","draggableImages","draggableImageId","isDraggableImageUsed","startDragImage","onDragend","endDragImage","onClickDraggableImage","draggedImageId","imageIdInteractedWith","getImageById","ref_for","imagePairs","imagePair","getImageDraggedOntoTarget","targetImage","isCorrect","showResult","onDropOnTargetImage","startDragTargetImage","onClickTargetImage","checkResults","reset","draggableImage","incorrect","Boolean","TargetImage","imagesDraggedOntoTargets","targetId","userInput","pair","imageId","refToImage","parentElementOfImage","cloneOfParent","cloneNode","top","left","zIndex","setDragImage","clientHeight","targetImageId","setData","userDraggedImageId","otherTargetId","getData","image","imagesById","usedImageId","imagePair1","imagePair2","_component_EditedImagePair","selectedPairIndex","selectPair","deletePair","addPair","_component_EditedImagePairImage","onUploadDraggableImage","pairIndex","onInputDraggableImageAltText","onUploadTargetImage","onInputTargetImageAltText","EditedImagePairImage","EditedImagePair","images","onDragOver","onDropImage","imageInteractedWith","fromIndex","indexOf","toIndex","moveInArray","array","_component_ImageSequencingEditorImage","selectedImageIndex","selectImage","addImage","onUploadImage","imageIndex","onInputImageAltText","ImageSequencingEditorImage","_component_VideoPlayer","_component_LmbTaskInteraction","dragState","onDragoverCapture","onDragoverRoot","visibleInteractions","interaction","_normalizeStyle","x","y","onPointerdownCapture","selectInteraction","onDragStartInteraction","onDragEndInteraction","onActivateInteraction","activateInteraction","_Transition","_withCtx","activeInteraction","closeInteraction","printTaskType","task_type","_resolveDynamicComponent","viewerForTaskType","_","editorStateSymbol","Symbol","selectedInteractionId","setup","inject","LmbTaskInteraction","player","time","initializePlayer","videoUrl","video","videoType","interactions","startTime","endTime","onPlayerReady","dispose","playerElement","classList","container","appendChild","videojs","techOrder","sources","controls","autoplay","on","currentTime","startAt","play","duration","pause","interactionId","mouseStartPos","clientX","clientY","interactionStartPos","rect","root","getBoundingClientRect","clientDx","dxFraction","xFraction","clampedXFraction","clientDy","dyFraction","yFraction","clampedYFraction","dragInteraction","VideoPlayer","counter","_component_SelectVideo","_component_TabComponent","_component_AddInteractions","_component_TabsComponent","icon","tab","hash","_renderSlot","activeTabHash","tabs","provide","addTab","count","isActive","created","buttonSelector","onDragOverTimeline","onPointerDownAxis","axisScale","point","formatVideoTimestamp","major","onPointerdown","onWheel","onContextmenu","timelineInteractionStyle","onClickInteraction","printInteractionType","onPointerDownInteractionStart","onPointermove","onPointerMoveInteractionStart","onPointerup","onPointerUpInteractionStart","onPointerDownInteractionEnd","onPointerMoveInteractionEnd","onPointerUpInteractionEnd","onDragStartTimeMarker","positionForTimeMarker","zoomTransform","viewportWidthEm","viewportWidthSeconds","viewportStart","viewportEnd","overlaySchema","z","lmbTaskInteractionSchema","taskDefinitionSchemaMinusInteractiveVideo","interactiveVideoInteractionSchema","refine","interactiveVideoTaskSchema","uploadedFileSchema","optional","getEmValueFromElement","pixelValue","parentNode","parentFontSize","parseFloat","elementFontSize","pixelValueOfOneEm","videoMetadata","t","k","observer","IntersectionObserver","recomputeViewportWidth","observe","timelineAxis","dragTimeline","dSeconds","pixelsToSeconds","dx","translate","constrainZoomTranslate","dragBehavior","drag","button","select","timeline","secondsPerEm","deltaT","scale","viewportStart0","viewportWidth0","xCoordinateToTime","dy","deltaY","exp","newK","viewportWidth1","viewportStart1","pixelsToEm","pixels","NaN","axis","widthInEm","timestampSeconds","hours","minutes","seconds","centiseconds","twoDigits","toLocaleString","minimumIntegerDigits","maximumFractionDigits","floor","fraction","clampedTime","startDeltaT","startPercent","endDeltaT","endPercent","isSelected","border","interactionLength","interactionStartTime","interactionDuration","setPointerCapture","pointerId","movementX","timeClamped","secondsClamped","releasePointerCapture","e","emitTimelineSeekThrottled","mouseDx","secondsPerPixel","maxTime","dragInteractionTimeline","throttle","selectedInteraction","inputStartTime","invalid","inputStartTimeErrors","onBlurTimeInputs","number","inputEndTime","inputEndTimeErrors","_KeepAlive","editorForTaskType","isFocusWithinTimeInputs","timeInputsFieldset","contains","relatedTarget","errors","_defineComponent","__props","videoPlayer","taskTypesAndIcons","selectionId","onVideoMetadataChange","onTimeUpdate","onTimelineSeek","insertInteraction","newTask","deleteInteraction","ref_key","onTimeupdate","onMetadataChange","taskType","_unref","VideoTimeline","onDeleteInteraction","SelectedInteractionProperties","hidden","onUploadStudipVideo","youtubeUrlInput","onSaveYoutubeVideo","href","deleteVideo","onClickUseCurrentTime","SelectVideo","AddInteractions","TabComponent","TabsComponent","feedbackSchema","dragTheWordsTaskSchema","markTheWordsTaskSchema","memoryCardSchema","memoryTaskSchema","fillInTheBlanksTaskSchema","questionAnswerSchema","questionTaskSchema","imageSchema","imagePairSchema","imagePairingTaskSchema","imageSequencingTaskSchema","taskDefinitionSchema","taskTypeSchema","shape","FillInTheBlanksViewer","QuestionViewer","DragTheWordsViewer","MarkTheWordsViewer","MemoryViewer","ImagePairingViewer","ImageSequencingViewer","InteractiveVideoViewer","FillInTheBlanksEditor","QuestionEditor","DragTheWordsEditor","MarkTheWordsEditor","MemoryEditor","ImagePairingEditor","ImageSequencingEditor","InteractiveVideoEditor","showViewerAboveEditor","async","saveTask","moduleName","infoText","module_id","block_id","LernmoduleVueJS","saveRoute","token","CSRF_TOKEN","formData","FormData","fetch","method","body","response","ok","statusText","json","updateAttemptRoute","uploadFileResponseSchema","uploadUrl","URLHelper","getURL","cause","CoursewareBlockModule","VuexModule","setShowEditorUI","state","showEditorUI","saveBlock","parent","postMessage","cancelEditing","__decorate","Mutation","Module","sleep","ms","Promise","r","setAutoFreeze","TaskEditorModule","status","undoRedoStack","undoRedoIndex","hasUnsavedChanges","serverTaskDefinition","serverModuleName","serverInfotext","infotext","canUndo","canRedo","undo","currentState","inputElements","querySelectorAll","inputEl","collapsedParents","focus","redo","nextState","initializeCourseware","task_json","info","initializeNonCourseware","module","customdata","isArray","startedSaving","saveStatus","saveSuccess","payload","saveFailure","nonFatalErrors","context","commit","saveResult","performEdit","shouldMergeEdits","slice","concat","setModuleName","setInfoText","Action","updateValue","fallbackActive","ckeInit","initCKE","wysiwyg_enabled","textAreaElement","studip_wysiwyg","onload","ckeditor","removedPTagsText","editing","view","evt","execute","stop","priority","autoformat","plugins","get","isEnabled"],"sourceRoot":""}