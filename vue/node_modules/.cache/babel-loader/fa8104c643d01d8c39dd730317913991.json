{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport 'media-captions';\nimport { G as isNull, I as deferredPromise, k as isString, l as listenEvent, J as EventsTarget, D as DOMEvent, A as isNumber } from './vidstack-b8ba7e3c.js';\n\nfunction preconnect(url, rel = \"preconnect\") {\n  const exists = document.querySelector(`link[href=\"${url}\"]`);\n  if (!isNull(exists)) return true;\n  const link = document.createElement(\"link\");\n  link.rel = rel;\n  link.href = url;\n  link.crossOrigin = \"true\";\n  document.head.append(link);\n  return true;\n}\n\nconst pendingRequests = {};\n\nfunction loadScript(src) {\n  if (pendingRequests[src]) return pendingRequests[src].promise;\n  const promise = deferredPromise(),\n        exists = document.querySelector(`script[src=\"${src}\"]`);\n\n  if (!isNull(exists)) {\n    promise.resolve();\n    return promise.promise;\n  }\n\n  const script = document.createElement(\"script\");\n  script.src = src;\n\n  script.onload = () => {\n    promise.resolve();\n    delete pendingRequests[src];\n  };\n\n  script.onerror = () => {\n    promise.reject();\n    delete pendingRequests[src];\n  };\n\n  setTimeout(() => document.head.append(script), 0);\n  return promise.promise;\n}\n\nfunction getRequestCredentials(crossorigin) {\n  return crossorigin === \"use-credentials\" ? \"include\" : isString(crossorigin) ? \"same-origin\" : void 0;\n}\n\nconst CROSSORIGIN = Symbol(\"TEXT_TRACK_CROSSORIGIN\"),\n      READY_STATE = Symbol(\"TEXT_TRACK_READY_STATE\"),\n      UPDATE_ACTIVE_CUES = Symbol(\"TEXT_TRACK_UPDATE_ACTIVE_CUES\"),\n      CAN_LOAD = Symbol(\"TEXT_TRACK_CAN_LOAD\"),\n      ON_MODE_CHANGE = Symbol(\"TEXT_TRACK_ON_MODE_CHANGE\"),\n      NATIVE = Symbol(\"TEXT_TRACK_NATIVE\"),\n      NATIVE_HLS = Symbol(\"TEXT_TRACK_NATIVE_HLS\");\nconst TextTrackSymbol = {\n  _crossorigin: CROSSORIGIN,\n  _readyState: READY_STATE,\n  _updateActiveCues: UPDATE_ACTIVE_CUES,\n  _canLoad: CAN_LOAD,\n  _onModeChange: ON_MODE_CHANGE,\n  _native: NATIVE,\n  _nativeHLS: NATIVE_HLS\n};\n\nfunction findActiveCue(cues, time) {\n  for (let i = 0, len = cues.length; i < len; i++) {\n    if (isCueActive(cues[i], time)) return cues[i];\n  }\n\n  return null;\n}\n\nfunction isCueActive(cue, time) {\n  return time >= cue.startTime && time < cue.endTime;\n}\n\nfunction observeActiveTextTrack(tracks, kind, onChange) {\n  let currentTrack = null;\n\n  function onModeChange() {\n    const kinds = isString(kind) ? [kind] : kind,\n          track = tracks.toArray().find(track2 => kinds.includes(track2.kind) && track2.mode === \"showing\");\n    if (track === currentTrack) return;\n\n    if (!track) {\n      onChange(null);\n      return;\n    }\n\n    if (track.readyState == 2) {\n      onChange(track);\n    } else {\n      onChange(null);\n      track.addEventListener(\"load\", () => onChange(track), {\n        once: true\n      });\n    }\n\n    currentTrack = track;\n  }\n\n  onModeChange();\n  return listenEvent(tracks, \"mode-change\", onModeChange);\n}\n\nvar _a, _b, _c;\n\nclass TextTrack extends EventsTarget {\n  constructor(init) {\n    super();\n    this.id = \"\";\n    this.label = \"\";\n    this.language = \"\";\n    this.default = false;\n    this._canLoad = false;\n    this._currentTime = 0;\n    this._mode = \"disabled\";\n    this._metadata = {};\n    this._regions = [];\n    this._cues = [];\n    this._activeCues = [];\n    /* @internal */\n\n    this[_a] = 0;\n    /* @internal */\n\n    this[_b] = null;\n    /* @internal */\n\n    this[_c] = null;\n\n    for (const prop of Object.keys(init)) this[prop] = init[prop];\n\n    if (!this.type) this.type = \"vtt\";\n\n    if (init.content) {\n      import('media-captions').then(({\n        parseText,\n        VTTCue,\n        VTTRegion\n      }) => {\n        if (init.type === \"json\") {\n          this._parseJSON(init.content, VTTCue, VTTRegion);\n        } else {\n          parseText(init.content, {\n            type: init.type\n          }).then(({\n            cues,\n            regions\n          }) => {\n            this._cues = cues;\n            this._regions = regions;\n\n            this._readyState();\n          });\n        }\n      });\n    } else if (!init.src) this[TextTrackSymbol._readyState] = 2;\n\n    if (isTrackCaptionKind(this) && !this.label) {\n      throw Error(`[vidstack]: captions text track created without label: \\`${this.src}\\``);\n    }\n  }\n\n  static createId(track) {\n    return `id::${track.type}-${track.kind}-${track.src ?? track.label}`;\n  }\n\n  get metadata() {\n    return this._metadata;\n  }\n\n  get regions() {\n    return this._regions;\n  }\n\n  get cues() {\n    return this._cues;\n  }\n\n  get activeCues() {\n    return this._activeCues;\n  }\n  /**\n   * - 0: Not Loading\n   * - 1: Loading\n   * - 2: Ready\n   * - 3: Error\n   */\n\n\n  get readyState() {\n    return this[TextTrackSymbol._readyState];\n  }\n\n  get mode() {\n    return this._mode;\n  }\n\n  set mode(mode) {\n    this.setMode(mode);\n  }\n\n  addCue(cue, trigger) {\n    let i = 0,\n        length = this._cues.length;\n\n    for (i = 0; i < length; i++) if (cue.endTime <= this._cues[i].startTime) break;\n\n    if (i === length) this._cues.push(cue);else this._cues.splice(i, 0, cue);\n\n    if (trigger?.type !== \"cuechange\") {\n      this[TextTrackSymbol._native]?.track.addCue(cue);\n    }\n\n    this.dispatchEvent(new DOMEvent(\"add-cue\", {\n      detail: cue,\n      trigger\n    }));\n\n    if (isCueActive(cue, this._currentTime)) {\n      this[TextTrackSymbol._updateActiveCues](this._currentTime, trigger);\n    }\n  }\n\n  removeCue(cue, trigger) {\n    const index = this._cues.indexOf(cue);\n\n    if (index >= 0) {\n      const isActive = this._activeCues.includes(cue);\n\n      this._cues.splice(index, 1);\n\n      this[TextTrackSymbol._native]?.track.removeCue(cue);\n      this.dispatchEvent(new DOMEvent(\"remove-cue\", {\n        detail: cue,\n        trigger\n      }));\n\n      if (isActive) {\n        this[TextTrackSymbol._updateActiveCues](this._currentTime, trigger);\n      }\n    }\n  }\n\n  setMode(mode, trigger) {\n    if (this._mode === mode) return;\n    this._mode = mode;\n\n    if (mode === \"disabled\") {\n      this._activeCues = [];\n\n      this._activeCuesChanged();\n    } else if (this.readyState === 2) {\n      this[TextTrackSymbol._updateActiveCues](this._currentTime, trigger);\n    } else {\n      this._load();\n    }\n\n    this.dispatchEvent(new DOMEvent(\"mode-change\", {\n      detail: this,\n      trigger\n    }));\n    this[TextTrackSymbol._onModeChange]?.();\n  }\n  /* @internal */\n\n\n  [(_a = TextTrackSymbol._readyState, _b = TextTrackSymbol._onModeChange, _c = TextTrackSymbol._native, TextTrackSymbol._updateActiveCues)](currentTime, trigger) {\n    this._currentTime = currentTime;\n    if (this.mode === \"disabled\" || !this._cues.length) return;\n    const activeCues = [];\n\n    for (let i = 0, length = this._cues.length; i < length; i++) {\n      const cue = this._cues[i];\n      if (isCueActive(cue, currentTime)) activeCues.push(cue);\n    }\n\n    let changed = activeCues.length !== this._activeCues.length;\n\n    if (!changed) {\n      for (let i = 0; i < activeCues.length; i++) {\n        if (!this._activeCues.includes(activeCues[i])) {\n          changed = true;\n          break;\n        }\n      }\n    }\n\n    this._activeCues = activeCues;\n    if (changed) this._activeCuesChanged(trigger);\n  }\n  /* @internal */\n\n\n  [TextTrackSymbol._canLoad]() {\n    this._canLoad = true;\n    if (this._mode !== \"disabled\") this._load();\n  }\n\n  async _load() {\n    if (!this._canLoad || !this.src || this[TextTrackSymbol._readyState] > 0) return;\n    this[TextTrackSymbol._readyState] = 1;\n    this.dispatchEvent(new DOMEvent(\"load-start\"));\n\n    try {\n      const {\n        parseResponse,\n        VTTCue,\n        VTTRegion\n      } = await import('media-captions'),\n            crossorigin = this[TextTrackSymbol._crossorigin]?.();\n      const response = fetch(this.src, {\n        headers: this.type === \"json\" ? {\n          \"Content-Type\": \"application/json\"\n        } : void 0,\n        credentials: getRequestCredentials(crossorigin)\n      });\n\n      if (this.type === \"json\") {\n        this._parseJSON(await (await response).text(), VTTCue, VTTRegion);\n      } else {\n        const {\n          errors,\n          metadata,\n          regions,\n          cues\n        } = await parseResponse(response, {\n          type: this.type,\n          encoding: this.encoding\n        });\n\n        if (errors[0]?.code === 0) {\n          throw errors[0];\n        } else {\n          this._metadata = metadata;\n          this._regions = regions;\n          this._cues = cues;\n        }\n      }\n\n      this._readyState();\n    } catch (error) {\n      this._errorState(error);\n    }\n  }\n\n  _readyState() {\n    this[TextTrackSymbol._readyState] = 2;\n\n    if (!this.src || this.type !== \"vtt\") {\n      const nativeTrack = this[TextTrackSymbol._native]?.track;\n      if (nativeTrack) for (const cue of this._cues) nativeTrack.addCue(cue);\n    }\n\n    const loadEvent = new DOMEvent(\"load\");\n\n    this[TextTrackSymbol._updateActiveCues](this._currentTime, loadEvent);\n\n    this.dispatchEvent(loadEvent);\n  }\n\n  _errorState(error) {\n    this[TextTrackSymbol._readyState] = 3;\n    this.dispatchEvent(new DOMEvent(\"error\", {\n      detail: error\n    }));\n  }\n\n  _parseJSON(json, VTTCue, VTTRegion) {\n    try {\n      json = JSON.parse(json);\n\n      if (json.regions) {\n        this._regions = json.regions.map(json2 => Object.assign(new VTTRegion(), json2));\n      }\n\n      if (json.cues) {\n        this._cues = json.cues.filter(json2 => isNumber(json2.startTime) && isNumber(json2.endTime)).map(json2 => Object.assign(new VTTCue(0, 0, \"\"), json2));\n      }\n    } catch (error) {\n      {\n        console.error(`[vidstack] failed to parse JSON captions at: \\`${this.src}\\`\n\n`, error);\n      }\n\n      this._errorState(error);\n    }\n  }\n\n  _activeCuesChanged(trigger) {\n    this.dispatchEvent(new DOMEvent(\"cue-change\", {\n      trigger\n    }));\n  }\n\n}\n\nconst captionRE = /captions|subtitles/;\n\nfunction isTrackCaptionKind(track) {\n  return captionRE.test(track.kind);\n}\n\nexport { TextTrackSymbol as T, TextTrack as a, isCueActive as b, findActiveCue as f, getRequestCredentials as g, isTrackCaptionKind as i, loadScript as l, observeActiveTextTrack as o, preconnect as p };","map":{"version":3,"sources":["/home/ann/dev/studip/54/public/plugins_packages/RasmusFuhse/LernmodulePlugin/vue/node_modules/vidstack/dist/dev/chunks/vidstack-dd29a7a5.js"],"names":["G","isNull","I","deferredPromise","k","isString","l","listenEvent","J","EventsTarget","D","DOMEvent","A","isNumber","preconnect","url","rel","exists","document","querySelector","link","createElement","href","crossOrigin","head","append","pendingRequests","loadScript","src","promise","resolve","script","onload","onerror","reject","setTimeout","getRequestCredentials","crossorigin","CROSSORIGIN","Symbol","READY_STATE","UPDATE_ACTIVE_CUES","CAN_LOAD","ON_MODE_CHANGE","NATIVE","NATIVE_HLS","TextTrackSymbol","_crossorigin","_readyState","_updateActiveCues","_canLoad","_onModeChange","_native","_nativeHLS","findActiveCue","cues","time","i","len","length","isCueActive","cue","startTime","endTime","observeActiveTextTrack","tracks","kind","onChange","currentTrack","onModeChange","kinds","track","toArray","find","track2","includes","mode","readyState","addEventListener","once","_a","_b","_c","TextTrack","constructor","init","id","label","language","default","_currentTime","_mode","_metadata","_regions","_cues","_activeCues","prop","Object","keys","type","content","then","parseText","VTTCue","VTTRegion","_parseJSON","regions","isTrackCaptionKind","Error","createId","metadata","activeCues","setMode","addCue","trigger","push","splice","dispatchEvent","detail","removeCue","index","indexOf","isActive","_activeCuesChanged","_load","currentTime","changed","parseResponse","response","fetch","headers","credentials","text","errors","encoding","code","error","_errorState","nativeTrack","loadEvent","json","JSON","parse","map","json2","assign","filter","console","captionRE","test","T","a","b","f","g","o","p"],"mappings":"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","sourcesContent":["import 'media-captions';\nimport { G as isNull, I as deferredPromise, k as isString, l as listenEvent, J as EventsTarget, D as DOMEvent, A as isNumber } from './vidstack-b8ba7e3c.js';\n\nfunction preconnect(url, rel = \"preconnect\") {\n  const exists = document.querySelector(`link[href=\"${url}\"]`);\n  if (!isNull(exists))\n    return true;\n  const link = document.createElement(\"link\");\n  link.rel = rel;\n  link.href = url;\n  link.crossOrigin = \"true\";\n  document.head.append(link);\n  return true;\n}\nconst pendingRequests = {};\nfunction loadScript(src) {\n  if (pendingRequests[src])\n    return pendingRequests[src].promise;\n  const promise = deferredPromise(), exists = document.querySelector(`script[src=\"${src}\"]`);\n  if (!isNull(exists)) {\n    promise.resolve();\n    return promise.promise;\n  }\n  const script = document.createElement(\"script\");\n  script.src = src;\n  script.onload = () => {\n    promise.resolve();\n    delete pendingRequests[src];\n  };\n  script.onerror = () => {\n    promise.reject();\n    delete pendingRequests[src];\n  };\n  setTimeout(() => document.head.append(script), 0);\n  return promise.promise;\n}\nfunction getRequestCredentials(crossorigin) {\n  return crossorigin === \"use-credentials\" ? \"include\" : isString(crossorigin) ? \"same-origin\" : void 0;\n}\n\nconst CROSSORIGIN = Symbol(\"TEXT_TRACK_CROSSORIGIN\" ), READY_STATE = Symbol(\"TEXT_TRACK_READY_STATE\" ), UPDATE_ACTIVE_CUES = Symbol(\"TEXT_TRACK_UPDATE_ACTIVE_CUES\" ), CAN_LOAD = Symbol(\"TEXT_TRACK_CAN_LOAD\" ), ON_MODE_CHANGE = Symbol(\"TEXT_TRACK_ON_MODE_CHANGE\" ), NATIVE = Symbol(\"TEXT_TRACK_NATIVE\" ), NATIVE_HLS = Symbol(\"TEXT_TRACK_NATIVE_HLS\" );\nconst TextTrackSymbol = {\n  _crossorigin: CROSSORIGIN,\n  _readyState: READY_STATE,\n  _updateActiveCues: UPDATE_ACTIVE_CUES,\n  _canLoad: CAN_LOAD,\n  _onModeChange: ON_MODE_CHANGE,\n  _native: NATIVE,\n  _nativeHLS: NATIVE_HLS\n};\n\nfunction findActiveCue(cues, time) {\n  for (let i = 0, len = cues.length; i < len; i++) {\n    if (isCueActive(cues[i], time))\n      return cues[i];\n  }\n  return null;\n}\nfunction isCueActive(cue, time) {\n  return time >= cue.startTime && time < cue.endTime;\n}\nfunction observeActiveTextTrack(tracks, kind, onChange) {\n  let currentTrack = null;\n  function onModeChange() {\n    const kinds = isString(kind) ? [kind] : kind, track = tracks.toArray().find((track2) => kinds.includes(track2.kind) && track2.mode === \"showing\");\n    if (track === currentTrack)\n      return;\n    if (!track) {\n      onChange(null);\n      return;\n    }\n    if (track.readyState == 2) {\n      onChange(track);\n    } else {\n      onChange(null);\n      track.addEventListener(\"load\", () => onChange(track), { once: true });\n    }\n    currentTrack = track;\n  }\n  onModeChange();\n  return listenEvent(tracks, \"mode-change\", onModeChange);\n}\n\nvar _a, _b, _c;\nclass TextTrack extends EventsTarget {\n  constructor(init) {\n    super();\n    this.id = \"\";\n    this.label = \"\";\n    this.language = \"\";\n    this.default = false;\n    this._canLoad = false;\n    this._currentTime = 0;\n    this._mode = \"disabled\";\n    this._metadata = {};\n    this._regions = [];\n    this._cues = [];\n    this._activeCues = [];\n    /* @internal */\n    this[_a] = 0;\n    /* @internal */\n    this[_b] = null;\n    /* @internal */\n    this[_c] = null;\n    for (const prop of Object.keys(init))\n      this[prop] = init[prop];\n    if (!this.type)\n      this.type = \"vtt\";\n    if (init.content) {\n      import('media-captions').then(({ parseText, VTTCue, VTTRegion }) => {\n        if (init.type === \"json\") {\n          this._parseJSON(init.content, VTTCue, VTTRegion);\n        } else {\n          parseText(init.content, { type: init.type }).then(({ cues, regions }) => {\n            this._cues = cues;\n            this._regions = regions;\n            this._readyState();\n          });\n        }\n      });\n    } else if (!init.src)\n      this[TextTrackSymbol._readyState] = 2;\n    if (isTrackCaptionKind(this) && !this.label) {\n      throw Error(`[vidstack]: captions text track created without label: \\`${this.src}\\``);\n    }\n  }\n  static createId(track) {\n    return `id::${track.type}-${track.kind}-${track.src ?? track.label}`;\n  }\n  get metadata() {\n    return this._metadata;\n  }\n  get regions() {\n    return this._regions;\n  }\n  get cues() {\n    return this._cues;\n  }\n  get activeCues() {\n    return this._activeCues;\n  }\n  /**\n   * - 0: Not Loading\n   * - 1: Loading\n   * - 2: Ready\n   * - 3: Error\n   */\n  get readyState() {\n    return this[TextTrackSymbol._readyState];\n  }\n  get mode() {\n    return this._mode;\n  }\n  set mode(mode) {\n    this.setMode(mode);\n  }\n  addCue(cue, trigger) {\n    let i = 0, length = this._cues.length;\n    for (i = 0; i < length; i++)\n      if (cue.endTime <= this._cues[i].startTime)\n        break;\n    if (i === length)\n      this._cues.push(cue);\n    else\n      this._cues.splice(i, 0, cue);\n    if (trigger?.type !== \"cuechange\") {\n      this[TextTrackSymbol._native]?.track.addCue(cue);\n    }\n    this.dispatchEvent(new DOMEvent(\"add-cue\", { detail: cue, trigger }));\n    if (isCueActive(cue, this._currentTime)) {\n      this[TextTrackSymbol._updateActiveCues](this._currentTime, trigger);\n    }\n  }\n  removeCue(cue, trigger) {\n    const index = this._cues.indexOf(cue);\n    if (index >= 0) {\n      const isActive = this._activeCues.includes(cue);\n      this._cues.splice(index, 1);\n      this[TextTrackSymbol._native]?.track.removeCue(cue);\n      this.dispatchEvent(new DOMEvent(\"remove-cue\", { detail: cue, trigger }));\n      if (isActive) {\n        this[TextTrackSymbol._updateActiveCues](this._currentTime, trigger);\n      }\n    }\n  }\n  setMode(mode, trigger) {\n    if (this._mode === mode)\n      return;\n    this._mode = mode;\n    if (mode === \"disabled\") {\n      this._activeCues = [];\n      this._activeCuesChanged();\n    } else if (this.readyState === 2) {\n      this[TextTrackSymbol._updateActiveCues](this._currentTime, trigger);\n    } else {\n      this._load();\n    }\n    this.dispatchEvent(new DOMEvent(\"mode-change\", { detail: this, trigger }));\n    this[TextTrackSymbol._onModeChange]?.();\n  }\n  /* @internal */\n  [(_a = TextTrackSymbol._readyState, _b = TextTrackSymbol._onModeChange, _c = TextTrackSymbol._native, TextTrackSymbol._updateActiveCues)](currentTime, trigger) {\n    this._currentTime = currentTime;\n    if (this.mode === \"disabled\" || !this._cues.length)\n      return;\n    const activeCues = [];\n    for (let i = 0, length = this._cues.length; i < length; i++) {\n      const cue = this._cues[i];\n      if (isCueActive(cue, currentTime))\n        activeCues.push(cue);\n    }\n    let changed = activeCues.length !== this._activeCues.length;\n    if (!changed) {\n      for (let i = 0; i < activeCues.length; i++) {\n        if (!this._activeCues.includes(activeCues[i])) {\n          changed = true;\n          break;\n        }\n      }\n    }\n    this._activeCues = activeCues;\n    if (changed)\n      this._activeCuesChanged(trigger);\n  }\n  /* @internal */\n  [TextTrackSymbol._canLoad]() {\n    this._canLoad = true;\n    if (this._mode !== \"disabled\")\n      this._load();\n  }\n  async _load() {\n    if (!this._canLoad || !this.src || this[TextTrackSymbol._readyState] > 0)\n      return;\n    this[TextTrackSymbol._readyState] = 1;\n    this.dispatchEvent(new DOMEvent(\"load-start\"));\n    try {\n      const { parseResponse, VTTCue, VTTRegion } = await import('media-captions'), crossorigin = this[TextTrackSymbol._crossorigin]?.();\n      const response = fetch(this.src, {\n        headers: this.type === \"json\" ? { \"Content-Type\": \"application/json\" } : void 0,\n        credentials: getRequestCredentials(crossorigin)\n      });\n      if (this.type === \"json\") {\n        this._parseJSON(await (await response).text(), VTTCue, VTTRegion);\n      } else {\n        const { errors, metadata, regions, cues } = await parseResponse(response, {\n          type: this.type,\n          encoding: this.encoding\n        });\n        if (errors[0]?.code === 0) {\n          throw errors[0];\n        } else {\n          this._metadata = metadata;\n          this._regions = regions;\n          this._cues = cues;\n        }\n      }\n      this._readyState();\n    } catch (error) {\n      this._errorState(error);\n    }\n  }\n  _readyState() {\n    this[TextTrackSymbol._readyState] = 2;\n    if (!this.src || this.type !== \"vtt\") {\n      const nativeTrack = this[TextTrackSymbol._native]?.track;\n      if (nativeTrack)\n        for (const cue of this._cues)\n          nativeTrack.addCue(cue);\n    }\n    const loadEvent = new DOMEvent(\"load\");\n    this[TextTrackSymbol._updateActiveCues](this._currentTime, loadEvent);\n    this.dispatchEvent(loadEvent);\n  }\n  _errorState(error) {\n    this[TextTrackSymbol._readyState] = 3;\n    this.dispatchEvent(new DOMEvent(\"error\", { detail: error }));\n  }\n  _parseJSON(json, VTTCue, VTTRegion) {\n    try {\n      json = JSON.parse(json);\n      if (json.regions) {\n        this._regions = json.regions.map((json2) => Object.assign(new VTTRegion(), json2));\n      }\n      if (json.cues) {\n        this._cues = json.cues.filter((json2) => isNumber(json2.startTime) && isNumber(json2.endTime)).map((json2) => Object.assign(new VTTCue(0, 0, \"\"), json2));\n      }\n    } catch (error) {\n      {\n        console.error(`[vidstack] failed to parse JSON captions at: \\`${this.src}\\`\n\n`, error);\n      }\n      this._errorState(error);\n    }\n  }\n  _activeCuesChanged(trigger) {\n    this.dispatchEvent(new DOMEvent(\"cue-change\", { trigger }));\n  }\n}\nconst captionRE = /captions|subtitles/;\nfunction isTrackCaptionKind(track) {\n  return captionRE.test(track.kind);\n}\n\nexport { TextTrackSymbol as T, TextTrack as a, isCueActive as b, findActiveCue as f, getRequestCredentials as g, isTrackCaptionKind as i, loadScript as l, observeActiveTextTrack as o, preconnect as p };\n"]},"metadata":{},"sourceType":"module"}